#Предварительная настройка модуля Согласование

Перед началом работы необходимо выполнить следующие настройки:

* [НАСТРОЙКА ГЛОБАЛЬНОГО ПАРАМЕТРА][Настройка глобального параметра]
* [ЗАПУСК ПЛАНИРОВЩИКА][Запуск планировщика]
* [НАСТРОЙКА ПЛАНИРОВЩИКА][Настройка планировщика]
* [НАСТРОЙКА ПОЧТОВОГО АККАУНТА][Настройка почтового аккаунта]
* [НАСТРОЙКА ЯКОРЯ][Настройка якоря]    
* [НАСТРОЙКА РОЛЕЙ ДОСТУПА][Настройка ролей доступа]
* [СТАТУСЫ ДОКУМЕНТОВ][Статусы документов]
* [СОСТОЯНИЯ СОГЛАСОВАНИЙ][Состояния согласований]
* [МАРШРУТЫ СОГЛАСОВАНИЙ][Маршруты согласований]
* [ПЕРЕХОДЫ СОСТОЯНИЙ СОГЛАСОВАНИЙ][Переходы состояний согласований]
* [ДОКУМЕНТЫ][Документы]
* [ШАБЛОНЫ СОГЛАСОВАНИЙ][Шаблоны согласований]
* [НАСТРОЙКА ФИЛЬТРА][Настройка фильтра]
* [КОМБИНАЦИИ СРОКОВ][Комбинации сроков]
* [ПРАВИЛА СОГЛАСОВАНИЯ][Правила согласования]
* [ПРИЧИНЫ ОТКЛОНЕНИЙ][Причины отклонений]
* [ЗАМЕЩЕНИЕ УЧАСТНИКОВ СОГЛАСОВАНИЯ][Замещение участников согласования]
* [СОГЛАСОВАНИЕ][Согласование]


###Настройка глобального параметра

**Внимание**!: если в рамках согласования не нужна отправка уведомлений, то пропустите данный пункт.

**Путь**: Администрирование/Настройки/Базовые настройки/Глобальные настройки

**Порядок заполнения:**

1.По пункту меню «Глобальные настройки» откройте картотеку (картотека и пункт меню доступны пользователям с правами администратора Системы).

![](topic:.AddFiles.Screenshot_2148.jpg)

2.Проверьте, что имеется запись со следующими значениями:

![](topic:.AddFiles.Screenshot_2149.jpg)

* Код=ShedulerHostName; 
* Название=SchedulerHostName;
* Значение=«Маска IP-адресов» текущей инсталляции.

Значение параметра «Маска IP- адресов» можно узнать по следующему пути: Администрирование/Система/Сервер/Администрирование.
В открывшейся форме нажмите Правой кнопкой мыши на иконку «Мой компьютер» и выберите «Настройки сервера». В открывшейся форме перейдите на закладку «Сетевой сервис». Необходимое значение указано в поле «Маска IP- адресов».

3.Если запись отсутствует, то создайте новую. Заполните поля «Код», «Название», «Значение». 

 Для сохранения записи нажмите кнопку ОК.


###Запуск планировщика

**Внимание!**: если в рамках согласования не нужна отправка уведомлений, то пропустите данный пункт.

**Путь**: в файловом менеджере откройте папку размещения ТУРБО Х. Внутри папки запустите \Bin64\Control.exe

**Порядок заполнения**:

![](topic:Notifications.AddFiles.Screenshot_2084.jpg)

1.Откройте окно «Службы ТУРБО»;

2.Перейдите на закладку «Управление». Убедитесь, что служба «ТХ.Планировщик» находится в состоянии «Работает»; 

3.Если служба не в Состоянии «Работает», то нажмите на кнопку запуска >. Состояние должно измениться на «Работает»;

4.Закройте окно «Службы ТУРБО» нажатием на кнопку Х.

###Настройка планировщика

**Внимание**!: если в рамках согласования не нужна отправка уведомлений, то пропустите данный пункт.

**Путь**: Уведомления/Настройки/Настройки/Настройка планировщика

**Порядок заполнения**:

1.По пункту меню «Настройка планировщика» откройте форму «Настройка планировщика»;

2.Порядок заполнения формы [Настройка планировщика](topic:Notifications.Уведомления.Настройки.Настройка планировщика).

###Настройка почтового аккаунта

**Внимание**!: если в рамках согласования не нужна отправка уведомлений, то пропустите данный пункт.

**Путь**: Администрирование/Настройки/Базовые настройки/Почтовые аккаунты

**Порядок заполнения**:

1.По пункту меню «Почтовые аккаунты» откройте форму «Почтовый аккаунт»

![](topic:Bas.Администрирование.AddFiles.Screenshot_2087.jpg)

2.Заполните поля:
 
* Почтовый адрес – укажите адрес почтового ящика;
* Имя отправителя – укажите имя, которым будут подписаны письма;
* Отправлять асинхронно при возможности – установите данный флаг;
* Отправлять на сервере при возможности – убедитесь, что флаг не установлен;
* Аккаунт не используется – установите данный флаг, если этот аккаунт не используется;
* Отправка – укажите сетевой протокол, который используется для рассылки электронной почты. Дальнейшие настройки зависят от выбранного протокола и уточняются у сервиса электронной почты.

3.Для проверки введённых настроек нажмите кнопку Тестовое письмо и введите адрес электронной почты, на который будет отправлено тестовое письмо. Проверьте электронную почту, на которую должно прийти электронное письмо.

4.Для сохранения настройки нажмите кнопку ОК.

###Настройка якоря

**Путь**: Администрирование/Настройки/Базовые настройки/Якоря

**Внимание**!: если в рамках согласования не нужна отправка уведомлений, то пропустите данный пункт.

**Порядок заполнения**:

1.По пункту меню «Якоря» откройте форму «Якоря (данные участников)»

![](topic:.AddFiles.Screenshot_2088.jpg)

2.Найдите запись с кодом «DefaultMailAccount» и названием «Почтовый аккаунт по умолчанию».

3.Проверьте заполнение полей записи:

* Тип значения – выбрано значение «Объект (запись)»;
* Вид переменной – выбрано значение «глобальная»;
* Имя картотеки – выбрано значение Bas.Tab.Config.EMailServer;
* Значение - укажите активный и заведомо рабочий почтовый аккаунт.
 
4.Для сохранения настройки нажмите кнопку ОК.

###Настройка ролей доступа

**Путь**: Администрирование/Настройки/Управление доступом/Роли доступа

По умолчанию в карточке роли доступа отключены дополнительные права по использованию согласований. При необходимости, выполните настройку. 

**Порядок заполнения**:

1.По пункту меню «Роли доступа» откройте форму «Роль (набор прав) пользователя»

2.Перейдите на закладку «Согласование»;

3.Заполните поля:

![](topic:.AddFiles.Screenshot_2150.jpg)

Блок «Основное»:

* Разрешено закрывать согласование, у которого не закрыты подзадачи – установите флаг, если пользователь должен иметь возможность переводить главную задачу в финальное состояние, при подзадаче(-ах) не в финальном состоянии(-ях);
* Разрешено менять Категорию согласования – установите флаг, если пользователь должен иметь возможность изменять значение поля «Категория» в карточке «Согласования»;
* Разрешено менять Важность согласования – установите флаг, есть пользователь должен иметь возможность изменять значение поля «Важность» в карточке «Согласования»;
* Разрешено менять Приоритет согласования – установите флаг, если пользователь должен иметь возможность изменять значение поля «Приоритет» в карточке «Согласования»;
* Разрешено редактировать Название и Описание чужого согласования – установите флаг, если пользователь должен иметь возможность изменять значения полей «Название» и «Описание» в согласованиях, где он не является текущим ответственным;
* Разрешено редактировать чужие реплики в обсуждениях – установите флаг, если пользователь должен иметь возможность редактировать поле «Сообщение» на закладке «Обсуждение» в карточке «Согласования» для всех записей, заведённых другими пользователями;
* Разрешено удалять сообщения из обсуждения – установите флаг, если пользователь должен иметь возможность удалять сообщения, оставленные на закладке «Обсуждение» в карточке «Согласования»;

Блок «Видимость»:

* Разрешено видеть чужие согласования – установите флаг, если пользователь должен видеть карточки «Согласования», в которых текущий пользователь не является участником;
* Раздел ‘Категория, важность, приоритет, сроки’ виден в карточке согласования – установите флаг, если пользователь должен видеть бокс «Категория, важность, приоритет, сроки» в карточке «Согласования»;
* Закладка ‘Детали’ видна в карточке согласования – установите флаг, если пользователь должен видеть закладку «Детали» в карточке «Согласования»;
* На закладке ‘Участники’ разрешено редактирование – установить флаг, если пользователь должен иметь возможность редактировать записи на закладке «Участники» в карточке «Согласования»;
* Раздел ‘Предприятие, Подразделение..’ виден в карточке согласования – установите флаг, если пользователь должен видеть бокс «Предприятие, Подразделение..» на закладке «Детали» в карточке «Согласования»;
* Закладки ‘Подзадачи’ и ‘Зависимости’ видны в карточке согласования – установите флаг, если пользователь должен видеть закладки «Подзадачи» и «Зависимости» в карточке «Согласования»;
* Закладка ‘История состояний’ видна в карточке согласования – установите флаг, если пользователь должен видеть закладку «История состояний» в карточке «Согласования»;

Блок «Смена состояний»:

* Разрешена произвольная смена состояний – установите флаг, если пользователь должен иметь возможность выбирать значение вручную в поле «Состояние» в карточке «Согласования»;
* Разрешено менять состояние чужих согласования – установите флаг, если пользователь должен иметь возможность изменять поле «Состояние» в карточке «Согласования», находящейся на согласовании у других сотрудников;
* Разрешена смена ответственного в согласовании – установите флаг, если пользователь должен иметь возможность изменять поле «Ответственный» в карточке «Согласования», находящейся на согласовании у других сотрудников;
* Произвольный выбор ответственного в списке согласований – установите флаг, если пользователь должен иметь возможность изменять поле «Ответственный» в карточке «Согласования» на любое из доступных значений;
* Разрешено удалять переходы в истории смены состояний – установите флаг, если пользователь должен иметь возможность удалять записи на закладке «История состояний» в карточке «Согласования».

4.Для сохранения настроек нажмите кнопку ОК.


###Статусы документов

**Внимание**!: данную настройку следует выполнять, если согласуемый документ прикладного проекта в качестве статуса согласования использует справочник «Статусы документов».

**Путь**: Согласование/Настройка/Справочники/Статусы документов.

**Порядок заполнения**:

1.По пункту меню «Статусы документов» откройте картотеку «Статус документа».

2.Для создания новой записи нажмите кнопку  Добавить ![](topic:.AddFiles.Btn_Add.png) и заполните открывшуюся форму указанным ниже способом:

![](topic:.AddFiles.Screenshot_2151.jpg)

* Название – название статуса;
* Отправить на согласование – установите флаг, если при установке данного статуса в документе прикладного проекта, должно происходить создание или обновление согласования;
* Отозвать из согласования – установите флаг, если при установке данного статуса в документе прикладного проекта, должен происходить отзыв из согласования;

Блок «Класс записи»:

* Класс записи – укажите класс записи документа прикладного проекта, в котором должен быть доступным для выбора данный статус;
* Блокировка полей (![](topic:.AddFiles.Btn_Lock.png) ) – нажмите на кнопку, и укажите перечень полей документа прикладного проекта, которые подлежат блокировке в текущем статусе.

3.Для сохранения настроек нажмите кнопку ОК.

###Состояния согласований


**Путь**: Согласование/Настройка/Справочники/Состояния согласований

**Порядок заполнения**:

1.По пункту меню «Статусы документов» откройте картотеку «Статус документа»;

2.Для создания новой записи нажмите кнопку  Добавить ![](topic:.AddFiles.Btn_Add.png) и заполните открывшуюся форму указанным ниже способом:

![](topic:.AddFiles.Screenshot_2152.jpg)

* Название – укажите название состояния;
* Код – укажите код состояния;
* Описание – при необходимости, укажите дополнительное описание состояния;

Закладка «Основное»:

* Роль ответственного – укажите роль ответственного, ответственного за согласование в данном состоянии;
* Технический ответственный – установите флаг, если при установке данного состояния согласование должно переходить на ответственного «Система» (в дальнейшем пользователи заходят в карточку «Согласования» и вручную устанавливают конкретного ответственного);
* Финальное состояние – установите флаг, если данное состояние является финальным, и дальнейшие смены состояний в «Согласовании» невозможны;
* Состояние ввода данных – установите флаг, если согласование в данном состоянии должно быть недоступным для дальнейших действий, пока не будет обновлён согласуемый документ (исправлены ошибки, добавлена аналитика в документ и т.п.);
* Дополнительные адресаты уведомлений - отправка электронных писем при изменениях поручения в данном состоянии:
   * Отправлять сообщение ответственному - при изменениях поручения ответственному будет отправлено сообщение;
   * Дополнительно уведомлять участника - при необходимости  из выпадающего списка выберите участника согласования, которого  дополнительно необходимо уведомить об изменениях поручения в данном состоянии. 

*Строки в таблицу с перечнем  участников добавляются/удаляются с помощью опции Добавить кадр/Удалить кадр в меню вызываемом по щелчку правой кнопки мыши или с помощью клавиш Ins/Del.*

* Блок группа «Группа»:
    * Принадлежит группе – при необходимости поместить данную запись в какую-либо группу справочника, укажите эту группу; 
    * Это группа – укажите флаг, если данная запись является группой.

Закладка «Переходы В»: 

На закладке отображаются «Переходы состояний согласований» в текущее состояние из других состояний (создаются отдельно в форме Переходы состояний согласований);

Закладка «Переходы Из»: на закладке отображаются «Переходы состояний согласований» из текущего состояния в другие состояния (создаются отдельно в форме Переходы состояний согласований).

3.Для сохранения настроек нажмите кнопку ОК.


###Маршруты согласований

**Путь**: Согласование/Настройка/Справочники/Маршруты согласований

**Порядок заполнения**:

1.По пункту меню «Маршруты согласований» откройте картотеку «Маршрут согласования»;

2.Для создания новой записи нажмите кнопку  Добавить![](topic:.AddFiles.Btn_Add.png) и заполните открывшуюся форму указанным ниже способом:
 
![](topic:.AddFiles.Screenshot_2154.jpg)

* Название – укажите название маршрута;
* Код – код записи. Заполняется автоматически от поля Название. При необходимости, измените вручную;
* Описание – при необходимости, укажите дополнительное описание маршрута.

Закладка «Основное»:

* Префикс номера – при необходимости, укажите префикс, который будет добавляться к коду карточек Согласования;

*  «Состояния»:
    * Начальное – укажите начальное состояние маршрута, в котором карточка Согласования находится до начала утверждения. Выбор значения из справочника Состояния согласований;
    * Готовность – укажите состояние, в котором карточка Согласования готова для утверждения, отклонения и других действий.  Выбор значения из справочника Состояния согласований;
    * Согласовано – укажите состояние, в котором карточка Согласования считается согласованной.  Выбор значения из справочника Состояния согласований;
    * Не согласовано – укажите состояние, в котором карточка Согласования считается не согласованной (без возможности исправления ошибок в документе и повторного согласования).  Выбор значения из справочника Состояния согласований;
    * Отозвано – укажите состояние, в котором карточка Согласования считается отозванной/отклонённой (с возможностью исправления ошибок в документе и повторного согласования).  Выбор значения из справочника Состояния согласований.

Закладка «Список правил перехода»:

На закладке отображается список Переходов состояний согласований, относящихся к текущему маршруту. *Строки в таблицу с перечнем  правил добавляются/удаляются с помощью опции Добавить кадр/Удалить кадр в меню вызываемом по щелчку правой кнопки мыши или с помощью клавиш Ins/Del.  Карточка перехода открывается для просмотра/редактирования по двойному щелчку мыши, с помощью опции Редактировать  в меню вызываемом по щелчку правой кнопки мыши или с помощью клавиш Alt+Enter*

3.Для сохранения настроек нажмите кнопку ОК.

###Переходы состояний согласований

**Путь**: Согласование/Настройка/Справочники/Переходы состояний согласований

**Порядок заполнения**:

1.По пункту меню «Переходы состояний согласований» откройте картотеку «Переход состояний согласований».

2.Для создания новой записи нажмите кнопку  Добавить ![](topic:.AddFiles.Btn_Add.png) и заполните открывшуюся форму указанным ниже способом:
 
![](topic:.AddFiles.Screenshot_2156.jpg)
 
* Название – укажите название перехода состояний (название будет отображаться на кнопках смены состояний в карточке Согласования, поэтому рекомендуется указывать не более двух слов);
* Код – код записи. Заполняется автоматически от поля Название. При необходимости, измените вручную;
* Описание – при необходимости, укажите дополнительное описание перехода состояний согласований;
* Маршрут согласования – укажите маршрут согласования, в котором применяется данный переход состояний. Карточка маршрута доступна по кнопке перехода ![](topic:Notifications.AddFiles.Btn_go.png);
* Исходное состояние – укажите состояние согласования, из которого осуществляется смена.  Выбор значения из справочника Состояния согласований;
* Ответственный – поле не редактируется. Заполняется автоматически ролью ответственного от указанного Исходного состояния;
* Новое состояние – укажите состояние согласования, в которое осуществляется смена. Выбор значения из справочника Состояния согласований;
* Ответственный – поле не редактируется. Заполняется автоматически ролью ответственного от указанного Нового состояния.

Блок «Переход состояния»:

* Причина отклонения – если данный переход является отклонением, укажите «Отклонение». Если данный переход является отзывом для возврата на доработку, укажите «Возврат на доработку». Если данный переход не относится к перечисленным выше, оставьте значение «Не является отклонением»;
* Переход состояния – укажите каким образом выполняется данный переход. Если пользователь должен заходить в карточку Согласования и выполнять данный переход вручную, оставьте значение «Вручную». Если при установке в Согласовании состояния «Исходное состояние» данный переход должен выполняться автоматически, то укажите «Автоматически»;
* Создавать уведомление при переходе – при необходимости формирования стандартных уведомлений, установите флаг. Уведомления будут формироваться, если предварительно выполнены соответствующие настройки;
* Шаблон уведомления – при необходимости формирования стандартных уведомлений, укажите шаблон, по которому должен формироваться текст уведомления. Уведомления будут формироваться, если предварительно выполнены соответствующие настройки.

3.Для сохранения настроек нажмите кнопку ОК.

###Документы

**Путь**: Согласование/Настройка/Справочники/Документы

**Порядок заполнения**:

1.По пункту меню «Документы» откройте картотеку «Документы».

2.Для создания новой записи нажмите кнопку  Добавить ![](topic:.AddFiles.Btn_Add.png) и заполните открывшуюся форму указанным ниже способом:
 
![](topic:.AddFiles.Screenshot_2157.jpg)
 
* Код – уникальный код записи. Заполняется автоматически. При необходимости, редактируется вручную;
* Название – укажите название документа;
* Проект – укажите проект, к которому относится согласуемый документ/справочник;
* Класс записи – укажите класс записи документа/справочника. 

Закладка «Состояние»

Для добавления состояния нажмите кнопку Добавить ![](topic:.AddFiles.Btn_Add.png) и заполните следующие поля:

* Поле – укажите поле документа/справочника, в котором отображается его статус (поддерживаются только поля, являющиеся ссылками на справочники);
* Тип значения поля – тип указанного поля. Заполняется автоматически и не редактируется;
* Класс записи – класс записи указанного поля. Заполняется автоматически и не редактируется.

3.При необходимости использования преднастроенных фильтров (в дальнейшем можно использовать в правилах согласования, шаблонах согласования), перейдите не закладку «Преднастроенные фильтры». Нажмите кнопку Добавить ![](topic:.AddFiles.Btn_Add.png). Заполните поля фильтра [НАСТРОЙКА ФИЛЬТРА][Настройка фильтра].

4.Для сохранения настроек нажмите кнопку ОК.


###Шаблоны согласований

**Путь**: Согласование/Настройка/Шаблоны/Шаблоны согласований

**Порядок заполнения**:

1.По пункту меню «Шаблоны согласований» откройте картотеку «Шаблон согласования».

2.Для создания новой записи нажмите кнопку  Добавить ![](topic:.AddFiles.Btn_Add.png) и заполните открывшуюся форму указанным ниже способом:
 
![](topic:.AddFiles.Screenshot_2159.jpg)
 
* Код – уникальный код записи. Заполняется по умолчанию. Обновляется, при вводе названия. При необходимости редактируется;
* Название – укажите название записи;
* Описание – дополнительное описание шаблона. Заполните при необходимости;
* Папка согласований – папка, в которую по умолчанию попадают карточки Согласований. Укажите при необходимости. Для создания новой папки нажмите кнопку Создать папку, и укажите название для этой папки.

Закладка «Маршрут»:

* Устанавливать начальное состояние при повторной отправке на согласование – установите флаг, если нужно автоматически возвращать согласование в начальное состояние при повторной отправке на согласование. Если при повторной отправке на согласование нужно оставлять согласование в текущем значении, то оставьте поле пустым;
* Устанавливать состояние «Готовность», если приняты все подзадачи – если в шаблоне есть подзадачи и при установке состояния «Согласовано» во всех подзадачах необходимо автоматически устанавливать в данной задаче состояние «Готовность», то установите флаг. Если при согласовании всех подзадач никаких действий выполнять не нужно, то оставьте поле пустым;
* Устанавливать состояние «Согласовано», если приняты все подзадачи – аналогично описанному выше полю, но происходит автоматическая установка состояния «Согласовано»;
* Устанавливать состояние «Не согласовано», если отклонена любая подзадача – если в шаблоне есть подзадачи, и при отклонении какой-либо подзадачи нужно автоматически отклонять текущую, то установите флаг. Если при таком сценарии ничего выполнять не нужно, то оставьте поле пустым;
* Устанавливать состояние «Отозвано», если согласование документа отозвано – аналогично описанному выше полю, но происходит автоматическая установка состояния «Отозвано»;
* Маршрут согласования – укажите как минимум один маршрут согласования, по которому должно происходить согласование (если используется данный шаблон);
* По умолчанию – установите флаг, если данная запись должна использоваться, если не подходит ни одна запись по фильтрам;
* Фильтр – нажмите кнопку ![](topic:.AddFiles.Btn_Lock.png), если выбранный маршрут должен использоваться при использовании конкретных аналитик в согласуемом документе. Настройка фильтра описана в [НАСТРОЙКА ФИЛЬТРА][Настройка фильтра]

Закладка «Участники исполнения»:

![](topic:.AddFiles.Screenshot_2160.jpg)

* Тип ответственного – выбрать Роль/Должность/Сотрудник ответственного за согласование;
* Ответственный – выбрать Роль (сотрудника)/Должность(сотрудника)/Сотрудника ответственного за согласование;
* Роль в согласовании – указать роль в согласовании, при которой за согласование должен отвечать Ответственный;
* По умолчанию - установите флаг, если данная запись должна использоваться всегда;
* Фильтр – нажмите кнопку ![](topic:.AddFiles.Btn_Lock.png), если выбранная комбинация Роль/Должность/Сотрудник должна использоваться при использовании конкретных аналитик в согласуемом документе. Настройка фильтра описана в  [НАСТРОЙКА ФИЛЬТРА][Настройка фильтра];

**Важно**!: если указана должность, то согласование будет назначаться всем сотрудникам с указанной Должностью. Если указана роль (без указания должности и сотрудника), то согласование будет назначаться всем сотрудникам с указанной Ролью. Ответственными за такие согласования являются те сотрудники, которые заходят в карточку Согласования и выбирают в качествен ответственного себя или другого Сотрудника.

Закладка «Сроки»:

![](topic:.AddFiles.Screenshot_2161.jpg)

* Комбинация сроков – укажите сроки, в которые должно выполняться согласование (заведение комбинации сроков описано в [КОМБИНАЦИИ СРОКОВ][Комбинации сроков];
* По умолчанию - установите флаг, если данная запись должна использоваться если не обнаружена запись, подходящая по фильтру;
* Фильтр – нажмите кнопку ![](topic:.AddFiles.Btn_Lock.png), если выбранная комбинация сроков должна использоваться при использовании конкретных аналитик в согласуемом документе. Настройка фильтра описана в  [НАСТРОЙКА ФИЛЬТРА][Настройка фильтра].

Закладка «Синхронизация статусов»:

![](topic:.AddFiles.Screenshot_2162.jpg)

* Состояние согласования – укажите состояние согласования, при установке которого должен устанавливаться какой-либо статус в согласуемом документе;
* Фильтр по проекту – при необходимости, укажите проект, к которому относится согласуемый документ;
* Документ – укажите согласуемый документ;
* Поле статуса – укажите поле, которое является статусом в согласуемом документе;
* Состояние документа – укажите статус согласуемого документа, который должен устанавливаться, при установке в согласовании «Состояние согласования».

Закладка «Подзадачи»:

![](topic:.AddFiles.Screenshot_2163.jpg)

* При необходимости постройки бизнес процесса согласования с подзадачами, добавьте новую запись.  Для добавления записи нажмите кнопку Добавить ![](topic:.AddFiles.Btn_Add.png) и заполните открывшуюся форму  Шаблона подзадачи. Поддерживается неограниченное количество подзадач с иерархической вложенностью (для этого необходимо устанавливать или снимать признак группы у записей).

3.Для сохранения настроек нажмите кнопку ОК.


###Настройка фильтра

При согласовании, при необходимости подстановки каких-либо частей шаблона в зависимости от значения аналитик согласуемого документа, следует использовать фильтры.

Заполнение формы фильтра:

![](topic:.AddFiles.Screenshot_2164.jpg)

* Заполните поля:
 
    * Фильтр по проекту – укажите проект, к которому относится согласуемый документ;
    * Документ – укажите документ, к которому должен применяться настраиваемый фильтр;
    * По умолчанию – установите флаг, если среди нескольких фильтров один из них должен подставляться, если не подходит ни один из перечисленных фильтров;
    * Фильтр – не редактируемое поле. Отображает имеется ли фильтр по аналитикам для текущей записи;
    * Фильтр  – нажмите кнопку ![](topic:.AddFiles.Btn_Lock.png) и перейдите к настройке фильтров по аналитикам:

![](topic:.AddFiles.Screenshot_2165.jpg)
 
   * И/Или – установите значение каким образом должно выполняться логическое действие с другими строками фильтра;
   * Поле – укажите поле документа, по которому должен происходить фильтрация по значению;
   * Вид сравнения – укажите каким образом должно обрабатываться фильтруемое значение. Доступны «Равно», «Не равно», «Входит в группу», «Не использовать»;
   * Значение – укажите значение, по которому должна происходить фильтрация. Выбор производится из справочника, являющегося источником для ранее указанного Поля.
    
* Для сохранения настроек нажмите кнопку ОК.


**Важно!**: при поиске по фильтрам, Система использует первый подходящий фильтр, поэтому необходимо настраивать взаимоисключающие фильтры.

###Комбинации сроков

**Путь**: Согласование/Настройка/Справочники/Комбинации сроков

**Порядок заполнения**:

1.Откройте картотеку «Комбинации сроков».

2.Для создания новой записи нажмите кнопку  Добавить ![](topic:.AddFiles.Btn_Add.png) и заполните открывшуюся форму указанным ниже способом:
 
![](topic:.AddFiles.Screenshot_2166.jpg)
 
 
* Код – уникальный код записи. Заполняется автоматически. При необходимости редактируется вручную;
* Название – указать название комбинации сроков; 
* Смещение – указать время смещения начала согласования (карточка Согласования создаётся, но время начала согласования смещается вперёд относительно текущего времени);
* Срок – указать время на исполнение согласования;
* Уведомлять – указать время, за которое до окончания срока, следует отправлять уведомление (текст такого уведомления фиксированный типа *«Внимание! Истечение срока согласования %номер согласования%»*).

3.Для сохранения настроек нажмите кнопку ОК.

###Правила согласования

**Путь**: Согласование/Настройка/Справочники/Правила согласования

**Порядок заполнения**:

1.По пункту меню «Правила согласования» откройте картотеку «Правила согласования».

2.Для создания новой записи нажмите кнопку  Добавить ![](topic:.AddFiles.Btn_Add.png) и заполните открывшуюся форму указанным ниже способом:
 
![](topic:.AddFiles.Screenshot_2181.jpg)
 
* Код – уникальный код записи. Заполняется по умолчанию. Обновляется, при вводе названия. При необходимости редактируется вручную;
* Название – укажите название записи;
* Используется – при установленном флаге правило согласования активно;

**Важно**!: Снятие флага «Используется» доступно только в том случае, если нет открытых согласований. Также недоступна одновременная установка флага «Используется» в нескольких Правилах согласования с одинаковым Документом.

* Фильтр по проекту – укажите проект, к которому относится документ/справочник, настраиваемый для согласования;
* Документ – укажите документ/справочник для согласования;
* Форма согласования – укажите «Отдельно по записям», если согласование для данного документа должно выполняться отдельно для каждого документа/записи справочника, или укажите «Группа записей», если согласование должно выполняться для групп записей;
* Шаблон по умолчанию – укажите шаблон согласования, используемый по умолчанию.

* «Шаблоны согласований»:
    * Название – при необходимости, укажите дополнительный шаблон согласования, который будет использоваться при попадании под фильтр;
    * Фильтр – поле не редактируется. В поле отображается флаг, если для текущей строки создан фильтр;
    *  Фильтр – нажмите кнопку ![](topic:.AddFiles.Btn_Lock.png) и перейдите к настройке фильтров по аналитикам. [НАСТРОЙКА ФИЛЬТРА][Настройка фильтра].
    
3.Для сохранения настроек нажмите кнопку ОК.

###Причины отклонений

**Путь**: Согласование/Настройка/Справочники/Причины отклонения

**Порядок заполнения**:

1.По пункту меню «Причины отклонения» откройте картотеку «Причины отклонения».

2.Для создания новой записи нажмите кнопку  Добавить ![](topic:.AddFiles.Btn_Add.png) и заполните открывшуюся форму указанным ниже способом:
 
![](topic:.AddFiles.Screenshot_2168.jpg)
 
* Код – уникальный код записи. Заполняется автоматически, при создании записи. При необходимости редактируется вручную;
* Название – укажите название записи;
* Причина (фильтр) – укажите при каком действии должна быть доступна данная причина. Укажите «Отклонение», если причина должна быть только при конечном отклонении. Укажите «Возврат на доработку», если причина должна быть доступна только при возвратах на доработку. Укажите «Все», если причина должна быть доступна в обоих случаях.

3.Для сохранения настроек нажмите кнопку ОК.

###Замещение участников согласования

**Путь**: Согласование/Настройка/Шаблоны/Замещение участников согласований

**Порядок заполнения**:

1.По пункту меню «Замещение участников согласований» откройте картотеку «Замещение участников согласования».

2.Для создания новой записи нажмите кнопку  Добавить ![](topic:.AddFiles.Btn_Add.png) и заполните открывшуюся форму указанным ниже способом:
 
![](topic:.AddFiles.Screenshot_2169.jpg)
 
* Код – заполняется автоматически. Редактируется вручную при необходимости;
* Название – укажите название;
* Заменяемый – укажите сотрудника, которого необходимо заменять. Выбор из справочника Сотрудники. Поле обязательно к заполнению;
* Сотрудник/должность – укажите тип замещающего ответственного;
* Заменяющий – в зависимости от выбранного типа замещающего ответственного укажите заменяющего сотрудника или заменяющую должность. Выбор из справочника Сотрудники/ Роли субъектов. Поле обязательно к заполнению;
* Замещать с – укажите дату, с которой нужно замещать сотрудника. Если дата не указана, то будет распространяться на все согласования по дату «По»;
* По – укажите дату, по которую нужно замещать сотрудника. Если дата не указана, то будет распространяться на все согласования с даты «Замещать с».

* «Позиции»:
    * Шаблон согласований – при необходимости, укажите шаблоны, на которые должно распространяться данное замещение. Если ни один шаблон не указан, то замещение распространяется на все шаблоны согласований.

3.Для внесения замещений сотрудника в уже существующие Согласования нажмите кнопку "Заменить в текущих согласованиях" ![](topic:.AddFiles.Btn_Zamena.png). Далее в открывшейся форме заполните поля:

![](topic:.AddFiles.Screenshot_2170.jpg)
 
* За – укажите период, за который нужно отбирать активные карточки Согласования (в зависимости от выбранного значения отображаются дополнительные поля «С», «По», «До», «Месяц», «День» и т.д.);
* «Параметры»:
    * Предприятие – укажите предприятие, если нужно заменить ответственного только в согласованиях выбранного предприятия;
    * Подразделение – укажите предприятие, если нужно заменить ответственного только в согласования выбранного подразделения;
    * ЦФО – укажите ЦФО, если нужно заменить ответственного только в согласования выбранного ЦФО;
    * Шаблон согласования – укажите шаблон согласования, если нужно заменить ответственного только в согласования выбранного шаблона.
    
* Для подбора активных согласований нажмите кнопку  Обновить ![](topic:.AddFiles.Btn_Refresh.png).
* Таблица «Данные» заполняется автоматически.
* Согласования, в которых нужно провести замену, отметьте флагом «Выбрать». Нажмите кнопку Обработать ![](topic:.AddFiles.Btn_Chek.png).

3.Для закрытия формы «Процедура замещения участников согласования» нажмите кнопку Закрыть ![](topic:.AddFiles.BtnCloseCancel.png).

4.Для закрытия формы «Замещение участников согласования» нажмите кнопку ОК.


###Согласование

**Путь**: Согласование/Данные/Основные данные/Картотека согласований

**Порядок работы с формой**:

1.По пункту меню «Картотека согласований» откройте картотеку «Согласования».

2.Создание новых карточек возможно только из согласуемых документов.

3.Возможности работы с карточкой Согласования:

![](topic:.AddFiles.Screenshot_2173.jpg)

* Код – уникальный код записи. Заполняется автоматически, при создании записи. При необходимости редактируется вручную;
* Название – название задачи согласования. Заполняется автоматически от найденного шаблона. При необходимости редактируется вручную;
* Согласуемый документ – в поле отображается документ, из которого было вызвано согласование. Поле не редактируется. Согласуемый документ доступен по кнопке перехода ![](topic:.AddFiles.Btn_go.png);
* Состояние – текущее состояние согласования. Возможна смена, при помощи правил перехода (кнопки ниже), или вручную;
* Ответственный – текущий ответственный согласования (роль или должность, или сотрудник). Рядом с полем (слева) отображается кнопка роли текущего ответственного, она же кнопка смены ответственного. При нажатии на кнопку можно перевести согласование на другого ответственного с той же ролью. Карточка сотрудника/роли/должности(в зависимости от выбранного значения) доступна по кнопке перехода ![](topic:.AddFiles.Btn_go.png);
* Кнопки смены состояния – кнопки возможных смен состояний. Заполняются автоматически от подобранного Системой Маршрута согласования. При необходимости смены согласования, нажмите одну из кнопок.

* Блок «Описание»:
    * При необходимости, укажите дополнительное описание;
    
* Блок «Категория, важность, приоритет, сроки»:

![](topic:.AddFiles.Screenshot_2179.jpg)

   * Категория – при необходимости, укажите категорию согласования. Выбор одного из значений выпадающего списка;
   * Приоритет – при необходимости, измените приоритет. Выбор одного из значений выпадающего списка;
   * Важность – при необходимости, измените важность. Выбор одного из значений выпадающего списка;
   * Крайний срок – заполняется автоматически на основании указанного в шаблоне согласования. При необходимости, измените вручную;
   * Время начала – заполняется автоматически временем создания карточки согласования. Поле недоступно для редактирования;
   * Выполнено – заполняется автоматически временем доведения согласования до финального состояния;
    
Закладка «**Обсуждение**» используется для написания пояснений и коротких текстовых сообщений в процессе исполнения задачи.

![](topic:.AddFiles.Screenshot_2178.jpg)

* Время, автор – заполняется автоматически временем указания сообщения и автором сообщения. Поле не редактируется;
* Сообщение – при необходимости, укажите сообщение. Сообщение доступно для просмотра другим пользователям, у которых есть доступ к текущему согласованию;

Закладка «**Детали**»:

![](topic:.AddFiles.Screenshot_2174.jpg)

* Блок «Предприятие, Подразделение..»:
    * Предприятие – предприятие, для которого создано данное согласование. Изменение вручную не изменит текущий маршрут/шаблон (по фильтрам);
    * Подразделение – подразделение, для которого создано данное согласование. Изменение вручную не изменит текущий маршрут/шаблон (по фильтрам);
    * ЦФО – ЦФО, для которого создано данное согласование. Изменение вручную не изменит текущий маршрут/шаблон (по фильтрам);
    * Маршрут согласования – маршрут, по которому проходит согласование. Заполняется автоматически при создании/обновлении согласования от документа/справочника;
    * Шаблон согласований – шаблон, по которому проходит согласование. Заполняется автоматически при создании/обновлении согласования от документа/справочника;
    
* Блок «Состояние»:
    * Ввод данных – если согласование на этапе ввода данных, то флаг устанавливается автоматически. При этом вся ветка согласования блокируется. Поле не редактируется;
    * Отозвано – если согласование отозвано согласующим, то в поле отображается значение «Да», «Да (инициатор)» - если отозвано инициатором согласования. Поле не редактируется;
    
* Блок «Прочее»:
    * Элемент группы – заполняется автоматически групповой записью картотеки;
    * Это группа – заполняется автоматически, если данная запись является группой в картотеке;
    * Замок – заполняется автоматически, если согласование на этапе ввода данных. При необходимости, можно установить/снять вручную;
    * Завершен – устанавливается автоматически, если согласование завершено;
    * Не показывать в отчёте – при установленном флаге, данная карточка согласования не попадает в отчёт «Список согласований»;
    
* Блок  «Создал, изменил» отражает информацию о создании/ изменении документа, заполняется автоматически и доступен для пользователей с ролью Администратор.
    * Время создания – заполняется автоматически временем создания записи. Поле не редактируется;
    * Создал – заполняется автоматически логином пользователя, создавшего согласование. Поле не редактируется;
    * Время изменения – заполняется автоматически временем последнего изменения записи. Поле не редактируется;
    * Изменил – заполняется автоматически логином пользователя, изменявшего карточку согласование последним. Поле не редактируется;

Закладка «**Участники**» отображает список участников текущего согласования.

![](topic:.AddFiles.Screenshot_2175.jpg)

***Примечание***: Участники согласования заполняются автоматически при создании согласования (из шаблона согласования), а также могут дополняться вручную.

* Тип ответственного – тип ответственного согласования, который принимал, принимает или может принимать участие в согласовании;
* Ответственный – ответственный, который принимал, принимает или может принимать участие в согласовании;
* Роль в согласовании – роль в согласовании для указанного ответственного.

*Строки в таблицу добавляются/удаляются с помощью опции Добавить кадр/Удалить кадр в меню вызываемом по щелчку правой кнопки мыши или с помощью клавиш Ins/Del*

Закладка «**Зависимости**» отображает список согласований, от которых зависит текущее согласование.

![](topic:.AddFiles.Screenshot_2176.jpg)

* Название – согласование, от которого зависит текущее согласование. Заполняется автоматически, если в используемом шаблоне согласований имеются подзадачи;
* № - номер согласования, указанного в поле «Название»;
* Состояние – состояние согласования, указанного в поле «Название».
   
Закладка «**История состояний**» отображает историю смены состояний данного согласования.

![](topic:.AddFiles.Screenshot_2177.jpg)

***Примечание***: История состояний согласования заполняется автоматически при смене состояния вручную, или при помощи кнопок смены состояний, или при обновлении от согласуемого документа.

* Дата, время – дата и время смены состояния;
* Кто перевел – сотрудник, который внёс изменения;
* В состояния – состояние, в которое было переведено согласование;
* Ответственный – ответственный, на которого было переведено согласование;
* Тип ответственного – тип ответственного, на которого было переведено согласование.

Закладка «**Вложения**» отображает перечень прикрепленных из внешнего хранилища документов. Для добавления нового документа воспользуйтесь кнопкой "Добавить файлы".

4.Для сохранения введенных данных нажмите кнопку ОК.



----------
