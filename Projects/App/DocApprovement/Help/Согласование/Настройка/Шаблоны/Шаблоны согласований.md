#Шаблоны согласований

----------

**Путь**: Согласование/Настройка/Шаблоны/Шаблоны согласований

**Назначение формы**: Форма предназначена для ввода шаблонов согласований

**Порядок заполнения**:

1.По пункту меню «Шаблоны согласований» откройте картотеку «Шаблон согласования».

2.Для создания новой записи нажмите кнопку  Добавить ![](topic:.AddFiles.Btn_Add.png) и заполните открывшуюся форму указанным ниже способом:
 
![](topic:.AddFiles.Screenshot_2159.jpg)
 
* Код – уникальный код записи. Заполняется по умолчанию. Обновляется, при вводе названия. При необходимости редактируется;
* Название – укажите название записи;
* Описание – дополнительное описание шаблона. Заполните при необходимости;
* Папка согласований – папка, в которую по умолчанию попадают карточки Согласований. Укажите при необходимости. Для создания новой папки нажмите кнопку Создать папку, и укажите название для этой папки.

Закладка «Маршрут»:

* Устанавливать начальное состояние при повторной отправке на согласование – установите флаг, если нужно автоматически возвращать согласование в начальное состояние при повторной отправке на согласование. Если при повторной отправке на согласование нужно оставлять согласование в текущем значении, то оставьте поле пустым;
* Устанавливать состояние «Готовность», если приняты все подзадачи – если в шаблоне есть подзадачи и при установке состояния «Согласовано» во всех подзадачах необходимо автоматически устанавливать в данной задаче состояние «Готовность», то установите флаг. Если при согласовании всех подзадач никаких действий выполнять не нужно, то оставьте поле пустым;
* Устанавливать состояние «Согласовано», если приняты все подзадачи – аналогично описанному выше полю, но происходит автоматическая установка состояния «Согласовано»;
* Устанавливать состояние «Не согласовано», если отклонена любая подзадача – если в шаблоне есть подзадачи, и при отклонении какой-либо подзадачи нужно автоматически отклонять текущую, то установите флаг. Если при таком сценарии ничего выполнять не нужно, то оставьте поле пустым;
* Устанавливать состояние «Отозвано», если согласование документа отозвано – аналогично описанному выше полю, но происходит автоматическая установка состояния «Отозвано»;
* Маршрут согласования – укажите как минимум один маршрут согласования, по которому должно происходить согласование (если используется данный шаблон);
* По умолчанию – установите флаг, если данная запись должна использоваться, если не подходит ни одна запись по фильтрам;
* Фильтр – нажмите кнопку ![](topic:.AddFiles.Btn_Lock.png), если выбранный маршрут должен использоваться при использовании конкретных аналитик в согласуемом документе. Настройка фильтра описана в [НАСТРОЙКА ФИЛЬТРА][Настройка фильтра].

Закладка «Участники исполнения»:

![](topic:.AddFiles.Screenshot_2160.jpg)

* Тип ответственного – выбрать Роль/Должность/Сотрудник ответственного за согласование;
* Ответственный – выбрать Роль (сотрудника)/Должность(сотрудника)/Сотрудника ответственного за согласование;
* Роль в согласовании – указать роль в согласовании, при которой за согласование должен отвечать Ответственный;
* По умолчанию - установите флаг, если данная запись должна использоваться всегда;
* Фильтр – нажмите кнопку ![](topic:.AddFiles.Btn_Lock.png), если выбранная комбинация Роль/Должность/Сотрудник должна использоваться при использовании конкретных аналитик в согласуемом документе. Настройка фильтра описана в  [НАСТРОЙКА ФИЛЬТРА][Настройка фильтра];

**Важно**!: если указана должность, то согласование будет назначаться всем сотрудникам с указанной Должностью. Если указана роль (без указания должности и сотрудника), то согласование будет назначаться всем сотрудникам с указанной Ролью. Ответственными за такие согласования являются те сотрудники, которые заходят в карточку Согласования и выбирают в качествен ответственного себя или другого Сотрудника.

Закладка «Сроки»:

![](topic:.AddFiles.Screenshot_2161.jpg)

* Комбинация сроков – укажите сроки, в которые должно выполняться согласование (заведение комбинации сроков описано в [Комбинации сроков](topic:Согласование.Настройка.Справочники.Комбинации сроков));
* По умолчанию - установите флаг, если данная запись должна использоваться если не обнаружена запись, подходящая по фильтру;
*  Фильтр – нажмите кнопку ![](topic:.AddFiles.Btn_Lock.png), если выбранная комбинация сроков должна использоваться при использовании конкретных аналитик в согласуемом документе. Настройка фильтра описана в  [НАСТРОЙКА ФИЛЬТРА][Настройка фильтра].

Закладка «Синхронизация статусов»:

![](topic:.AddFiles.Screenshot_2162.jpg)

* Состояние согласования – укажите состояние согласования, при установке которого должен устанавливаться какой-либо статус в согласуемом документе;
* Фильтр по проекту – при необходимости, укажите проект, к которому относится согласуемый документ;
* Документ – укажите согласуемый документ;
* Поле статуса – укажите поле, которое является статусом в согласуемом документе;
* Состояние документа – укажите статус согласуемого документа, который должен устанавливаться, при установке в согласовании «Состояние согласования».

Закладка «Подзадачи»:

![](topic:.AddFiles.Screenshot_2163.jpg)

* При необходимости постройки бизнес процесса согласования с подзадачами, добавьте новую запись.  Для добавления записи нажмите кнопку Добавить ![](topic:Notifications.AddFiles.Btn_Add.png) и заполните открывшуюся форму  Шаблона подзадачи. Поддерживается неограниченное количество подзадач с иерархической вложенностью (для этого необходимо устанавливать или снимать признак группы у записей).

3.Для сохранения настроек нажмите кнопку ОК.


###Настройка фильтра

При согласовании, при необходимости подстановки каких-либо частей шаблона в зависимости от значения значениями аналитик согласуемого документа, следует использовать фильтры.

Заполнение формы фильтра:

![](topic:.AddFiles.Screenshot_2164.jpg)

* Заполните поля:
 
    * Фильтр по проекту – укажите проект, к которому относится согласуемый документ;
    * Документ – укажите документ, к которому должен применяться настраиваемый фильтр;
    * По умолчанию – установите флаг, если среди нескольких фильтров один из них должен подставляться, если не подходит ни один из перечисленных фильтров;
    * Фильтр – не редактируемое поле. Отображает имеется ли фильтр по аналитикам для текущей записи;
    * Фильтр  – нажмите кнопку ![](topic:.AddFiles.Btn_Lock.png) и перейдите к настройке фильтров по аналитикам:

![](topic:.AddFiles.Screenshot_2165.jpg)
 
   * И/Или – установите значение каким образом должно выполняться логическое действие с другими строками фильтра;
   * Поле – укажите поле документа, по которому должен происходить фильтрация по значению;
   * Вид сравнения – укажите каким образом должно обрабатываться фильтруемое значение. Доступны «Равно», «Не равно», «Входит в группу», «Не использовать»;
   * Значение – укажите значение, по которому должна происходить фильтрация. Выбор производится из справочника, являющегося источником для ранее указанного Поля.
    
* Для сохранения настроек нажмите кнопку ОК.


**Важно!**: при поиске по фильтрам, Система использует первый подходящий фильтр, поэтому необходимо настраивать взаимоисключающие фильтры.

  **Внимание**! Перед началом работы необходимо выполнить [Предварительную настройку](topic:.Согласование.Настройка.Предварительная настройка модуля Согласование).

----------
