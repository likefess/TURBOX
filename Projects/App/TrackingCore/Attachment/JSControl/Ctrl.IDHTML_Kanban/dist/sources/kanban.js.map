{"version":3,"file":"kanban.js","sources":["../../../node_modules/svelte/internal/index.mjs","../../../svelte/src/en.ts","../../../node_modules/@xbs/wx-core-locales/locales/en.js","../../../node_modules/@xbs/lib-state/dist/state-lib.es.js","../../../node_modules/@xbs/svelte-wx/node_modules/@xbs/lib-core-dom/dist/locate.js","../../../node_modules/@xbs/svelte-wx/node_modules/@xbs/lib-core-dom/dist/delegateClick.js","../../../node_modules/@xbs/svelte-wx/node_modules/@xbs/lib-core-dom/dist/uid.js","../../../node_modules/@xbs/svelte-wx/node_modules/@xbs/lib-core-dom/dist/dates.js","../../../node_modules/@xbs/svelte-wx/node_modules/@xbs/lib-core-dom/dist/locale.js","../../../node_modules/@xbs/svelte-wx/src/common/Area.svelte","../../../node_modules/@xbs/svelte-wx/src/common/Button.svelte","../../../node_modules/@xbs/svelte-wx/src/common/Checkbox.svelte","../../../node_modules/@xbs/svelte-wx/src/common/Dropdown.svelte","../../../node_modules/@xbs/svelte-wx/src/common/ColorPicker.svelte","../../../node_modules/@xbs/svelte-wx/src/common/helpers/List.svelte","../../../node_modules/@xbs/svelte-wx/src/common/helpers/listnav.js","../../../node_modules/@xbs/svelte-wx/src/common/Combo.svelte","../../../node_modules/@xbs/svelte-wx/src/common/Text.svelte","../../../node_modules/@xbs/svelte-wx/src/common/calendar/Header.svelte","../../../node_modules/@xbs/svelte-wx/src/common/calendar/Button.svelte","../../../node_modules/@xbs/svelte-wx/src/common/calendar/Month.svelte","../../../node_modules/@xbs/svelte-wx/src/common/calendar/Year.svelte","../../../node_modules/@xbs/svelte-wx/src/common/calendar/Duodecade.svelte","../../../node_modules/@xbs/svelte-wx/src/common/calendar/helpers.js","../../../node_modules/@xbs/svelte-wx/src/common/calendar/Panel.svelte","../../../node_modules/@xbs/svelte-wx/src/common/Calendar.svelte","../../../node_modules/@xbs/svelte-wx/src/common/DatePicker.svelte","../../../node_modules/@xbs/svelte-wx/src/common/RangeCalendar.svelte","../../../node_modules/@xbs/svelte-wx/src/common/Select.svelte","../../../node_modules/@xbs/svelte-wx/src/common/Slider.svelte","../../../node_modules/svelte/transition/index.mjs","../../../node_modules/@xbs/svelte-wx/src/common/Notice.svelte","../../../node_modules/@xbs/svelte-wx/src/common/Notices.svelte","../../../node_modules/@xbs/svelte-wx/src/common/Modal.svelte","../../../node_modules/@xbs/svelte-wx/src/common/Globals.svelte","../../../node_modules/@xbs/svelte-wx/src/common/Field.svelte","../../../node_modules/@xbs/svelte-wx/src/common/Portal.svelte","../../../node_modules/@xbs/svelte-wx/src/uploader/Uploader.svelte","../../../node_modules/@xbs/svelte-wx/src/themes/Material.svelte","../../../node_modules/@xbs/svelte-wx/src/themes/Willow.svelte","../../../node_modules/@xbs/svelte-wx/src/themes/WillowDark.svelte","../../../node_modules/@xbs/svelte-wx/src/locales/en.js","../../../node_modules/@xbs/svelte-wx/src/locales/Locale.svelte","../../../node_modules/svelte/store/index.mjs","../../../lib-kanban/dist/constants.js","../../../lib-kanban/dist/helpers.js","../../../lib-kanban/dist/handlers/card/move.js","../../../lib-kanban/dist/handlers/card/add.js","../../../lib-kanban/dist/handlers/card/update.js","../../../lib-kanban/dist/handlers/card/duplicate.js","../../../lib-kanban/dist/handlers/card/delete.js","../../../lib-kanban/dist/handlers/column/move.js","../../../lib-kanban/dist/handlers/column/add.js","../../../lib-kanban/dist/handlers/column/update.js","../../../lib-kanban/dist/handlers/column/delete.js","../../../lib-kanban/dist/handlers/row/move.js","../../../lib-kanban/dist/handlers/row/add.js","../../../lib-kanban/dist/handlers/row/update.js","../../../lib-kanban/dist/handlers/row/delete.js","../../../lib-kanban/dist/handlers/drag/start.js","../../../lib-kanban/dist/handlers/drag/drag.js","../../../lib-kanban/dist/handlers/drag/end.js","../../../lib-kanban/dist/handlers/selection/select.js","../../../lib-kanban/dist/handlers/selection/unselect.js","../../../lib-kanban/dist/search.js","../../../lib-kanban/dist/handlers/search.js","../../../lib-kanban/dist/handlers/scroll.js","../../../lib-kanban/dist/handlers/sort.js","../../../lib-kanban/dist/handlers/edit.js","../../../lib-kanban/dist/handlers/comment/add.js","../../../lib-kanban/dist/handlers/comment/update.js","../../../lib-kanban/dist/handlers/comment/delete.js","../../../lib-kanban/dist/handlers/link/add.js","../../../lib-kanban/dist/handlers/link/delete.js","../../../lib-kanban/dist/handlers/vote/add.js","../../../lib-kanban/dist/handlers/vote/delete.js","../../../lib-kanban/dist/DataStore.js","../../../lib-kanban/dist/dnd.js","../../../lib-dom/dist/locate.js","../../../lib-dom/dist/context.js","../../../lib-kanban/dist/actions/drag.js","../../../lib-kanban/dist/actions/selection.js","../../../lib-kanban/dist/actions/scroll.js","../../../lib-kanban/dist/actions/scrollManager.js","../../../lib-kanban/dist/actions/keyManager.js","../../../lib-kanban/dist/upload.js","../../../lib-kanban/dist/ExportManager.js","../../../lib-kanban/dist/portal.js","../../../svelte/src/lib/Icon.svelte","../../../node_modules/@xbs/lib-core-dom/dist/locate.js","../../../node_modules/@xbs/lib-core-dom/dist/clickOutside.js","../../../node_modules/@xbs/lib-core-dom/dist/uid.js","../../../node_modules/@xbs/lib-core-dom/dist/dates.js","../../../node_modules/@xbs/lib-core-dom/dist/locale.js","../../../node_modules/@xbs/svelte-menu/src/helpers.js","../../../node_modules/@xbs/svelte-menu/src/components/MenuItem.svelte","../../../node_modules/@xbs/svelte-menu/src/components/Menu.svelte","../../../node_modules/@xbs/svelte-menu/src/components/ContextMenu.svelte","../../../node_modules/@xbs/svelte-menu/src/components/DropDownMenu.svelte","../../../svelte/src/components/Row.svelte","../../../svelte/src/lib/Progress.svelte","../../../svelte/src/lib/UserIcon.svelte","../../../svelte/src/components/cardFields/Footer.svelte","../../../svelte/src/components/cardFields/Header.svelte","../../../svelte/src/components/Card.svelte","../../../svelte/src/components/CardContainer.svelte","../../../svelte/src/lib/VirtualList.svelte","../../../svelte/src/components/columnLayouts/VirtualScrollColumn.svelte","../../../svelte/src/components/columnLayouts/ScrollColumn.svelte","../../../svelte/src/components/Column.svelte","../../../svelte/src/components/HeaderCard.svelte","../../../svelte/src/components/ColumnsHeader.svelte","../../../svelte/src/components/VirtualContent.svelte","../../../lib-svelte/dist/form.js","../../../svelte/src/lib/UploaderList.svelte","../../../svelte/src/lib/FilesControl.svelte","../../../svelte/src/lib/CustomDateRangePicker.svelte","../../../svelte/src/lib/DateRangePicker.svelte","../../../svelte/src/lib/helpers/listnav.js","../../../svelte/src/lib/helpers/List.svelte","../../../svelte/src/lib/Multicombo.svelte","../../../svelte/src/lib/InlineLocale.svelte","../../../svelte/src/lib/Textarea.svelte","../../../svelte/src/components/Comments.svelte","../../../svelte/src/components/Links.svelte","../../../svelte/src/components/Editor.svelte","../../../svelte/src/components/EditorContainer.svelte","../../../svelte/src/components/Layout.svelte","../../../svelte/src/components/Kanban.svelte","../../../lib-kanban/dist/api.js","../../../svelte/src/themes/Material.svelte","../../../svelte/src/themes/Willow.svelte","../../../svelte/src/themes/WillowDark.svelte","../../../svelte/src/components/Toolbar.svelte","../../../svelte/src/lib/Search.svelte","../../../svelte/src/lib/toolbar/Search.svelte","../../../svelte/src/lib/toolbar/IconButton.svelte","../../../svelte/src/lib/toolbar/AddRow.svelte","../../../svelte/src/lib/toolbar/AddColumn.svelte","../../../svelte/src/lib/toolbar/Sort.svelte","../../../svelte/src/lib/toolbar/Spacer.svelte","../../../svelte/src/lib/toolbar/Undo.svelte","../../../svelte/src/lib/toolbar/Redo.svelte","../../src/components/Template.svelte","../../../Events.ts","../../../Kanban.ts","../../src/components/Editor.svelte","../../src/components/Toolbar.svelte","../../../provider/dist/RestDataProvider.js","../../../node_modules/remote-client/dist/remote.es6.js","../../../Editor.ts","../../../provider/dist/RemoteEvents.js","../../../Toolbar.ts","../../../provider/dist/KanbanUpdates.js","../../../provider/dist/constants.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\nfunction is_promise(value) {\n    return !!value && (typeof value === 'object' || typeof value === 'function') && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\nfunction split_css_unit(value) {\n    const split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n    return split ? [parseFloat(split[1]), split[2] || 'px'] : [value, 'px'];\n}\nconst contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element.sheet;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n    return style.sheet;\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentNode !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    if (node.parentNode) {\n        node.parentNode.removeChild(node);\n    }\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction comment(content) {\n    return document.createComment(content);\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_immediate_propagation(fn) {\n    return function (event) {\n        event.stopImmediatePropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data_map(node, data_map) {\n    Object.keys(data_map).forEach((key) => {\n        set_custom_element_data(node, key, data_map[key]);\n    });\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction set_dynamic_element_data(tag) {\n    return (/-/.test(tag)) ? set_custom_element_data_map : set_attributes;\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction init_binding_group(group) {\n    let _inputs;\n    return {\n        /* push */ p(...inputs) {\n            _inputs = inputs;\n            _inputs.forEach(input => group.push(input));\n        },\n        /* remove */ r() {\n            _inputs.forEach(input => group.splice(group.indexOf(input), 1));\n        }\n    };\n}\nfunction init_binding_group_dynamic(group, indexes) {\n    let _group = get_binding_group(group);\n    let _inputs;\n    function get_binding_group(group) {\n        for (let i = 0; i < indexes.length; i++) {\n            group = group[indexes[i]] = group[indexes[i]] || [];\n        }\n        return group;\n    }\n    function push() {\n        _inputs.forEach(input => _group.push(input));\n    }\n    function remove() {\n        _inputs.forEach(input => _group.splice(_group.indexOf(input), 1));\n    }\n    return {\n        /* update */ u(new_indexes) {\n            indexes = new_indexes;\n            const new_group = get_binding_group(group);\n            if (new_group !== _group) {\n                remove();\n                _group = new_group;\n                push();\n            }\n        },\n        /* push */ p(...inputs) {\n            _inputs = inputs;\n            push();\n        },\n        /* remove */ r: remove\n    };\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction claim_comment(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 8, (node) => {\n        node.data = '' + data;\n        return undefined;\n    }, () => comment(data), true);\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes, is_svg) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration(undefined, is_svg);\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes, is_svg);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    text.data = data;\n}\nfunction set_data_contenteditable(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    text.data = data;\n}\nfunction set_data_maybe_contenteditable(text, data, attr_value) {\n    if (~contenteditable_truthy_values.indexOf(attr_value)) {\n        set_data_contenteditable(text, data);\n    }\n    else {\n        set_data(text, data);\n    }\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    if (value === null) {\n        node.style.removeProperty(key);\n    }\n    else {\n        node.style.setProperty(key, value, important ? 'important' : '');\n    }\n}\nfunction select_option(select, value, mounting) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    if (!mounting || value !== undefined) {\n        select.selectedIndex = -1; // no option should be selected\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked');\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n            // make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n            // see https://github.com/sveltejs/svelte/issues/4233\n            fn();\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, cancelable, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nfunction head_selector(nodeId, head) {\n    const result = [];\n    let started = 0;\n    for (const node of head.childNodes) {\n        if (node.nodeType === 8 /* comment node */) {\n            const comment = node.textContent.trim();\n            if (comment === `HEAD_${nodeId}_END`) {\n                started -= 1;\n                result.push(node);\n            }\n            else if (comment === `HEAD_${nodeId}_START`) {\n                started += 1;\n                result.push(node);\n            }\n        }\n        else if (started > 0) {\n            result.push(node);\n        }\n    }\n    return result;\n}\nclass HtmlTag {\n    constructor(is_svg = false) {\n        this.is_svg = false;\n        this.is_svg = is_svg;\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            if (this.is_svg)\n                this.e = svg_element(target.nodeName);\n            /** #7364  target for <template> may be provided as #document-fragment(11) */\n            else\n                this.e = element((target.nodeType === 11 ? 'TEMPLATE' : target.nodeName));\n            this.t = target.tagName !== 'TEMPLATE' ? target : target.content;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes, is_svg = false) {\n        super(is_svg);\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\nfunction construct_svelte_component(component, props) {\n    return new component(props);\n}\n\n// we need to store the information for multiple documents because a Svelte application could also contain iframes\n// https://github.com/sveltejs/svelte/issues/3624\nconst managed_styles = new Map();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_style_information(doc, node) {\n    const info = { stylesheet: append_empty_stylesheet(node), rules: {} };\n    managed_styles.set(doc, info);\n    return info;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    const { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);\n    if (!rules[name]) {\n        rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        managed_styles.forEach(info => {\n            const { ownerNode } = info.stylesheet;\n            // there is no ownerNode if it runs on jsdom.\n            if (ownerNode)\n                detach(ownerNode);\n        });\n        managed_styles.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs#run-time-svelte-beforeupdate\n */\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * `onMount` does not run inside a [server-side component](/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs#run-time-svelte-onmount\n */\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n */\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs#run-time-svelte-ondestroy\n */\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * https://svelte.dev/docs#run-time-svelte-createeventdispatcher\n */\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail, { cancelable = false } = {}) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail, { cancelable });\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n            return !event.defaultPrevented;\n        }\n        return true;\n    };\n}\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-setcontext\n */\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n    return context;\n}\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-getcontext\n */\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs#run-time-svelte-getallcontexts\n */\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-hascontext\n */\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nlet render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\nlet flushidx = 0; // Do *not* move this inside the flush() function\nfunction flush() {\n    // Do not reenter flush while dirty components are updated, as this can\n    // result in an infinite loop. Instead, let the inner flush handle it.\n    // Reentrancy is ok afterwards for bindings etc.\n    if (flushidx !== 0) {\n        return;\n    }\n    const saved_component = current_component;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        try {\n            while (flushidx < dirty_components.length) {\n                const component = dirty_components[flushidx];\n                flushidx++;\n                set_current_component(component);\n                update(component.$$);\n            }\n        }\n        catch (e) {\n            // reset dirty state to not end up in a deadlocked state and then rethrow\n            dirty_components.length = 0;\n            flushidx = 0;\n            throw e;\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        flushidx = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    seen_callbacks.clear();\n    set_current_component(saved_component);\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n */\nfunction flush_render_callbacks(fns) {\n    const filtered = [];\n    const targets = [];\n    render_callbacks.forEach((c) => fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c));\n    targets.forEach((c) => c());\n    render_callbacks = filtered;\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n    else if (callback) {\n        callback();\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    const options = { direction: 'in' };\n    let config = fn(node, params, options);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config(options);\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    const options = { direction: 'out' };\n    let config = fn(node, params, options);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config(options);\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    const options = { direction: 'both' };\n    let config = fn(node, params, options);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config(options);\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    const updates = [];\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            // defer updates until all the DOM shuffling is done\n            updates.push(() => block.p(child_ctx, dirty));\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    run_all(updates);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\nconst _boolean_attributes = [\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'inert',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n];\n/**\n * List of HTML boolean attributes (e.g. `<input disabled>`).\n * Source: https://html.spec.whatwg.org/multipage/indices.html\n */\nconst boolean_attributes = new Set([..._boolean_attributes]);\n\n/** regex of all html void element names */\nconst void_element_names = /^(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/;\nfunction is_void(name) {\n    return void_element_names.test(name) || name.toLowerCase() === '!doctype';\n}\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, attrs_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (attrs_to_add) {\n        const classes_to_add = attrs_to_add.classes;\n        const styles_to_add = attrs_to_add.styles;\n        if (classes_to_add) {\n            if (attributes.class == null) {\n                attributes.class = classes_to_add;\n            }\n            else {\n                attributes.class += ' ' + classes_to_add;\n            }\n        }\n        if (styles_to_add) {\n            if (attributes.style == null) {\n                attributes.style = style_object_to_string(styles_to_add);\n            }\n            else {\n                attributes.style = style_object_to_string(merge_ssr_styles(attributes.style, styles_to_add));\n            }\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nfunction merge_ssr_styles(style_attribute, style_directive) {\n    const style_object = {};\n    for (const individual_style of style_attribute.split(';')) {\n        const colon_index = individual_style.indexOf(':');\n        const name = individual_style.slice(0, colon_index).trim();\n        const value = individual_style.slice(colon_index + 1).trim();\n        if (!name)\n            continue;\n        style_object[name] = value;\n    }\n    for (const name in style_directive) {\n        const value = style_directive[name];\n        if (value) {\n            style_object[name] = value;\n        }\n        else {\n            delete style_object[name];\n        }\n    }\n    return style_object;\n}\nconst ATTR_REGEX = /[&\"]/g;\nconst CONTENT_REGEX = /[&<]/g;\n/**\n * Note: this method is performance sensitive and has been optimized\n * https://github.com/sveltejs/svelte/pull/5701\n */\nfunction escape(value, is_attr = false) {\n    const str = String(value);\n    const pattern = is_attr ? ATTR_REGEX : CONTENT_REGEX;\n    pattern.lastIndex = 0;\n    let escaped = '';\n    let last = 0;\n    while (pattern.test(str)) {\n        const i = pattern.lastIndex - 1;\n        const ch = str[i];\n        escaped += str.substring(last, i) + (ch === '&' ? '&amp;' : (ch === '\"' ? '&quot;' : '&lt;'));\n        last = i + 1;\n    }\n    return escaped + str.substring(last);\n}\nfunction escape_attribute_value(value) {\n    // keep booleans, null, and undefined for the sake of `spread`\n    const should_escape = typeof value === 'string' || (value && typeof value === 'object');\n    return should_escape ? escape(value, true) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${name}>.`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(context || (parent_component ? parent_component.$$.context : [])),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    const assignment = (boolean && value === true) ? '' : `=\"${escape(value, true)}\"`;\n    return ` ${name}${assignment}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\nfunction style_object_to_string(style_object) {\n    return Object.keys(style_object)\n        .filter(key => style_object[key])\n        .map(key => `${key}: ${escape_attribute_value(style_object[key])};`)\n        .join(' ');\n}\nfunction add_styles(style_object) {\n    const styles = style_object_to_string(style_object);\n    return styles ? ` style=\"${styles}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n            // if the component was destroyed immediately\n            // it will update the `$$.on_destroy` reference to `null`.\n            // the destructured on_destroy may still reference to the old array\n            if (component.$$.on_destroy) {\n                component.$$.on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        flush_render_callbacks($$.after_update);\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: [],\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            if (!is_function(callback)) {\n                return noop;\n            }\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        if (!is_function(callback)) {\n            return noop;\n        }\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.58.0' }, detail), { bubbles: true }));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation, has_stop_immediate_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    if (has_stop_immediate_propagation)\n        modifiers.push('stopImmediatePropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction set_data_contenteditable_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction set_data_maybe_contenteditable_dev(text, data, attr_value) {\n    if (~contenteditable_truthy_values.indexOf(attr_value)) {\n        set_data_contenteditable_dev(text, data);\n    }\n    else {\n        set_data_dev(text, data);\n    }\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nfunction validate_dynamic_element(tag) {\n    const is_string = typeof tag === 'string';\n    if (tag && !is_string) {\n        throw new Error('<svelte:element> expects \"this\" attribute to be a string.');\n    }\n}\nfunction validate_void_dynamic_element(tag) {\n    if (tag && is_void(tag)) {\n        console.warn(`<svelte:element this=\"${tag}\"> is self-closing and cannot have content.`);\n    }\n}\nfunction construct_svelte_component_dev(component, props) {\n    const error_message = 'this={...} of <svelte:component> should specify a Svelte component.';\n    try {\n        const instance = new component(props);\n        if (!instance.$$ || !instance.$set || !instance.$on || !instance.$destroy) {\n            throw new Error(error_message);\n        }\n        return instance;\n    }\n    catch (err) {\n        const { message } = err;\n        if (typeof message === 'string' && message.indexOf('is not a constructor') !== -1) {\n            throw new Error(error_message);\n        }\n        else {\n            throw err;\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_styles, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_comment, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, comment, component_subscribe, compute_rest_props, compute_slots, construct_svelte_component, construct_svelte_component_dev, contenteditable_truthy_values, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, flush_render_callbacks, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, head_selector, identity, init, init_binding_group, init_binding_group_dynamic, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, is_void, listen, listen_dev, loop, loop_guard, merge_ssr_styles, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_custom_element_data_map, set_data, set_data_contenteditable, set_data_contenteditable_dev, set_data_dev, set_data_maybe_contenteditable, set_data_maybe_contenteditable_dev, set_dynamic_element_data, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, split_css_unit, spread, src_url_equal, start_hydrating, stop_immediate_propagation, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_dynamic_element, validate_each_argument, validate_each_keys, validate_slots, validate_store, validate_void_dynamic_element, xlink_attr };\n","export default {\n\tkanban: {\n\t\tSave: \"Save\",\n\t\tClose: \"Close\",\n\t\tDelete: \"Delete\",\n\t\tName: \"Name\",\n\t\tDescription: \"Description\",\n\t\tType: \"Type\",\n\t\t\"Start date\": \"Start date\",\n\t\t\"End date\": \"End date\",\n\n\t\tResult: \"Result\",\n\t\t\"No results\": \"No results\",\n\t\tSearch: \"Search\",\n\t\t\"Search in\": \"Search in\",\n\t\t\"Add new row\": \"Add new row\",\n\t\t\"Add new column\": \"Add new column\",\n\t\t\"Add new card\": \"Add new card\",\n\t\t\"Edit card\": \"Edit card\",\n\t\tEdit: \"Edit\",\n\n\t\tEverywhere: \"Everywhere\",\n\t\tLabel: \"Label\",\n\t\tStatus: \"Status\",\n\t\tColor: \"Color\",\n\t\tDate: \"Date\",\n\t\tPriority: \"Priority\",\n\t\tProgress: \"Progress\",\n\t\tUsers: \"Users\",\n\n\t\tUntitled: \"Untitled\",\n\t\tRename: \"Rename\",\n\t\t\"Move up\": \"Move up\",\n\t\t\"Move down\": \"Move down\",\n\t\t\"Move left\": \"Move left\",\n\t\t\"Move right\": \"Move right\",\n\t\tSort: \"Sort\",\n\t\t\"Label (a-z)\": \"Label (a-z)\",\n\t\t\"Label (z-a)\": \"Label (z-a)\",\n\t\t\"Description (a-z)\": \"Description (a-z)\",\n\t\t\"Description (z-a)\": \"Description (z-a)\",\n\n\t\tDuplicate: \"Duplicate\",\n\t\t\"Duplicate of\": \"Duplicate of\",\n\n\t\t\"Relates to\": \"Relates to\",\n\t\t\"Depends on\": \"Depends on\",\n\t\t\"Is required for\": \"Is required for\",\n\t\tDuplicates: \"Duplicates\",\n\t\t\"Is duplicated by\": \"Is duplicated by\",\n\t\t\"Parent for\": \"Parent for\",\n\t\t\"SubTask of\": \"SubTask of\",\n\n\t\tCancel: \"Cancel\",\n\t\t\"Link task\": \"Link task\",\n\t\t\"Select a relation\": \"Select a relation\",\n\t\t\"Select a task\": \"Select a task\",\n\n\t\t\"Would you like to delete this comment?\":\n\t\t\t\"Would you like to delete this comment?\",\n\t\t\"No comments yet\": \"No comments yet\",\n\t\t\"Would you like to delete this card?\":\n\t\t\t\"Would you like to delete this card?\",\n\t},\n};\n","const calendar = {\n\tmonthFull: [\n\t\t\"January\",\n\t\t\"February\",\n\t\t\"March\",\n\t\t\"April\",\n\t\t\"May\",\n\t\t\"June\",\n\t\t\"July\",\n\t\t\"August\",\n\t\t\"September\",\n\t\t\"October\",\n\t\t\"November\",\n\t\t\"December\",\n\t],\n\tmonthShort: [\n\t\t\"Jan\",\n\t\t\"Feb\",\n\t\t\"Mar\",\n\t\t\"Apr\",\n\t\t\"May\",\n\t\t\"Jun\",\n\t\t\"Jul\",\n\t\t\"Aug\",\n\t\t\"Sep\",\n\t\t\"Oct\",\n\t\t\"Nov\",\n\t\t\"Dec\",\n\t],\n\tdayFull: [\n\t\t\"Sunday\",\n\t\t\"Monday\",\n\t\t\"Tuesday\",\n\t\t\"Wednesday\",\n\t\t\"Thursday\",\n\t\t\"Friday\",\n\t\t\"Saturday\",\n\t],\n\tdayShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n\thours: \"Hours\",\n\tminutes: \"Minutes\",\n\tdone: \"Done\",\n\tclear: \"Clear\",\n\ttoday: \"Today\",\n\tam: [\"am\", \"AM\"],\n\tpm: [\"pm\", \"PM\"],\n\n\tweekStart: 7,\n\ttimeFormat: 24,\n};\n\nconst core = {\n\tok: \"OK\",\n\tcancel: \"Cancel\",\n};\n\nconst data = {\n\tcore,\n\tcalendar,\n};\n\nexport default data;\n","let iid = new Date().valueOf();\nconst uid = () => iid++;\nfunction tempID() {\n  return \"temp://\" + iid++;\n}\nfunction isTempID(v) {\n  return typeof v === \"string\" && v.length === 20 && parseInt(v.substr(7)) > 1e12;\n}\n\nclass _DataArray {\n  _pool;\n  _data;\n  constructor(raw) {\n    this._data = raw;\n    this._pool = /* @__PURE__ */ new Map();\n    for (let i = 0; i < raw.length; i++) {\n      const obj = raw[i];\n      this._pool.set(obj.id, obj);\n    }\n  }\n  add(raw) {\n    raw = { id: uid(), ...raw };\n    this._data.push(raw);\n    this._pool.set(raw.id, raw);\n  }\n  update(id, raw) {\n    const index = this._data.findIndex((link) => link.id == id);\n    const old = this._data[index];\n    const updated = { ...old, ...raw };\n    this._data[index] = updated;\n    this._pool.set(updated.id, updated);\n  }\n  remove(id) {\n    this._data = this._data.filter((a) => a.id != id);\n    this._pool.delete(id);\n  }\n  filter(cb) {\n    this._data = this._data.filter((x) => {\n      const check = cb(x);\n      if (!check)\n        this._pool.delete(x.id);\n      return check;\n    });\n  }\n  byId(id) {\n    return this._pool.get(id);\n  }\n  map(cb) {\n    return this._data.map(cb);\n  }\n  forEach(cb) {\n    this._data.forEach(cb);\n  }\n}\n\nclass DataTree {\n  _pool;\n  constructor(raw) {\n    const top = {\n      id: 0,\n      $level: 0,\n      data: [],\n      parent: null\n    };\n    const items = /* @__PURE__ */ new Map();\n    items.set(0, top);\n    this._pool = items;\n    if (raw && raw.length)\n      this.parse(raw, 0);\n  }\n  parse(raw, parent) {\n    const items = this._pool;\n    for (let i = 0; i < raw.length; i++) {\n      const obj = raw[i];\n      obj.parent = obj.parent || parent;\n      obj.data = null;\n      items.set(obj.id, obj);\n    }\n    for (let i = 0; i < raw.length; i++) {\n      const obj = raw[i];\n      const temp = items.get(obj.parent);\n      if (temp) {\n        if (!temp.data)\n          temp.data = [];\n        temp.data.push(obj);\n      }\n    }\n    const top = items.get(parent);\n    setLevel(top.data, top.$level + 1);\n  }\n  add(raw, index) {\n    this._pool.set(raw.id, raw);\n    const parent = this._pool.get(raw.parent || 0);\n    raw.$level = parent.$level + 1;\n    if (parent.data) {\n      if (index === -1)\n        parent.data.push(raw);\n      else\n        parent.data.splice(index, -1, raw);\n    } else\n      parent.data = [raw];\n  }\n  addAfter(raw, after) {\n    if (!after) {\n      return this.add(raw, -1);\n    }\n    const node = this.byId(after);\n    const parent = this.byId(node.parent);\n    const index = parent.data.indexOf(node) + 1;\n    raw.parent = parent.id;\n    raw.$level = parent.$level + 1;\n    this.add(raw, index);\n  }\n  remove(id) {\n    const obj = this._pool.get(id);\n    this._remove(obj);\n    const parent = this._pool.get(obj.parent);\n    parent.data = parent.data.filter((a) => a.id != id);\n    this._clearBranch(parent);\n  }\n  _remove(obj) {\n    if (obj.data) {\n      obj.data.forEach((i) => this._remove(i));\n    }\n    this._pool.delete(obj.id);\n  }\n  update(id, values) {\n    let obj = this._pool.get(id);\n    const branch = this._pool.get(obj.parent);\n    const index = branch.data.indexOf(obj);\n    obj = { ...obj, ...values };\n    branch.data[index] = obj;\n    this._pool.set(obj.id, obj);\n  }\n  move(id, mode, target) {\n    const now = this._pool.get(id);\n    const dropChild = mode === \"child\";\n    const tobj = this._pool.get(target);\n    const tLevel = tobj.$level + (dropChild ? 1 : 0);\n    if (!now || !tobj)\n      return;\n    const parent = this._pool.get(now.parent);\n    const newParent = dropChild ? tobj : this._pool.get(tobj.parent);\n    if (!newParent.data)\n      newParent.data = [];\n    const index = parent.data.indexOf(now);\n    parent.data.splice(index, 1);\n    const newIndex = dropChild ? newParent.data.length : newParent.data.indexOf(tobj) + (mode === \"after\" ? 1 : 0);\n    newParent.data.splice(newIndex, -1, now);\n    if (parent === newParent && index === newIndex)\n      return null;\n    now.parent = newParent.id;\n    if (now.$level !== tLevel)\n      setLevel([now], tLevel);\n    this._clearBranch(parent);\n  }\n  _clearBranch(obj) {\n    if (obj.data && !obj.data.length) {\n      if (obj.open)\n        delete obj.open;\n      obj.data = null;\n    }\n  }\n  toArray() {\n    const out = [];\n    toArray(this._pool.get(0).data, out);\n    return out;\n  }\n  byId(id) {\n    return this._pool.get(id);\n  }\n  getBranch(id) {\n    return this._pool.get(id).data;\n  }\n  forEach(cb) {\n    this._pool.forEach((value, key) => {\n      if (key !== 0)\n        cb(value);\n    });\n  }\n  eachChild(cb, parent) {\n    const p = this.byId(parent);\n    if (!p || !p.data)\n      return;\n    p.data.forEach((child, index) => {\n      cb(this.byId(child.id), index);\n      this.eachChild(cb, child.id);\n    });\n  }\n}\nfunction toArray(line, out) {\n  line.forEach((a) => {\n    out.push(a);\n    if (a.open === true) {\n      toArray(a.data, out);\n    }\n  });\n}\nfunction setLevel(data, level) {\n  for (let i = 0; i < data.length; i++) {\n    const next = data[i];\n    next.$level = level;\n    if (next.data)\n      setLevel(next.data, level + 1);\n  }\n}\n\nclass DataRouter {\n  _setter;\n  _routes;\n  _triggers;\n  _sources;\n  _prev;\n  _parsers;\n  constructor(s, r, p) {\n    this._setter = s;\n    this._routes = r;\n    this._parsers = p;\n    this._prev = {};\n    this._triggers = /* @__PURE__ */ new Map();\n    this._sources = /* @__PURE__ */ new Map();\n    this._routes.forEach((a) => {\n      a.in.forEach((k) => {\n        const arr = this._triggers.get(k) || [];\n        arr.push(a);\n        this._triggers.set(k, arr);\n      });\n      a.out.forEach((k) => {\n        const h = this._sources.get(k) || {};\n        a.in.forEach((i) => h[i] = true);\n        this._sources.set(k, h);\n      });\n    });\n    this._routes.forEach((a) => {\n      a.length = Math.max(\n        ...a.in.map((key) => _calckSize(key, this._sources, 1))\n      );\n    });\n  }\n  init(cfg) {\n    const next = {};\n    for (const key in cfg) {\n      if (this._prev[key] !== cfg[key]) {\n        const parser = this._parsers[key];\n        next[key] = parser ? parser(cfg[key]) : cfg[key];\n      }\n    }\n    this._prev = this._prev ? { ...this._prev, ...cfg } : { ...cfg };\n    this.setState(next);\n  }\n  setState(updates, ctx) {\n    this._setter(updates);\n    const needExec = !ctx;\n    ctx = ctx || [];\n    for (const key in updates) {\n      const trgs = this._triggers.get(key);\n      if (trgs) {\n        trgs.forEach((a) => {\n          if (ctx.indexOf(a) == -1) {\n            ctx.push(a);\n          }\n        });\n      }\n    }\n    if (needExec) {\n      this._execNext(ctx);\n    }\n  }\n  _execNext(ctx) {\n    while (ctx.length) {\n      ctx.sort((a, b) => a.length < b.length ? 1 : -1);\n      const next = ctx[ctx.length - 1];\n      ctx.splice(ctx.length - 1);\n      next.exec(ctx);\n    }\n  }\n}\nfunction _calckSize(key, sources, prev) {\n  const next = sources.get(key);\n  if (!next)\n    return prev;\n  const sizes = Object.keys(next).map((a) => _calckSize(a, sources, prev + 1));\n  return Math.max(...sizes);\n}\n\nclass Store {\n  _state;\n  _values;\n  _writable;\n  constructor(writable) {\n    this._writable = writable;\n    this._values = {};\n    this._state = {};\n  }\n  setState(data) {\n    const state = this._state;\n    for (const key in data) {\n      if (state[key]) {\n        state[key].set(data[key]);\n      } else {\n        this._state[key] = this._wrapWritable(key, data[key]);\n      }\n      this._values[key] = data[key];\n    }\n  }\n  getState() {\n    return this._values;\n  }\n  getReactive() {\n    return this._state;\n  }\n  _wrapWritable(key, val) {\n    const wr = this._writable(val);\n    wr.subscribe((v) => {\n      this._values[key] = v;\n    });\n    return wr;\n  }\n}\n\nclass EventBus {\n  _handlers;\n  _nextHandler;\n  constructor() {\n    this._nextHandler = () => null;\n    this._handlers = {};\n    this.exec = this.exec.bind(this);\n  }\n  on(name, handler) {\n    const prev = this._handlers[name];\n    if (!prev) {\n      this._handlers[name] = (ev) => {\n        resolvePromise(this._nextHandler, ev, name)(handler(ev));\n      };\n    } else {\n      this._handlers[name] = function(ev) {\n        resolvePromise(prev, ev)(handler(ev));\n      };\n    }\n  }\n  exec(name, ev) {\n    const handler = this._handlers[name];\n    if (handler) {\n      handler(ev);\n    } else {\n      this._nextHandler(name, ev);\n    }\n  }\n  setNext(next) {\n    this._nextHandler = next;\n  }\n}\nfunction resolvePromise(prev, ev, name) {\n  return (res) => {\n    if (res !== false) {\n      if (res && res.then)\n        res.then(resolvePromise(prev, ev, name));\n      else {\n        if (name)\n          prev(name, ev);\n        else\n          prev(ev);\n      }\n    }\n  };\n}\n\nclass EventBusRouter {\n  _dispatch;\n  _nextHandler;\n  constructor(dispatch) {\n    this._nextHandler = () => null;\n    this._dispatch = dispatch;\n    this.exec = this.exec.bind(this);\n  }\n  exec(name, ev) {\n    this._dispatch(name, ev);\n    if (this._nextHandler) {\n      this._nextHandler(name, ev);\n    }\n  }\n  setNext(next) {\n    this._nextHandler = next;\n  }\n}\n\nexport { _DataArray as DataArray, DataRouter, DataTree, EventBus, EventBusRouter, Store, isTempID, tempID, uid };\n//# sourceMappingURL=state-lib.es.js.map\n","export function locate(el, attr = \"data-id\") {\n    let node = el;\n    if (!node.tagName && el.target)\n        node = el.target;\n    while (node) {\n        if (node.getAttribute) {\n            const id = node.getAttribute(attr);\n            if (id)\n                return node;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nexport function locateAttr(el, attr = \"data-id\") {\n    const node = locate(el, attr);\n    if (node)\n        return node.getAttribute(attr);\n    return null;\n}\nexport function locateID(el, attr = \"data-id\") {\n    const node = locate(el, attr);\n    if (node) {\n        return id(node.getAttribute(attr));\n    }\n    return null;\n}\nexport function locateNode(el, node) {\n    let n = el;\n    while (n) {\n        if (n === node) {\n            return true;\n        }\n        n = n?.parentNode;\n    }\n    return null;\n}\nexport function id(value) {\n    if (typeof value === \"string\") {\n        const t = value * 1;\n        if (!isNaN(t))\n            return t;\n    }\n    return value;\n}\n//# sourceMappingURL=locate.js.map","import { locate, locateID } from \"./locate\";\nexport function delegateClick(node, handlers) {\n    let lastClick = null;\n    function handleClick(ev) {\n        const node = locate(ev);\n        if (!node)\n            return;\n        const id = parseInt(node.dataset.id);\n        let action;\n        let test = ev.target;\n        while (test != node) {\n            action = test.dataset ? test.dataset.action : null;\n            if (action) {\n                if (handlers[action])\n                    handlers[action](id, ev);\n                lastClick = new Date().valueOf();\n                break;\n            }\n            test = test.parentNode;\n        }\n        if (handlers.click && !action)\n            handlers.click(id, ev);\n    }\n    function handleDblClick(ev) {\n        if (lastClick && new Date().valueOf() - lastClick < 200)\n            return;\n        const id = locateID(ev);\n        if (id && handlers.dblclick)\n            handlers.dblclick(id, ev);\n    }\n    node.addEventListener(\"click\", handleClick);\n    node.addEventListener(\"dblclick\", handleDblClick);\n}\n//# sourceMappingURL=delegateClick.js.map","let id = new Date().valueOf();\nexport function uid() {\n    id += 1;\n    return id;\n}\n//# sourceMappingURL=uid.js.map","function toFixed(num) {\n    if (num < 10)\n        return \"0\" + num;\n    return num.toString();\n}\nfunction toFixedMs(num) {\n    const temp = toFixed(num);\n    return temp.length == 2 ? \"0\" + temp : temp;\n}\nexport function getDuodecade(year) {\n    const start = Math.floor(year / 11) * 11;\n    return {\n        start,\n        end: start + 11,\n    };\n}\nfunction getISOWeek(ndate) {\n    let nday = ndate.getDay();\n    if (nday === 0) {\n        nday = 7;\n    }\n    const first_thursday = new Date(ndate.valueOf());\n    first_thursday.setDate(ndate.getDate() + (4 - nday));\n    const year_number = first_thursday.getFullYear(); // year of the first Thursday\n    const ordinal_date = Math.floor((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) /\n        86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\n    const weekNumber = 1 + Math.floor(ordinal_date / 7);\n    return weekNumber;\n}\nconst emptyAmPm = [\"\", \"\"];\nfunction date2str(mask, date, locale) {\n    switch (mask) {\n        case \"%d\":\n            return toFixed(date.getDate());\n        case \"%m\":\n            return toFixed(date.getMonth() + 1);\n        case \"%j\":\n            return date.getDate();\n        case \"%n\":\n            return date.getMonth() + 1;\n        case \"%y\":\n            return toFixed(date.getFullYear() % 100);\n        case \"%Y\":\n            return date.getFullYear();\n        case \"%D\":\n            return locale.dayShort[date.getDay()];\n        case \"%l\":\n            return locale.dayFull[date.getDay()];\n        case \"%M\":\n            return locale.monthShort[date.getMonth()];\n        case \"%F\":\n            return locale.monthFull[date.getMonth()];\n        case \"%h\":\n            return toFixed(((date.getHours() + 11) % 12) + 1);\n        case \"%g\":\n            return ((date.getHours() + 11) % 12) + 1;\n        case \"%G\":\n            return date.getHours();\n        case \"%H\":\n            return toFixed(date.getHours());\n        case \"%i\":\n            return toFixed(date.getMinutes());\n        case \"%a\":\n            return ((date.getHours() > 11 ? locale.pm : locale.am) || emptyAmPm)[0];\n        case \"%A\":\n            return ((date.getHours() > 11 ? locale.pm : locale.am) || emptyAmPm)[1];\n        case \"%s\":\n            return toFixed(date.getSeconds());\n        case \"%S\":\n            return toFixedMs(date.getMilliseconds());\n        case \"%W\":\n            return toFixed(getISOWeek(date));\n        case \"%c\": {\n            let str = date.getFullYear() + \"\";\n            str += \"-\" + toFixed(date.getMonth() + 1);\n            str += \"-\" + toFixed(date.getDate());\n            str += \"T\";\n            str += toFixed(date.getHours());\n            str += \":\" + toFixed(date.getMinutes());\n            str += \":\" + toFixed(date.getSeconds());\n            return str;\n        }\n        default:\n            return mask;\n    }\n}\nconst formatFlags = /%[a-zA-Z]/g;\nexport function dateToString(format, locale) {\n    if (typeof format == \"function\")\n        return format;\n    return function (date) {\n        if (!date)\n            return \"\";\n        if (!date.getMonth)\n            date = new Date(date);\n        return format.replace(formatFlags, s => date2str(s, date, locale));\n    };\n}\n//# sourceMappingURL=dates.js.map","function isObject(a) {\n    return a && typeof a === \"object\" && !Array.isArray(a);\n}\nfunction extend(a, b) {\n    for (const key in b) {\n        const from = b[key];\n        if (isObject(a[key]) && isObject(from)) {\n            a[key] = extend({ ...a[key] }, b[key]);\n        }\n        else {\n            a[key] = b[key];\n        }\n    }\n    return a;\n}\nexport function locale(words) {\n    return {\n        getGroup(group) {\n            const block = words[group];\n            return (key) => {\n                return block ? block[key] || key : key;\n            };\n        },\n        getRaw() {\n            return words;\n        },\n        extend(values, optional) {\n            if (!values)\n                return this;\n            let data;\n            if (optional) {\n                data = extend({ ...values }, words);\n            }\n            else {\n                data = extend({ ...words }, values);\n            }\n            return locale(data);\n        },\n    };\n}\n//# sourceMappingURL=locale.js.map","<script>\n\timport { uid } from \"@xbs/lib-core-dom\";\n\n\texport let value = \"\";\n\texport let id = uid();\n\texport let placeholder = \"\";\n\texport let disabled = false;\n\texport let error = false;\n\n</script>\n\n<textarea bind:value {id} {disabled} {placeholder} class:error />\n\n<style>\n\ttextarea {\n\t\tdisplay: block;\n\t\tresize: vertical;\n\t\twidth: var(--wx-input-width);\n\t\tmax-width: 100%;\n\t\tpadding: var(--wx-input-padding);\n\t\toutline: none;\n\t\tmin-height: 100px;\n\t\tfont-family: var(--wx-input-font-family);\n\t\tfont-size: var(--wx-input-font-size);\n\t\tline-height: var(--wx-input-line-height);\n\t\tfont-weight: var(--wx-input-font-weigth);\n\t\ttext-align: var(--wx-input-text-align);\n\t\tcolor: var(--wx-input-font-color);\n\t\tborder: var(--wx-input-border);\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tbackground: var(--wx-input-background);\n\t}\n\ttextarea:focus {\n\t\tborder: var(--wx-input-border-focus);\n\t}\n\ttextarea::placeholder {\n\t\tcolor: var(--wx-input-placeholder-color);\n\t}\n\n\ttextarea[disabled] {\n\t\tcursor: not-allowed;\n\t\tborder: var(--wx-input-border-disabled);\n\t\tcolor: var(--wx-color-font-disabled);\n\t\tbackground: var(--wx-input-background-disabled);\n\t\tresize: none;\n\t}\n\ttextarea[disabled]::placeholder {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\n\ttextarea.error {\n\t\tborder-color: var(--wx-color-danger);\n\t\tcolor: var(--wx-color-danger);\n\t}\n\n</style>\n","<script>\n\texport let type = \"\";\n\texport let click;\n\texport let icon = \"\";\n\texport let disabled = false;\n\n\tconst SLOTS = $$props.$$slots;\n\n</script>\n\n<button\n\tclass={type}\n\tclass:icon={!SLOTS || !SLOTS.default}\n\t{disabled}\n\ton:click={click}>\n\t{#if icon}<i class={icon} />{/if}\n\t<slot />\n</button>\n\n<style>\n\tbutton {\n\t\tdisplay: inline-block;\n\t\tvertical-align: top;\n\t\ttext-decoration: none;\n\t\ttext-align: center;\n\t\tletter-spacing: normal;\n\t\ttext-transform: var(--wx-button-text-transform);\n\t\tfont-family: var(--wx-button-font-family);\n\t\tfont-size: var(--wx-button-font-size);\n\t\tline-height: var(--wx-button-line-height);\n\t\tfont-weight: var(--wx-button-font-weigth);\n\t\tpadding: var(--wx-button-padding);\n\t\tborder: var(--wx-button-border);\n\t\tborder-radius: var(--wx-button-border-radius);\n\t\tbackground-color: var(--wx-button-background);\n\t\tcolor: var(--wx-button-font-color);\n\t\tcursor: pointer;\n\t\tbox-shadow: none;\n\t\ttransition: none;\n\t\tmax-width: 100%;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tuser-select: none;\n\t}\n\n\tbutton:hover {\n\t\tbackground-image: linear-gradient(\n\t\t\trgba(0, 0, 0, 0.1) 0%,\n\t\t\trgba(0, 0, 0, 0.1) 100%\n\t\t);\n\t}\n\n\tbutton,\n\tbutton:focus,\n\tbutton:active {\n\t\toutline: none;\n\t}\n\n\tbutton:active:not([disabled]) {\n\t\topacity: 0.8;\n\t}\n\n\tbutton[disabled] {\n\t\tcursor: not-allowed;\n\t\tbackground: var(--wx-color-disabled);\n\t\tborder-color: transparent;\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\n\t.block {\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t}\n\n\t.square {\n\t\tborder-radius: 0;\n\t}\n\n\ti {\n\t\tposition: relative;\n\t\tdisplay: inline-block;\n\t\tvertical-align: top;\n\t\tfont-size: var(--wx-button-icon-size);\n\t\tline-height: 1;\n\t\theight: var(--wx-button-line-height);\n\t\tmargin-right: 2px;\n\t\topacity: 0.7;\n\t}\n\ti:before {\n\t\tdisplay: block;\n\t\tposition: relative;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t}\n\n\t.icon {\n\t\tpadding-left: var(--wx-button-icon-indent);\n\t\tpadding-right: var(--wx-button-icon-indent);\n\t}\n\t.icon i {\n\t\tmargin: 0;\n\t\topacity: 1;\n\t}\n\n\t.primary {\n\t\tbackground-color: var(--wx-color-primary);\n\t\tcolor: var(--wx-color-primary-font);\n\t}\n\n\t.secondary {\n\t\tbackground: var(--wx-color-secondary);\n\t\tcolor: var(--wx-color-secondary-font);\n\t\tborder-color: var(--wx-color-secondary-border);\n\t}\n\t.secondary:hover:not([disabled]),\n\t.secondary.pressed:not([disabled]),\n\t.secondary.pressed:hover:not([disabled]),\n\t.secondary.pressed:active:not([disabled]) {\n\t\tbackground: var(--wx-color-secondary-hover);\n\t\tcolor: var(--wx-color-secondary-font-hover);\n\t}\n\t.secondary[disabled] {\n\t\tborder-color: var(--wx-color-secondary-border-disabled);\n\t}\n\n\t.danger {\n\t\tbackground-color: var(--wx-color-danger);\n\t\tcolor: var(--wx-button-danger-font-color);\n\t}\n\n\t.link {\n\t\tcolor: var(--wx-color-link);\n\t\tpadding: 0;\n\t\tborder: none;\n\t\tvertical-align: baseline;\n\t}\n\t.link,\n\t.link:hover,\n\t.link[disabled] {\n\t\tbackground: transparent;\n\t}\n\t.link[disabled] {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\n\t.pressed,\n\t.pressed:hover,\n\t.pressed:active,\n\t.pressed[disabled] {\n\t\topacity: 0.8;\n\t\tbackground-image: linear-gradient(\n\t\t\trgba(0, 0, 0, 0.1) 0%,\n\t\t\trgba(0, 0, 0, 0.1) 100%\n\t\t);\n\t\tbox-shadow: inset 0 2px 2px 1px rgba(0, 0, 0, 0.15);\n\t}\n\n</style>\n","<script>\n\timport { createEventDispatcher } from \"svelte\";\n\timport { uid } from \"@xbs/lib-core-dom\";\n\n\tconst dispatch = createEventDispatcher();\n\n\texport let id = uid();\n\texport let label = \"\";\n\texport let value = \"\";\n\texport let checked = false;\n\texport let style = \"\";\n\texport let disabled = false;\n\n\tfunction handlerChange({ target }) {\n\t\tchecked = target.checked;\n\t\tdispatch(\"change\", { value, checked });\n\t}\n\n</script>\n\n<div {style}>\n\t<input\n\t\ttype=\"checkbox\"\n\t\t{id}\n\t\t{disabled}\n\t\t{value}\n\t\t{checked}\n\t\ton:change={handlerChange} />\n\t<label for={id}>\n\t\t<span />\n\t\t{#if label}<span>{label}</span>{/if}\n\t</label>\n</div>\n\n<style>\n\tdiv {\n\t\tposition: relative;\n\t\tdisplay: inline-block;\n\t\tvertical-align: top;\n\t\tmax-width: var(--wx-input-width);\n\t}\n\tinput {\n\t\tappearance: none;\n\t\twidth: 0;\n\t\theight: 0;\n\t\topacity: 0;\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\tlabel {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: flex-start;\n\t\tfont-family: var(--wx-checkbox-font-family);\n\t\tfont-size: var(--wx-checkbox-font-size);\n\t\tline-height: var(--wx-checkbox-line-height);\n\t\tfont-weight: var(--wx-checkbox-font-weight);\n\t\tcolor: var(--wx-checkbox-font-color);\n\t\tcursor: pointer;\n\t}\n\tspan {\n\t\tdisplay: block;\n\t}\n\tspan + span {\n\t\tmargin-left: 8px;\n\t\tpadding-top: calc(\n\t\t\t(var(--wx-checkbox-height) - var(--wx-checkbox-line-height)) / 2\n\t\t);\n\t\tpadding-bottom: calc(\n\t\t\t(var(--wx-checkbox-height) - var(--wx-checkbox-line-height)) / 2\n\t\t);\n\t}\n\tspan:first-child {\n\t\tposition: relative;\n\t\tflex-shrink: 0;\n\t\tpadding-top: calc(\n\t\t\t(var(--wx-checkbox-height) - var(--wx-checkbox-size)) / 2\n\t\t);\n\t\tpadding-bottom: calc(\n\t\t\t(var(--wx-checkbox-height) - var(--wx-checkbox-size)) / 2\n\t\t);\n\t}\n\tspan:first-child:before {\n\t\tcontent: \"\";\n\t\tdisplay: block;\n\t\twidth: var(--wx-checkbox-size);\n\t\theight: var(--wx-checkbox-size);\n\t\tborder: var(--wx-checkbox-border-width) solid\n\t\t\tvar(--wx-checkbox-border-color);\n\t\tborder-radius: var(--wx-checkbox-border-radius);\n\t\tbackground: var(--wx-input-background);\n\t}\n\tspan:first-child:after {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\tdisplay: none;\n\t\tleft: 50%;\n\t\ttop: 50%;\n\t\twidth: calc(var(--wx-checkbox-size) * 0.56);\n\t\theight: calc(var(--wx-checkbox-size) * 0.32);\n\t\tborder-style: solid;\n\t\tborder-color: var(--wx-color-primary-font);\n\t\tborder-width: 0 0 calc(var(--wx-checkbox-size) * 0.12)\n\t\t\tcalc(var(--wx-checkbox-size) * 0.12);\n\t\ttransform: rotate(-45deg);\n\t\tmargin-left: calc(var(--wx-checkbox-size) * -0.26);\n\t\tmargin-top: calc(var(--wx-checkbox-size) * -0.24);\n\t}\n\tinput:checked ~ label span:first-child:before {\n\t\tbackground: var(--wx-color-primary);\n\t\tborder-color: transparent;\n\t}\n\tinput:checked ~ label span:first-child:after {\n\t\tdisplay: block;\n\t}\n\tinput[disabled] ~ label {\n\t\tcolor: var(--wx-checkbox-border-color-disabled);\n\t\tcursor: not-allowed;\n\t}\n\tinput[disabled]:not(:checked) ~ label span:first-child:before {\n\t\tborder-color: var(--wx-checkbox-border-color-disabled);\n\t}\n\tinput[disabled]:checked ~ label span:first-child:before {\n\t\tbackground: var(--wx-checkbox-border-color-disabled);\n\t}\n\tinput[disabled] ~ label span:first-child:after {\n\t\tborder-color: var(--wx-input-background);\n\t}\n\n</style>\n","<script>\n\timport { afterUpdate } from \"svelte\";\n\n\texport let position = \"bottom\";\n\texport let align = \"start\";\n\texport let autoFit = true;\n\texport let cancel = null;\n\texport let width = \"100%\";\n\n\tlet node;\n\n\tafterUpdate(() => {\n\t\tif (autoFit) {\n\t\t\tconst nodeCoords = node.getBoundingClientRect();\n\t\t\tconst bodyCoords = document.body.getBoundingClientRect();\n\n\t\t\tif (nodeCoords.right >= bodyCoords.right) {\n\t\t\t\talign = \"end\";\n\t\t\t}\n\n\t\t\tif (nodeCoords.bottom >= bodyCoords.bottom) {\n\t\t\t\tposition = \"top\";\n\t\t\t}\n\t\t\treturn `${position}-${align}`;\n\t\t}\n\t});\n\n\tfunction down(e) {\n\t\tif (!node.contains(e.target)) {\n\t\t\tif (cancel) cancel(e);\n\t\t}\n\t}\n\n</script>\n\n<svelte:body on:mousedown={down} />\n\n<div\n\tbind:this={node}\n\tclass=\"dropdown {`${position}-${align}`}\"\n\tstyle=\"width:{width}\">\n\t<slot />\n</div>\n\n<style>\n\t.dropdown {\n\t\tposition: absolute;\n\t\tz-index: 5;\n\t\tbackground: var(--wx-popup-background);\n\t\tbox-shadow: var(--wx-popup-shadow);\n\t\tborder: var(--wx-popup-border);\n\t\tborder-radius: var(--wx-popup-border-radius);\n\t\toverflow: hidden;\n\t}\n\n\t.top-center {\n\t\ttop: 0;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -100%) translateY(-2px);\n\t}\n\n\t.top-start {\n\t\ttop: 0;\n\t\tleft: 0;\n\t\ttransform: translateY(-100%) translateY(-2px);\n\t}\n\n\t.top-end {\n\t\ttop: 0;\n\t\tright: 0;\n\t\ttransform: translateY(-100%) translateY(-2px);\n\t}\n\n\t.bottom-center {\n\t\tbottom: 0;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, 100%) translateY(2px);\n\t}\n\n\t.bottom-start {\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\ttransform: translateY(100%) translateY(2px);\n\t}\n\n\t.bottom-end {\n\t\tbottom: 0;\n\t\tright: 0;\n\t\ttransform: translateY(100%) translateY(2px);\n\t}\n\n\t.left-center {\n\t\tbottom: 50%;\n\t\tleft: 0;\n\t\ttransform: translate(-100%, 50%) translateX(-2px);\n\t}\n\n\t.left-start {\n\t\ttop: 0;\n\t\tleft: 0;\n\t\ttransform: translateX(-100%) translateX(-2px);\n\t}\n\n\t.left-end {\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\ttransform: translateX(-100%) translateX(-2px);\n\t}\n\n\t.right-center {\n\t\tbottom: 50%;\n\t\tright: 0;\n\t\ttransform: translate(100%, 50%) translateX(2px);\n\t}\n\n\t.right-start {\n\t\ttop: 0;\n\t\tright: 0;\n\t\ttransform: translateX(100%) translateX(2px);\n\t}\n\n\t.right-end {\n\t\tbottom: 0;\n\t\tright: 0;\n\t\ttransform: translateX(100%) translateX(2px);\n\t}\n\n</style>\n","<script>\n\timport { uid } from \"@xbs/lib-core-dom\";\n\timport Dropdown from \"./Dropdown.svelte\";\n\n\texport let colors = [\n\t\t\"#00a037\",\n\t\t\"#df282f\",\n\t\t\"#fd772c\",\n\t\t\"#6d4bce\",\n\t\t\"#b26bd3\",\n\t\t\"#c87095\",\n\t\t\"#90564d\",\n\t\t\"#eb2f89\",\n\t\t\"#ea77c0\",\n\t\t\"#777676\",\n\t\t\"#a9a8a8\",\n\t\t\"#9bb402\",\n\t\t\"#e7a90b\",\n\t\t\"#0bbed7\",\n\t\t\"#038cd9\",\n\t];\n\texport let value = \"\";\n\texport let id = uid();\n\texport let clear = true;\n\texport let placeholder = \"\";\n\texport let disabled = false;\n\texport let error = false;\n\n\tlet popup;\n\n\tfunction selectColor(color) {\n\t\tvalue = color;\n\t\tpopup = null;\n\t}\n\tfunction handleClear() {\n\t\tvalue = null;\n\t}\n\tfunction handlePopup() {\n\t\tif (disabled) return false;\n\t\tpopup = true;\n\t}\n\n</script>\n\n<div class=\"color-picker\" on:click={handlePopup}>\n\t<input\n\t\t{value}\n\t\treadonly\n\t\t{id}\n\t\t{placeholder}\n\t\t{disabled}\n\t\tclass:error\n\t\tclass:focus={popup} />\n\n\t{#if clear && value && !disabled}\n\t\t<i class=\"clear wxi-close\" on:click|stopPropagation={handleClear} />\n\t{/if}\n\n\t{#if value}\n\t\t<div\n\t\t\tclass=\"color selected\"\n\t\t\tstyle=\"background-color: {value || '#00a037'}\" />\n\t{:else}\n\t\t<div class=\"empty selected\" />\n\t{/if}\n\n\t{#if popup}\n\t\t<Dropdown cancel={() => (popup = null)}>\n\t\t\t<div class=\"colors\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"empty\"\n\t\t\t\t\ton:click|stopPropagation={() => selectColor('')} />\n\t\t\t\t{#each colors as color}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"color\"\n\t\t\t\t\t\tstyle=\"background-color: {color}\"\n\t\t\t\t\t\ton:click|stopPropagation={() => selectColor(color)} />\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</Dropdown>\n\t{/if}\n</div>\n\n<style>\n\t.color-picker {\n\t\tposition: relative;\n\t\twidth: var(--wx-input-width);\n\t}\n\n\t.selected {\n\t\tposition: absolute;\n\t\tleft: var(--wx-input-icon-indent);\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t}\n\n\t.colors {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 8px;\n\t\tpadding: 8px;\n\t}\n\n\t.color {\n\t\twidth: var(--wx-input-icon-size);\n\t\theight: var(--wx-input-icon-size);\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tcursor: pointer;\n\t}\n\n\tinput {\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t\theight: var(--wx-input-height);\n\t\toutline: none;\n\t\tbackground: var(--wx-input-background);\n\t\tborder: var(--wx-input-border);\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tfont-family: var(--wx-input-font-family);\n\t\tfont-size: var(--wx-input-font-size);\n\t\tline-height: var(--wx-input-line-height);\n\t\tfont-weight: var(--wx-input-font-weigth);\n\t\ttext-align: var(--wx-input-text-align);\n\t\tcolor: var(--wx-input-font-color);\n\t\tpadding: var(--wx-input-padding);\n\t\tpadding-right: calc(\n\t\t\tvar(--wx-input-icon-size) + var(--wx-input-icon-indent) * 2\n\t\t);\n\t\tpadding-left: calc(\n\t\t\tvar(--wx-input-icon-size) + var(--wx-input-icon-indent) * 2\n\t\t);\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\tinput.focus {\n\t\tborder: var(--wx-input-border-focus);\n\t}\n\tinput::placeholder {\n\t\tcolor: var(--wx-input-placeholder-color);\n\t}\n\tinput[disabled] {\n\t\tcursor: not-allowed;\n\t\tborder: var(--wx-input-border-disabled);\n\t\tcolor: var(--wx-color-font-disabled);\n\t\tbackground: var(--wx-input-background-disabled);\n\t}\n\tinput[disabled]::placeholder {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\tinput[disabled] ~ .color,\n\tinput[disabled] ~ .empty {\n\t\tcursor: not-allowed;\n\t}\n\tinput.error {\n\t\tborder-color: var(--wx-color-danger);\n\t\tcolor: var(--wx-color-danger);\n\t}\n\n\t.empty {\n\t\twidth: var(--wx-input-icon-size);\n\t\theight: var(--wx-input-icon-size);\n\t\tborder: var(--wx-input-border);\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tbackground: linear-gradient(\n\t\t\tto top left,\n\t\t\trgba(0, 0, 0, 0) 0%,\n\t\t\trgba(0, 0, 0, 0) calc(50% - 1px),\n\t\t\trgb(255, 0, 0) 50%,\n\t\t\trgba(0, 0, 0, 0) calc(50% + 1px),\n\t\t\trgba(0, 0, 0, 0) 100%\n\t\t);\n\t\tcursor: pointer;\n\t\tuser-select: none;\n\t}\n\n\t.clear {\n\t\tposition: absolute;\n\t\tright: var(--wx-input-icon-indent);\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tfont-size: var(--wx-input-icon-size);\n\t\tline-height: 1;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\twidth: var(--wx-input-icon-size);\n\t\theight: var(--wx-input-icon-size);\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tcolor: var(--wx-input-icon-color);\n\t\tcursor: pointer;\n\t}\n\t.clear:hover {\n\t\tbackground: var(--wx-background-hover);\n\t}\n\n</style>\n","<script>\n\timport { createEventDispatcher, onMount } from \"svelte\";\n\timport { getListHandlers } from \"./listnav\";\n\timport Dropdown from \"../Dropdown.svelte\";\n\n\texport let items = [];\n\n\tlet list;\n\tlet navIndex = null;\n\n\tconst dispatch = createEventDispatcher();\n\tconst { move, keydown, init, navigate } = getListHandlers();\n\n\tconst select = () => dispatch(\"select\", { id: items[navIndex]?.id });\n\t$: init(list, items, i => (navIndex = i), select);\n\n\tonMount(() => {\n\t\tdispatch(\"ready\", { navigate, keydown, move });\n\t});\n\n</script>\n\n{#if navIndex !== null}\n\t<Dropdown cancel={() => navigate(null)}>\n\t\t<div\n\t\t\tclass=\"list\"\n\t\t\tbind:this={list}\n\t\t\ton:click|stopPropagation={select}\n\t\t\ton:mousemove={move}>\n\t\t\t{#if items.length}\n\t\t\t\t{#each items as data, index (data.id)}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"item\"\n\t\t\t\t\t\tclass:focus={index === navIndex}\n\t\t\t\t\t\tdata-id={data.id}>\n\t\t\t\t\t\t<slot option={data}>{data.name}</slot>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t{:else}\n\t\t\t\t<div class=\"no-data\">No data</div>\n\t\t\t{/if}\n\t\t</div>\n\t</Dropdown>\n{/if}\n\n<style>\n\t.list {\n\t\tmax-height: 250px;\n\t\toverflow-y: auto;\n\t}\n\n\t.item {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tfont-family: var(--wx-input-font-family);\n\t\tfont-size: var(--wx-input-font-size);\n\t\tline-height: var(--wx-input-line-height);\n\t\tfont-weight: var(--wx-input-font-weigth);\n\t\tcolor: var(--wx-input-font-color);\n\t\tpadding: var(--wx-input-padding);\n\t\tcursor: pointer;\n\t}\n\t/* .item.selected {\n\t\tbackground: var(--wx-color-primary);\n\t\tcolor: var(--wx-color-primary-font);\n\t} */\n\t.item.focus {\n\t\tbackground: var(--wx-background-hover);\n\t}\n\t/* .item.selected.navigate {\n\t\tbackground: var(--wx-color-primary-hover);\n\t} */\n\t.no-data {\n\t\tpadding: var(--wx-input-padding);\n\t}\n\n</style>\n","import { locateID } from \"@xbs/lib-core-dom\";\n\nexport function getListHandlers() {\n\tlet navIndex = null;\n\tlet isVisible = false;\n\n\tlet list, options, navCallback, selectCallback;\n\tconst init = (l, o, n, c) => {\n\t\tlist = l;\n\t\toptions = o;\n\t\tnavCallback = n;\n\t\tselectCallback = c;\n\t};\n\n\tconst setNav = index => {\n\t\tnavIndex = index;\n\t\tisVisible = navIndex !== null;\n\t\tnavCallback(navIndex);\n\t};\n\tconst navigate = (dir, ev) => {\n\t\tconst index =\n\t\t\tdir === null\n\t\t\t\t? null\n\t\t\t\t: Math.max(0, Math.min(navIndex + dir, options.length - 1));\n\t\tif (index === navIndex) return;\n\t\tsetNav(index);\n\n\t\tif (navIndex && list) {\n\t\t\tconst next = list.querySelectorAll(`.list > .item`)[navIndex];\n\t\t\tif (next) {\n\t\t\t\tnext.scrollIntoView({ block: \"nearest\" });\n\t\t\t\tif (ev) ev.preventDefault();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst move = ev => {\n\t\tconst id = locateID(ev);\n\t\t// if we have id:\"1\", the locateID will return 1 as number\n\t\t// so using non-strict comparison\n\t\tconst index = options.findIndex(a => a.id == id);\n\n\t\tif (index !== navIndex) {\n\t\t\tsetNav(index);\n\t\t}\n\t};\n\n\tconst keydown = ev => {\n\t\tswitch (ev.code) {\n\t\t\tcase \"Enter\":\n\t\t\t\tisVisible ? selectCallback() : setNav(0);\n\t\t\t\tbreak;\n\n\t\t\tcase \"Space\":\n\t\t\t\tisVisible ? null : setNav(0);\n\t\t\t\tbreak;\n\n\t\t\tcase \"Escape\":\n\t\t\t\tnavCallback((navIndex = null));\n\t\t\t\tbreak;\n\n\t\t\tcase \"Tab\":\n\t\t\t\tnavCallback((navIndex = null));\n\t\t\t\tbreak;\n\n\t\t\tcase \"ArrowDown\":\n\t\t\t\tisVisible ? navigate(1, ev) : setNav(0);\n\t\t\t\tbreak;\n\n\t\t\tcase \"ArrowUp\":\n\t\t\t\tisVisible ? navigate(-1, ev) : setNav(0);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\treturn { move, keydown, init, navigate };\n}\n","<script>\n\timport { createEventDispatcher } from \"svelte\";\n\timport List from \"./helpers/List.svelte\";\n\timport { uid } from \"@xbs/lib-core-dom\";\n\n\texport let value = \"\";\n\texport let id = uid();\n\texport let options = [];\n\texport let textField = \"label\";\n\texport let placeholder = \"\";\n\texport let disabled = false;\n\texport let error = false;\n\n\tconst dispatch = createEventDispatcher();\n\n\tlet text = \"\";\n\tlet selected = null;\n\tlet filterOptions = [];\n\n\tlet navigate;\n\tlet keydown;\n\tfunction ready(ev) {\n\t\tnavigate = ev.detail.navigate;\n\t\tkeydown = ev.detail.keydown;\n\t}\n\n\tlet prevValue;\n\t$: {\n\t\tif (prevValue != value) {\n\t\t\ttext =\n\t\t\t\tvalue || value === 0\n\t\t\t\t\t? options.find(a => a.id === value)[textField]\n\t\t\t\t\t: \"\";\n\t\t\tprevValue = value;\n\t\t}\n\t}\n\t$: filterOptions = options;\n\n\tfunction select(ev) {\n\t\tconst id = ev.detail.id;\n\n\t\tif (id || id === 0) {\n\t\t\tselected = filterOptions.find(a => a.id === id);\n\t\t\ttext = selected[textField];\n\t\t\tvalue = selected.id;\n\n\t\t\tfilterOptions = options;\n\n\t\t\tnavigate(null);\n\t\t\tdispatch(\"select\", { selected });\n\t\t}\n\t}\n\n\tfunction input() {\n\t\tfilterOptions = text\n\t\t\t? options.filter(i =>\n\t\t\t\t\ti[textField].toLowerCase().includes(text.toLowerCase())\n\t\t\t  )\n\t\t\t: options;\n\t\tif (filterOptions.length) navigate(0);\n\t\telse navigate(null);\n\t}\n\n</script>\n\n<div class=\"combo\" on:click={() => navigate(0)} on:keydown={e => keydown(e)}>\n\t<input\n\t\t{id}\n\t\tbind:value={text}\n\t\tclass:error\n\t\t{disabled}\n\t\t{placeholder}\n\t\ton:input={input} />\n\n\t<i class=\"icon wxi-angle-down\" />\n\n\t{#if !disabled}\n\t\t<List\n\t\t\tlet:option\n\t\t\titems={filterOptions}\n\t\t\ton:ready={ready}\n\t\t\ton:select={select}>\n\t\t\t<slot {option}>{option.name}</slot>\n\t\t</List>\n\t{/if}\n</div>\n\n<style>\n\t.combo {\n\t\tposition: relative;\n\t\twidth: var(--wx-input-width);\n\t}\n\n\tinput {\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t\theight: var(--wx-input-height);\n\t\toutline: none;\n\t\tbackground: var(--wx-input-background);\n\t\tborder: var(--wx-input-border);\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tfont-family: var(--wx-input-font-family);\n\t\tfont-size: var(--wx-input-font-size);\n\t\tline-height: var(--wx-input-line-height);\n\t\tfont-weight: var(--wx-input-font-weigth);\n\t\ttext-align: var(--wx-input-text-align);\n\t\tcolor: var(--wx-input-font-color);\n\t\tpadding: var(--wx-input-padding);\n\t\tpadding-right: calc(\n\t\t\tvar(--wx-input-icon-size) + var(--wx-input-icon-indent) * 2\n\t\t);\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tcursor: pointer;\n\t}\n\tinput:focus {\n\t\tborder: var(--wx-input-border-focus);\n\t}\n\tinput::placeholder {\n\t\tcolor: var(--wx-input-placeholder-color);\n\t}\n\tinput[disabled] {\n\t\tcursor: not-allowed;\n\t\tborder: var(--wx-input-border-disabled);\n\t\tcolor: var(--wx-color-font-disabled);\n\t\tbackground: var(--wx-input-background-disabled);\n\t}\n\tinput[disabled]::placeholder {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\tinput[disabled] ~ .icon {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\tinput.error {\n\t\tborder-color: var(--wx-color-danger);\n\t\tcolor: var(--wx-color-danger);\n\t}\n\tinput.error ~ .icon {\n\t\tcolor: var(--wx-color-danger);\n\t}\n\n\t.icon {\n\t\tposition: absolute;\n\t\tright: var(--wx-input-icon-indent);\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tfont-size: var(--wx-input-icon-size);\n\t\tline-height: 1;\n\t\twidth: var(--wx-input-icon-size);\n\t\theight: var(--wx-input-icon-size);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tpointer-events: none;\n\t\tuser-select: none;\n\t\tcolor: var(--wx-input-icon-color);\n\t}\n\t.icon:before {\n\t\tdisplay: block;\n\t}\n\n</style>\n","<script>\n\timport { uid } from \"@xbs/lib-core-dom\";\n\timport { onMount, createEventDispatcher } from \"svelte\";\n\n\texport let value = \"\";\n\texport let id = uid();\n\texport let readonly = false;\n\texport let focus = false;\n\texport let select = false;\n\texport let type = \"text\";\n\texport let placeholder = \"\";\n\texport let disabled = false;\n\texport let error = false;\n\texport let inputStyle = \"\";\n\n\tconst dispatch = createEventDispatcher();\n\n\tlet input;\n\tonMount(() => {\n\t\t// wait till the source click processing will end\n\t\tsetTimeout(() => {\n\t\t\tif (focus && input) input.focus();\n\t\t\tif (select && input) input.select();\n\t\t}, 1);\n\t});\n\n</script>\n\n{#if type == 'password'}\n\t<input\n\t\tbind:value\n\t\tbind:this={input}\n\t\t{id}\n\t\t{readonly}\n\t\t{disabled}\n\t\t{placeholder}\n\t\ttype=\"password\"\n\t\tstyle={inputStyle}\n\t\tclass:error\n\t\ton:input={() => dispatch('input', { value })} />\n{:else if type == 'number'}\n\t<input\n\t\tbind:value\n\t\tbind:this={input}\n\t\t{id}\n\t\t{readonly}\n\t\t{disabled}\n\t\t{placeholder}\n\t\ttype=\"number\"\n\t\tstyle={inputStyle}\n\t\tclass:error\n\t\ton:input={() => dispatch('input', { value })} />\n{:else}\n\t<input\n\t\tbind:value\n\t\tbind:this={input}\n\t\t{id}\n\t\t{readonly}\n\t\t{disabled}\n\t\t{placeholder}\n\t\tclass:error\n\t\tstyle={inputStyle}\n\t\ton:input={() => dispatch('input', { value })} />\n{/if}\n\n<style>\n\tinput {\n\t\tdisplay: block;\n\t\twidth: var(--wx-input-width);\n\t\theight: var(--wx-input-height);\n\t\tmax-width: 100%;\n\t\tpadding: var(--wx-input-padding);\n\t\toutline: none;\n\t\tfont-family: var(--wx-input-font-family);\n\t\tfont-size: var(--wx-input-font-size);\n\t\tline-height: var(--wx-input-line-height);\n\t\tfont-weight: var(--wx-input-font-weigth);\n\t\ttext-align: var(--wx-input-text-align);\n\t\tcolor: var(--wx-input-font-color);\n\t\tborder: var(--wx-input-border);\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tbackground: var(--wx-input-background);\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\tinput:focus {\n\t\tborder: var(--wx-input-border-focus);\n\t}\n\tinput::placeholder {\n\t\tcolor: var(--wx-input-placeholder-color);\n\t}\n\n\tinput[disabled] {\n\t\tcursor: not-allowed !important;\n\t\tborder: var(--wx-input-border-disabled);\n\t\tcolor: var(--wx-color-font-disabled);\n\t\tbackground: var(--wx-input-background-disabled);\n\t}\n\tinput[disabled]::placeholder {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\n\tinput.error {\n\t\tborder-color: var(--wx-color-danger);\n\t\tcolor: var(--wx-color-danger);\n\t}\n\n</style>\n","<script>\n\timport { getContext, createEventDispatcher } from \"svelte\";\n\tconst dispatch = createEventDispatcher();\n\n\tconst locale = getContext(\"wx-i18n\").getRaw().calendar;\n\tconst monthNames = locale.monthFull;\n\n\texport let date;\n\texport let type;\n\n\texport let part;\n\n\tlet month, year, label;\n\t$: {\n\t\tmonth = date.getMonth();\n\t\tyear = date.getFullYear();\n\n\t\tswitch (type) {\n\t\t\tcase \"month\":\n\t\t\t\tlabel = `${monthNames[month]} ${year}`;\n\t\t\t\tbreak;\n\t\t\tcase \"year\":\n\t\t\t\tlabel = year;\n\t\t\t\tbreak;\n\t\t\tcase \"duodecade\": {\n\t\t\t\tconst start = year - (year % 10);\n\t\t\t\tconst end = start + 9;\n\n\t\t\t\tlabel = `${start} - ${end}`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction changeType() {\n\t\tdispatch(\"shift\", { diff: 0, type });\n\t}\n\n</script>\n\n<div class=\"header\">\n\t{#if part != 'right'}\n\t\t<i\n\t\t\tclass=\"pager wxi-angle-left\"\n\t\t\ton:click={() => dispatch('shift', { diff: -1, type })} />\n\t{:else}<span class=\"spacer\" />{/if}\n\t<span class=\"label\" on:click={changeType}>{label}</span>\n\t{#if part != 'left'}\n\t\t<i\n\t\t\tclass=\"pager wxi-angle-right\"\n\t\t\ton:click={() => dispatch('shift', { diff: 1, type })} />\n\t{:else}<span class=\"spacer\" />{/if}\n</div>\n\n<style>\n\t.header {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tmargin-bottom: var(--wx-calendar-gutter);\n\t\tfont-size: var(--wx-calendar-header-font-size);\n\t\tline-height: var(--wx-calendar-header-line-height);\n\t\tfont-weight: var(--wx-calendar-header-font-weight);\n\t}\n\n\t.spacer,\n\t.pager {\n\t\twidth: var(--wx-calendar-cell-size);\n\t\theight: var(--wx-calendar-cell-size);\n\t\tflex-shrink: 0;\n\t}\n\t.pager {\n\t\tcursor: pointer;\n\t\tborder-radius: 50%;\n\t\tline-height: 1;\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tuser-select: none;\n\t\tcolor: var(--wx-calendar-icon-color);\n\t\tfont-size: var(--wx-calendar-icon-size);\n\t}\n\t.pager:before {\n\t\tdisplay: block;\n\t}\n\t.pager:hover {\n\t\tbackground-color: var(--wx-background-hover);\n\t}\n\n\t.label {\n\t\tflex: 0 0 calc(100% - var(--wx-calendar-cell-size) * 2);\n\t\tmax-width: calc(100% - var(--wx-calendar-cell-size) * 2);\n\t\ttext-align: center;\n\t\tcolor: var(--wx-color-link);\n\t\tcursor: pointer;\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t}\n\n</style>\n","<script>\n\texport let click;\n\n</script>\n\n<button on:click={click}>\n\t<slot />\n</button>\n\n<style>\n\tbutton {\n\t\tdisplay: inline-block;\n\t\tvertical-align: top;\n\t\ttext-decoration: none;\n\t\ttext-align: center;\n\t\tletter-spacing: normal;\n\t\tfont-family: var(--wx-calendar-controls-font-family);\n\t\tfont-size: var(--wx-calendar-controls-font-size);\n\t\tline-height: var(--wx-calendar-controls-line-height);\n\t\tfont-weight: var(--wx-calendar-controls-font-weight);\n\t\ttext-transform: none;\n\t\tpadding: 0;\n\t\tborder: none;\n\t\tborder-radius: 0;\n\t\tbackground: transparent;\n\t\tcolor: var(--wx-calendar-controls-font-color);\n\t\tcursor: pointer;\n\t\tbox-shadow: none;\n\t\ttransition: none;\n\t\tmax-width: 100%;\n\t\tuser-select: none;\n\t}\n\tbutton,\n\tbutton:focus,\n\tbutton:active {\n\t\toutline: none;\n\t}\n\tbutton:active {\n\t\topacity: 0.8;\n\t}\n\n</style>\n","<script>\n\timport { getContext } from \"svelte\";\n\timport { delegateClick } from \"@xbs/lib-core-dom\";\n\n\texport let value;\n\texport let current;\n\texport let cancel;\n\texport let select;\n\texport let part;\n\texport let markers = null;\n\n\tconst locale = getContext(\"wx-i18n\").getRaw().calendar;\n\tconst weekStart = (locale.weekStart || 7) % 7;\n\tconst weekdays = locale.dayShort\n\t\t.slice(weekStart)\n\t\t.concat(locale.dayShort.slice(0, weekStart));\n\n\tlet days;\n\tlet date;\n\n\tconst dv = (d, dm, dd) =>\n\t\tnew Date(\n\t\t\td.getFullYear(),\n\t\t\td.getMonth() + (dm || 0),\n\t\t\td.getDate() + (dd || 0)\n\t\t);\n\tlet ranges = part !== \"normal\";\n\t$: {\n\t\tif (part == \"normal\") date = [value ? dv(value).valueOf() : 0];\n\t\telse\n\t\t\tdate = value\n\t\t\t\t? [\n\t\t\t\t\t\tvalue.start ? dv(value.start).valueOf() : 0,\n\t\t\t\t\t\tvalue.end ? dv(value.end).valueOf() : 0,\n\t\t\t\t  ]\n\t\t\t\t: [0, 0];\n\n\t\tconst start = getStart();\n\t\tconst end = getEnd();\n\t\tconst curMonth = current.getMonth();\n\t\tdays = [];\n\t\tfor (let d = start; d <= end; d.setDate(d.getDate() + 1)) {\n\t\t\tconst day = {\n\t\t\t\tday: d.getDate(),\n\t\t\t\tin: d.getMonth() === curMonth,\n\t\t\t\tdate: d.valueOf(),\n\t\t\t};\n\n\t\t\tlet css = \"\";\n\t\t\tcss += !day.in ? \" inactive\" : \"\";\n\t\t\tcss += date.indexOf(day.date) > -1 ? \" selected\" : \"\";\n\n\t\t\tif (ranges) {\n\t\t\t\tconst s = day.date == date[0];\n\t\t\t\tconst e = day.date == date[1];\n\t\t\t\tif (s && !e) css += \" left\";\n\t\t\t\telse if (e && !s) css += \" right\";\n\n\t\t\t\tif (day.date > date[0] && day.date < date[1]) css += \" inrange\";\n\t\t\t}\n\n\t\t\tcss += isWeekEnd(d) ? \" weekend\" : \"\";\n\t\t\tif (markers) {\n\t\t\t\tconst mark = markers(d);\n\t\t\t\tif (mark) css += \" \" + mark;\n\t\t\t}\n\n\t\t\tdays.push({ ...day, css });\n\t\t}\n\t}\n\n\tfunction isWeekEnd(date) {\n\t\tconst d = date.getDay();\n\t\treturn d === 0 || d === 6;\n\t}\n\n\tfunction getStart() {\n\t\tconst start = dv(current, 0, 1 - current.getDate());\n\t\tstart.setDate(\n\t\t\tstart.getDate() - ((start.getDay() - (weekStart - 7)) % 7)\n\t\t);\n\t\treturn start;\n\t}\n\tfunction getEnd() {\n\t\tconst end = dv(current, 1, -current.getDate());\n\t\tend.setDate(end.getDate() + ((6 - end.getDay() + weekStart) % 7));\n\t\treturn end;\n\t}\n\n\tconst selectDates = {\n\t\tclick: selectDate,\n\t};\n\n\tfunction selectDate(date, e) {\n\t\tif (select) {\n\t\t\te.stopPropagation();\n\t\t\tselect(new Date(new Date(date)));\n\t\t}\n\t\tif (cancel) cancel();\n\t}\n\n</script>\n\n<div>\n\t<div class=\"weekdays\">\n\t\t{#each weekdays as day}\n\t\t\t<div class=\"weekday\">{day}</div>\n\t\t{/each}\n\t</div>\n\t<div class=\"days\" use:delegateClick={selectDates}>\n\t\t{#each days as day (day.date)}\n\t\t\t<div class=\"day {day.css}\" class:out={!day.in} data-id={day.date}>\n\t\t\t\t{day.day}\n\t\t\t</div>\n\t\t{/each}\n\t</div>\n</div>\n\n<style>\n\t.weekdays {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\tmargin-bottom: var(--wx-calendar-gutter);\n\t}\n\n\t.weekday {\n\t\tflex: 0 0 calc(100% / 7);\n\t\tmax-width: calc(100% / 7);\n\t\tfont-size: var(--wx-font-size-sm);\n\t\tline-height: var(--wx-line-height-sm);\n\t\tcolor: var(--wx-color-font-alt);\n\t\ttext-align: center;\n\t}\n\n\t.days {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tmargin: calc(var(--wx-calendar-cell-gap) / -2);\n\t}\n\n\t.day {\n\t\tborder-radius: 50%;\n\t\tflex: 0 0 calc(100% / 7 - var(--wx-calendar-cell-gap));\n\t\tmax-width: calc(100% / 7 - var(--wx-calendar-cell-gap));\n\t\tmargin: calc(var(--wx-calendar-cell-gap) / 2);\n\t\theight: var(--wx-calendar-cell-size);\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttext-align: center;\n\t}\n\t.day:not(.out):not(.selected) {\n\t\tcursor: pointer;\n\t}\n\t.day:not(.out):not(.selected):hover {\n\t\tbackground: var(--wx-background-hover);\n\t}\n\t.day.out {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\t.day.selected:not(.out) {\n\t\tbackground: var(--wx-color-primary);\n\t\tcolor: var(--wx-color-primary-font);\n\t}\n\t.day.selected.left:not(.out) {\n\t\tborder-radius: calc(var(--wx-calendar-cell-size) / 2) 0 0\n\t\t\tcalc(var(--wx-calendar-cell-size) / 2);\n\t}\n\t.day.selected.right:not(.out) {\n\t\tborder-radius: 0 calc(var(--wx-calendar-cell-size) / 2)\n\t\t\tcalc(var(--wx-calendar-cell-size) / 2) 0;\n\t}\n\t.day.inrange:not(.out) {\n\t\tborder-radius: 0;\n\t\tbackground: var(--wx-color-primary-selected);\n\t}\n\t.day.weekend:not(.selected):not(.out) {\n\t\tcolor: var(--wx-color-primary);\n\t}\n\t.day.inactive {\n\t\tpointer-events: none;\n\t}\n\n</style>\n","<script>\n\timport { getContext } from \"svelte\";\n\timport { delegateClick } from \"@xbs/lib-core-dom\";\n\timport Button from \"./Button.svelte\";\n\n\texport let value;\n\texport let current;\n\texport let cancel;\n\texport let part;\n\n\tconst locale = getContext(\"wx-i18n\").getRaw().calendar;\n\tconst months = locale.monthShort;\n\n\tlet monthNum;\n\t$: {\n\t\tif (part !== \"normal\" && value) {\n\t\t\tif (part === \"left\" && value.start)\n\t\t\t\tmonthNum = value.start.getMonth();\n\t\t\telse if (part === \"right\" && value.end)\n\t\t\t\tmonthNum = value.end.getMonth();\n\t\t\telse monthNum = current.getMonth();\n\t\t} else {\n\t\t\tmonthNum = current.getMonth();\n\t\t}\n\t}\n\n\tconst selectMonths = {\n\t\tclick: selectMonth,\n\t};\n\tfunction selectMonth(month) {\n\t\tif (month || month === 0) {\n\t\t\tcurrent.setMonth(month);\n\t\t\tcurrent = current;\n\t\t}\n\n\t\tif (part === \"normal\") value = new Date(current);\n\n\t\tcancel();\n\t}\n\n</script>\n\n<div class=\"months\" use:delegateClick={selectMonths}>\n\t{#each months as month, i}\n\t\t<div class=\"month\" class:current={monthNum === i} data-id={i}>\n\t\t\t{month}\n\t\t</div>\n\t{/each}\n</div>\n<div class=\"buttons\">\n\t<Button click={cancel}>{locale.done}</Button>\n</div>\n\n<style>\n\t.months {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tmargin: calc(var(--wx-calendar-cell-gap) / -2);\n\t}\n\n\t.month {\n\t\tflex: 0 0 calc(100% / 4 - var(--wx-calendar-cell-gap));\n\t\tmax-width: calc(100% / 4 - var(--wx-calendar-cell-gap));\n\t\tmargin: calc(var(--wx-calendar-cell-gap) / 2 + 5px)\n\t\t\tcalc(var(--wx-calendar-cell-gap) / 2);\n\t\ttext-align: center;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\theight: var(--wx-calendar-cell-size);\n\t\tborder-radius: calc(var(--wx-calendar-cell-size) / 2);\n\t}\n\t.month.current {\n\t\tbackground: var(--wx-color-primary);\n\t\tcolor: var(--wx-color-primary-font);\n\t}\n\t.month:not(.current):hover {\n\t\tbackground-color: var(--wx-background-hover);\n\t}\n\n\t.buttons {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmargin-top: var(--wx-calendar-gutter);\n\t}\n\n</style>\n","<script>\n\timport { getContext } from \"svelte\";\n\timport { delegateClick } from \"@xbs/lib-core-dom\";\n\timport Button from \"./Button.svelte\";\n\n\tconst _ = getContext(\"wx-i18n\").getRaw().calendar;\n\n\texport let value;\n\texport let current;\n\texport let cancel;\n\texport let part;\n\n\tlet years;\n\tlet year;\n\t$: {\n\t\tyear = current.getFullYear();\n\n\t\tconst start = year - (year % 10) - 1;\n\t\tconst end = start + 12;\n\t\tyears = [];\n\t\tfor (let y = start; y < end; ++y) {\n\t\t\tyears.push(y);\n\t\t}\n\t}\n\n\tconst selectYears = {\n\t\tclick: selectYear,\n\t};\n\tfunction selectYear(year) {\n\t\tif (year) {\n\t\t\tcurrent.setFullYear(year);\n\t\t\tcurrent = current;\n\t\t}\n\n\t\tif (part === \"normal\") value = new Date(current);\n\n\t\tcancel();\n\t}\n\n</script>\n\n<div class=\"years\" use:delegateClick={selectYears}>\n\t{#each years as y, i}\n\t\t<div\n\t\t\tclass=\"year\"\n\t\t\tclass:current={year == y}\n\t\t\tclass:prev-decade={i === 0}\n\t\t\tclass:next-decade={i === 11}\n\t\t\tdata-id={y}>\n\t\t\t{y}\n\t\t</div>\n\t{/each}\n</div>\n<div class=\"buttons\">\n\t<Button click={cancel}>{_.done}</Button>\n</div>\n\n<style>\n\t.years {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tmargin: calc(var(--wx-calendar-cell-gap) / -2);\n\t}\n\n\t.year {\n\t\tflex: 0 0 calc(100% / 4 - var(--wx-calendar-cell-gap));\n\t\tmax-width: calc(100% / 4 - var(--wx-calendar-cell-gap));\n\t\tmargin: calc(var(--wx-calendar-cell-gap) / 2 + 5px)\n\t\t\tcalc(var(--wx-calendar-cell-gap) / 2);\n\t\ttext-align: center;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\theight: var(--wx-calendar-cell-size);\n\t\tborder-radius: calc(var(--wx-calendar-cell-size) / 2);\n\t}\n\t.year.current {\n\t\tbackground: var(--wx-color-primary);\n\t\tcolor: var(--wx-color-primary-font);\n\t}\n\t.year:not(.current):hover {\n\t\tbackground-color: var(--wx-background-hover);\n\t}\n\t.prev-decade,\n\t.next-decade {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\t.buttons {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmargin-top: var(--wx-calendar-gutter);\n\t}\n\n</style>\n","import Month from \"./Month.svelte\";\nimport Year from \"./Year.svelte\";\nimport Duodecade from \"./Duodecade.svelte\";\n\nexport const configs = {\n\tmonth: {\n\t\tcomponent: Month,\n\t\tnext: nextMonth,\n\t\tprev: prevMonth,\n\t},\n\tyear: {\n\t\tcomponent: Year,\n\t\tnext: nextYear,\n\t\tprev: prevYear,\n\t},\n\tduodecade: {\n\t\tcomponent: Duodecade,\n\t\tnext: nextDuodecade,\n\t\tprev: prevDuodecade,\n\t},\n};\n\nfunction prevMonth(current) {\n\tlet newCurrent = new Date(current);\n\tnewCurrent.setMonth(current.getMonth() - 1);\n\twhile (current.getMonth() === newCurrent.getMonth()) {\n\t\tnewCurrent.setDate(newCurrent.getDate() - 1);\n\t}\n\treturn newCurrent;\n}\nfunction nextMonth(current) {\n\tcurrent = new Date(current);\n\tcurrent.setMonth(current.getMonth() + 1);\n\treturn current;\n}\nfunction prevYear(current) {\n\tcurrent = new Date(current);\n\tcurrent.setFullYear(current.getFullYear() - 1);\n\treturn current;\n}\nfunction nextYear(current) {\n\tcurrent = new Date(current);\n\tcurrent.setFullYear(current.getFullYear() + 1);\n\treturn current;\n}\nfunction prevDuodecade(current) {\n\tcurrent = new Date(current);\n\tcurrent.setFullYear(current.getFullYear() - 10);\n\treturn current;\n}\nfunction nextDuodecade(current) {\n\tcurrent = new Date(current);\n\tcurrent.setFullYear(current.getFullYear() + 10);\n\treturn current;\n}\n","<script>\n\timport { createEventDispatcher, getContext } from \"svelte\";\n\tconst dispatch = createEventDispatcher();\n\n\timport Header from \"./Header.svelte\";\n\timport Button from \"./Button.svelte\";\n\timport { configs } from \"./helpers\";\n\n\tconst _ = getContext(\"wx-i18n\").getGroup(\"calendar\");\n\n\texport let value;\n\texport let current;\n\texport let done = false;\n\texport let part = \"normal\";\n\texport let markers = null;\n\texport let buttons = true;\n\n\tlet type = \"month\";\n\tfunction selectDate(ev, date) {\n\t\tev.preventDefault();\n\t\tdispatch(\"change\", { value: date });\n\t}\n\tfunction cancel() {\n\t\tif (type === \"duodecade\") type = \"year\";\n\t\telse if (type === \"year\") type = \"month\";\n\t}\n\n\tfunction doShift(ev) {\n\t\tif (ev.diff == 0) {\n\t\t\tif (type === \"month\") type = \"year\";\n\t\t\telse if (type === \"year\") type = \"duodecade\";\n\t\t} else {\n\t\t\tdispatch(\"shift\", ev);\n\t\t}\n\t}\n\n\tfunction select(value) {\n\t\tdispatch(\"change\", { select: true, value });\n\t}\n\n</script>\n\n<div class=\"calendar {part !== 'normal' ? 'part' : ''}\">\n\t<div class=\"wrap\">\n\t\t<Header\n\t\t\tdate={current}\n\t\t\t{part}\n\t\t\t{type}\n\t\t\ton:shift={ev => doShift(ev.detail)} />\n\t\t<div>\n\t\t\t<svelte:component\n\t\t\t\tthis={configs[type].component}\n\t\t\t\t{value}\n\t\t\t\t{current}\n\t\t\t\t{part}\n\t\t\t\t{markers}\n\t\t\t\t{select}\n\t\t\t\t{cancel} />\n\t\t\t{#if type === 'month' && buttons}\n\t\t\t\t<div class=\"buttons\">\n\t\t\t\t\t{#if done}\n\t\t\t\t\t\t<div class=\"button-item\">\n\t\t\t\t\t\t\t<Button click={e => selectDate(e, -1)}>\n\t\t\t\t\t\t\t\t{_('done')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<div class=\"button-item\">\n\t\t\t\t\t\t<Button click={e => selectDate(e, null)}>\n\t\t\t\t\t\t\t{_('clear')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"button-item\">\n\t\t\t\t\t\t<Button click={e => selectDate(e, new Date())}>\n\t\t\t\t\t\t\t{_('today')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n</div>\n\n<style>\n\t.calendar {\n\t\theight: auto;\n\t\twidth: 100%;\n\t\tpadding: var(--wx-calendar-padding);\n\t\tcursor: default;\n\t\tfont-family: var(--wx-calendar-font-family);\n\t\tfont-size: var(--wx-calendar-font-size);\n\t\tline-height: var(--wx-calendar-line-height);\n\t\tfont-weight: var(--wx-calendar-font-weight);\n\t\tcolor: var(--wx-calendar-font-color);\n\t}\n\t.calendar.part {\n\t\tpadding-bottom: 0;\n\t}\n\n\t.wrap {\n\t\twidth: calc(\n\t\t\tvar(--wx-calendar-cell-size) * 7 + var(--wx-calendar-cell-gap) * 6\n\t\t);\n\t\tmargin: 0 auto;\n\t}\n\n\t.buttons {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\tmargin-top: var(--wx-calendar-gutter);\n\t}\n\n\t.button-item + .button-item {\n\t\tmargin-left: var(--wx-calendar-gutter);\n\t}\n\n</style>\n","<script>\n\timport { createEventDispatcher } from \"svelte\";\n\tconst dispatch = createEventDispatcher();\n\n\timport Panel from \"./calendar/Panel.svelte\";\n\timport { configs } from \"./calendar/helpers\";\n\n\texport let value;\n\texport let current;\n\texport let markers = null;\n\texport let buttons = true;\n\n\tfunction fixCurrent() {\n\t\tif (!current) current = value || new Date();\n\t}\n\t$: fixCurrent(value);\n\n\tfunction doShift({ diff, type }) {\n\t\tconst obj = configs[type];\n\t\tcurrent = diff > 0 ? obj.next(current) : obj.prev(current);\n\t}\n\tfunction doChange(v) {\n\t\tconst x = v.value;\n\t\tif (x) {\n\t\t\tcurrent = new Date(x);\n\t\t\tvalue = new Date(x);\n\t\t} else {\n\t\t\tvalue = null;\n\t\t}\n\n\t\tdispatch(\"change\", { value });\n\t}\n\n</script>\n\n<Panel\n\t{value}\n\t{current}\n\t{markers}\n\t{buttons}\n\ton:shift={ev => doShift(ev.detail)}\n\ton:change={ev => doChange(ev.detail)} />\n","<script>\n\timport { getContext } from \"svelte\";\n\timport { uid, dateToString } from \"@xbs/lib-core-dom\";\n\n\timport Text from \"./Text.svelte\";\n\timport Dropdown from \"./Dropdown.svelte\";\n\timport Calendar from \"./Calendar.svelte\";\n\n\texport let value;\n\texport let id = uid();\n\texport let disabled = false;\n\texport let error = false;\n\texport let width = \"unset\";\n\texport let align = \"start\";\n\texport let placeholder = \"\";\n\texport let format = \"%m/%d/%Y\";\n\texport let buttons;\n\n\tconst _ = getContext(\"wx-i18n\").getRaw().calendar;\n\tlet dateFormat =\n\t\ttypeof format === \"function\" ? format : dateToString(format, _);\n\tlet popup;\n\n\tfunction cancel() {\n\t\tpopup = false;\n\t}\n\n\tfunction doChange(ev) {\n\t\tconst v = ev.detail.value;\n\t\tvalue = v;\n\t\t// fire after on-click finished\n\t\tsetTimeout(cancel, 1);\n\t}\n\n</script>\n\n<svelte:window on:scroll={cancel} />\n\n<div\n\tclass=\"datepicker\"\n\tclass:disabled\n\tclass:error\n\ton:click={() => (popup = true)}>\n\t<Text\n\t\tvalue={value ? dateFormat(value) : value}\n\t\t{id}\n\t\treadonly={true}\n\t\t{disabled}\n\t\t{error}\n\t\t{placeholder}\n\t\tinputStyle=\"cursor: pointer; width: 100%; padding-right: calc(var(--wx-input-icon-size) + var(--wx-input-icon-indent) * 2);\" />\n\n\t<i class=\"icon wxi-calendar\" />\n\n\t{#if popup && !disabled}\n\t\t<Dropdown {cancel} {width} {align} autoFit={!!align}>\n\t\t\t<Calendar {buttons} {value} on:change={doChange} />\n\t\t</Dropdown>\n\t{/if}\n</div>\n\n<style>\n\t.datepicker {\n\t\tposition: relative;\n\t\twidth: var(--wx-input-width);\n\t}\n\t.datepicker.disabled .icon {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\t.datepicker.error .icon {\n\t\tcolor: var(--wx-color-danger);\n\t}\n\n\t.icon {\n\t\tposition: absolute;\n\t\tright: var(--wx-input-icon-indent);\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tfont-size: var(--wx-input-icon-size);\n\t\tline-height: 1;\n\t\twidth: var(--wx-input-icon-size);\n\t\theight: var(--wx-input-icon-size);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tpointer-events: none;\n\t\tuser-select: none;\n\t\tcolor: var(--wx-input-icon-color);\n\t}\n\t.icon:before {\n\t\tdisplay: block;\n\t}\n\n</style>\n","<script>\n\timport { createEventDispatcher } from \"svelte\";\n\tconst dispatch = createEventDispatcher();\n\n\timport Panel from \"./calendar/Panel.svelte\";\n\timport { configs } from \"./calendar/helpers\";\n\n\texport let start;\n\texport let end;\n\texport let done;\n\texport let current;\n\texport let markers = null;\n\texport let buttons = true;\n\n\tfunction addMonth(l, diff, rPrev) {\n\t\tconst r = new Date(l);\n\t\tr.setMonth(r.getMonth() + diff);\n\t\tif (rPrev && r.valueOf() == rPrev.valueOf()) return rPrev;\n\t\treturn r;\n\t}\n\n\tlet leftCurrent, rightCurrent;\n\tfunction setInitCurrents(s) {\n\t\tleftCurrent = s ? new Date(s) : current || new Date();\n\t}\n\t$: setInitCurrents(start);\n\n\tfunction onLeft() {\n\t\tif (leftCurrent) rightCurrent = addMonth(leftCurrent, 1);\n\t}\n\tfunction onRight() {\n\t\tif (rightCurrent) leftCurrent = addMonth(rightCurrent, -1);\n\t}\n\n\t$: onLeft(leftCurrent);\n\t$: onRight(rightCurrent);\n\n\tfunction doShift({ diff, type }) {\n\t\tconst obj = configs[type];\n\t\tif (diff > 0) {\n\t\t\trightCurrent = obj.next(rightCurrent);\n\t\t} else if (diff < 0) {\n\t\t\tleftCurrent = obj.prev(leftCurrent);\n\t\t}\n\t}\n\n\tfunction doChangeStart(v) {\n\t\tselectChange(v);\n\t\tif (start) leftCurrent = new Date(start);\n\t}\n\tfunction doChangeEnd(v) {\n\t\tselectChange(v);\n\t\tif (end) rightCurrent = new Date(end);\n\t}\n\tfunction selectChange(ev) {\n\t\tconst v = ev.value;\n\t\tconst final = v === -1;\n\t\tif (!final) {\n\t\t\tif (ev.select) {\n\t\t\t\tif (!start || end) {\n\t\t\t\t\tstart = v;\n\t\t\t\t\tend = null;\n\t\t\t\t} else {\n\t\t\t\t\tif (start > v) {\n\t\t\t\t\t\tend = start;\n\t\t\t\t\t\tstart = v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend = v;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!v) {\n\t\t\t\t\tstart = end = null;\n\t\t\t\t} else {\n\t\t\t\t\tstart = new Date(v);\n\t\t\t\t\tend = new Date(v);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (final || !done) dispatch(\"change\", { start, end });\n\t}\n\n</script>\n\n<div class=\"calendars\">\n\t<div class=\"half\">\n\t\t<Panel\n\t\t\tvalue={{ start: start, end: end }}\n\t\t\tcurrent={leftCurrent}\n\t\t\t{markers}\n\t\t\tbuttons={false}\n\t\t\tpart=\"left\"\n\t\t\ton:shift={ev => doShift(ev.detail)}\n\t\t\ton:change={ev => doChangeStart(ev.detail)} />\n\t</div>\n\t<div class=\"half\">\n\t\t<Panel\n\t\t\tvalue={{ start: start, end: end }}\n\t\t\tcurrent={rightCurrent}\n\t\t\t{markers}\n\t\t\t{done}\n\t\t\t{buttons}\n\t\t\tpart=\"right\"\n\t\t\ton:shift={ev => doShift(ev.detail)}\n\t\t\ton:change={ev => doChangeEnd(ev.detail)} />\n\t</div>\n</div>\n\n<style>\n\t.calendars {\n\t\tdisplay: flex;\n\t\tpadding-bottom: var(--wx-calendar-padding);\n\t}\n\n\t.half {\n\t\tflex: 1;\n\t}\n\n</style>\n","<script>\n\timport { uid } from \"@xbs/lib-core-dom\";\n\texport let label = \"label\";\n\texport let value = \"\";\n\texport let options = [];\n\texport let placeholder = \"\";\n\texport let disabled = false;\n\texport let error = false;\n\n\texport let id = uid();\n\n</script>\n\n<div>\n\t<select {id} bind:value {disabled} class:error>\n\t\t{#each options as option (option.id)}\n\t\t\t<option value={option.id}>{option[label]}</option>\n\t\t{/each}\n\t</select>\n\t{#if !value || value !== 0}\n\t\t<div class=\"placeholder\">{placeholder}</div>\n\t{/if}\n\t<i class=\"icon wxi-angle-down\" />\n</div>\n\n<style>\n\tdiv {\n\t\tposition: relative;\n\t\twidth: var(--wx-input-width);\n\t}\n\n\tselect {\n\t\tappearance: none;\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t\theight: var(--wx-input-height);\n\t\toutline: none;\n\t\tbackground: var(--wx-input-background);\n\t\tborder: var(--wx-input-border);\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tfont-family: var(--wx-input-font-family);\n\t\tfont-size: var(--wx-input-font-size);\n\t\tline-height: var(--wx-input-line-height);\n\t\tfont-weight: var(--wx-input-font-weigth);\n\t\ttext-align: var(--wx-input-text-align);\n\t\tcolor: var(--wx-input-font-color);\n\t\tpadding: var(--wx-input-padding);\n\t\tpadding-right: calc(\n\t\t\tvar(--wx-input-icon-size) + var(--wx-input-icon-indent) * 2\n\t\t);\n\t\toverflow: hidden !important;\n\t\ttext-overflow: ellipsis;\n\t\tcursor: pointer;\n\t}\n\tselect:focus {\n\t\tborder: var(--wx-input-border-focus);\n\t}\n\tselect[disabled] {\n\t\tcursor: not-allowed;\n\t\tborder: var(--wx-input-border-disabled);\n\t\tcolor: var(--wx-color-font-disabled);\n\t\tbackground: var(--wx-input-background-disabled);\n\t}\n\tselect[disabled] ~ .placeholder {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\tselect[disabled] ~ .icon {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\tselect.error {\n\t\tborder-color: var(--wx-color-danger);\n\t\tcolor: var(--wx-color-danger);\n\t}\n\tselect.error option {\n\t\tcolor: var(--wx-input-font-color);\n\t}\n\tselect.error ~ .icon {\n\t\tcolor: var(--wx-color-danger);\n\t}\n\n\t.placeholder {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\twidth: 100%;\n\t\tborder: var(--wx-input-border);\n\t\tborder-color: transparent;\n\t\tfont-family: var(--wx-input-font-family);\n\t\tfont-size: var(--wx-input-font-size);\n\t\tline-height: var(--wx-input-line-height);\n\t\tfont-weight: var(--wx-input-font-weigth);\n\t\ttext-align: var(--wx-input-text-align);\n\t\tcolor: var(--wx-input-placeholder-color);\n\t\tpadding: var(--wx-input-padding);\n\t\tpadding-right: calc(\n\t\t\tvar(--wx-input-icon-size) + var(--wx-input-icon-indent) * 2\n\t\t);\n\t\twhite-space: nowrap;\n\t\toverflow: hidden !important;\n\t\ttext-overflow: ellipsis;\n\t\tcursor: pointer;\n\t\tpointer-events: none;\n\t}\n\n\t.icon {\n\t\tposition: absolute;\n\t\tright: var(--wx-input-icon-indent);\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tfont-size: var(--wx-input-icon-size);\n\t\tline-height: 1;\n\t\twidth: var(--wx-input-icon-size);\n\t\theight: var(--wx-input-icon-size);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tpointer-events: none;\n\t\tuser-select: none;\n\t\tcolor: var(--wx-input-icon-color);\n\t}\n\t.icon:before {\n\t\tdisplay: block;\n\t}\n\n</style>\n","<script>\n\timport { uid } from \"@xbs/lib-core-dom\";\n\n\texport let id = uid();\n\texport let label = \"\";\n\texport let width = \"\";\n\texport let min = 0;\n\texport let max = 100;\n\texport let value = 0;\n\texport let step = 1;\n\texport let disabled = false;\n\n\tlet progress = 0;\n\tlet bgStyle = \"\";\n\n\t$: {\n\t\tprogress = ((value - min) / (max - min)) * 100 + \"%\";\n\t\tbgStyle = disabled\n\t\t\t? \"\"\n\t\t\t: `background: linear-gradient(90deg, var(--wx-slider-primary) 0% ${progress}, var(--wx-slider-background) ${progress} 100%);`;\n\n\t\tif (isNaN(value)) value = 0;\n\t}\n\n</script>\n\n<div class=\"slider\" style={width ? `width: ${width}` : ''}>\n\t{#if label}<label for={id}>{label}</label>{/if}\n\t<div>\n\t\t<input\n\t\t\t{id}\n\t\t\ttype=\"range\"\n\t\t\t{min}\n\t\t\t{max}\n\t\t\t{step}\n\t\t\t{disabled}\n\t\t\tbind:value\n\t\t\tstyle={bgStyle} />\n\t</div>\n</div>\n\n<style>\n\t.slider {\n\t\twidth: var(--wx-input-width);\n\t}\n\n\tlabel {\n\t\tdisplay: block;\n\t\tmargin: var(--wx-slider-label-margin);\n\t\tfont-family: var(--wx-slider-label-font-family);\n\t\tfont-size: var(--wx-slider-label-font-size);\n\t\tline-height: var(--wx-slider-label-line-height);\n\t\tfont-weight: var(--wx-slider-label-font-weight);\n\t\tcolor: var(--wx-slider-label-font-color);\n\t}\n\n\t.slider div {\n\t\tpadding: calc(\n\t\t\t\t(var(--wx-slider-height) - var(--wx-slider-track-height)) / 2\n\t\t\t)\n\t\t\t0;\n\t}\n\n\tinput {\n\t\t-webkit-appearance: none;\n\t\t-moz-appearance: none;\n\t\tappearance: none;\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t\theight: var(--wx-slider-track-height);\n\t\tbackground: var(--wx-slider-background);\n\t\tborder: none;\n\t\tborder-radius: var(--wx-slider-track-border-radius);\n\t\tmargin: 0;\n\t}\n\n\tinput:focus {\n\t\toutline: none;\n\t}\n\n\tinput::-webkit-slider-runnable-track {\n\t\tmargin: 0;\n\t\twidth: 100%;\n\t\theight: var(--wx-slider-track-height);\n\t\tborder: none;\n\t\tborder-radius: var(--wx-slider-track-border-radius);\n\t\tcursor: pointer;\n\t\tbackground: transparent;\n\t}\n\n\tinput::-webkit-slider-thumb {\n\t\tmargin-top: calc(\n\t\t\t(var(--wx-slider-track-height) - var(--wx-slider-thumb-size)) / 2\n\t\t);\n\t\twidth: var(--wx-slider-thumb-size);\n\t\theight: var(--wx-slider-thumb-size);\n\t\tbackground: var(--wx-slider-primary);\n\t\tborder: var(--wx-slider-thumb-border);\n\t\tbox-shadow: var(--wx-slider-thumb-shadow);\n\t\tborder-radius: 50%;\n\t\tcursor: pointer;\n\t\tappearance: none;\n\t}\n\n\tinput::-moz-range-track {\n\t\tmargin: 0;\n\t\twidth: 100%;\n\t\theight: var(--wx-slider-track-height);\n\t\tborder: none;\n\t\tborder-radius: var(--wx-slider-track-border-radius);\n\t\tcursor: pointer;\n\t\tbackground: transparent;\n\t}\n\n\tinput::-moz-range-thumb {\n\t\tmargin-top: calc(\n\t\t\t(var(--wx-slider-track-height) - var(--wx-slider-thumb-size)) / 2\n\t\t);\n\t\twidth: var(--wx-slider-thumb-size);\n\t\theight: var(--wx-slider-thumb-size);\n\t\tbackground: var(--wx-slider-primary);\n\t\tborder: var(--wx-slider-thumb-border);\n\t\tborder-radius: 50%;\n\t\tcursor: pointer;\n\t\tappearance: none;\n\t}\n\n\tinput::-moz-range-progress {\n\t\tbackground-color: var(--wx-slider-primary);\n\t\theight: var(--wx-slider-track-height);\n\t\tborder-top-left-radius: var(--wx-slider-track-border-radius);\n\t\tborder-bottom-left-radius: var(--wx-slider-track-border-radius);\n\t}\n\n\tinput::-ms-track {\n\t\tcolor: transparent;\n\t\tmargin: 0;\n\t\twidth: 100%;\n\t\theight: var(--wx-slider-track-height);\n\t\tborder: none;\n\t\tborder-radius: var(--wx-slider-track-border-radius);\n\t\tcursor: pointer;\n\t\tbackground: transparent;\n\t}\n\n\tinput::-ms-fill-lower {\n\t\tbackground: var(--wx-slider-primary);\n\t\tborder: 0.2px solid var(--wx-slider-primary);\n\t\tborder-radius: var(--wx-slider-track-border-radius);\n\t}\n\n\tinput::-ms-fill-upper {\n\t\tbackground: var(--wx-slider-background);\n\t\tborder: 0.2px solid var(--wx-slider-background);\n\t\tborder-radius: var(--wx-slider-track-border-radius);\n\t}\n\n\tinput::-ms-thumb {\n\t\tmargin-top: calc(\n\t\t\t(var(--wx-slider-track-height) - var(--wx-slider-thumb-size)) / 2\n\t\t);\n\t\twidth: var(--wx-slider-thumb-size);\n\t\theight: var(--wx-slider-thumb-size);\n\t\tbackground: var(--wx-slider-primary);\n\t\tborder: var(--wx-slider-thumb-border);\n\t\tborder-radius: 50%;\n\t\tcursor: pointer;\n\t\tappearance: none;\n\t}\n\n\tinput:focus::-ms-fill-lower {\n\t\tbackground: var(--wx-slider-primary);\n\t}\n\n\tinput:focus::-ms-fill-upper {\n\t\tbackground: var(--wx-slider-background);\n\t}\n\n\tinput[disabled] {\n\t\tcursor: not-allowed;\n\t\tbackground: var(--wx-color-disabled);\n\t}\n\tinput[disabled]::-webkit-slider-runnable-track {\n\t\tcursor: not-allowed;\n\t}\n\tinput[disabled]::-webkit-slider-thumb {\n\t\tcursor: not-allowed;\n\t\tbackground: var(--wx-background);\n\t\tborder: var(--wx-slider-thumb-border-disabled);\n\t}\n\tinput[disabled]::-moz-range-track {\n\t\tcursor: not-allowed;\n\t}\n\tinput[disabled]::-moz-range-thumb {\n\t\tcursor: not-allowed;\n\t\tbackground: var(--wx-background);\n\t\tborder: var(--wx-slider-thumb-border-disabled);\n\t}\n\tinput[disabled]::-moz-range-progress {\n\t\tcursor: not-allowed;\n\t\tbackground: var(--wx-color-disabled);\n\t}\n\tinput[disabled]::-ms-track {\n\t\tcursor: not-allowed;\n\t}\n\tinput[disabled]::-ms-fill-lower {\n\t\tbackground: var(--wx-color-disabled);\n\t\tborder-color: var(--wx-color-disabled);\n\t}\n\tinput[disabled]::-ms-fill-upper {\n\t\tbackground: var(--wx-color-disabled);\n\t\tborder-color: var(--wx-color-disabled);\n\t}\n\tinput[disabled]::-ms-thumb {\n\t\tcursor: not-allowed;\n\t\tbackground: var(--wx-background);\n\t\tborder: var(--wx-slider-thumb-border-disabled);\n\t}\n\tinput[disabled]:focus::-ms-fill-lower {\n\t\tbackground: var(--wx-color-disabled);\n\t}\n\tinput[disabled]:focus::-ms-fill-upper {\n\t\tbackground: var(--wx-color-disabled);\n\t}\n\n</style>\n","import { cubicInOut, linear, cubicOut } from '../easing/index.mjs';\nimport { split_css_unit, is_function, assign } from '../internal/index.mjs';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nfunction blur(node, { delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const f = style.filter === 'none' ? '' : style.filter;\n    const od = target_opacity * (1 - opacity);\n    const [value, unit] = split_css_unit(amount);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `opacity: ${target_opacity - (od * u)}; filter: ${f} blur(${u * value}${unit});`\n    };\n}\nfunction fade(node, { delay = 0, duration = 400, easing = linear } = {}) {\n    const o = +getComputedStyle(node).opacity;\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `opacity: ${t * o}`\n    };\n}\nfunction fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const od = target_opacity * (1 - opacity);\n    const [xValue, xUnit] = split_css_unit(x);\n    const [yValue, yUnit] = split_css_unit(y);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * xValue}${xUnit}, ${(1 - t) * yValue}${yUnit});\n\t\t\topacity: ${target_opacity - (od * u)}`\n    };\n}\nfunction slide(node, { delay = 0, duration = 400, easing = cubicOut, axis = 'y' } = {}) {\n    const style = getComputedStyle(node);\n    const opacity = +style.opacity;\n    const primary_property = axis === 'y' ? 'height' : 'width';\n    const primary_property_value = parseFloat(style[primary_property]);\n    const secondary_properties = axis === 'y' ? ['top', 'bottom'] : ['left', 'right'];\n    const capitalized_secondary_properties = secondary_properties.map((e) => `${e[0].toUpperCase()}${e.slice(1)}`);\n    const padding_start_value = parseFloat(style[`padding${capitalized_secondary_properties[0]}`]);\n    const padding_end_value = parseFloat(style[`padding${capitalized_secondary_properties[1]}`]);\n    const margin_start_value = parseFloat(style[`margin${capitalized_secondary_properties[0]}`]);\n    const margin_end_value = parseFloat(style[`margin${capitalized_secondary_properties[1]}`]);\n    const border_width_start_value = parseFloat(style[`border${capitalized_secondary_properties[0]}Width`]);\n    const border_width_end_value = parseFloat(style[`border${capitalized_secondary_properties[1]}Width`]);\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => 'overflow: hidden;' +\n            `opacity: ${Math.min(t * 20, 1) * opacity};` +\n            `${primary_property}: ${t * primary_property_value}px;` +\n            `padding-${secondary_properties[0]}: ${t * padding_start_value}px;` +\n            `padding-${secondary_properties[1]}: ${t * padding_end_value}px;` +\n            `margin-${secondary_properties[0]}: ${t * margin_start_value}px;` +\n            `margin-${secondary_properties[1]}: ${t * margin_end_value}px;` +\n            `border-${secondary_properties[0]}-width: ${t * border_width_start_value}px;` +\n            `border-${secondary_properties[1]}-width: ${t * border_width_end_value}px;`\n    };\n}\nfunction scale(node, { delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const sd = 1 - start;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - (sd * u)});\n\t\t\topacity: ${target_opacity - (od * u)}\n\t\t`\n    };\n}\nfunction draw(node, { delay = 0, speed, duration, easing = cubicInOut } = {}) {\n    let len = node.getTotalLength();\n    const style = getComputedStyle(node);\n    if (style.strokeLinecap !== 'butt') {\n        len += parseInt(style.strokeWidth);\n    }\n    if (duration === undefined) {\n        if (speed === undefined) {\n            duration = 800;\n        }\n        else {\n            duration = len / speed;\n        }\n    }\n    else if (typeof duration === 'function') {\n        duration = duration(len);\n    }\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_, u) => `\n\t\t\tstroke-dasharray: ${len};\n\t\t\tstroke-dashoffset: ${u * len};\n\t\t`\n    };\n}\nfunction crossfade(_a) {\n    var { fallback } = _a, defaults = __rest(_a, [\"fallback\"]);\n    const to_receive = new Map();\n    const to_send = new Map();\n    function crossfade(from_node, node, params) {\n        const { delay = 0, duration = d => Math.sqrt(d) * 30, easing = cubicOut } = assign(assign({}, defaults), params);\n        const from = from_node.getBoundingClientRect();\n        const to = node.getBoundingClientRect();\n        const dx = from.left - to.left;\n        const dy = from.top - to.top;\n        const dw = from.width / to.width;\n        const dh = from.height / to.height;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        const opacity = +style.opacity;\n        return {\n            delay,\n            duration: is_function(duration) ? duration(d) : duration,\n            easing,\n            css: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${t + (1 - t) * dh});\n\t\t\t`\n        };\n    }\n    function transition(items, counterparts, intro) {\n        return (node, params) => {\n            items.set(params.key, node);\n            return () => {\n                if (counterparts.has(params.key)) {\n                    const other_node = counterparts.get(params.key);\n                    counterparts.delete(params.key);\n                    return crossfade(other_node, node, params);\n                }\n                // if the node is disappearing altogether\n                // (i.e. wasn't claimed by the other list)\n                // then we need to supply an outro\n                items.delete(params.key);\n                return fallback && fallback(node, params, intro);\n            };\n        };\n    }\n    return [\n        transition(to_send, to_receive, false),\n        transition(to_receive, to_send, true)\n    ];\n}\n\nexport { blur, crossfade, draw, fade, fly, scale, slide };\n","<script>\n\timport { fade } from \"svelte/transition\";\n\texport let notice = {};\n\n\tfunction onRemove() {\n\t\tif (notice.remove) notice.remove();\n\t}\n\n</script>\n\n<div\n\tclass=\"message {notice.type ? notice.type : ''}\"\n\trole=\"status\"\n\taria-live=\"polite\"\n\ttransition:fade>\n\t<div class=\"text\">{notice.text}</div>\n\t<div class=\"button\"><i class=\"close wxi-close\" on:click={onRemove} /></div>\n</div>\n\n<style>\n\t.message {\n\t\tposition: relative;\n\t\tbackground: var(--wx-notice-background);\n\t\tbox-shadow: var(--wx-notice-shadow);\n\t\tborder: var(--wx-notice-border);\n\t\tborder-radius: var(--wx-notice-border-radius);\n\t\tmargin: var(--wx-notice-margin);\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\toverflow: hidden;\n\t\tfont-family: var(--wx-notice-font-family);\n\t\tfont-size: var(--wx-notice-font-size);\n\t\tline-height: var(--wx-notice-line-height);\n\t\tfont-weight: var(--wx-notice-font-weight);\n\t\tcolor: var(--wx-notice-font-color);\n\t\twidth: var(--wx-notice-width);\n\t}\n\t.message:before {\n\t\tcontent: \"\";\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tz-index: 1;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\twidth: var(--wx-notice-type-border-width);\n\t\theight: 100%;\n\t\tborder-top-right-radius: var(--wx-notice-type-border-width);\n\t\tborder-bottom-right-radius: var(--wx-notice-type-border-width);\n\t\tbackground: var(--wx-notice-type-border-color);\n\t}\n\t.message:after {\n\t\tcontent: \"\";\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\topacity: var(--wx-notice-type-background-opacity);\n\t\tbackground: transparent;\n\t}\n\n\t.text,\n\t.button {\n\t\tposition: relative;\n\t\tz-index: 2;\n\t\tpadding: var(--wx-notice-padding);\n\t}\n\n\t.text {\n\t\tflex-shrink: 0;\n\t\tword-wrap: break-word;\n\t\tmax-width: calc(\n\t\t\tvar(--wx-notice-width) - var(--wx-notice-padding) * 2 -\n\t\t\t\tvar(--wx-notice-icon-size)\n\t\t);\n\t}\n\n\t.close {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tfont-size: var(--wx-notice-icon-size);\n\t\tline-height: 1;\n\t\twidth: var(--wx-notice-icon-size);\n\t\theight: var(--wx-notice-icon-size);\n\t\tcolor: var(--wx-notice-type-icon-color);\n\t\tcursor: pointer;\n\t}\n\t.close:before {\n\t\tdisplay: block;\n\t\tz-index: 1;\n\t}\n\t.close:after {\n\t\tcontent: \"\";\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tleft: 50%;\n\t\ttop: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t\twidth: calc(100% + 4px);\n\t\theight: calc(100% + 4px);\n\t\tborder-radius: 50%;\n\t}\n\t.close:hover:after {\n\t\tbackground: var(--wx-background-hover);\n\t}\n\n\t.message.info,\n\t.message.warning,\n\t.message.success,\n\t.message.danger {\n\t\tcolor: var(--wx-notice-type-font-color);\n\t}\n\n\t.message.info:before,\n\t.message.info:after {\n\t\tbackground: var(--wx-color-info);\n\t}\n\t.message.warning:before,\n\t.message.warning:after {\n\t\tbackground: var(--wx-color-warning);\n\t}\n\t.message.success:before,\n\t.message.success:after {\n\t\tbackground: var(--wx-color-success);\n\t}\n\t.message.danger:before,\n\t.message.danger:after {\n\t\tbackground: var(--wx-color-danger);\n\t}\n\n\t.message.info .close:after,\n\t.message.warning .close:after,\n\t.message.success .close:after,\n\t.message.danger .close:after {\n\t\topacity: var(--wx-notice-type-close-hover-opacity);\n\t}\n\n</style>\n","<script>\n\timport Notice from \"./Notice.svelte\";\n\n\texport let data;\n\n</script>\n\n<div class=\"area\">\n\t{#each data as notice (notice.id)}\n\t\t<Notice {notice} />\n\t{/each}\n</div>\n\n<style>\n\t.area {\n\t\tposition: fixed;\n\t\tz-index: var(--wx-notice-z-index);\n\t\ttop: 0;\n\t\tright: 0;\n\t}\n\n</style>\n","<script>\n\timport { onMount, getContext } from \"svelte\";\n\timport { fade } from \"svelte/transition\";\n\timport Button from \"./Button.svelte\";\n\n\tconst _ = getContext(\"wx-i18n\").getGroup(\"core\");\n\n\texport let title = \"\";\n\texport let ok;\n\texport let cancel;\n\texport let buttons = [\"cancel\", \"ok\"];\n\n\tfunction keydown(e) {\n\t\tswitch (e.code) {\n\t\t\tcase \"Enter\": {\n\t\t\t\tconst from = e.target.tagName;\n\t\t\t\tif (from === \"TEXTAREA\" || from === \"BUTTON\") return;\n\t\t\t\tok();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"Escape\":\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tlet modal;\n\tonMount(() => {\n\t\tmodal.focus();\n\t});\n\n</script>\n\n<div\n\tclass=\"modal\"\n\tbind:this={modal}\n\ttransition:fade={{ duration: 100 }}\n\ttabindex=\"0\"\n\ton:keydown={keydown}>\n\t<div class=\"box\">\n\t\t<slot name=\"title\">\n\t\t\t{#if title}\n\t\t\t\t<div class=\"header\">{title}</div>\n\t\t\t{/if}\n\t\t</slot>\n\t\t<div>\n\t\t\t<slot />\n\t\t</div>\n\t\t<slot name=\"buttons\">\n\t\t\t<div class=\"buttons\">\n\t\t\t\t{#each buttons as button}\n\t\t\t\t\t<div class=\"button\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttype=\"block {button === 'ok' ? 'primary' : 'secondary'}\"\n\t\t\t\t\t\t\tclick={() => (button === 'ok' ? ok() : cancel())}>\n\t\t\t\t\t\t\t{_(button)}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</slot>\n\t</div>\n</div>\n\n<style>\n\t.modal {\n\t\tposition: fixed;\n\t\tz-index: var(--wx-modal-z-index);\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: var(--wx-modal-backdrop);\n\t\ttext-align: center;\n\t}\n\n\t.box {\n\t\tbackground: var(--wx-modal-background);\n\t\tbox-shadow: var(--wx-modal-shadow);\n\t\tborder: var(--wx-modal-border);\n\t\tborder-radius: var(--wx-modal-border-radius);\n\t\tpadding: var(--wx-modal-padding);\n\t\twidth: var(--wx-modal-width);\n\t}\n\n\t.header {\n\t\tfont-family: var(--wx-modal-header-font-family);\n\t\tfont-size: var(--wx-modal-header-font-size);\n\t\tline-height: var(--wx-modal-header-line-height);\n\t\tfont-weight: var(--wx-modal-header-font-weight);\n\t\tcolor: var(--wx-modal-header-font-color);\n\t\tmargin-bottom: var(--wx-modal-gutter);\n\t}\n\n\t.buttons {\n\t\tmargin-top: var(--wx-modal-gutter);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\tmargin-left: calc(var(--wx-modal-gutter) / -2);\n\t\tmargin-right: calc(var(--wx-modal-gutter) / -2);\n\t}\n\n\t.button {\n\t\tflex: 1;\n\t\tmax-width: 50%;\n\t\tpadding: 0 calc(var(--wx-modal-gutter) / 2);\n\t}\n\n</style>\n","<script>\n\timport { setContext } from \"svelte\";\n\n\timport Notices from \"./Notices.svelte\";\n\timport Modal from \"./Modal.svelte\";\n\n\timport { uid } from \"@xbs/lib-core-dom\";\n\n\tlet modal = null;\n\tfunction showModal(msg) {\n\t\tmodal = { ...msg };\n\t\treturn new Promise((res, rej) => {\n\t\t\tmodal.resolve = v => {\n\t\t\t\tmodal = null;\n\t\t\t\tres(v);\n\t\t\t};\n\t\t\tmodal.reject = v => {\n\t\t\t\tmodal = null;\n\t\t\t\trej(v);\n\t\t\t};\n\t\t});\n\t}\n\n\tlet notices = [];\n\tfunction showNotice(msg) {\n\t\tmsg = { ...msg };\n\t\tmsg.id = msg.id || uid();\n\t\tmsg.remove = () => (notices = notices.filter(a => a.id !== msg.id));\n\n\t\tif (msg.expire != -1) {\n\t\t\tsetTimeout(msg.remove, msg.expire || 5000);\n\t\t}\n\t\tnotices = [...notices, msg];\n\t}\n\n\tsetContext(\"wx-helpers\", {\n\t\tshowNotice,\n\t\tshowModal,\n\t});\n\n</script>\n\n<slot />\n{#if modal}\n\t<Modal\n\t\ttitle={modal.title}\n\t\tbuttons={modal.buttons}\n\t\tok={modal.resolve}\n\t\tcancel={modal.reject}>\n\t\t{modal.message}\n\t</Modal>\n{/if}\n<Notices data={notices} />\n","<script>\n\timport { uid } from \"@xbs/lib-core-dom\";\n\n\texport let label = \"\";\n\texport let position = \"\";\n\texport let width = \"\";\n\texport let error = false;\n\texport let type = \"\";\n\n\tlet id = uid();\n\n</script>\n\n<div\n\tclass=\"field {position}\"\n\tclass:error\n\tstyle={width ? `width: ${width}` : ''}>\n\t{#if label}<label for={id}>{label}</label>{/if}\n\t<div class=\"field-control {type}\">\n\t\t<slot {id} />\n\t</div>\n</div>\n\n<style>\n\t.field {\n\t\twidth: var(--wx-field-width);\n\t\tmax-width: 100%;\n\t\tmargin-bottom: var(--wx-field-gutter);\n\t}\n\t.field.left {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: flex-start;\n\t}\n\t.field.left > label {\n\t\twidth: var(--wx-label-width);\n\t\tflex-shrink: 0;\n\t\tmargin: 0 var(--wx-field-gutter) 0 0;\n\t\tpadding-top: calc(\n\t\t\t(var(--wx-input-height) - var(--wx-label-line-height)) / 2\n\t\t);\n\t\ttext-align: right;\n\t}\n\t.field.left > .field-control {\n\t\tmax-width: calc(100% - var(--wx-label-width) - var(--wx-field-gutter));\n\t}\n\t.field.error label {\n\t\tcolor: var(--wx-color-danger);\n\t}\n\n\t.field.left .field-control.checkbox {\n\t\tpadding-top: calc(\n\t\t\t(var(--wx-input-height) - var(--wx-checkbox-height)) / 2\n\t\t);\n\t\tpadding-bottom: calc(\n\t\t\t(var(--wx-input-height) - var(--wx-checkbox-height)) / 2\n\t\t);\n\t}\n\t.field.left .field-control.slider {\n\t\tpadding-top: calc(\n\t\t\t(var(--wx-input-height) - var(--wx-slider-height)) / 2\n\t\t);\n\t\tpadding-bottom: calc(\n\t\t\t(var(--wx-input-height) - var(--wx-slider-height)) / 2\n\t\t);\n\t}\n\t.field.left .field-control.switch {\n\t\tpadding-top: calc(\n\t\t\t(var(--wx-input-height) - var(--wx-switch-height)) / 2\n\t\t);\n\t\tpadding-bottom: calc(\n\t\t\t(var(--wx-input-height) - var(--wx-switch-height)) / 2\n\t\t);\n\t}\n\n\tlabel {\n\t\tdisplay: block;\n\t\tmargin: var(--wx-label-margin);\n\t\tpadding: var(--wx-label-padding);\n\t\tfont-family: var(--wx-label-font-family);\n\t\tfont-size: var(--wx-label-font-size);\n\t\tline-height: var(--wx-label-line-height);\n\t\tfont-weight: var(--wx-label-font-weight);\n\t\tcolor: var(--wx-label-font-color);\n\t}\n\n\t.field-control {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t}\n\n</style>\n","<script>\n\timport { onMount, getContext, onDestroy } from \"svelte\";\n\n\tlet portal;\n\texport let theme = \"\";\n\texport let target = document.body;\n\n\tlet handlers = [];\n\texport const mount = h => {\n\t\tif (handlers) handlers.push(h);\n\t};\n\n\tif (theme === \"\") theme = getContext(\"wx-theme\");\n\n\tonMount(() => {\n\t\ttarget.appendChild(portal);\n\t\tif (handlers) handlers.forEach(h => h());\n\t});\n\n\tonDestroy(() => {\n\t\tif (portal && portal.parentNode) portal.parentNode.removeChild(portal);\n\t});\n\n</script>\n\n<div class=\"wx-clone\">\n\t<div class=\"wx-{theme}-theme\" bind:this={portal}>\n\t\t<slot {mount} />\n\t</div>\n</div>\n\n<style>\n\t.wx-clone {\n\t\tdisplay: none;\n\t}\n\n</style>\n","<script>\n\timport { uid } from \"@xbs/lib-core-dom\";\n\timport { onMount } from \"svelte\";\n\n\texport let data;\n\texport let accept = \"\";\n\texport let disabled = false;\n\texport let multiple = true;\n\texport let folder = false;\n\texport let uploadURL = \"\";\n\n\texport let ready = new Promise(() => ({}));\n\n\tlet input;\n\tlet drag;\n\tlet count = 0;\n\n\tonMount(() => {\n\t\tinput.webkitdirectory = folder;\n\t});\n\n\tfunction add(ev) {\n\t\tconst files = Array.from(ev.target.files);\n\t\tfiles.forEach(f => addFile(f));\n\n\t\tupload();\n\t}\n\n\tfunction drop(ev) {\n\t\tconst items = Array.from(ev.dataTransfer.items);\n\n\t\titems.forEach(item => {\n\t\t\tconst entry = item.webkitGetAsEntry();\n\t\t\tif (entry) flatten(entry);\n\t\t});\n\n\t\tdrag = false;\n\t\tcount = 0;\n\n\t\tupload();\n\t}\n\n\tfunction flatten(item, path) {\n\t\tpath = path || \"\";\n\t\tif (item.isFile) item.file(f => addFile(f));\n\t\telse if (item.isDirectory) {\n\t\t\tconst dir = item.createReader();\n\t\t\tdir.readEntries(items =>\n\t\t\t\titems.forEach(item => {\n\t\t\t\t\tflatten(item, path + item.name + \"/\");\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction addFile(file) {\n\t\tconst obj = {\n\t\t\tid: uid(),\n\t\t\tstatus: \"client\",\n\t\t\tname: file.name,\n\t\t\tfile,\n\t\t};\n\n\t\tif (multiple) {\n\t\t\tdata = [...data, obj];\n\t\t} else {\n\t\t\tdata = [obj];\n\t\t}\n\t}\n\n\tfunction defaultUploader(files) {\n\t\treturn files.map(rec => {\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append(\"upload\", rec.file);\n\n\t\t\tconst config = {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: formData,\n\t\t\t};\n\n\t\t\treturn fetch(uploadURL, config)\n\t\t\t\t.then(res => res.json())\n\t\t\t\t.then(\n\t\t\t\t\tdata => data,\n\t\t\t\t\t() => ({ id: rec.id, status: \"error\" })\n\t\t\t\t)\n\t\t\t\t.catch(error => console.log(error));\n\t\t});\n\t}\n\n\tfunction upload() {\n\t\tconst files = data.filter(i => i.status === \"client\");\n\t\tif (!files.length) return;\n\n\t\tconst requests =\n\t\t\ttypeof uploadURL === \"function\"\n\t\t\t\t? uploadURL(files)\n\t\t\t\t: defaultUploader(files);\n\n\t\tready = Promise.all(requests)\n\t\t\t.then(data => {\n\t\t\t\tdata.forEach(r => {\n\t\t\t\t\tr.status = r.status || \"server\";\n\t\t\t\t\tupdateData(r.id, r);\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\t}\n\n\tfunction updateData(id, result) {\n\t\tconst ind = data.findIndex(i => i.id === id);\n\t\tdata[ind] = { ...data[ind], ...result };\n\t}\n\n\tfunction dragenter() {\n\t\tif (count === 0) drag = true;\n\t\tcount++;\n\t}\n\n\tfunction dragleave() {\n\t\tcount--;\n\t\tif (count === 0) drag = false;\n\t}\n\n\tfunction open() {\n\t\tinput.click();\n\t}\n\n</script>\n\n<div\n\tclass=\"label\"\n\tclass:active={drag}\n\ton:dragenter={dragenter}\n\ton:dragleave={dragleave}\n\ton:dragover|preventDefault\n\ton:drop|preventDefault={drop}>\n\t<input\n\t\ttype=\"file\"\n\t\tbind:this={input}\n\t\ton:change={add}\n\t\t{accept}\n\t\t{disabled}\n\t\t{multiple} />\n\t<slot {open}>\n\t\t<div class=\"dropzone\">\n\t\t\t<span>\n\t\t\t\tDrop files here or\n\t\t\t\t<span class=\"action\" on:click={open}>select files</span>\n\t\t\t</span>\n\t\t</div>\n\t</slot>\n</div>\n\n<style>\n\t.label {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.label.active {\n\t\tbackground-color: var(--wx-background-alt);\n\t}\n\tinput {\n\t\tposition: absolute;\n\t\twidth: 0;\n\t\theight: 0;\n\t\topacity: 0;\n\t}\n\n\t.dropzone {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: var(--wx-padding);\n\t\tborder: var(--wx-input-border);\n\t\tborder-style: dashed;\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tbackground: var(--wx-uploader-background);\n\t}\n\t.action {\n\t\tcursor: pointer;\n\t\tcolor: var(--wx-color-link);\n\t\ttext-decoration: underline;\n\t}\n\n</style>\n","<script>\n\timport { setContext } from \"svelte\";\n\timport RobotoFont from \"./FonttRoboto.svelte\";\n\n\texport let fonts = true;\n\tconst SLOTS = $$props.$$slots;\n\tsetContext(\"wx-theme\", \"material\");\n\n</script>\n\n{#if SLOTS && SLOTS.default}\n\t<div class=\"wx-material-theme\" style=\"height:100%\">\n\t\t<slot />\n\t</div>\n{/if}\n\n<svelte:head>\n\t{#if fonts}\n\t\t<link rel=\"preconnect\" href=\"https://cdn.webix.com\" crossorigin />\n\t\t<RobotoFont />\n\t\t<link\n\t\t\trel=\"stylesheet\"\n\t\t\thref=\"https://webix.io/dev/fonts/wxi/wx-icons.css\" />\n\t{/if}\n</svelte:head>\n\n<style>\n\t:global(.wx-material-theme) {\n\t\t/* base colors */\n\t\t--wx-color-primary: #2f77e3;\n\t\t--wx-color-primary-selected: #d5e6ff;\n\t\t--wx-color-primary-font: #fff;\n\t\t--wx-color-secondary: rgba(0, 0, 0, 0.04);\n\t\t--wx-color-secondary-hover: rgba(0, 0, 0, 0.1);\n\t\t--wx-color-secondary-font: rgba(0, 0, 0, 0.7);\n\t\t--wx-color-secondary-font-hover: rgba(0, 0, 0, 0.7);\n\t\t--wx-color-secondary-border: transparent;\n\t\t--wx-color-secondary-border-disabled: transparent;\n\n\t\t--wx-color-success: #00d19a;\n\t\t--wx-color-warning: #ffc975;\n\t\t--wx-color-info: #37a9ef;\n\t\t--wx-color-danger: #ff5252;\n\t\t--wx-color-disabled: #ededed;\n\n\t\t--wx-color-font: rgba(0, 0, 0, 0.7);\n\t\t--wx-color-font-alt: rgba(0, 0, 0, 0.5);\n\t\t--wx-color-font-disabled: rgba(0, 0, 0, 0.3);\n\t\t--wx-color-link: var(--wx-color-primary);\n\n\t\t--wx-background: #fff;\n\t\t--wx-background-alt: #f7f7f7;\n\t\t--wx-background-hover: linear-gradient(\n\t\t\trgba(0, 0, 0, 0.15) 0%,\n\t\t\trgba(0, 0, 0, 0.15) 100%\n\t\t);\n\t\t/* end base colors */\n\n\t\t/* font */\n\t\t--wx-font-family: Roboto, Arial, Helvetica, sans-serif;\n\t\t--wx-font-size: 14px;\n\t\t--wx-line-height: 20px;\n\t\t--wx-font-size-md: 16px;\n\t\t--wx-line-height-md: 24px;\n\t\t--wx-font-size-sm: 12px;\n\t\t--wx-line-height-sm: 16px;\n\t\t--wx-font-weight: 400;\n\t\t--wx-font-weight-md: 500;\n\t\t--wx-font-weight-b: 700;\n\t\t/* end font */\n\n\t\t/* icons */\n\t\t--wx-icon-color: var(--wx-color-font-alt);\n\t\t--wx-icon-size: var(--wx-line-height);\n\t\t/* end icons */\n\n\t\t/* other */\n\t\t--wx-border: 1px solid #dfdfdf;\n\t\t--wx-border-radius: 2px;\n\t\t--wx-radius-medium: var(--wx-border-radius);\n\n\t\t--wx-border-light: none;\n\t\t--wx-border-medium: 1px solid #eaedf5;\n\n\t\t--wx-shadow-light: 0px 4px 20px rgba(44, 47, 60, 0.12);\n\t\t--wx-box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.15);\n\t\t--wx-box-shadow-strong: 0px 2px 5px rgba(0, 0, 0, 0.3);\n\n\t\t--wx-padding: 8px;\n\t\t/* end other */\n\n\t\t/* field */\n\t\t--wx-field-gutter: 16px;\n\t\t--wx-field-width: 400px;\n\t\t/* end field */\n\n\t\t/* input */\n\t\t--wx-input-font-family: var(--wx-font-family);\n\t\t--wx-input-font-size: var(--wx-font-size);\n\t\t--wx-input-line-height: var(--wx-line-height);\n\t\t--wx-input-font-weigth: var(--wx-font-weight);\n\t\t--wx-input-text-align: left;\n\t\t--wx-input-font-color: var(--wx-color-font);\n\t\t--wx-input-background: var(--wx-background);\n\t\t--wx-input-background-disabled: var(--wx-background);\n\t\t--wx-input-placeholder-color: var(--wx-color-font-alt);\n\t\t--wx-input-border: var(--wx-border);\n\t\t--wx-input-border-focus: 1px solid rgba(0, 0, 0, 0.5);\n\t\t--wx-input-border-disabled: 1px solid var(--wx-color-disabled);\n\t\t--wx-input-border-radius: var(--wx-border-radius);\n\t\t--wx-input-height: 32px;\n\t\t--wx-input-width: 100%;\n\t\t--wx-input-padding: 5px 8px;\n\t\t--wx-input-icon-indent: 6px;\n\t\t--wx-input-icon-color: var(--wx-icon-color);\n\t\t--wx-input-icon-size: var(--wx-icon-size);\n\t\t/* end input */\n\n\t\t/* multi combo */\n\t\t--wx-multicombo-tag-gap: 4px;\n\t\t--wx-multicombo-tag-border: none;\n\t\t--wx-multicombo-tag-border-radius: var(--wx-input-border-radius);\n\t\t--wx-multicombo-tag-pading: 2px 8px;\n\t\t--wx-multicombo-tag-background: var(--wx-background-alt);\n\t\t/* end multi combo */\n\n\t\t/* checkbox and radio */\n\t\t--wx-checkbox-height: var(--wx-line-height);\n\t\t--wx-checkbox-size: 18px;\n\t\t--wx-checkbox-border-width: 2px;\n\t\t--wx-checkbox-border-color: var(--wx-color-font-alt);\n\t\t--wx-checkbox-border-color-disabled: var(--wx-color-font-disabled);\n\t\t--wx-checkbox-border-radius: var(--wx-input-border-radius);\n\t\t--wx-checkbox-font-family: var(--wx-font-family);\n\t\t--wx-checkbox-font-size: var(--wx-font-size);\n\t\t--wx-checkbox-line-height: var(--wx-line-height);\n\t\t--wx-checkbox-font-weight: var(--wx-font-weight);\n\t\t--wx-checkbox-font-color: var(--wx-color-font);\n\t\t/* end checkbox and radio */\n\n\t\t/* label */\n\t\t--wx-label-width: 80px;\n\t\t--wx-label-margin: 0 0 8px;\n\t\t--wx-label-padding: 0;\n\t\t--wx-label-font-family: var(--wx-font-family);\n\t\t--wx-label-font-size: var(--wx-font-size);\n\t\t--wx-label-line-height: var(--wx-line-height);\n\t\t--wx-label-font-weight: var(--wx-font-weight-md);\n\t\t--wx-label-font-color: var(--wx-color-font);\n\t\t/* end label */\n\n\t\t/* button */\n\t\t--wx-button-font-family: var(--wx-font-family);\n\t\t--wx-button-font-size: var(--wx-font-size);\n\t\t--wx-button-line-height: var(--wx-line-height);\n\t\t--wx-button-font-weigth: var(--wx-font-weight-md);\n\t\t--wx-button-text-transform: none;\n\t\t--wx-button-font-color: var(--wx-color-font);\n\t\t--wx-button-danger-font-color: #fff;\n\t\t--wx-button-background: var(--wx-background-alt);\n\t\t--wx-button-border: 1px solid transparent;\n\t\t--wx-button-border-radius: var(--wx-border-radius);\n\t\t--wx-button-height: 32px;\n\t\t--wx-button-padding: 5px 20px;\n\t\t--wx-button-icon-indent: 7px;\n\t\t--wx-button-icon-size: 16px;\n\t\t/* end button */\n\n\t\t/* segmented */\n\t\t--wx-segmented-background: var(--wx-background-alt);\n\t\t--wx-segmented-background-hover: var(--wx-background-hover);\n\t\t--wx-segmented-border: var(--wx-border);\n\t\t--wx-segmented-border-radius: var(--wx-border-radius);\n\t\t--wx-segmented-padding: 3px;\n\t\t/* end segmented */\n\n\t\t/* tabs */\n\t\t--wx-tabs-background: var(--wx-background-alt);\n\t\t--wx-tabs-background-hover: var(--wx-background-hover);\n\t\t--wx-tabs-hover-border: transparent;\n\t\t--wx-tabs-border-width: 1px;\n\t\t--wx-tabs-border-radius: var(--wx-border-radius);\n\t\t--wx-tabs-divider-width: 1px;\n\t\t--wx-tabs-divider-height: 100%;\n\t\t--wx-tabs-divider-color: #dfdfdf;\n\t\t--wx-tabs-cell-min-width: 100px;\n\t\t--wx-tabs-active-background: var(--wx-color-primary);\n\t\t--wx-tabs-active-color: var(--wx-color-primary-font);\n\t\t--wx-tabs-active-border: transparent;\n\t\t/* end tabs */\n\n\t\t/* slider */\n\t\t--wx-slider-height: 16px;\n\t\t--wx-slider-primary: var(--wx-color-primary);\n\t\t--wx-slider-background: #dfdfdf;\n\t\t--wx-slider-track-height: 4px;\n\t\t--wx-slider-track-border-radius: 2px;\n\t\t--wx-slider-thumb-size: var(--wx-slider-height);\n\t\t--wx-slider-thumb-border: 2px solid var(--wx-background);\n\t\t--wx-slider-thumb-border-disabled: none;\n\t\t--wx-slider-thumb-shadow: var(--wx-box-shadow-strong);\n\t\t--wx-slider-label-margin: 0 0 5px;\n\t\t--wx-slider-label-font-family: var(--wx-font-family);\n\t\t--wx-slider-label-font-size: var(--wx-font-size);\n\t\t--wx-slider-label-line-height: var(--wx-line-height);\n\t\t--wx-slider-label-font-weight: var(--wx-font-weight-md);\n\t\t--wx-slider-label-font-color: var(--wx-color-font);\n\t\t/* end slider */\n\n\t\t/* switch */\n\t\t--wx-switch-primary: var(--wx-color-primary);\n\t\t--wx-switch-background: rgba(0, 0, 0, 0.3);\n\t\t--wx-switch-width: 44px;\n\t\t--wx-switch-height: 22px;\n\t\t--wx-switch-border-width: 1px;\n\t\t--wx-switch-border-color: transparent;\n\t\t--wx-switch-border-color-disabled: #dfdfdf;\n\t\t--wx-switch-thumb-offset: 1px;\n\t\t--wx-switch-thumb-border: none;\n\t\t--wx-switch-thumb-border-disabled: none;\n\t\t--wx-switch-thumb-background: var(--wx-background);\n\t\t--wx-switch-thumb-background-disabled: var(--wx-background);\n\t\t--wx-switch-thumb-shadow: var(--wx-box-shadow-strong);\n\t\t/* end switch */\n\n\t\t/* popup and dropdown */\n\t\t--wx-popup-z-index: 100;\n\t\t--wx-popup-background: var(--wx-background);\n\t\t--wx-popup-shadow: var(--wx-box-shadow);\n\t\t--wx-popup-border: none;\n\t\t--wx-popup-border-radius: var(--wx-border-radius);\n\t\t/* end popup and dropdown */\n\n\t\t/* modal */\n\t\t--wx-modal-z-index: 1000;\n\t\t--wx-modal-background: var(--wx-background);\n\t\t--wx-modal-shadow: var(--wx-box-shadow-strong);\n\t\t--wx-modal-border: none;\n\t\t--wx-modal-border-radius: var(--wx-border-radius);\n\t\t--wx-modal-width: 280px;\n\t\t--wx-modal-padding: 16px 20px;\n\t\t--wx-modal-gutter: 14px;\n\t\t--wx-modal-backdrop: rgba(0, 0, 0, 0.5);\n\t\t--wx-modal-header-font-family: var(--wx-font-family);\n\t\t--wx-modal-header-font-size: var(--wx-font-size-md);\n\t\t--wx-modal-header-line-height: var(--wx-line-height-md);\n\t\t--wx-modal-header-font-weight: var(--wx-font-weight-b);\n\t\t--wx-modal-header-font-color: #000;\n\t\t/* end modal */\n\n\t\t/* notice */\n\t\t--wx-notice-z-index: 1010;\n\t\t--wx-notice-background: var(--wx-background);\n\t\t--wx-notice-shadow: var(--wx-box-shadow-strong);\n\t\t--wx-notice-border: none;\n\t\t--wx-notice-border-radius: var(--wx-border-radius);\n\t\t--wx-notice-margin: 6px 12px;\n\t\t--wx-notice-font-family: var(--wx-font-family);\n\t\t--wx-notice-font-size: var(--wx-font-size);\n\t\t--wx-notice-line-height: var(--wx-line-height);\n\t\t--wx-notice-font-weight: var(--wx-font-weight);\n\t\t--wx-notice-font-color: var(--wx-color-font);\n\t\t--wx-notice-padding: var(--wx-padding);\n\t\t--wx-notice-width: 240px;\n\t\t--wx-notice-icon-size: var(--wx-icon-size);\n\t\t--wx-notice-icon-color: var(--wx-icon-color);\n\t\t--wx-notice-type-border-width: 0px;\n\t\t--wx-notice-type-border-color: transparent;\n\t\t--wx-notice-type-font-color: #fff;\n\t\t--wx-notice-type-icon-color: rgba(255, 255, 255, 0.8);\n\t\t--wx-notice-type-background-opacity: 1;\n\t\t--wx-notice-type-close-hover-opacity: 0.3;\n\t\t/* end notice */\n\n\t\t/* uploader */\n\t\t--wx-uploader-background: var(--wx-background-alt);\n\t\t/* end uploader */\n\n\t\t/* calendar */\n\t\t--wx-calendar-padding: 16px;\n\t\t--wx-calendar-gutter: 12px;\n\t\t--wx-calendar-cell-size: 28px;\n\t\t--wx-calendar-cell-gap: 0px;\n\t\t--wx-calendar-font-family: var(--wx-font-family);\n\t\t--wx-calendar-font-size: var(--wx-font-size);\n\t\t--wx-calendar-line-height: var(--wx-line-height);\n\t\t--wx-calendar-font-weight: var(--wx-font-weight);\n\t\t--wx-calendar-font-color: var(--wx-color-font);\n\t\t--wx-calendar-icon-color: var(--wx-icon-color);\n\t\t--wx-calendar-icon-size: var(--wx-icon-size);\n\t\t--wx-calendar-header-font-size: var(--wx-font-size);\n\t\t--wx-calendar-header-line-height: var(--wx-line-height);\n\t\t--wx-calendar-header-font-weight: var(--wx-font-weight-md);\n\t\t--wx-calendar-controls-font-family: var(--wx-button-font-family);\n\t\t--wx-calendar-controls-font-size: var(--wx-button-font-size);\n\t\t--wx-calendar-controls-line-height: var(--wx-button-line-height);\n\t\t--wx-calendar-controls-font-weight: var(--wx-button-font-weigth);\n\t\t--wx-calendar-controls-font-color: var(--wx-color-link);\n\t\t/* end calendar */\n\t}\n\n\t:global(.wx-material-theme) {\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tline-height: var(--wx-line-height);\n\t\tfont-weight: var(--wx-font-weight);\n\t\tfont-style: normal;\n\t\tletter-spacing: normal;\n\t\ttext-align: left;\n\t\tcolor: var(--wx-color-font);\n\t\tbackground: var(--wx-background);\n\t}\n\t:global(.wx-material-theme *, .wx-material-theme\n\t\t\t*:before, .wx-material-theme *:after) {\n\t\tbox-sizing: border-box;\n\t}\n\n</style>\n","<script>\n\timport { setContext } from \"svelte\";\n\timport FontOpenSans from \"./FontOpenSans.svelte\";\n\n\texport let fonts = true;\n\tconst SLOTS = $$props.$$slots;\n\tsetContext(\"wx-theme\", \"willow\");\n\n</script>\n\n{#if SLOTS && SLOTS.default}\n\t<div class=\"wx-willow-theme\" style=\"height:100%\">\n\t\t<slot />\n\t</div>\n{/if}\n\n<svelte:head>\n\t{#if fonts}\n\t\t<link rel=\"preconnect\" href=\"https://cdn.webix.com\" crossorigin />\n\t\t<FontOpenSans />\n\t\t<link\n\t\t\trel=\"stylesheet\"\n\t\t\thref=\"https://webix.io/dev/fonts/wxi/wx-icons.css\" />\n\t{/if}\n</svelte:head>\n\n<style>\n\t:global(.wx-willow-theme) {\n\t\t/* base colors */\n\t\t--wx-color-primary: #37a9ef;\n\t\t--wx-color-primary-selected: #d5eaf7;\n\t\t--wx-color-primary-font: #fff;\n\t\t--wx-color-secondary: transparent;\n\t\t--wx-color-secondary-hover: rgba(55, 169, 239, 0.12);\n\t\t--wx-color-secondary-font: var(--wx-color-primary);\n\t\t--wx-color-secondary-font-hover: var(--wx-color-primary);\n\t\t--wx-color-secondary-border: var(--wx-color-primary);\n\t\t--wx-color-secondary-border-disabled: #c0c3ce;\n\n\t\t--wx-color-success: #77d257;\n\t\t--wx-color-warning: #fcba2e;\n\t\t--wx-color-info: #37a9ef;\n\t\t--wx-color-danger: #fe6158;\n\t\t--wx-color-disabled: #f2f3f7;\n\n\t\t--wx-color-font: #2c2f3c;\n\t\t--wx-color-font-alt: #9fa1ae;\n\t\t--wx-color-font-disabled: #c0c3ce;\n\t\t--wx-color-link: var(--wx-color-primary);\n\n\t\t--wx-background: #ffffff;\n\t\t--wx-background-alt: #f2f3f7;\n\t\t--wx-background-hover: #eaedf5;\n\t\t/* end base colors */\n\n\t\t/* font */\n\t\t--wx-font-family: \"Open Sans\", Arial, Helvetica, sans-serif;\n\t\t--wx-font-size: 14px;\n\t\t--wx-line-height: 20px;\n\t\t--wx-font-size-md: 16px;\n\t\t--wx-line-height-md: 24px;\n\t\t--wx-font-size-sm: 12px;\n\t\t--wx-line-height-sm: 16px;\n\t\t--wx-font-weight: 400;\n\t\t--wx-font-weight-md: 600;\n\t\t--wx-font-weight-b: 700;\n\t\t/* end font */\n\n\t\t/* icons */\n\t\t--wx-icon-color: #9fa1ae;\n\t\t--wx-icon-size: var(--wx-line-height);\n\t\t/* end icons */\n\n\t\t/* other */\n\t\t--wx-border: 1px solid #e6e6e6;\n\t\t--wx-border-radius: 3px;\n\t\t--wx-radius-major: 6px;\n\n\t\t--wx-border-light: none;\n\t\t--wx-border-medium: 1px solid #eaedf5;\n\n\t\t--wx-shadow-light: 0px 4px 20px rgba(44, 47, 60, 0.12);\n\t\t--wx-box-shadow: 0px 1px 2px rgba(44, 47, 60, 0.06),\n\t\t\t0px 3px 10px rgba(44, 47, 60, 0.12);\n\t\t--wx-box-shadow-strong: 0px 4px 20px rgba(44, 47, 60, 0.16);\n\n\t\t--wx-padding: 8px;\n\t\t/* end other */\n\n\t\t/* field */\n\t\t--wx-field-gutter: 16px;\n\t\t--wx-field-width: 400px;\n\t\t/* end field */\n\n\t\t/* input */\n\t\t--wx-input-font-family: var(--wx-font-family);\n\t\t--wx-input-font-size: var(--wx-font-size);\n\t\t--wx-input-line-height: var(--wx-line-height);\n\t\t--wx-input-font-weigth: var(--wx-font-weight);\n\t\t--wx-input-text-align: left;\n\t\t--wx-input-font-color: var(--wx-color-font);\n\t\t--wx-input-background: var(--wx-background);\n\t\t--wx-input-background-disabled: var(--wx-color-disabled);\n\t\t--wx-input-placeholder-color: var(--wx-color-font-alt);\n\t\t--wx-input-border: var(--wx-border);\n\t\t--wx-input-border-focus: 1px solid var(--wx-color-primary);\n\t\t--wx-input-border-disabled: var(--wx-border);\n\t\t--wx-input-border-radius: 3px;\n\t\t--wx-input-height: 32px;\n\t\t--wx-input-width: 100%;\n\t\t--wx-input-padding: 5px 8px;\n\t\t--wx-input-icon-indent: 6px;\n\t\t--wx-input-icon-color: var(--wx-icon-color);\n\t\t--wx-input-icon-size: var(--wx-icon-size);\n\t\t/* end input */\n\n\t\t/* multi combo */\n\t\t--wx-multicombo-tag-gap: 3px;\n\t\t--wx-multicombo-tag-border: none;\n\t\t--wx-multicombo-tag-border-radius: var(--wx-input-border-radius);\n\t\t--wx-multicombo-tag-pading: 2px 8px;\n\t\t--wx-multicombo-tag-background: var(--wx-background-alt);\n\t\t/* end multi combo */\n\n\t\t/* checkbox and radio */\n\t\t--wx-checkbox-height: var(--wx-line-height);\n\t\t--wx-checkbox-size: var(--wx-checkbox-height);\n\t\t--wx-checkbox-border-width: 2px;\n\t\t--wx-checkbox-border-color: var(--wx-color-font-alt);\n\t\t--wx-checkbox-border-color-disabled: var(--wx-color-disabled);\n\t\t--wx-checkbox-border-radius: var(--wx-input-border-radius);\n\t\t--wx-checkbox-font-family: var(--wx-font-family);\n\t\t--wx-checkbox-font-size: var(--wx-font-size);\n\t\t--wx-checkbox-line-height: var(--wx-line-height);\n\t\t--wx-checkbox-font-weight: var(--wx-font-weight);\n\t\t--wx-checkbox-font-color: var(--wx-color-font);\n\t\t/* end checkbox and radio */\n\n\t\t/* label */\n\t\t--wx-label-width: 100px;\n\t\t--wx-label-margin: 0 0 4px;\n\t\t--wx-label-padding: 0;\n\t\t--wx-label-font-family: var(--wx-font-family);\n\t\t--wx-label-font-size: var(--wx-font-size);\n\t\t--wx-label-line-height: var(--wx-line-height);\n\t\t--wx-label-font-weight: var(--wx-font-weight-md);\n\t\t--wx-label-font-color: var(--wx-color-font);\n\t\t/* end label */\n\n\t\t/* button */\n\t\t--wx-button-font-family: var(--wx-font-family);\n\t\t--wx-button-font-size: var(--wx-font-size-md);\n\t\t--wx-button-line-height: var(--wx-line-height);\n\t\t--wx-button-font-weigth: var(--wx-font-weight-md);\n\t\t--wx-button-text-transform: none;\n\t\t--wx-button-font-color: var(--wx-color-font);\n\t\t--wx-button-danger-font-color: #fff;\n\t\t--wx-button-background: var(--wx-background-alt);\n\t\t--wx-button-border: 1px solid transparent;\n\t\t--wx-button-border-radius: var(--wx-border-radius);\n\t\t--wx-button-height: 32px;\n\t\t--wx-button-padding: 5px 16px;\n\t\t--wx-button-icon-indent: 5px;\n\t\t--wx-button-icon-size: 22px;\n\t\t/* end button */\n\n\t\t/* segmented */\n\t\t--wx-segmented-background: var(--wx-background-alt);\n\t\t--wx-segmented-background-hover: var(--wx-background-hover);\n\t\t--wx-segmented-border: none;\n\t\t--wx-segmented-border-radius: 6px;\n\t\t--wx-segmented-padding: 0px;\n\t\t/* end segmented */\n\n\t\t/* tabs */\n\t\t--wx-tabs-background: var(--wx-background);\n\t\t--wx-tabs-background-hover: transparent;\n\t\t--wx-tabs-hover-border: #9fa1ae;\n\t\t--wx-tabs-border-width: 1px;\n\t\t--wx-tabs-border-radius: var(--wx-border-radius);\n\t\t--wx-tabs-divider-width: 1px;\n\t\t--wx-tabs-divider-height: 60%;\n\t\t--wx-tabs-divider-color: transparent;\n\t\t--wx-tabs-cell-min-width: 100px;\n\t\t--wx-tabs-active-background: transparent;\n\t\t--wx-tabs-active-color: var(--wx-color-primary);\n\t\t--wx-tabs-active-border: var(--wx-tabs-active-color);\n\t\t/* end tabs */\n\n\t\t/* slider */\n\t\t--wx-slider-height: 14px;\n\t\t--wx-slider-primary: var(--wx-color-primary);\n\t\t--wx-slider-background: var(--wx-background-alt);\n\t\t--wx-slider-track-height: 4px;\n\t\t--wx-slider-track-border-radius: 2px;\n\t\t--wx-slider-thumb-size: var(--wx-slider-height);\n\t\t--wx-slider-thumb-border: none;\n\t\t--wx-slider-thumb-border-disabled: none;\n\t\t--wx-slider-thumb-shadow: var(--wx-box-shadow-strong);\n\t\t--wx-slider-label-margin: 0 0 5px;\n\t\t--wx-slider-label-font-family: var(--wx-font-family);\n\t\t--wx-slider-label-font-size: var(--wx-font-size);\n\t\t--wx-slider-label-line-height: var(--wx-line-height);\n\t\t--wx-slider-label-font-weight: var(--wx-font-weight-md);\n\t\t--wx-slider-label-font-color: var(--wx-color-font);\n\t\t/* end slider */\n\n\t\t/* switch */\n\t\t--wx-switch-primary: var(--wx-color-primary);\n\t\t--wx-switch-background: #9fa1ae;\n\t\t--wx-switch-width: 48px;\n\t\t--wx-switch-height: 24px;\n\t\t--wx-switch-border-width: 0px;\n\t\t--wx-switch-border-color: transparent;\n\t\t--wx-switch-border-color-disabled: transparent;\n\t\t--wx-switch-thumb-offset: 1px;\n\t\t--wx-switch-thumb-border: none;\n\t\t--wx-switch-thumb-border-disabled: 1px solid #c0c3ce;\n\t\t--wx-switch-thumb-background: var(--wx-background);\n\t\t--wx-switch-thumb-background-disabled: var(--wx-color-disabled);\n\t\t--wx-switch-thumb-shadow: none;\n\t\t/* end switch */\n\n\t\t/* popup and dropdown */\n\t\t--wx-popup-z-index: 100;\n\t\t--wx-popup-background: var(--wx-background);\n\t\t--wx-popup-shadow: var(--wx-box-shadow);\n\t\t--wx-popup-border: none;\n\t\t--wx-popup-border-radius: var(--wx-border-radius);\n\t\t/* end popup and dropdown */\n\n\t\t/* modal */\n\t\t--wx-modal-z-index: 1000;\n\t\t--wx-modal-background: var(--wx-background);\n\t\t--wx-modal-shadow: var(--wx-box-shadow);\n\t\t--wx-modal-border: none;\n\t\t--wx-modal-border-radius: var(--wx-border-radius);\n\t\t--wx-modal-width: 280px;\n\t\t--wx-modal-padding: 16px 20px;\n\t\t--wx-modal-gutter: 14px;\n\t\t--wx-modal-backdrop: rgba(108, 114, 131, 0.2);\n\t\t--wx-modal-header-font-family: var(--wx-font-family);\n\t\t--wx-modal-header-font-size: var(--wx-font-size-md);\n\t\t--wx-modal-header-line-height: var(--wx-line-height-md);\n\t\t--wx-modal-header-font-weight: var(--wx-font-weight-b);\n\t\t--wx-modal-header-font-color: #000;\n\t\t/* end modal */\n\n\t\t/* notice */\n\t\t--wx-notice-z-index: 1010;\n\t\t--wx-notice-background: var(--wx-background);\n\t\t--wx-notice-shadow: var(--wx-box-shadow);\n\t\t--wx-notice-border: none;\n\t\t--wx-notice-border-radius: 0 var(--wx-border-radius)\n\t\t\tvar(--wx-border-radius) 0;\n\t\t--wx-notice-margin: 6px 12px;\n\t\t--wx-notice-font-family: var(--wx-font-family);\n\t\t--wx-notice-font-size: var(--wx-font-size);\n\t\t--wx-notice-line-height: var(--wx-line-height);\n\t\t--wx-notice-font-weight: var(--wx-font-weight);\n\t\t--wx-notice-font-color: var(--wx-color-font);\n\t\t--wx-notice-padding: 14px;\n\t\t--wx-notice-width: 240px;\n\t\t--wx-notice-icon-size: var(--wx-icon-size);\n\t\t--wx-notice-icon-color: var(--wx-icon-color);\n\t\t--wx-notice-type-border-width: 4px;\n\t\t--wx-notice-type-border-color: var(--wx-icon-color);\n\t\t--wx-notice-type-font-color: var(--wx-color-font);\n\t\t--wx-notice-type-icon-color: var(--wx-icon-color);\n\t\t--wx-notice-type-background-opacity: 0;\n\t\t--wx-notice-type-close-hover-opacity: 1;\n\t\t/* end notice */\n\n\t\t/* uploader */\n\t\t--wx-uploader-background: var(--wx-background-hover);\n\t\t/* end uploader */\n\n\t\t/* calendar */\n\t\t--wx-calendar-padding: 16px;\n\t\t--wx-calendar-gutter: 12px;\n\t\t--wx-calendar-cell-size: 24px;\n\t\t--wx-calendar-cell-gap: 4px;\n\t\t--wx-calendar-font-family: var(--wx-font-family);\n\t\t--wx-calendar-font-size: var(--wx-font-size);\n\t\t--wx-calendar-line-height: var(--wx-line-height);\n\t\t--wx-calendar-font-weight: var(--wx-font-weight);\n\t\t--wx-calendar-font-color: var(--wx-color-font);\n\t\t--wx-calendar-icon-color: var(--wx-icon-color);\n\t\t--wx-calendar-icon-size: var(--wx-icon-size);\n\t\t--wx-calendar-header-font-size: var(--wx-font-size);\n\t\t--wx-calendar-header-line-height: var(--wx-line-height);\n\t\t--wx-calendar-header-font-weight: var(--wx-font-weight-md);\n\t\t--wx-calendar-controls-font-family: var(--wx-button-font-family);\n\t\t--wx-calendar-controls-font-size: var(--wx-font-size);\n\t\t--wx-calendar-controls-line-height: var(--wx-line-height);\n\t\t--wx-calendar-controls-font-weight: var(--wx-font-weight);\n\t\t--wx-calendar-controls-font-color: var(--wx-color-font);\n\t\t/* end calendar */\n\t}\n\n\t:global(.wx-willow-theme) {\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tline-height: var(--wx-line-height);\n\t\tfont-weight: var(--wx-font-weight);\n\t\tfont-style: normal;\n\t\tletter-spacing: normal;\n\t\ttext-align: left;\n\t\tcolor: var(--wx-color-font);\n\t\tbackground: var(--wx-background);\n\t}\n\t:global(.wx-willow-theme *, .wx-willow-theme *:before, .wx-willow-theme\n\t\t\t*:after) {\n\t\tbox-sizing: border-box;\n\t}\n\n</style>\n","<script>\n\timport { setContext } from \"svelte\";\n\timport FontOpenSans from \"./FontOpenSans.svelte\";\n\n\texport let fonts = true;\n\tconst SLOTS = $$props.$$slots;\n\tsetContext(\"wx-theme\", \"willow-dark\");\n\n</script>\n\n{#if SLOTS && SLOTS.default}\n\t<div class=\"wx-willow-dark-theme\" style=\"height:100%\">\n\t\t<slot />\n\t</div>\n{/if}\n\n<svelte:head>\n\t{#if fonts}\n\t\t<link rel=\"preconnect\" href=\"https://cdn.webix.com\" crossorigin />\n\t\t<FontOpenSans />\n\t\t<link\n\t\t\trel=\"stylesheet\"\n\t\t\thref=\"https://webix.io/dev/fonts/wxi/wx-icons.css\" />\n\t{/if}\n</svelte:head>\n\n<style>\n\t:global(.wx-willow-dark-theme) {\n\t\t/* base colors */\n\t\t--wx-color-primary: #7a67eb;\n\t\t--wx-color-primary-selected: rgba(122, 103, 235, 0.3);\n\t\t--wx-color-primary-font: #fff;\n\t\t--wx-color-secondary: transparent;\n\t\t--wx-color-secondary-hover: rgba(122, 103, 235, 0.12);\n\t\t--wx-color-secondary-font: var(--wx-color-primary);\n\t\t--wx-color-secondary-font-hover: var(--wx-color-primary);\n\t\t--wx-color-secondary-border: var(--wx-color-primary);\n\t\t--wx-color-secondary-border-disabled: #9fa1ae;\n\n\t\t--wx-color-success: #77d257;\n\t\t--wx-color-warning: #fcba2e;\n\t\t--wx-color-info: var(--wx-color-primary);\n\t\t--wx-color-danger: #fe6158;\n\t\t--wx-color-disabled: #384047;\n\n\t\t--wx-color-font: rgba(255, 255, 255, 0.9);\n\t\t--wx-color-font-alt: #9fa1ae;\n\t\t--wx-color-font-disabled: #9fa1ae;\n\t\t--wx-color-link: var(--wx-color-primary);\n\n\t\t--wx-background: #2a2b2d;\n\t\t--wx-background-alt: #384047;\n\t\t--wx-background-hover: #20262b;\n\t\t/* end base colors */\n\n\t\t/* font */\n\t\t--wx-font-family: \"Open Sans\", Arial, Helvetica, sans-serif;\n\t\t--wx-font-size: 14px;\n\t\t--wx-line-height: 20px;\n\t\t--wx-font-size-md: 16px;\n\t\t--wx-line-height-md: 24px;\n\t\t--wx-font-size-sm: 12px;\n\t\t--wx-line-height-sm: 16px;\n\t\t--wx-font-weight: 400;\n\t\t--wx-font-weight-md: 600;\n\t\t--wx-font-weight-b: 700;\n\t\t/* end font */\n\n\t\t/* icons */\n\t\t--wx-icon-color: #c0c3ce;\n\t\t--wx-icon-size: var(--wx-line-height);\n\t\t/* end icons */\n\n\t\t/* other */\n\t\t--wx-border: 1px solid #384047;\n\t\t--wx-border-radius: 3px;\n\t\t--wx-radius-major: 6px;\n\n\t\t--wx-border-light: 1px solid #384047;\n\t\t--wx-border-medium: 1px solid #384047;\n\n\t\t--wx-shadow-light: none;\n\t\t--wx-box-shadow: 0px 4px 48px rgba(44, 47, 60, 0.18);\n\t\t--wx-box-shadow-strong: 0px 4px 48px rgba(44, 47, 60, 0.18),\n\t\t\t0px 4px 8px rgba(14, 14, 15, 0.3);\n\n\t\t--wx-padding: 8px;\n\t\t/* end other */\n\n\t\t/* field */\n\t\t--wx-field-gutter: 16px;\n\t\t--wx-field-width: 400px;\n\t\t/* end field */\n\n\t\t/* input */\n\t\t--wx-input-font-family: var(--wx-font-family);\n\t\t--wx-input-font-size: var(--wx-font-size);\n\t\t--wx-input-line-height: var(--wx-line-height);\n\t\t--wx-input-font-weigth: var(--wx-font-weight);\n\t\t--wx-input-text-align: left;\n\t\t--wx-input-font-color: var(--wx-color-font);\n\t\t--wx-input-background: var(--wx-background);\n\t\t--wx-input-background-disabled: var(--wx-color-disabled);\n\t\t--wx-input-placeholder-color: var(--wx-color-font-alt);\n\t\t--wx-input-border: var(--wx-border);\n\t\t--wx-input-border-focus: 1px solid var(--wx-color-primary);\n\t\t--wx-input-border-disabled: var(--wx-border);\n\t\t--wx-input-border-radius: 3px;\n\t\t--wx-input-height: 32px;\n\t\t--wx-input-width: 100%;\n\t\t--wx-input-padding: 5px 8px;\n\t\t--wx-input-icon-indent: 6px;\n\t\t--wx-input-icon-color: var(--wx-icon-color);\n\t\t--wx-input-icon-size: var(--wx-icon-size);\n\t\t/* end input */\n\n\t\t/* multi combo */\n\t\t--wx-multicombo-tag-gap: 3px;\n\t\t--wx-multicombo-tag-border: none;\n\t\t--wx-multicombo-tag-border-radius: var(--wx-input-border-radius);\n\t\t--wx-multicombo-tag-pading: 2px 8px;\n\t\t--wx-multicombo-tag-background: var(--wx-background-alt);\n\t\t/* end multi combo */\n\n\t\t/* checkbox and radio */\n\t\t--wx-checkbox-height: var(--wx-line-height);\n\t\t--wx-checkbox-size: var(--wx-checkbox-height);\n\t\t--wx-checkbox-border-width: 2px;\n\t\t--wx-checkbox-border-color: var(--wx-color-font-alt);\n\t\t--wx-checkbox-border-color-disabled: var(--wx-color-disabled);\n\t\t--wx-checkbox-border-radius: var(--wx-input-border-radius);\n\t\t--wx-checkbox-font-family: var(--wx-font-family);\n\t\t--wx-checkbox-font-size: var(--wx-font-size);\n\t\t--wx-checkbox-line-height: var(--wx-line-height);\n\t\t--wx-checkbox-font-weight: var(--wx-font-weight);\n\t\t--wx-checkbox-font-color: var(--wx-color-font);\n\t\t/* end checkbox and radio */\n\n\t\t/* label */\n\t\t--wx-label-width: 100px;\n\t\t--wx-label-margin: 0 0 4px;\n\t\t--wx-label-padding: 0;\n\t\t--wx-label-font-family: var(--wx-font-family);\n\t\t--wx-label-font-size: var(--wx-font-size);\n\t\t--wx-label-line-height: var(--wx-line-height);\n\t\t--wx-label-font-weight: var(--wx-font-weight-md);\n\t\t--wx-label-font-color: var(--wx-color-font);\n\t\t/* end label */\n\n\t\t/* button */\n\t\t--wx-button-font-family: var(--wx-font-family);\n\t\t--wx-button-font-size: var(--wx-font-size-md);\n\t\t--wx-button-line-height: var(--wx-line-height);\n\t\t--wx-button-font-weigth: var(--wx-font-weight-md);\n\t\t--wx-button-text-transform: none;\n\t\t--wx-button-background: var(--wx-background-alt);\n\t\t--wx-button-font-color: var(--wx-color-font);\n\t\t--wx-button-danger-font-color: #fff;\n\t\t--wx-button-border: 1px solid transparent;\n\t\t--wx-button-border-radius: var(--wx-border-radius);\n\t\t--wx-button-height: 32px;\n\t\t--wx-button-padding: 5px 16px;\n\t\t--wx-button-icon-indent: 5px;\n\t\t--wx-button-icon-size: 22px;\n\t\t/* end button */\n\n\t\t/* segmented */\n\t\t--wx-segmented-background: var(--wx-background-alt);\n\t\t--wx-segmented-background-hover: var(--wx-background-hover);\n\t\t--wx-segmented-border: none;\n\t\t--wx-segmented-border-radius: 6px;\n\t\t--wx-segmented-padding: 0px;\n\t\t/* end segmented */\n\n\t\t/* tabs */\n\t\t--wx-tabs-background: var(--wx-background);\n\t\t--wx-tabs-background-hover: transparent;\n\t\t--wx-tabs-hover-border: #9fa1ae;\n\t\t--wx-tabs-border-width: 1px;\n\t\t--wx-tabs-border-radius: var(--wx-border-radius);\n\t\t--wx-tabs-divider-width: 1px;\n\t\t--wx-tabs-divider-height: 60%;\n\t\t--wx-tabs-divider-color: transparent;\n\t\t--wx-tabs-cell-min-width: 100px;\n\t\t--wx-tabs-active-background: transparent;\n\t\t--wx-tabs-active-color: var(--wx-color-primary);\n\t\t--wx-tabs-active-border: var(--wx-tabs-active-color);\n\t\t/* end tabs */\n\n\t\t/* slider */\n\t\t--wx-slider-height: 14px;\n\t\t--wx-slider-primary: var(--wx-color-primary);\n\t\t--wx-slider-background: var(--wx-background-alt);\n\t\t--wx-slider-track-height: 4px;\n\t\t--wx-slider-track-border-radius: 2px;\n\t\t--wx-slider-thumb-size: var(--wx-slider-height);\n\t\t--wx-slider-thumb-border: none;\n\t\t--wx-slider-thumb-border-disabled: 1px solid var(--wx-color-disabled);\n\t\t--wx-slider-thumb-shadow: var(--wx-box-shadow-strong);\n\t\t--wx-slider-label-margin: 0 0 5px;\n\t\t--wx-slider-label-font-family: var(--wx-font-family);\n\t\t--wx-slider-label-font-size: var(--wx-font-size);\n\t\t--wx-slider-label-line-height: var(--wx-line-height);\n\t\t--wx-slider-label-font-weight: var(--wx-font-weight-md);\n\t\t--wx-slider-label-font-color: var(--wx-color-font);\n\t\t/* end slider */\n\n\t\t/* switch */\n\t\t--wx-switch-primary: var(--wx-color-primary);\n\t\t--wx-switch-background: #384047;\n\t\t--wx-switch-width: 48px;\n\t\t--wx-switch-height: 24px;\n\t\t--wx-switch-border-width: 0px;\n\t\t--wx-switch-border-color: transparent;\n\t\t--wx-switch-border-color-disabled: transparent;\n\t\t--wx-switch-thumb-offset: 1px;\n\t\t--wx-switch-thumb-border: none;\n\t\t--wx-switch-thumb-border-disabled: 1px solid rgba(255, 255, 255, 0.7);\n\t\t--wx-switch-thumb-background: rgba(255, 255, 255, 0.9);\n\t\t--wx-switch-thumb-background-disabled: var(--wx-color-disabled);\n\t\t--wx-switch-thumb-shadow: none;\n\t\t/* end switch */\n\n\t\t/* popup and dropdown */\n\t\t--wx-popup-z-index: 100;\n\t\t--wx-popup-background: var(--wx-background);\n\t\t--wx-popup-shadow: var(--wx-box-shadow);\n\t\t--wx-popup-border: 1px solid rgba(255, 255, 255, 0.26);\n\t\t--wx-popup-border-radius: var(--wx-border-radius);\n\t\t/* end popup and dropdown */\n\n\t\t/* modal */\n\t\t--wx-modal-z-index: 1000;\n\t\t--wx-modal-background: var(--wx-background);\n\t\t--wx-modal-shadow: none;\n\t\t--wx-modal-border: 1px solid #ffffff42;\n\t\t--wx-modal-border-radius: var(--wx-border-radius);\n\t\t--wx-modal-width: 280px;\n\t\t--wx-modal-padding: 16px 20px;\n\t\t--wx-modal-gutter: 14px;\n\t\t--wx-modal-backdrop: rgba(108, 114, 131, 0.2);\n\t\t--wx-modal-header-font-family: var(--wx-font-family);\n\t\t--wx-modal-header-font-size: var(--wx-font-size-md);\n\t\t--wx-modal-header-line-height: var(--wx-line-height-md);\n\t\t--wx-modal-header-font-weight: var(--wx-font-weight-b);\n\t\t--wx-modal-header-font-color: #fff;\n\t\t/* end modal */\n\n\t\t/* notice */\n\t\t--wx-notice-z-index: 1010;\n\t\t--wx-notice-background: var(--wx-background-alt);\n\t\t--wx-notice-shadow: none;\n\t\t--wx-notice-border: none;\n\t\t--wx-notice-border-radius: 0 var(--wx-border-radius)\n\t\t\tvar(--wx-border-radius) 0;\n\t\t--wx-notice-margin: 6px 12px;\n\t\t--wx-notice-font-family: var(--wx-font-family);\n\t\t--wx-notice-font-size: var(--wx-font-size);\n\t\t--wx-notice-line-height: var(--wx-line-height);\n\t\t--wx-notice-font-weight: var(--wx-font-weight);\n\t\t--wx-notice-font-color: var(--wx-color-font);\n\t\t--wx-notice-padding: 14px;\n\t\t--wx-notice-width: 240px;\n\t\t--wx-notice-icon-size: var(--wx-icon-size);\n\t\t--wx-notice-icon-color: var(--wx-icon-color);\n\t\t--wx-notice-type-border-width: 4px;\n\t\t--wx-notice-type-border-color: var(--wx-icon-color);\n\t\t--wx-notice-type-font-color: var(--wx-color-font);\n\t\t--wx-notice-type-icon-color: #9fa1ae;\n\t\t--wx-notice-type-background-opacity: 0;\n\t\t--wx-notice-type-close-hover-opacity: 1;\n\t\t/* end notice */\n\n\t\t/* uploader */\n\t\t--wx-uploader-background: var(--wx-background-hover);\n\t\t/* end uploader */\n\n\t\t/* calendar */\n\t\t--wx-calendar-padding: 16px;\n\t\t--wx-calendar-gutter: 12px;\n\t\t--wx-calendar-cell-size: 24px;\n\t\t--wx-calendar-cell-gap: 4px;\n\t\t--wx-calendar-font-family: var(--wx-font-family);\n\t\t--wx-calendar-font-size: var(--wx-font-size);\n\t\t--wx-calendar-line-height: var(--wx-line-height);\n\t\t--wx-calendar-font-weight: var(--wx-font-weight);\n\t\t--wx-calendar-font-color: var(--wx-color-font);\n\t\t--wx-calendar-icon-color: var(--wx-icon-color);\n\t\t--wx-calendar-icon-size: var(--wx-icon-size);\n\t\t--wx-calendar-header-font-size: var(--wx-font-size);\n\t\t--wx-calendar-header-line-height: var(--wx-line-height);\n\t\t--wx-calendar-header-font-weight: var(--wx-font-weight-md);\n\t\t--wx-calendar-controls-font-family: var(--wx-button-font-family);\n\t\t--wx-calendar-controls-font-size: var(--wx-font-size);\n\t\t--wx-calendar-controls-line-height: var(--wx-line-height);\n\t\t--wx-calendar-controls-font-weight: var(--wx-font-weight);\n\t\t--wx-calendar-controls-font-color: var(--wx-color-font);\n\t\t/* end calendar */\n\t}\n\n\t:global(.wx-willow-dark-theme) {\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tline-height: var(--wx-line-height);\n\t\tfont-weight: var(--wx-font-weight);\n\t\tfont-style: normal;\n\t\tletter-spacing: normal;\n\t\ttext-align: left;\n\t\tcolor: var(--wx-color-font);\n\t\tbackground: var(--wx-background);\n\t}\n\t:global(.wx-willow-dark-theme *, .wx-willow-dark-theme\n\t\t\t*:before, .wx-willow-dark-theme *:after) {\n\t\tbox-sizing: border-box;\n\t}\n\n</style>\n","const calendar = {\n\tmonthFull: [\n\t\t\"January\",\n\t\t\"February\",\n\t\t\"March\",\n\t\t\"April\",\n\t\t\"May\",\n\t\t\"June\",\n\t\t\"July\",\n\t\t\"August\",\n\t\t\"September\",\n\t\t\"October\",\n\t\t\"November\",\n\t\t\"December\",\n\t],\n\tmonthShort: [\n\t\t\"Jan\",\n\t\t\"Feb\",\n\t\t\"Mar\",\n\t\t\"Apr\",\n\t\t\"May\",\n\t\t\"Jun\",\n\t\t\"Jul\",\n\t\t\"Aug\",\n\t\t\"Sep\",\n\t\t\"Oct\",\n\t\t\"Nov\",\n\t\t\"Dec\",\n\t],\n\tdayFull: [\n\t\t\"Sunday\",\n\t\t\"Monday\",\n\t\t\"Tuesday\",\n\t\t\"Wednesday\",\n\t\t\"Thursday\",\n\t\t\"Friday\",\n\t\t\"Saturday\",\n\t],\n\tdayShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n\thours: \"Hours\",\n\tminutes: \"Minutes\",\n\tdone: \"Done\",\n\tclear: \"Clear\",\n\ttoday: \"Today\",\n\tam: [\"am\", \"AM\"],\n\tpm: [\"pm\", \"PM\"],\n\n\tweekStart: 7,\n\ttimeFormat: 24,\n};\n\nconst core = {\n\tok: \"OK\",\n\tcancel: \"Cancel\",\n};\n\nconst data = {\n\tcore,\n\tcalendar,\n};\n\nexport default data;\n","<script>\n\timport { getContext, setContext } from \"svelte\";\n\timport { locale } from \"@xbs/lib-core-dom\";\n\timport en from \"./en\";\n\n\texport let words = null;\n\texport let optional = false;\n\n\tlet l = getContext(\"wx-i18n\");\n\tif (!l) {\n\t\tl = locale(en);\n\t}\n\tl = l.extend(words, optional);\n\tsetContext(\"wx-i18n\", l);\n\n</script>\n\n<slot />\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0 && stop) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let started = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (started) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        started = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n            // We need to set this to false because callbacks can still happen despite having unsubscribed:\n            // Callbacks might already be placed in the queue which doesn't know it should no longer\n            // invoke this derived store.\n            started = false;\n        };\n    });\n}\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * @param store - store to make readonly\n */\nfunction readonly(store) {\n    return {\n        subscribe: store.subscribe.bind(store)\n    };\n}\n\nexport { derived, readable, readonly, writable };\n","const defaultPriorities = [\n    { id: 1, color: \"#FE6158\", label: \"high\" },\n    { id: 2, color: \"#F1B941\", label: \"medium\" },\n    { id: 3, color: \"#77D257\", label: \"low\" },\n];\nconst defaultColors = [\"#33B0B4\", \"#0096FA\", \"#F1B941\"];\nexport const defaultCardShape = {\n    label: {\n        show: true,\n    },\n    description: {\n        show: false,\n    },\n    progress: {\n        show: false,\n    },\n    start_date: {\n        show: false,\n    },\n    end_date: {\n        show: false,\n    },\n    users: {\n        show: false,\n    },\n    priority: {\n        show: false,\n        values: defaultPriorities,\n    },\n    color: {\n        show: false,\n        values: defaultColors,\n    },\n    cover: {\n        show: false,\n    },\n    attached: {\n        show: false,\n    },\n    menu: {\n        show: true,\n    },\n};\nexport const defaultEditorShape = [\n    {\n        key: \"label\",\n        type: \"text\",\n        label: \"Label\",\n    },\n    {\n        key: \"description\",\n        type: \"textarea\",\n        label: \"Description\",\n    },\n    {\n        type: \"combo\",\n        label: \"Priority\",\n        key: \"priority\",\n    },\n    {\n        type: \"color\",\n        label: \"Color\",\n        key: \"color\",\n    },\n    {\n        type: \"progress\",\n        key: \"progress\",\n        label: \"Progress\",\n    },\n    {\n        type: \"date\",\n        key: \"start_date\",\n        label: \"Start date\",\n    },\n    {\n        type: \"date\",\n        key: \"end_date\",\n        label: \"End date\",\n    },\n    {\n        type: \"multiselect\",\n        key: \"users\",\n        label: \"Users\",\n    },\n];\nexport const defaultEditorConfig = {\n    debounce: 100,\n    autoSave: true,\n};\nexport const elementsIds = {\n    kanban: \"wx-kanban\",\n    toolbar: \"wx-kanban-toolbar\",\n    editor: \"wx-kanban-editor\",\n    content: \"wx-kanban-content\",\n    scrollableContent: \"wx-kanban-scrollable-content\",\n};\nexport const customIcons = {\n    \"wxi-message\": {\n        path: \"M8.88 22.2C8.586 22.2 8.303 22.083 8.095 21.875 7.887 21.667 7.77 21.384 7.77 21.09V17.76H3.33C2.741 17.76 2.177 17.526 1.76 17.11 1.344 16.694 1.11 16.129 1.11 15.54V2.22C1.11.988 2.109 0 3.33 0H21.09C21.679 0 22.244.234 22.66.65 23.076 1.067 23.31 1.631 23.31 2.22V15.54C23.31 16.129 23.076 16.694 22.66 17.11 22.244 17.526 21.679 17.76 21.09 17.76H14.319L10.212 21.878C9.99 22.089 9.713 22.2 9.435 22.2H8.88ZM9.99 15.54V18.959L13.409 15.54H21.09V2.22H3.33V15.54H9.99Z\",\n    },\n    \"wxi-like\": {\n        path: \"M5,9V21H1V9H5M9,21A2,2 0 0,1 7,19V9C7,8.45 7.22,7.95 7.59,7.59L14.17,1L15.23,2.06C15.5,2.33 15.67,2.7 15.67,3.11L15.64,3.43L14.69,8H21C22.11,8 23,8.9 23,10V12C23,12.26 22.95,12.5 22.86,12.73L19.84,19.78C19.54,20.5 18.83,21 18,21H9M9,19H18.03L21,12V10H12.21L13.34,4.68L9,9.03V19Z\",\n    },\n};\nexport const getSortConfig = () => {\n    return [\n        {\n            by: \"label\",\n            dir: \"asc\",\n            text: \"Label (a-z)\",\n            id: 7,\n        },\n        {\n            by: \"label\",\n            dir: \"desc\",\n            text: \"Label (z-a)\",\n            id: 8,\n        },\n        {\n            by: \"description\",\n            dir: \"asc\",\n            text: \"Description (a-z)\",\n            id: 9,\n        },\n        {\n            by: \"description\",\n            dir: \"desc\",\n            text: \"Description (z-a)\",\n            id: 10,\n        },\n    ];\n};\nexport const getDefaultCardMenuItems = ({ store }) => {\n    const { readonly } = store.getState();\n    const baseItems = [\n        { id: \"duplicate-card\", icon: \"wxi-content-copy\", text: \"Duplicate\" },\n        { id: \"delete-card\", icon: \"wxi-delete-outline\", text: \"Delete\" },\n    ];\n    if (!readonly?.select && readonly?.edit) {\n        return [\n            { id: \"set-edit\", icon: \"wxi-edit-outline\", text: \"Edit\" },\n            ...baseItems,\n        ];\n    }\n    return baseItems;\n};\nexport const getDefaultColumnMenuItems = ({ columns, columnIndex, }) => [\n    { id: \"add-card\", icon: \"wxi-plus\", text: \"Add new card\" },\n    { id: \"set-edit\", icon: \"wxi-edit-outline\", text: \"Rename\" },\n    {\n        id: \"move-column:left\",\n        icon: \"wxi-arrow-left\",\n        text: \"Move left\",\n        disabled: columnIndex <= 0,\n    },\n    {\n        id: \"move-column:right\",\n        icon: \"wxi-arrow-right\",\n        text: \"Move right\",\n        disabled: columnIndex >= columns.length - 1,\n    },\n    { id: \"delete-column\", icon: \"wxi-delete-outline\", text: \"Delete\" },\n];\nexport const getDefaultRowMenuItems = ({ rows, rowIndex, }) => [\n    { id: \"set-edit\", icon: \"wxi-edit-outline\", text: \"Rename\" },\n    {\n        id: \"move-row:up\",\n        icon: \"wxi-arrow-up\",\n        text: \"Move up\",\n        disabled: rowIndex <= 0,\n    },\n    {\n        id: \"move-row:down\",\n        icon: \"wxi-arrow-down\",\n        text: \"Move down\",\n        disabled: rowIndex >= rows.length - 1,\n    },\n    { id: \"delete-row\", icon: \"wxi-delete-outline\", text: \"Delete\" },\n];\n//# sourceMappingURL=constants.js.map","import { uid } from \"@xbs/lib-state\";\nimport { defaultEditorShape } from \"./constants\";\nexport function isSameId(firstId, secondId) {\n    if (!firstId || !secondId) {\n        return false;\n    }\n    return firstId == secondId;\n}\nexport function byId(data, id) {\n    return data.find(el => isSameId(el.id, id));\n}\nexport function includesId(data, id) {\n    return !!data?.find(el => isSameId(el, id));\n}\nexport function getVisibleCards(state) {\n    return Object.keys(state.cardsMap).reduce((acc, key) => {\n        return acc.concat(state.cardsMap[key]);\n    }, []);\n}\nexport function getAreaId(columnId, rowId) {\n    return `${columnId}` + (rowId ? `:${rowId}` : \"\");\n}\nexport function splitAreaId(areaId) {\n    return areaId.split(/(?<!temp):(?!\\/\\/)/);\n}\nexport function getCardAreaId(card, columnKey, rowKey) {\n    if (rowKey) {\n        return card[columnKey] + \":\" + card[rowKey];\n    }\n    else {\n        return card[columnKey];\n    }\n}\nexport function checkScroll(e, el, config = { shift: 20 }) {\n    let scrollTimer = null;\n    function scroll() {\n        if (el) {\n            const contentRect = el.getBoundingClientRect();\n            const scrollState = {\n                x: el.scrollLeft,\n                y: el.scrollTop,\n            };\n            const { shift } = config;\n            if (e.clientX > contentRect.width + contentRect.left - shift) {\n                el.scrollTo(scrollState.x + shift, scrollState.y);\n            }\n            if (e.clientX < contentRect.left + shift) {\n                el.scrollTo(scrollState.x - shift, scrollState.y);\n            }\n            if (e.clientY > contentRect.height + contentRect.top - shift) {\n                el.scrollTo(scrollState.x, scrollState.y + shift);\n            }\n            if (e.clientY < contentRect.top + shift) {\n                el.scrollTo(scrollState.x, scrollState.y - shift);\n            }\n            scrollTimer = setTimeout(() => {\n                scroll();\n            }, 100);\n        }\n    }\n    scroll();\n    return () => {\n        if (scrollTimer) {\n            clearTimeout(scrollTimer);\n        }\n    };\n}\nexport function normalizeMenuConfig(config) {\n    var _a;\n    const { shape, defaultMenuItems, store } = config;\n    const nShape = shape || {};\n    if (nShape.menu === false) {\n        return {\n            menu: {\n                show: false,\n                items: () => null,\n            },\n        };\n    }\n    nShape.menu || (nShape.menu = {});\n    if (Array.isArray(nShape.menu.items)) {\n        const items = [...nShape.menu.items];\n        nShape.menu.items = () => items;\n    }\n    const menuItemsFn = nShape.menu.items || defaultMenuItems;\n    nShape.menu.items = (config) => {\n        let menu = menuItemsFn({ ...config, store });\n        if (menu)\n            menu = getNormalizedMenuItems(menu);\n        return menu;\n    };\n    (_a = nShape.menu).show ?? (_a.show = true);\n    return nShape;\n}\n// [todo] label and items for submenus are deprecated and will be removed in later versions\nfunction getNormalizedMenuItems(items) {\n    return items.map(item => {\n        const res = { ...item };\n        if (item.items)\n            res.data = item.items;\n        if (res.data)\n            res.data = getNormalizedMenuItems(res.data);\n        if (item.label)\n            res.text = item.label;\n        return res;\n    });\n}\nexport function getSortedCards(state, sortRule) {\n    const { cards, columnKey, sort } = state;\n    if (!sort)\n        return cards;\n    const cardsByColumn = cards.reduce((a, c) => {\n        a[c[columnKey]] = a[c[columnKey]] || [];\n        a[c[columnKey]].push(c);\n        return a;\n    }, {});\n    const getSortItem = (item, by) => `${typeof by === \"function\" ? by(item) : item[by]}`;\n    Object.keys(cardsByColumn).forEach(columnId => {\n        let sortConfig;\n        if (\"columns\" in sort) {\n            sortConfig = sort.columns[columnId] || {};\n        }\n        else {\n            sortConfig = sort;\n        }\n        if (sortConfig.by) {\n            sortRule =\n                sortRule ||\n                    ((config) => {\n                        const { dir } = config;\n                        const by = config.by;\n                        return (a, b) => {\n                            const first = getSortItem(a, by);\n                            const second = getSortItem(b, by);\n                            if (dir === \"desc\") {\n                                return second.localeCompare(first, undefined, {\n                                    numeric: true,\n                                });\n                            }\n                            return first.localeCompare(second, undefined, {\n                                numeric: true,\n                            });\n                        };\n                    });\n            const area = cardsByColumn[columnId];\n            area.sort(sortRule(sortConfig));\n        }\n    });\n    return Object.values(cardsByColumn).flat();\n}\nexport function normalizeEditorShape(rawEditorShape, cardShape) {\n    const editorShape = rawEditorShape ||\n        defaultEditorShape.filter(field => {\n            const cardField = cardShape[field.key];\n            return cardField && cardField?.show;\n        });\n    return editorShape.map(field => {\n        const cardField = cardShape[field.key];\n        if (cardField && typeof field.key === \"string\") {\n            if (cardField.values && !field.values) {\n                field.values = cardField.values;\n            }\n            if (field.config) {\n                cardField.config = field.config;\n            }\n        }\n        field.id = field.id || uid();\n        return field;\n    });\n}\nlet i = 0;\nexport function normalizeUsers(cardShape) {\n    if (cardShape.users?.values) {\n        cardShape.users.values.forEach(user => {\n            if (!user.id)\n                throw \"Please provide user IDs\";\n            if (!user.avatar)\n                user.avatarColor = [\"#00D19A\", \"#2F77E3\", \"#FFC975\"][Math.floor(i++ % 3)];\n        });\n    }\n    return cardShape;\n}\n//# sourceMappingURL=helpers.js.map","import { isSameId, getAreaId, getCardAreaId, getSortedCards, } from \"../../helpers\";\nexport default function (store, { id, before, columnId, rowId }) {\n    const state = store.getState();\n    const columnKey = state.columnKey;\n    const rowKey = state.rowKey;\n    const cardIndex = state.cards.findIndex(c => isSameId(c.id, id));\n    if (cardIndex < 0) {\n        return;\n    }\n    if (!state.cardsMap[getAreaId(columnId, rowId)]) {\n        return;\n    }\n    if (isSameId(id, before)) {\n        return;\n    }\n    const card = state.cards[cardIndex];\n    const isInSameArea = getAreaId(columnId, rowId) === getCardAreaId(card, columnKey, rowKey);\n    const isInSameColumn = isSameId(columnId, card[columnKey]);\n    const areaMeta = store.getState().areasMeta[getAreaId(columnId, rowId)];\n    if (areaMeta.noFreeSpace && !isInSameColumn && !isInSameArea) {\n        return;\n    }\n    const movedCard = state.cards.splice(cardIndex, 1)[0];\n    const originalCard = { ...movedCard };\n    const cardArea = state.cardsMap[getCardAreaId(originalCard, state.columnKey, state.rowKey)] || [];\n    const movedCardIndex = cardArea.findIndex(c => isSameId(c.id, id)) || 0;\n    const afterCard = cardArea[movedCardIndex + 1] || {};\n    movedCard[columnKey] = columnId;\n    // [todo] if rowKey is present but rowId not defined add first row key\n    if (rowKey && rowId) {\n        movedCard[rowKey] = rowId;\n    }\n    if (!before) {\n        state.cards.push(movedCard);\n    }\n    else {\n        const overCardIndex = state.cards.findIndex(c => isSameId(c.id, before));\n        state.cards.splice(overCardIndex, 0, movedCard);\n    }\n    if (state.sort) {\n        state.cards = getSortedCards({ ...state, cards: state.cards }, store.sortRule);\n    }\n    store.setState({ cards: state.cards });\n    return () => {\n        const columnId = originalCard[columnKey];\n        const rowId = rowKey && originalCard[rowKey];\n        store.in.exec(\"move-card\", {\n            id,\n            before: afterCard.id,\n            columnId,\n            rowId,\n            $meta: { skipHistory: true },\n        });\n    };\n}\n//# sourceMappingURL=move.js.map","import { tempID } from \"@xbs/lib-state\";\nimport { getAreaId, getSortedCards } from \"../../helpers\";\nimport moveCard from \"./move\";\nexport default function (store, ev) {\n    const card = ev.card || {};\n    const id = ev.id || card.id || tempID();\n    const state = store.getState();\n    const columnKey = state.columnKey;\n    const rowKey = state.rowKey;\n    const rowId = ev.rowId || (rowKey && card[rowKey]) || state.rows[0].id;\n    if (rowId && !ev.rowId)\n        ev.rowId = rowId;\n    const columnId = ev.columnId || card[columnKey] || state.columns[0].id;\n    if (state.areasMeta[getAreaId(columnId, rowId)].noFreeSpace) {\n        return false;\n    }\n    const cardObj = {\n        [columnKey]: columnId,\n        id,\n        ...card,\n    };\n    if (rowKey) {\n        cardObj[rowKey] = rowId;\n    }\n    let cards = state.cards;\n    cards.push(cardObj);\n    if (state.sort) {\n        cards = getSortedCards({ ...state, cards }, store.sortRule);\n    }\n    store.setState({ cards });\n    if (ev.before) {\n        moveCard(store, { ...ev, id });\n    }\n    if (ev.select !== false) {\n        store.in.exec(\"select-card\", { id });\n    }\n    ev.card = cardObj;\n    ev.id = id;\n    return () => {\n        store.in.exec(\"delete-card\", { id, $meta: { skipHistory: true } });\n    };\n}\n//# sourceMappingURL=add.js.map","import { isSameId, getSortedCards } from \"../../helpers\";\nexport default function (store, { id, card, replace }) {\n    const state = store.getState();\n    let originalCard;\n    let cards = state.cards.map(c => {\n        if (isSameId(c.id, id)) {\n            originalCard = { ...c };\n            if (replace) {\n                return { id, ...card };\n            }\n            return { ...c, ...card };\n        }\n        return c;\n    });\n    if (state.sort) {\n        cards = getSortedCards({ ...state, cards }, store.sortRule);\n    }\n    store.setState({ cards });\n    return () => {\n        store.in.exec(\"update-card\", {\n            id,\n            card: originalCard,\n            replace: true,\n            $meta: { skipHistory: true },\n        });\n    };\n}\n//# sourceMappingURL=update.js.map","import { isSameId } from \"../../helpers\";\nimport { tempID } from \"@xbs/lib-state\";\nexport default function (store, { id, card }) {\n    const { cards, columnKey } = store.getState();\n    const cardToCopy = cards.find(card => isSameId(card.id, id));\n    if (cardToCopy) {\n        const newCard = {\n            ...cardToCopy,\n            id: tempID(),\n            ...(card || {}),\n        };\n        store.in.exec(\"add-card\", {\n            columnId: newCard[columnKey],\n            before: id,\n            card: newCard,\n        });\n    }\n}\n//# sourceMappingURL=duplicate.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { id }) {\n    store.in.exec(\"unselect-card\", { id });\n    const state = store.getState();\n    const cardIndex = state.cards.findIndex(c => isSameId(c.id, id));\n    const card = state.cards[cardIndex];\n    const before = state.cards[cardIndex + 1]?.id;\n    const cards = state.cards.filter(card => !isSameId(card.id, id));\n    store.setState({ cards });\n    return () => {\n        store.in.exec(\"add-card\", {\n            columnId: card[state.columnKey],\n            before,\n            card,\n            $meta: {\n                skipHistory: true,\n                restore: id,\n            },\n        });\n    };\n}\n//# sourceMappingURL=delete.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { id, before }) {\n    const { columns } = store.getState();\n    const columnIndex = columns.findIndex(col => isSameId(col.id, id));\n    const afterColumn = columns[columnIndex + 1]?.id;\n    const col = columns.splice(columnIndex, 1)[0];\n    if (before) {\n        const beforeColumnIndex = columns.findIndex(col => isSameId(col.id, before));\n        columns.splice(beforeColumnIndex, 0, col);\n    }\n    else {\n        columns.push(col);\n    }\n    store.setState({ columns });\n    return () => {\n        store.in.exec(\"move-column\", {\n            id,\n            before: afterColumn,\n            $meta: { skipHistory: true },\n        });\n    };\n}\n//# sourceMappingURL=move.js.map","import { tempID } from \"@xbs/lib-state\";\nimport moveColumn from \"./move\";\nexport default function (store, ev) {\n    const id = ev.id || ev.column?.id || tempID();\n    const state = store.getState();\n    const columns = state.columns;\n    const colObj = {\n        id,\n        label: \"Untitled\",\n        ...(ev.column || {}),\n    };\n    columns.push(colObj);\n    store.setState({ columns });\n    if (ev.before) {\n        moveColumn(store, { ...ev, id });\n    }\n    store.in.exec(\"scroll\", {\n        to: \"column\",\n        id,\n    });\n    ev.id = id;\n    ev.column = colObj;\n    return () => {\n        store.in.exec(\"delete-column\", { id, $meta: { skipHistory: true } });\n    };\n}\n//# sourceMappingURL=add.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, ev) {\n    const state = store.getState();\n    let originalColumn;\n    const id = ev.id || ev.column?.id;\n    const columns = state.columns.map(col => {\n        if (isSameId(col.id, id)) {\n            originalColumn = { ...col };\n            if (ev.replace) {\n                return { id, ...ev.column };\n            }\n            return { ...col, ...ev.column };\n        }\n        return col;\n    });\n    store.setState({ columns });\n    return () => {\n        store.in.exec(\"update-column\", {\n            column: originalColumn,\n            replace: true,\n            $meta: { skipHistory: true },\n        });\n    };\n}\n//# sourceMappingURL=update.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { id }) {\n    if (id) {\n        const state = store.getState();\n        const columnIndex = state.columns.findIndex(col => isSameId(col.id, id));\n        const originalColumn = state.columns[columnIndex];\n        const before = state.columns[columnIndex + 1]?.id;\n        const columns = state.columns.filter(col => !isSameId(col.id, id));\n        store.setState({ columns });\n        return () => {\n            store.in.exec(\"add-column\", {\n                column: originalColumn,\n                before,\n                $meta: {\n                    skipHistory: true,\n                    restore: id,\n                },\n            });\n        };\n    }\n}\n//# sourceMappingURL=delete.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { id, before }) {\n    const { rows, rowKey } = store.getState();\n    if (!rowKey) {\n        return;\n    }\n    const rowIndex = rows.findIndex(col => isSameId(col.id, id));\n    const afterRow = rows[rowIndex + 1]?.id;\n    const row = rows.splice(rowIndex, 1)[0];\n    if (before) {\n        const beforeRowIndex = rows.findIndex(col => isSameId(col.id, before));\n        rows.splice(beforeRowIndex, 0, row);\n    }\n    else {\n        rows.push(row);\n    }\n    store.setState({ rows });\n    return () => {\n        store.in.exec(\"move-row\", {\n            id,\n            before: afterRow,\n            $meta: { skipHistory: true },\n        });\n    };\n}\n//# sourceMappingURL=move.js.map","import { tempID } from \"@xbs/lib-state\";\nimport moveRow from \"./move\";\nexport default function (store, ev) {\n    const state = store.getState();\n    const rows = state.rows;\n    const id = ev.id || ev.row?.id || tempID();\n    const rowObj = {\n        id,\n        label: \"Untitled\",\n        collapsed: false,\n        ...(ev.row || {}),\n    };\n    rows.push(rowObj);\n    if (!state.rowKey) {\n        const rowKey = (state.rowKey = \"rowKey\");\n        state.rows[0] = {\n            id: \"default\",\n            label: \"Untitled\",\n        };\n        state.cards.map(card => {\n            card[rowKey] = \"default\";\n        });\n    }\n    store.setState({ rows, rowKey: state.rowKey });\n    if (ev.before) {\n        moveRow(store, { id, before: ev.before });\n    }\n    store.in.exec(\"scroll\", {\n        to: \"row\",\n        id,\n    });\n    ev.id = id;\n    ev.row = rowObj;\n    return () => {\n        store.in.exec(\"delete-row\", { id, $meta: { skipHistory: true } });\n    };\n}\n//# sourceMappingURL=add.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, ev) {\n    const state = store.getState();\n    let originalRow;\n    const id = ev.id || ev.row?.id;\n    const rows = state.rows.map(r => {\n        if (isSameId(r.id, id)) {\n            originalRow = { ...r };\n            if (ev.replace) {\n                return { id, ...ev.row };\n            }\n            return { ...r, ...ev.row };\n        }\n        return r;\n    });\n    store.setState({ rows });\n    return () => {\n        store.in.exec(\"update-row\", {\n            row: originalRow,\n            replace: true,\n            $meta: { skipHistory: true },\n        });\n    };\n}\n//# sourceMappingURL=update.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { id }) {\n    if (id) {\n        const state = store.getState();\n        const { rows } = state;\n        const rowIndex = rows.findIndex(col => isSameId(col.id, id));\n        const originalRow = rows[rowIndex];\n        const before = rows[rowIndex + 1]?.id;\n        rows.splice(rowIndex, 1);\n        store.setState({ rows });\n        return () => {\n            store.in.exec(\"add-row\", {\n                row: originalRow,\n                before,\n                $meta: {\n                    skipHistory: true,\n                    restore: id,\n                },\n            });\n        };\n    }\n}\n//# sourceMappingURL=delete.js.map","import { getAreaId } from \"../../helpers\";\nexport default function (store, { id, columnId, rowId, before, source, dragItemsCoords, dropAreasCoords, }) {\n    const { areasMeta, cardsMeta, layout } = store.getState();\n    dropAreasCoords?.forEach(area => {\n        if (area.id) {\n            areasMeta[area.id].height =\n                layout !== \"default:lazy\" ? area.height : null;\n        }\n    });\n    const draggedCards = [...source];\n    draggedCards.forEach(id => {\n        const meta = cardsMeta[id] || {};\n        meta.dragging = true;\n        cardsMeta[id] = meta;\n    });\n    const overAreaId = getAreaId(columnId, rowId);\n    store.setState({\n        dragItemId: id,\n        dragItemsCoords,\n        overAreaId,\n        before,\n        areasMeta,\n        cardsMeta,\n    });\n}\n//# sourceMappingURL=start.js.map","import { getAreaId, isSameId } from \"../../helpers\";\nexport default function (store, { rowId, columnId, before }) {\n    if (!columnId) {\n        return;\n    }\n    const { areasMeta } = store.getState();\n    const overAreaId = getAreaId(columnId, rowId);\n    const dragItemArea = areasMeta[overAreaId];\n    const moveInSameArea = isSameId(overAreaId, getAreaId(dragItemArea.columnId || \"\", dragItemArea.rowId));\n    if (dragItemArea.noFreeSpace && !moveInSameArea) {\n        return;\n    }\n    store.setState({\n        overAreaId,\n        before,\n    });\n}\n//# sourceMappingURL=drag.js.map","import { uid } from \"@xbs/lib-state\";\nimport { getAreaId } from \"../../helpers\";\nexport default function (store, { id, columnId, rowId, before, source }) {\n    if (!columnId) {\n        return;\n    }\n    const nextState = {\n        dragItemsCoords: null,\n        dragItemId: null,\n        before: null,\n        overAreaId: null,\n        areasMeta: {},\n    };\n    const { areasMeta, cardsMeta } = store.getState();\n    const overAreaId = getAreaId(columnId, rowId);\n    if (overAreaId && id) {\n        const area = areasMeta[overAreaId];\n        const { columnId, rowId } = area;\n        if (source.length > 1) {\n            const batchId = uid();\n            source.forEach(id => {\n                store.in.exec(\"move-card\", {\n                    id,\n                    columnId,\n                    rowId,\n                    before,\n                    $meta: {\n                        batch: batchId,\n                    },\n                });\n                const meta = cardsMeta[id];\n                if (meta) {\n                    meta.dragging = false;\n                }\n            });\n        }\n        else {\n            store.in.exec(\"move-card\", {\n                id,\n                columnId,\n                rowId,\n                before,\n            });\n            const meta = cardsMeta[id];\n            if (meta) {\n                meta.dragging = false;\n            }\n        }\n    }\n    nextState.cardsMeta = cardsMeta;\n    const updatedAreasMeta = store.getState().areasMeta;\n    Object.keys(updatedAreasMeta).forEach(key => {\n        nextState.areasMeta[key] = {\n            ...updatedAreasMeta[key],\n            height: null,\n        };\n    });\n    store.setState(nextState);\n}\n//# sourceMappingURL=end.js.map","export default function (store, { id, groupMode }) {\n    const { selected: stateSelected, search } = store.getState();\n    if (id) {\n        let selected = null;\n        if (groupMode) {\n            selected = stateSelected ? [...stateSelected] : [];\n            if (selected.includes(id)) {\n                store.in.exec(\"unselect-card\", {\n                    id: id,\n                });\n                return;\n            }\n            else {\n                selected.push(id);\n            }\n        }\n        else {\n            selected = [id];\n        }\n        if (search) {\n            store.in.exec(\"set-search\", { value: null });\n        }\n        store.setState({ selected });\n        if (selected.length > 1) {\n            store.in.exec(\"set-edit\", null);\n        }\n        else {\n            store.in.exec(\"set-edit\", { cardId: id });\n        }\n    }\n}\n//# sourceMappingURL=select.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { id }) {\n    const stateSelected = store.getState().selected;\n    if (stateSelected) {\n        store.in.exec(\"set-edit\", null);\n        if (!id) {\n            store.setState({ selected: null });\n            return;\n        }\n        const selected = stateSelected.filter(selectedId => !isSameId(selectedId, id));\n        store.setState({ selected });\n    }\n}\n//# sourceMappingURL=unselect.js.map","export function compare(source, target) {\n    return `${source}`.toLowerCase().includes(`${target}`.toLowerCase());\n}\nexport function isValueInCard(card, value, by) {\n    if (by) {\n        return compare(card[by] || \"\", value);\n    }\n    else {\n        return (compare(card.label || \"\", value) ||\n            compare(card.description || \"\", value));\n    }\n}\n//# sourceMappingURL=search.js.map","import { getVisibleCards } from \"../helpers\";\nimport { isValueInCard } from \"../search\";\nexport default function (store, { value: rawValue, by, searchRule }) {\n    const state = store.getState();\n    const value = rawValue?.trim();\n    const cardsMeta = state.cardsMeta;\n    let search = { value: rawValue, by };\n    if (!value) {\n        Object.keys(cardsMeta).forEach(key => {\n            const meta = cardsMeta[key];\n            if (meta) {\n                delete meta[\"dimmed\"];\n                delete meta[\"found\"];\n            }\n        });\n        search = null;\n    }\n    else {\n        const cards = getVisibleCards(state);\n        cards.map((card) => {\n            const meta = (cardsMeta[card.id] = cardsMeta[card.id] || {});\n            const rule = searchRule || isValueInCard;\n            if (rule(card, value, by)) {\n                meta.found = true;\n                meta.dimmed = false;\n            }\n            else {\n                meta.found = false;\n                meta.dimmed = true;\n            }\n        });\n    }\n    store.setState({ cardsMeta, search });\n}\n//# sourceMappingURL=search.js.map","export default function (store, scroll) {\n    store.setState({\n        scroll,\n    });\n}\n//# sourceMappingURL=scroll.js.map","import { getSortedCards } from \"../helpers\";\nexport default function (store, ev) {\n    if (!ev) {\n        store.setState({ sort: null });\n        return;\n    }\n    const state = store.getState();\n    const columnId = ev.columnId;\n    const by = ev.by || \"label\";\n    const dir = ev.dir || \"asc\";\n    const preserve = ev.preserve || false;\n    let sort = state.sort || {};\n    if (columnId) {\n        if (\"column\" in sort === false) {\n            sort = {\n                columns: {},\n            };\n        }\n        sort.columns[columnId] = { by, dir, preserve };\n    }\n    else {\n        sort = {\n            dir,\n            by,\n            preserve,\n        };\n    }\n    const cards = getSortedCards({ ...state, sort }, store.sortRule);\n    if (preserve) {\n        store.setState({ sort, cards });\n    }\n    else {\n        store.setState({ cards });\n    }\n}\n//# sourceMappingURL=sort.js.map","export default function (store, config) {\n    store.setState({\n        edit: config,\n    });\n}\n//# sourceMappingURL=edit.js.map","import { isSameId } from \"../../helpers\";\nimport { tempID } from \"@xbs/lib-state\";\nexport default function (store, { id, cardId, comment }) {\n    if (cardId) {\n        const state = store.getState();\n        const { currentUser } = state;\n        const commentId = id || comment.id || tempID();\n        const commentCard = cardId || comment.cardId;\n        if (!commentCard || !currentUser) {\n            return;\n        }\n        const cards = state.cards.map(c => {\n            if (isSameId(c.id, commentCard)) {\n                return {\n                    ...c,\n                    comments: [\n                        ...(c.comments || []),\n                        {\n                            ...comment,\n                            id: commentId,\n                            cardId: commentCard,\n                            userId: currentUser,\n                            date: comment.date || new Date(),\n                        },\n                    ],\n                };\n            }\n            return c;\n        });\n        store.setState({ cards });\n        return () => {\n            store.in.exec(\"delete-comment\", {\n                id: commentId,\n                cardId: commentCard,\n                $meta: { skipHistory: true },\n            });\n        };\n    }\n}\n//# sourceMappingURL=add.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { cardId, id, comment }) {\n    if (cardId) {\n        const state = store.getState();\n        const commentId = id || comment.id;\n        const commentCard = cardId || comment.cardId;\n        if (!commentId || !commentCard) {\n            return;\n        }\n        let originalComment = {};\n        const cards = state.cards.map(c => {\n            if (isSameId(c.id, commentCard)) {\n                return {\n                    ...c,\n                    comments: (c.comments || []).map(c => {\n                        if (isSameId(c.id, commentId)) {\n                            originalComment = { ...c };\n                            return { ...c, ...comment };\n                        }\n                        return c;\n                    }),\n                };\n            }\n            return c;\n        });\n        store.setState({ cards });\n        return () => {\n            store.in.exec(\"update-comment\", {\n                id: commentId,\n                cardId: commentCard,\n                comment: originalComment,\n                $meta: { skipHistory: true },\n            });\n        };\n    }\n}\n//# sourceMappingURL=update.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { cardId, id }) {\n    if (cardId) {\n        const state = store.getState();\n        if (!id || !cardId) {\n            return;\n        }\n        let originalComment = {};\n        const cards = state.cards.map(c => {\n            if (isSameId(c.id, cardId)) {\n                return {\n                    ...c,\n                    comments: (c.comments || []).filter(c => {\n                        if (isSameId(c.id, id)) {\n                            originalComment = { ...c };\n                            return false;\n                        }\n                        return true;\n                    }),\n                };\n            }\n            return c;\n        });\n        store.setState({ cards });\n        return () => {\n            store.in.exec(\"add-comment\", {\n                id,\n                cardId,\n                comment: originalComment,\n                $meta: { skipHistory: true },\n            });\n        };\n    }\n}\n//# sourceMappingURL=delete.js.map","import { isSameId } from \"../../helpers\";\nimport { tempID } from \"@xbs/lib-state\";\nexport default function (store, { id, link }) {\n    const state = store.getState();\n    const links = state.links;\n    const linkId = id || link.id || tempID();\n    if (links.find(storeLink => isSameId(linkId, storeLink.id)))\n        return;\n    const linkObj = {\n        ...link,\n        id: linkId,\n    };\n    links.push(linkObj);\n    store.setState({ links });\n    return () => {\n        store.in.exec(\"delete-link\", {\n            id: linkId,\n            $meta: { skipHistory: true },\n        });\n    };\n}\n//# sourceMappingURL=add.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { id }) {\n    if (id) {\n        const state = store.getState();\n        const originalLink = state.links.find(link => isSameId(link.id, id));\n        const links = state.links.filter(link => !isSameId(link.id, id));\n        store.setState({ links });\n        return () => {\n            store.in.exec(\"add-link\", {\n                id,\n                link: originalLink,\n                $meta: { skipHistory: true },\n            });\n        };\n    }\n}\n//# sourceMappingURL=delete.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { cardId }) {\n    const state = store.getState();\n    const { currentUser } = state;\n    if (!cardId || !currentUser) {\n        return;\n    }\n    const cards = state.cards.map(c => {\n        if (isSameId(c.id, cardId)) {\n            return {\n                ...c,\n                votes: [...(c.votes || []), currentUser],\n            };\n        }\n        return c;\n    });\n    store.setState({ cards });\n}\n//# sourceMappingURL=add.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { cardId }) {\n    const state = store.getState();\n    const { currentUser } = state;\n    if (!cardId || !currentUser) {\n        return;\n    }\n    const cards = state.cards.map(c => {\n        if (isSameId(c.id, cardId)) {\n            return {\n                ...c,\n                votes: (c.votes || []).filter(v => {\n                    return !isSameId(v, currentUser);\n                }),\n            };\n        }\n        return c;\n    });\n    store.setState({ cards });\n}\n//# sourceMappingURL=delete.js.map","import { Store, EventBus, uid, DataRouter } from \"@xbs/lib-state\";\nimport { checkIntegrity } from \"./package\";\nimport { getAreaId, getCardAreaId, getSortedCards, normalizeMenuConfig, normalizeUsers, } from \"./helpers\";\nimport { defaultCardShape, getDefaultCardMenuItems, getDefaultColumnMenuItems, getDefaultRowMenuItems, } from \"./constants\";\nimport addCard from \"./handlers/card/add\";\nimport updateCard from \"./handlers/card/update\";\nimport moveCard from \"./handlers/card/move\";\nimport duplicateCard from \"./handlers/card/duplicate\";\nimport deleteCard from \"./handlers/card/delete\";\nimport addColumn from \"./handlers/column/add\";\nimport updateColumn from \"./handlers/column/update\";\nimport moveColumn from \"./handlers/column/move\";\nimport deleteColumn from \"./handlers/column/delete\";\nimport addRow from \"./handlers/row/add\";\nimport updateRow from \"./handlers/row/update\";\nimport moveRow from \"./handlers/row/move\";\nimport deleteRow from \"./handlers/row/delete\";\nimport startDrag from \"./handlers/drag/start\";\nimport drag from \"./handlers/drag/drag\";\nimport endDrag from \"./handlers/drag/end\";\nimport selectCard from \"./handlers/selection/select\";\nimport unselectCard from \"./handlers/selection/unselect\";\nimport setSearch from \"./handlers/search\";\nimport scrollHandler from \"./handlers/scroll\";\nimport setSort from \"./handlers/sort\";\nimport setEdit from \"./handlers/edit\";\nimport addComment from \"./handlers/comment/add\";\nimport updateComment from \"./handlers/comment/update\";\nimport deleteComment from \"./handlers/comment/delete\";\nimport addLink from \"./handlers/link/add\";\nimport deleteLink from \"./handlers/link/delete\";\nimport addVote from \"./handlers/vote/add\";\nimport deleteVote from \"./handlers/vote/delete\";\nexport class DataStore extends Store {\n    constructor(w, config) {\n        super(w);\n        checkIntegrity(this);\n        this.in = new EventBus();\n        this.out = new EventBus();\n        this.in.setNext(this.out.exec);\n        this.config = { ...{ history: true }, ...(config || {}) };\n        this._router = new DataRouter(super.setState.bind(this), [\n            {\n                in: [\"cards\", \"rows\", \"columns\", \"columnKey\", \"rowKey\"],\n                out: [\"areasMeta\", \"cardsMap\"],\n                exec: (ctx) => {\n                    const state = this.getState();\n                    const { rows, columns, columnKey, rowKey, cards } = state;\n                    const areasMeta = {};\n                    const cardsMap = {};\n                    if (!columnKey) {\n                        return { cardsMap, areasMeta };\n                    }\n                    cards.map(card => {\n                        const areaId = getCardAreaId(card, columnKey, rowKey);\n                        cardsMap[areaId] = cardsMap[areaId] || [];\n                        cardsMap[areaId]?.push(card);\n                    });\n                    columns.map(col => {\n                        cardsMap[col.id] = cardsMap[col.id] || [];\n                        if (rowKey) {\n                            rows.map(row => {\n                                const areaId = getAreaId(col.id, row.id);\n                                areasMeta[areaId] = {\n                                    columnId: col.id,\n                                    rowId: row.id,\n                                    column: col,\n                                    row,\n                                    cardsCount: 0,\n                                };\n                                cardsMap[areaId] = cardsMap[areaId] || [];\n                                cardsMap[col.id] = cardsMap[col.id]?.concat(cardsMap[areaId] || []);\n                            });\n                        }\n                        areasMeta[col.id] = {\n                            columnId: col.id,\n                            column: col,\n                            cardsCount: 0,\n                        };\n                    });\n                    this._computeLimits({ areasMeta, cardsMap });\n                    this.setState({ areasMeta, cardsMap }, ctx);\n                },\n            },\n        ], \n        // data initializers\n        {});\n        this._initStructure();\n        const handlers = {\n            \"add-card\": addCard,\n            \"update-card\": updateCard,\n            \"move-card\": moveCard,\n            \"duplicate-card\": duplicateCard,\n            \"delete-card\": deleteCard,\n            \"add-column\": addColumn,\n            \"update-column\": updateColumn,\n            \"move-column\": moveColumn,\n            \"delete-column\": deleteColumn,\n            \"add-row\": addRow,\n            \"update-row\": updateRow,\n            \"move-row\": moveRow,\n            \"delete-row\": deleteRow,\n            \"start-drag-card\": startDrag,\n            \"drag-card\": drag,\n            \"end-drag-card\": endDrag,\n            \"set-search\": setSearch,\n            \"select-card\": selectCard,\n            \"unselect-card\": unselectCard,\n            scroll: scrollHandler,\n            \"set-sort\": setSort,\n            \"set-edit\": setEdit,\n            \"add-comment\": addComment,\n            \"update-comment\": updateComment,\n            \"delete-comment\": deleteComment,\n            \"add-link\": addLink,\n            \"delete-link\": deleteLink,\n            \"add-vote\": addVote,\n            \"delete-vote\": deleteVote,\n        };\n        this._setHandlers(handlers);\n    }\n    setState(state, ctx) {\n        this._router.setState(state, ctx);\n    }\n    init(state) {\n        const { cards: rawCards = [], links: rawLinks = [], columns: rawColumns = [], rows: rawRows, columnKey = \"column\", rowKey = \"\", sort = null, readonly: rawReadonly = false, ...rest } = state;\n        const readonly = this._normalizeReadonlyConfig(rawReadonly);\n        let cards = this._normalizeCards(rawCards);\n        const links = (rawLinks || []).map(link => ({ ...link }));\n        if (sort) {\n            cards = getSortedCards({ columnKey, sort, cards }, this.sortRule);\n        }\n        const columns = rawColumns.map(col => ({ ...col }));\n        const rows = ((rowKey && rawRows) || [{ id: \"\" }]).map(row => ({\n            ...row,\n        })); //[todo] create better solution when rows are not defined\n        const { cardShape, columnShape, rowShape } = this._normalizeShapes({\n            ...state,\n            cards,\n            readonly,\n        });\n        const nextState = {\n            ...rest,\n            cards,\n            links,\n            columns,\n            columnKey,\n            rowKey,\n            rows,\n            cardShape,\n            columnShape,\n            rowShape,\n            readonly,\n        };\n        this._router.init(nextState);\n        // hide editor and unselect on data update\n        this.setState({ edit: null, selected: null });\n    }\n    undo() {\n        const { history } = this.getState();\n        const config = history.undo.pop();\n        if (config) {\n            if (typeof config === \"object\") {\n                config.undo();\n                history.redo.push({ ev: config.ev, key: config.key });\n            }\n            else if (typeof config === \"number\") {\n                const batch = history.batches[config];\n                for (let i = batch.length - 1; i >= 0; i--) {\n                    batch[i].undo();\n                }\n                history.redo.push(config);\n            }\n        }\n        this.setState({ history });\n    }\n    redo() {\n        const { history } = this.getState();\n        const redo = [...history.redo];\n        const config = redo.pop();\n        if (config) {\n            if (typeof config === \"object\") {\n                const { ev, key } = config;\n                this.in.exec(key, ev);\n                this.setState({ history: { ...history, redo } });\n            }\n            else if (typeof config === \"number\") {\n                const batch = history.batches[config];\n                delete history.batches[config];\n                batch.forEach(action => {\n                    const { ev, key } = action;\n                    this.in.exec(key, ev);\n                });\n                this.setState({ history: { ...history, redo } });\n            }\n        }\n    }\n    _setHandlers(handlersMap) {\n        const { history } = this.getState();\n        Object.keys(handlersMap).forEach((key) => {\n            this.in.on(key, ev => {\n                var _a, _b;\n                const undo = handlersMap[key](this, ev);\n                const meta = ev?.$meta;\n                if (this.config.history && undo && !meta?.skipHistory) {\n                    if (meta?.batch) {\n                        (_a = history.batches)[_b = meta.batch] ?? (_a[_b] = []);\n                        history.batches[meta.batch].push({\n                            undo,\n                            key,\n                            ev,\n                        });\n                        if (!history.undo.includes(meta.batch)) {\n                            history.undo.push(meta.batch);\n                        }\n                    }\n                    else {\n                        history.undo.push({\n                            undo,\n                            key,\n                            ev,\n                        });\n                    }\n                    history.redo.forEach(config => {\n                        if (typeof config === \"string\") {\n                            delete history.batches[config];\n                        }\n                    });\n                    history.redo = [];\n                    this.setState({ history });\n                }\n            });\n        });\n    }\n    _initStructure() {\n        this.setState({\n            columnKey: \"column\",\n            rowKey: \"\",\n            columns: [],\n            rows: [],\n            cards: [],\n            cardsMap: {},\n            cardsMeta: {},\n            cardShape: defaultCardShape,\n            columnShape: {},\n            rowShape: {},\n            areasMeta: {} /** @deprecated will be removed in later versions */,\n            dragItemsCoords: null /** @deprecated will be removed in later versions */,\n            dragItemId: null /** @deprecated will be removed in later versions */,\n            before: null /** @deprecated will be removed in later versions */,\n            overAreaId: null /** @deprecated will be removed in later versions */,\n            selected: null,\n            search: null,\n            scroll: null,\n            sort: null,\n            edit: null,\n            readonly: null,\n            cardHeight: null,\n            layout: \"default:default\",\n            history: {\n                undo: [],\n                redo: [],\n                batches: {},\n            },\n            currentUser: null,\n            links: [],\n        });\n    }\n    _computeLimits({ areasMeta, cardsMap, }) {\n        for (const areaId in areasMeta) {\n            const area = areasMeta[areaId];\n            const col = area.column;\n            const rowId = area.rowId;\n            let limit = 0;\n            if (col.limit) {\n                if (typeof col.limit === \"object\") {\n                    if (rowId) {\n                        limit = col.limit[rowId] || 0;\n                    }\n                    else {\n                        limit = Object.keys(col.limit).reduce((t, k) => t + col.limit[k], 0);\n                    }\n                }\n                else {\n                    limit = col.limit;\n                }\n            }\n            const box = cardsMap[areaId];\n            if (box) {\n                area.cardsCount = box.length;\n                area.totalLimit = limit;\n                area.isOverLimit = !!limit && box.length > limit;\n                area.noFreeSpace =\n                    col.strictLimit && !!limit && box.length >= limit;\n            }\n        }\n    }\n    _normalizeCards(cards) {\n        return cards.map(card => {\n            const id = card.id || uid();\n            return { ...card, id };\n        });\n    }\n    _normalizeShapes(state) {\n        const { cardShape = defaultCardShape, columnShape, rowShape, readonly, } = state;\n        for (const key in cardShape) {\n            if (typeof cardShape[key] === \"boolean\") {\n                cardShape[key] = { show: cardShape[key] };\n            }\n        }\n        let normalizedCardShape = Object.keys(cardShape).reduce((total, fieldKey) => {\n            const defaultValue = defaultCardShape[fieldKey];\n            if (defaultValue) {\n                total[fieldKey] = {\n                    ...defaultValue,\n                    ...cardShape[fieldKey],\n                };\n            }\n            else {\n                total[fieldKey] = cardShape[fieldKey];\n            }\n            return total;\n        }, {});\n        if (readonly) {\n            if (!readonly.edit) {\n                normalizedCardShape.menu = normalizedCardShape.menu || {};\n                normalizedCardShape.menu.show = false;\n            }\n        }\n        normalizedCardShape = normalizeUsers(normalizedCardShape);\n        normalizedCardShape = normalizeMenuConfig({\n            store: this,\n            shape: normalizedCardShape,\n            defaultMenuItems: getDefaultCardMenuItems,\n        });\n        const normalizedColumnShape = normalizeMenuConfig({\n            store: this,\n            shape: columnShape,\n            defaultMenuItems: getDefaultColumnMenuItems,\n        });\n        const normalizedRowShape = normalizeMenuConfig({\n            store: this,\n            shape: rowShape,\n            defaultMenuItems: getDefaultRowMenuItems,\n        });\n        return {\n            cardShape: normalizedCardShape,\n            columnShape: normalizedColumnShape,\n            rowShape: normalizedRowShape,\n        };\n    }\n    _normalizeReadonlyConfig(config) {\n        let readonly = {\n            add: true,\n            dnd: true,\n            edit: true,\n            select: true,\n        };\n        if (typeof config === \"object\") {\n            readonly = { ...readonly, ...config };\n        }\n        else if (config === true) {\n            Object.keys(readonly).forEach(key => {\n                readonly[key] = false;\n            });\n        }\n        return readonly;\n    }\n}\n//# sourceMappingURL=DataStore.js.map","import { includesId } from \"./helpers\";\nexport function passThreshold(down, move, threshold = 5) {\n    return (Math.abs(move.x - down.x) > threshold ||\n        Math.abs(move.y - down.y) > threshold);\n}\nexport function isInRange(val, range) {\n    return val >= range[0] && val <= range[1];\n}\nexport function isInRect(coords, rect) {\n    const { x, y } = coords;\n    const byX = isInRange(x, [rect.x, rect.right]);\n    const byY = isInRange(y, [rect.y, rect.bottom]);\n    return byX && byY;\n}\nexport function getDragItemCoords(current, pointerDown, dragItemOrigin) {\n    const diff = {\n        x: pointerDown.x - dragItemOrigin.x,\n        y: pointerDown.y - dragItemOrigin.y,\n    };\n    return { x: current.x - diff.x, y: current.y - diff.y };\n}\nexport function getCoords(kanbanEl, dragItemId, updateMode = false) {\n    const columns = Array.from(kanbanEl.querySelectorAll(\"[data-drop-area]\"));\n    const dragItems = Array.isArray(dragItemId) ? dragItemId : [dragItemId];\n    const draggedItem = kanbanEl.querySelector(`[data-drag-item='${dragItems[dragItems.length - 1]}']`);\n    const dragItemHeight = draggedItem?.offsetHeight || 300;\n    const dragItemsCoords = {};\n    const dropAreasCoords = [];\n    const dropAreaItemsCoords = columns.reduce((totalMap, col) => {\n        const colRect = JSON.parse(JSON.stringify(col.getBoundingClientRect()));\n        const columnId = col.getAttribute(\"data-drop-area\");\n        const cards = Array.from(col.querySelectorAll(\"[data-drag-item]\"));\n        const stayed = [];\n        const coords = cards.reduce((total, cardElem) => {\n            const rect = JSON.parse(JSON.stringify(cardElem.getBoundingClientRect()));\n            const id = cardElem.getAttribute(\"data-drag-item\");\n            const prevItem = total[total.length - 1];\n            const y = prevItem?.bottom ?? rect.y;\n            const itemCoords = { ...rect, y, id };\n            dragItemsCoords[id] = itemCoords;\n            total.push(itemCoords);\n            if (!includesId(dragItems, id)) {\n                stayed.push(id);\n            }\n            return total;\n        }, []);\n        const stayedItems = stayed.map((id, i) => {\n            return { ...coords[i], id };\n        });\n        if (!updateMode) {\n            const colParentHeight = col.offsetParent;\n            const gap = 30;\n            const colBottom = col.offsetTop + col.offsetHeight + gap;\n            if (colBottom >= colParentHeight.scrollHeight) {\n                colRect.bottom += dragItemHeight + gap;\n                colRect.height += dragItemHeight + gap;\n            }\n        }\n        dropAreasCoords.push({ ...colRect, id: columnId });\n        totalMap[columnId] = stayedItems;\n        return totalMap;\n    }, {});\n    return { dragItemsCoords, dropAreasCoords, dropAreaItemsCoords };\n}\nexport function getEventData(e) {\n    const ev = {};\n    ev.target = e.target;\n    if (\"touches\" in e) {\n        const firstTouch = e.touches[0];\n        ev.touches = e.touches;\n        ev.clientX = firstTouch.clientX;\n        ev.clientY = firstTouch.clientY;\n    }\n    else {\n        ev.clientX = e.clientX;\n        ev.clientY = e.clientY;\n    }\n    return ev;\n}\n//# sourceMappingURL=dnd.js.map","export function locate(el, attr = \"data-id\") {\n    let node = !el.tagName && el.target ? el.target : el;\n    while (node) {\n        if (node.getAttribute) {\n            const id = node.getAttribute(attr);\n            if (id)\n                return node;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nexport function locateByValue(el, value, attr = \"data-id\") {\n    let node = !el.tagName && el.target ? el.target : el;\n    while (node) {\n        if (node.getAttribute) {\n            const attrValue = node.getAttribute(attr);\n            if (attrValue === value)\n                return node;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nexport function locateAttr(el, attr = \"data-id\") {\n    const node = locate(el, attr);\n    if (node)\n        return node.getAttribute(attr);\n    return null;\n}\nexport function locateID(el, attr = \"data-id\") {\n    const node = locate(el, attr);\n    if (node) {\n        return id(node.getAttribute(attr));\n    }\n    return null;\n}\nexport function locateNode(el, node) {\n    let n = el;\n    while (n) {\n        if (n === node) {\n            return true;\n        }\n        n = n?.parentNode;\n    }\n    return null;\n}\nexport function id(value) {\n    if (typeof value === \"string\") {\n        const t = value * 1;\n        if (!isNaN(t))\n            return t;\n    }\n    return value;\n}\n//# sourceMappingURL=locate.js.map","export function getTheme(c, force, fallback) {\n    // get active skin\n    const nameDiv = document.createElement(\"DIV\");\n    nameDiv.className = \"wx-theme\";\n    c.appendChild(nameDiv);\n    let theme = window\n        .getComputedStyle(nameDiv)\n        .getPropertyValue(\"--wx-theme-name\");\n    c.removeChild(nameDiv);\n    if ((force && force !== theme) || (!force && !theme && fallback)) {\n        if (theme)\n            c.classList.remove(`wx-${theme}-theme`);\n        theme = force || fallback;\n        c.classList.add(`wx-${theme}-theme`);\n    }\n    return theme;\n}\n//# sourceMappingURL=context.js.map","import { getCoords, getDragItemCoords, getEventData, isInRange, isInRect, passThreshold, } from \"../dnd\";\nimport { locate, locateID } from \"@xbs/lib-dom\";\nimport { elementsIds } from \"../constants\";\nimport { splitAreaId } from \"../helpers\";\nexport function dndAction(node, config) {\n    if (config.readonly) {\n        return;\n    }\n    let clone;\n    let handlers;\n    const kanbanElement = node;\n    let kanbanContent;\n    let scrollTimer;\n    let dragCoords;\n    let pointerDownData;\n    let dragItemsCoords;\n    let dropAreaItemsCoords;\n    let dropAreasCoords;\n    let overAreaId;\n    let before;\n    let source;\n    const dispatch = (name, data) => {\n        config.api.exec(name, data);\n        if (config.onAction) {\n            config.onAction(name, data);\n        }\n    };\n    const { data: dataStore } = config.api.getStores();\n    function checkScroll(e) {\n        if (scrollTimer) {\n            clearTimeout(scrollTimer);\n        }\n        if (kanbanContent) {\n            const contentRect = kanbanContent.getBoundingClientRect();\n            const scrollState = {\n                x: kanbanContent.scrollLeft,\n                y: kanbanContent.scrollTop,\n            };\n            const shift = 50;\n            if (e.clientX > contentRect.width + contentRect.left - shift) {\n                kanbanContent.scrollTo(scrollState.x + shift, scrollState.y);\n            }\n            if (e.clientX < contentRect.left + shift) {\n                kanbanContent.scrollTo(scrollState.x - shift, scrollState.y);\n            }\n            if (e.clientY > contentRect.height + contentRect.top - shift) {\n                kanbanContent.scrollTo(scrollState.x, scrollState.y + shift);\n            }\n            if (e.clientY < contentRect.top + shift) {\n                kanbanContent.scrollTo(scrollState.x, scrollState.y - shift);\n            }\n            scrollTimer = setTimeout(() => {\n                checkScroll(e);\n            }, 100);\n        }\n    }\n    function getOverItems(relativeCoords) {\n        const items = {};\n        const areaId = dropAreasCoords.find(col => {\n            return isInRect(relativeCoords, col);\n        })?.id;\n        if (areaId) {\n            const [columnId, rowId] = splitAreaId(areaId);\n            items.overAreaId = { rowId, columnId };\n            const dragItems = dropAreaItemsCoords[areaId];\n            items.before = dragItems.find(d => {\n                return isInRange(relativeCoords.y, [d.y, d.bottom]);\n            })?.id;\n        }\n        return items;\n    }\n    function startDrag(ev, pointerCoords, relativeCoords, pointerDownData, selected) {\n        if (ev.touches && ev.touches.length > 1) {\n            return;\n        }\n        const id = pointerDownData.itemId;\n        if (selected?.indexOf(id) === -1) {\n            dispatch(\"select-card\", { id });\n            selected = [id];\n        }\n        dragCoords = getDragItemCoords(pointerCoords, pointerDownData, dragItemsCoords[id]);\n        setDragItemClone(selected);\n        const overItems = getOverItems(relativeCoords);\n        before = overItems.before;\n        overAreaId = overItems.overAreaId;\n        source = selected || [id];\n        dispatch(\"start-drag-card\", {\n            id,\n            rowId: overAreaId.rowId,\n            columnId: overAreaId.columnId,\n            before,\n            source,\n            dragItemsCoords,\n            dropAreasCoords,\n        });\n    }\n    function moveDragItem(state, pointerCoords, relativeCoords, pointerDownData) {\n        const { dragItemId } = state;\n        const dragItemCoords = dragItemsCoords[pointerDownData.itemId];\n        dragCoords = getDragItemCoords(pointerCoords, pointerDownData, dragItemCoords);\n        clone.style.left = dragCoords.x + \"px\";\n        clone.style.top = dragCoords.y + \"px\";\n        const overItems = getOverItems(relativeCoords);\n        const nextState = {\n            id: dragItemId,\n            rowId: overAreaId.rowId,\n            columnId: overAreaId.columnId,\n            before,\n            source,\n        };\n        if (overItems.overAreaId?.columnId &&\n            (nextState.rowId !== overItems.overAreaId?.rowId ||\n                nextState.columnId !== overItems.overAreaId?.columnId)) {\n            overAreaId = overItems.overAreaId;\n            nextState.rowId = overAreaId.rowId;\n            nextState.columnId = overAreaId.columnId;\n        }\n        if (before !== overItems.before) {\n            before = nextState.before = overItems.before;\n        }\n        dispatch(\"drag-card\", nextState);\n    }\n    function setDragItemClone(selected) {\n        const kanban = document.querySelector(\".wx-kanban\");\n        kanban.classList.add(\".wx-dragged\");\n        if (selected && selected.length > 1) {\n            kanban.style.setProperty(\"--wx-kanban-dragged-cards-count\", \n            // used to set variable value as string\n            JSON.stringify(`${selected.length}`));\n        }\n        kanban.appendChild(clone);\n        clone.classList.add(\"wx-dragged-card\");\n        clone.style.position = \"fixed\";\n        clone.style.left = dragCoords.x + \"px\";\n        clone.style.top = dragCoords.y + \"px\";\n        document.body.classList.add(\"wx-ondrag\");\n    }\n    function removeDragItemClone() {\n        const kanban = document.querySelector(\".wx-kanban\");\n        if (clone.parentNode) {\n            kanban.removeChild(clone);\n        }\n        document.body.classList.remove(\"wx-ondrag\");\n        kanban.style.removeProperty(\"--wx-kanban-dragged-cards-count\");\n        kanban.classList.remove(\".wx-dragged\");\n        clone = null;\n    }\n    function getPointerRelativeCoords(e, kanbanContent, pointerDownData) {\n        const initialScroll = pointerDownData.scroll;\n        const contentScroll = {\n            x: kanbanContent.scrollLeft,\n            y: kanbanContent.scrollTop,\n        };\n        const relativeCoords = {\n            x: e.clientX + (contentScroll.x - initialScroll.x),\n            y: e.clientY + (contentScroll.y - initialScroll.y),\n        };\n        return relativeCoords;\n    }\n    function downHandler(e) {\n        const ev = getEventData(e);\n        if ((ev.touches && ev.touches.length > 1) ||\n            (\"button\" in e && e.button !== 0)) {\n            return;\n        }\n        const source = locate(ev.target, \"data-drag-item\");\n        kanbanContent = kanbanElement.querySelector(`[data-kanban-id=\"${elementsIds.content}\"]`);\n        if (source) {\n            const itemId = locateID(source, \"data-drag-item\");\n            const areaId = locateID(ev.target, \"data-drag-item\");\n            const selected = dataStore.getState().selected;\n            const itemsId = selected && selected.length > 1\n                ? [...selected, itemId]\n                : [itemId];\n            const coords = getCoords(kanbanElement, itemsId);\n            dragItemsCoords = coords.dragItemsCoords;\n            dropAreasCoords = coords.dropAreasCoords;\n            dropAreaItemsCoords = coords.dropAreaItemsCoords;\n            clone = source.cloneNode(true);\n            handlers =\n                \"touches\" in e\n                    ? { up: \"touchend\", move: \"touchmove\" }\n                    : { up: \"mouseup\", move: \"mousemove\" };\n            document.addEventListener(handlers.move, moveHandler);\n            document.addEventListener(handlers.up, upHandler);\n            pointerDownData = {\n                x: ev.clientX,\n                y: ev.clientY,\n                itemId,\n                itemsId,\n                itemRect: dragItemsCoords[itemId],\n                areaId,\n                scroll: {\n                    x: kanbanContent.scrollLeft,\n                    y: kanbanContent.scrollTop,\n                },\n            };\n        }\n    }\n    function moveHandler(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const ev = getEventData(e);\n        checkScroll(ev);\n        if (!pointerDownData) {\n            return;\n        }\n        const state = dataStore.getState();\n        const { selected, dragItemId } = state;\n        const relativeCoords = getPointerRelativeCoords(ev, kanbanContent, pointerDownData);\n        const pointerCoords = { x: ev.clientX, y: ev.clientY };\n        if (!dragItemId && passThreshold(pointerDownData, pointerCoords)) {\n            startDrag(ev, pointerCoords, relativeCoords, pointerDownData, selected);\n        }\n        if (dragItemId) {\n            moveDragItem(state, pointerCoords, relativeCoords, pointerDownData);\n        }\n    }\n    function upHandler() {\n        document.removeEventListener(handlers.move, moveHandler);\n        document.removeEventListener(handlers.up, upHandler);\n        removeDragItemClone();\n        if (scrollTimer) {\n            clearTimeout(scrollTimer);\n        }\n        const { dragItemId } = dataStore.getState();\n        if (dragItemId) {\n            dispatch(\"end-drag-card\", {\n                id: dragItemId,\n                rowId: overAreaId.rowId,\n                columnId: overAreaId.columnId,\n                before,\n                source,\n            });\n        }\n        pointerDownData = null;\n    }\n    kanbanElement.addEventListener(\"mousedown\", downHandler);\n    kanbanElement.addEventListener(\"touchstart\", downHandler);\n    kanbanElement.addEventListener(\"dragstart\", e => e.preventDefault());\n    return {\n        destroy() {\n            kanbanElement.removeEventListener(\"mousedown\", downHandler);\n            kanbanElement.removeEventListener(\"touchstart\", downHandler);\n        },\n    };\n}\n//# sourceMappingURL=drag.js.map","import { locateAttr, locateID } from \"@xbs/lib-dom\";\nimport { isSameId, splitAreaId } from \"../helpers\";\nimport { elementsIds } from \"../constants\";\nexport function selection(node, config) {\n    if (config.readonly) {\n        return;\n    }\n    let pressedElem;\n    const { api } = config;\n    const handleDown = (e) => {\n        pressedElem = e.target;\n    };\n    api.on(\"select-card\", ({ id }) => {\n        if (!pressedElem) {\n            // wait for editor animation\n            setTimeout(() => {\n                api.exec(\"scroll\", {\n                    to: \"card\",\n                    id,\n                });\n            }, 100);\n        }\n    });\n    const handleUp = (e) => {\n        if (!pressedElem) {\n            return;\n        }\n        const ignoreSelection = locateAttr(e.target, \"data-ignore-selection\");\n        if (ignoreSelection) {\n            return;\n        }\n        const itemId = locateID(pressedElem, \"data-drag-item\");\n        const dataId = locateID(pressedElem, \"data-kanban-id\");\n        const groupMode = e.metaKey || e.ctrlKey;\n        const rangeMode = e.shiftKey;\n        // prevent selection reset after drag&drop\n        const isSameEl = pressedElem === e.target;\n        if (isSameEl && dataId !== elementsIds.editor) {\n            handleSelectAction({\n                itemId,\n                groupMode,\n                rangeMode,\n                api,\n            });\n        }\n        pressedElem = null;\n    };\n    node.addEventListener(\"mousedown\", handleDown);\n    node.addEventListener(\"mouseup\", handleUp);\n    return {\n        destroy() {\n            node.removeEventListener(\"mousedown\", handleDown);\n            node.removeEventListener(\"mouseup\", handleUp);\n        },\n    };\n}\nfunction handleSelectAction(data) {\n    const { itemId, groupMode, rangeMode, api } = data;\n    const { cardsMap, columnKey } = api.getState();\n    const { selected } = api.getState();\n    if (!itemId && selected?.length) {\n        api.exec(\"unselect-card\", {\n            id: null,\n        });\n        return;\n    }\n    if (rangeMode && selected?.length) {\n        const card = api.getCard(itemId);\n        const lastSelectedCard = api.getCard(selected[selected.length - 1]);\n        const isInSameColumn = isSameColumn(card, lastSelectedCard, columnKey);\n        if (isInSameColumn) {\n            const columnCards = Object.keys(cardsMap)\n                .filter(key => getColumnFromAreaId(key) === card[columnKey])\n                .reduce((acc, key) => {\n                const cards = cardsMap[key];\n                return acc.concat(cards);\n            }, []);\n            const itemIndex = columnCards.findIndex(card => isSameId(card.id, itemId));\n            const lastSelectedIndex = columnCards.findIndex(card => isSameId(card.id, lastSelectedCard?.id));\n            const startIndex = Math.min(itemIndex, lastSelectedIndex);\n            const endIndex = Math.max(itemIndex, lastSelectedIndex);\n            columnCards.slice(startIndex, endIndex + 1).forEach(c => {\n                if (selected.indexOf(c.id) === -1) {\n                    api.exec(\"select-card\", {\n                        id: c.id,\n                        groupMode: true,\n                    });\n                }\n            });\n            return;\n        }\n    }\n    api.exec(\"select-card\", {\n        id: itemId,\n        groupMode,\n    });\n}\nfunction isSameColumn(first, second, columnKey) {\n    if (!first || !second || !columnKey) {\n        return false;\n    }\n    return isSameId(first[columnKey], second[columnKey]);\n}\nfunction getColumnFromAreaId(areaId) {\n    return splitAreaId(areaId)[0];\n}\n//# sourceMappingURL=selection.js.map","export function scroll(node, config) {\n    const { api, tick = () => {\n        return new Promise((r) => {\n            requestAnimationFrame(() => {\n                r();\n            });\n        });\n    }, } = config;\n    const scroll = api.getReactiveState().scroll;\n    const dataAttrKeys = {\n        card: \"data-drag-item\",\n        column: `data-column-header`,\n        row: `data-row-header`,\n    };\n    scroll?.subscribe(v => {\n        if (v) {\n            const { to, id, options } = v;\n            scrollTo(`[${dataAttrKeys[to]}=\"${id}\"]`, options)\n                .then(ready => {\n                if (ready) {\n                    scroll.set(null);\n                }\n            })\n                .catch();\n        }\n    });\n    function scrollTo(selector, options) {\n        return new Promise(res => {\n            tick().then(() => {\n                const el = node.querySelector(selector);\n                if (el) {\n                    el.scrollIntoView(options || {\n                        behavior: \"smooth\",\n                        block: \"nearest\",\n                        inline: \"nearest\",\n                    });\n                    res(true);\n                }\n                res(false);\n            });\n        });\n    }\n}\n//# sourceMappingURL=scroll.js.map","import { checkScroll } from \"../helpers\";\nexport function scrollManager(node) {\n    let down = false;\n    function handleMouseOver(e) {\n        if (e.buttons === 1) {\n            down = true;\n        }\n    }\n    function handleMouseLeave() {\n        down = false;\n        if (cancelTimer) {\n            cancelTimer();\n        }\n    }\n    let cancelTimer = null;\n    function handleMouseMove(e) {\n        if (down) {\n            if (cancelTimer) {\n                cancelTimer();\n            }\n            cancelTimer = checkScroll(e, node);\n        }\n    }\n    function handleMouseUp() {\n        if (cancelTimer) {\n            cancelTimer();\n            cancelTimer = null;\n        }\n        down = false;\n    }\n    document.body.addEventListener(\"mousemove\", handleMouseMove);\n    document.body.addEventListener(\"mouseup\", handleMouseUp);\n    node.addEventListener(\"mousedown\", handleMouseOver);\n    node.addEventListener(\"mouseover\", handleMouseOver);\n    node.addEventListener(\"mouseleave\", handleMouseLeave);\n    return {\n        destroy: () => {\n            document.body.removeEventListener(\"mousemove\", handleMouseMove);\n            document.body.removeEventListener(\"mouseup\", handleMouseUp);\n            node.removeEventListener(\"mousedown\", handleMouseOver);\n            node.removeEventListener(\"mouseover\", handleMouseOver);\n            node.removeEventListener(\"mouseleave\", handleMouseLeave);\n        },\n    };\n}\n//# sourceMappingURL=scrollManager.js.map","import { locateAttr } from \"@xbs/lib-dom\";\nimport { elementsIds } from \"../constants\";\nexport function keyManager(_node, config) {\n    if (config.readonly) {\n        return;\n    }\n    const _ = config.locale;\n    const { api } = config;\n    const dispatch = config.onAction;\n    let inFocus = config.inFocus || false;\n    function handleHotkey(hotkey, e) {\n        switch (hotkey) {\n            case \"delete\":\n                api.getState().selected?.forEach(id => {\n                    api.exec(\"delete-card\", {\n                        id,\n                    });\n                });\n                break;\n            case \"ctrl+d\":\n                e.preventDefault();\n                api.getState().selected?.forEach(id => {\n                    const card = api.getCard(id);\n                    api.exec(\"duplicate-card\", {\n                        id,\n                        card: { label: `${_(\"Duplicate of\")} ${card?.label}` },\n                    });\n                });\n                break;\n            case \"ctrl+z\":\n                e.preventDefault();\n                api.getStores().data.undo();\n                break;\n            case \"ctrl+shift+z\":\n            case \"ctrl+y\":\n                e.preventDefault();\n                api.getStores().data.redo();\n                break;\n        }\n    }\n    function handleKeydown(e) {\n        if (inFocus) {\n            const ctrl = e.ctrlKey || e.metaKey;\n            const shift = e.shiftKey;\n            const code = e.code.replace(\"Key\", \"\").toLowerCase();\n            const hotkey = `${ctrl ? \"ctrl+\" : \"\"}${shift ? \"shift+\" : \"\"}${code}`;\n            handleHotkey(hotkey, e);\n            if (dispatch) {\n                dispatch(\"keydown\", { hotkey });\n            }\n        }\n    }\n    function handleMousedown(e) {\n        const widgetId = locateAttr(e.target, \"data-wx-widget\");\n        inFocus =\n            widgetId === elementsIds.kanban || widgetId === elementsIds.toolbar;\n        if (dispatch) {\n            dispatch(\"set-focus\", { inFocus });\n        }\n    }\n    document.addEventListener(\"keydown\", handleKeydown);\n    document.addEventListener(\"mousedown\", handleMousedown);\n    return {\n        destroy: () => {\n            document.removeEventListener(\"keydown\", handleKeydown);\n            document.removeEventListener(\"mousedown\", handleMousedown);\n        },\n    };\n}\n//# sourceMappingURL=keyManager.js.map","export function isImage(extension) {\n    switch (extension) {\n        case \"jpg\":\n        case \"jpeg\":\n        case \"gif\":\n        case \"png\":\n        case \"bmp\":\n        case \"tiff\":\n        case \"pcx\":\n        case \"svg\":\n        case \"ico\":\n            return true;\n        default:\n            return false;\n    }\n}\n//# sourceMappingURL=upload.js.map","export class ExportManager {\n    constructor(store) {\n        this._store = store;\n    }\n    json(fileName) {\n        const { cards, links, columns, rows } = this._store.getState();\n        const data = { cards, links, columns };\n        if (rows.length > 0) {\n            data.rows = rows;\n        }\n        this._save(data, `${fileName || \"kanban-export\"}`, \"json\");\n    }\n    _save(data, fileName, fileExtension) {\n        const a = document.createElement(\"a\");\n        document.body.appendChild(a);\n        a.style.display = \"none\";\n        const json = JSON.stringify(data);\n        const blob = new Blob([json], { type: \"octet/stream\" });\n        const url = window.URL.createObjectURL(blob);\n        a.href = url;\n        a.download = `${fileName}.${fileExtension}`;\n        a.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n    }\n}\n//# sourceMappingURL=ExportManager.js.map","export function portal(node, config) {\n    const { container, at, position = \"top\", align = \"start\" } = config;\n    const slot = getNode(container) || document.body;\n    if (at) {\n        node.style.position = \"absolute\";\n        const rect = at.getBoundingClientRect();\n        node.style.top = `${rect[position]}px`;\n        node.style.left = `${rect[align === \"start\" ? \"left\" : \"right\"]}px`;\n    }\n    slot.appendChild(node);\n    return {\n        destroy() {\n            node.remove();\n        },\n    };\n}\nfunction getNode(el) {\n    if (typeof el === \"string\") {\n        return document.querySelector(el);\n    }\n    return el;\n}\n//# sourceMappingURL=portal.js.map","<script lang=\"ts\">\n\timport { customIcons } from \"@xbs/lib-kanban\";\n\timport type { TWxIcons } from \"@xbs/lib-kanban\";\n\n\texport let name: TWxIcons | keyof typeof customIcons;\n\texport let size = 20;\n\texport let spin = false;\n\texport let click = null;\n\texport let clickable = !!click;\n\n</script>\n\n{#if customIcons[name]}\n\t<i\n\t\tclass=\"wx-icon\"\n\t\tclass:wx-spin={spin}\n\t\tclass:wx-clickable={clickable}\n\t\tstyle=\"font-size:{size}px;\"\n\t\ton:click={click}>\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\twidth={size}\n\t\t\theight={size}\n\t\t\tfill=\"currentColor\">\n\t\t\t<path d={customIcons[name].path} />\n\t\t</svg>\n\t</i>\n{:else}\n\t<i\n\t\tclass=\"wx-icon {name}\"\n\t\tclass:wx-spin={spin}\n\t\tclass:wx-clickable={clickable}\n\t\tstyle=\"font-size:{size}px;\"\n\t\ton:click={click} />\n{/if}\n\n<style>\n\t.wx-icon {\n\t\tcolor: var(--wx-color-font-alt);\n\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t.wx-clickable {\n\t\tcursor: pointer;\n\t}\n\t.wx-clickable:hover {\n\t\tbackground-color: var(--wx-background-hover);\n\t}\n\n\t@keyframes wx-spin {\n\t\tfrom {\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\t.wx-spin {\n\t\t-webkit-animation: wx-spin 2s linear infinite;\n\t\tanimation: wx-spin 2s linear infinite;\n\t}\n\n</style>\n","export function locate(el, attr = \"data-id\") {\n    let node = el;\n    if (!node.tagName && el.target)\n        node = el.target;\n    while (node) {\n        if (node.getAttribute) {\n            const id = node.getAttribute(attr);\n            if (id)\n                return node;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nexport function locateAttr(el, attr = \"data-id\") {\n    const node = locate(el, attr);\n    if (node)\n        return node.getAttribute(attr);\n    return null;\n}\nexport function locateID(el, attr = \"data-id\") {\n    const node = locate(el, attr);\n    if (node) {\n        return id(node.getAttribute(attr));\n    }\n    return null;\n}\nexport function locateNode(el, node) {\n    let n = el;\n    while (n) {\n        if (n === node) {\n            return true;\n        }\n        n = n?.parentNode;\n    }\n    return null;\n}\nexport function id(value) {\n    if (typeof value === \"string\") {\n        const t = value * 1;\n        if (!isNaN(t))\n            return t;\n    }\n    return value;\n}\n//# sourceMappingURL=locate.js.map","export function clickOutside(node, callback) {\n    const events = [\"click\", \"contextmenu\"];\n    const handleClick = event => {\n        if (node && !node.contains(event.target) && !event.defaultPrevented) {\n            callback(event);\n        }\n    };\n    events.forEach(e => document.addEventListener(e, handleClick, true));\n    return {\n        destroy() {\n            events.forEach(e => document.removeEventListener(e, handleClick, true));\n        },\n    };\n}\n//# sourceMappingURL=clickOutside.js.map","let id = new Date().valueOf();\nexport function uid() {\n    id += 1;\n    return id;\n}\n//# sourceMappingURL=uid.js.map","function toFixed(num) {\n    if (num < 10)\n        return \"0\" + num;\n    return num.toString();\n}\nfunction toFixedMs(num) {\n    const temp = toFixed(num);\n    return temp.length == 2 ? \"0\" + temp : temp;\n}\nexport function getDuodecade(year) {\n    const start = Math.floor(year / 11) * 11;\n    return {\n        start,\n        end: start + 11,\n    };\n}\nfunction getISOWeek(ndate) {\n    let nday = ndate.getDay();\n    if (nday === 0) {\n        nday = 7;\n    }\n    const first_thursday = new Date(ndate.valueOf());\n    first_thursday.setDate(ndate.getDate() + (4 - nday));\n    const year_number = first_thursday.getFullYear(); // year of the first Thursday\n    const ordinal_date = Math.floor((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) /\n        86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\n    const weekNumber = 1 + Math.floor(ordinal_date / 7);\n    return weekNumber;\n}\nconst emptyAmPm = [\"\", \"\"];\nfunction date2str(mask, date, locale) {\n    switch (mask) {\n        case \"%d\":\n            return toFixed(date.getDate());\n        case \"%m\":\n            return toFixed(date.getMonth() + 1);\n        case \"%j\":\n            return date.getDate();\n        case \"%n\":\n            return date.getMonth() + 1;\n        case \"%y\":\n            return toFixed(date.getFullYear() % 100);\n        case \"%Y\":\n            return date.getFullYear();\n        case \"%D\":\n            return locale.dayShort[date.getDay()];\n        case \"%l\":\n            return locale.dayFull[date.getDay()];\n        case \"%M\":\n            return locale.monthShort[date.getMonth()];\n        case \"%F\":\n            return locale.monthFull[date.getMonth()];\n        case \"%h\":\n            return toFixed(((date.getHours() + 11) % 12) + 1);\n        case \"%g\":\n            return ((date.getHours() + 11) % 12) + 1;\n        case \"%G\":\n            return date.getHours();\n        case \"%H\":\n            return toFixed(date.getHours());\n        case \"%i\":\n            return toFixed(date.getMinutes());\n        case \"%a\":\n            return ((date.getHours() > 11 ? locale.pm : locale.am) || emptyAmPm)[0];\n        case \"%A\":\n            return ((date.getHours() > 11 ? locale.pm : locale.am) || emptyAmPm)[1];\n        case \"%s\":\n            return toFixed(date.getSeconds());\n        case \"%S\":\n            return toFixedMs(date.getMilliseconds());\n        case \"%W\":\n            return toFixed(getISOWeek(date));\n        case \"%c\": {\n            let str = date.getFullYear() + \"\";\n            str += \"-\" + toFixed(date.getMonth() + 1);\n            str += \"-\" + toFixed(date.getDate());\n            str += \"T\";\n            str += toFixed(date.getHours());\n            str += \":\" + toFixed(date.getMinutes());\n            str += \":\" + toFixed(date.getSeconds());\n            return str;\n        }\n        default:\n            return mask;\n    }\n}\nconst formatFlags = /%[a-zA-Z]/g;\nexport function dateToString(format, locale) {\n    if (typeof format == \"function\")\n        return format;\n    return function (date) {\n        if (!date)\n            return \"\";\n        if (!date.getMonth)\n            date = new Date(date);\n        return format.replace(formatFlags, s => date2str(s, date, locale));\n    };\n}\n//# sourceMappingURL=dates.js.map","function isObject(a) {\n    return a && typeof a === \"object\" && !Array.isArray(a);\n}\nfunction extend(a, b) {\n    for (const key in b) {\n        const from = b[key];\n        if (isObject(a[key]) && isObject(from)) {\n            a[key] = extend({ ...a[key] }, b[key]);\n        }\n        else {\n            a[key] = b[key];\n        }\n    }\n    return a;\n}\nexport function locale(words) {\n    return {\n        getGroup(group) {\n            const block = words[group];\n            return (key) => {\n                return block ? block[key] || key : key;\n            };\n        },\n        getRaw() {\n            return words;\n        },\n        extend(values, optional) {\n            if (!values)\n                return this;\n            let data;\n            if (optional) {\n                data = extend({ ...values }, words);\n            }\n            else {\n                data = extend({ ...words }, values);\n            }\n            return locale(data);\n        },\n    };\n}\n//# sourceMappingURL=locale.js.map","export function walkData(data, cb) {\n\tdata.forEach(a => {\n\t\tcb(a);\n\t\tif (a.data && a.data.length)\n\t\t\twalkData(a.data, cb)\n\t});\n}\n\nexport function filterMenu(data, cb) {\n\tconst out = [];\n\tdata.forEach(a => {\n\t\tif (a.data) {\n\t\t\tconst sub = filterMenu(a.data, cb);\n\t\t\tif (sub.length)\n\t\t\t\tout.push({ ...a, data: sub });\n\t\t} else {\n\t\t\tif (cb(a)) out.push(a);\n\t\t}\n\t});\n\n\treturn out;\n}\n\nlet uid = 1;\nexport function prepareMenuData(data) {\n\twalkData(data, a => {\n\t\ta.id = a.id || (uid++);\n\t})\n\n\treturn data;\n}\n\nconst handlers = {};\nexport function getItemHandler(type){\n\treturn handlers[type];\n}\nexport function registerMenuItem(type, handler){\n\thandlers[type] = handler\t\n}","<script>\n\timport { getItemHandler } from \"../helpers\";\n\n\texport let item;\n\texport let showSub = false;\n\texport let activeItem = null;\n\n\tfunction onHover() {\n\t\tshowSub = item.data ? item.id : false;\n\t\tactiveItem = this;\n\t}\n</script>\n\n<div\n\tclass=\"item {item.css || ''}\"\n\tdata-id={item.id}\n\ton:mouseenter={onHover}\n\ton:click>\n\t{#if item.icon}<i class=\"icon {item.icon}\" />{/if}\n\t{#if item.type}\n\t\t<svelte:component this={getItemHandler(item.type)} {item} />\n\t{:else}\n\t\t<span class=\"value\"> {item.text} </span>\n\t{/if}\n\t{#if item.subtext}\n\t\t<span class=\"subtext\">{item.subtext}</span>\n\t{/if}\n\t{#if item.data}<i class=\"sub-icon wxi-angle-right\" />{/if}\n</div>\n\n<style>\n\t.item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tbox-sizing: border-box;\n\t\theight: 36px;\n\t\tline-height: 36px;\n\t\tpadding: 2px 12px;\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-weight: var(--wx-font-weight);\n\t\tfont-size: var(--wx-font-size);\n\t\tbackground-color: var(--wx-background);\n\t\tcursor: pointer;\n\t}\n\n\t.item:hover {\n\t\tbackground: var(--wx-background-alt);\n\t}\n\n\t.item:first-child {\n\t\tborder-top-left-radius: inherit;\n\t\tborder-top-right-radius: inherit;\n\t}\n\n\t.item:last-child {\n\t\tborder-bottom-left-radius: inherit;\n\t\tborder-bottom-right-radius: inherit;\n\t}\n\n\t.value {\n\t\tflex-grow: 1;\n\t\tcolor: var(--wx-color-font);\n\t}\n\t.icon,\n\t.sub-icon {\n\t\tvertical-align: middle;\n\t\theight: inherit;\n\t\tline-height: inherit;\n\t\tfont-size: var(--wx-icon-size);\n\t\tcolor: var(--wx-icon-color);\n\t}\n\n\t.icon {\n\t\tmargin-right: 8px;\n\t}\n\n\t.subtext{\n\t\tcolor: var(--wx-color-font-disabled);\n\t\tmargin-left: 20px;\n\t}\n</style>\n","<script>\n\timport { clickOutside } from \"@xbs/lib-core-dom\";\n\timport { onMount, createEventDispatcher } from \"svelte\";\n\n\timport MenuItem from \"./MenuItem.svelte\";\n\timport { prepareMenuData } from \"../helpers\";\n\n\tconst dispatch = createEventDispatcher();\n\n\texport let options;\n\t$: prepareMenuData(options);\n\n\texport let level = 1;\n\n\texport let left = 0;\n\texport let top = 0;\n\texport let at = \"bottom\";\n\texport let parent = null;\n\texport let relativeTo = document.body;\n\texport let mount;\n\texport let object = null;\n\t\n\tlet width, pos;\n\tlet atBottom, atLeft, atFit;\n\t$: atBottom = at.indexOf(\"bottom\") !== -1;\n\t$: atLeft = at.indexOf(\"left\") !== -1;\n\t$: atFit = at.indexOf(\"fit\") !== -1;\n\n\tfunction positionToParent(parent) {\n\t\tif (!parent || at === \"point\") return;\n\n\t\tpos = parent.getBoundingClientRect();\n\t\tconst off = relativeTo.getBoundingClientRect();\n\t\t\n\t\tleft = (at === \"right\" ? (pos.right+(level?0:1)) : pos.left) - off.left;\n\t\ttop = (atBottom ? (pos.bottom+1) : pos.top) - off.top;\n\t\twidth = atFit ? (pos.width+\"px\") : \"auto\";\n\n\t\tleft += relativeTo.scrollLeft;\n\t\ttop += relativeTo.scrollTop;\n\t}\n\t$: positionToParent(parent)\n\n\n\tlet showSub;\n\tlet activeItem;\n\tlet self;\n\tfunction fitToBody() {\n\t\t// [CYPRESS] [SVELTE]\n\t\t// https://tracker.webix.io/issue/SVAR-727#focus=streamItem-4-7728.0-0\n\t\t// https://github.com/sveltejs/svelte/issues/7476\n\t\tif (!self) return;\n\n\t\tconst bodyRect = document.body.getBoundingClientRect();\n\t\tconst menuRect = self.getBoundingClientRect();\n\n\t\tlet fixLeft = atLeft;\n\t/*\n      [FIXME]\n      we can use a bit more clever logic here\n      when \"bottom\" strategy fails, use \"top\"\n      and only when both fails, then \"fit over\" the action area\n\n      similar to right/left\n      it must be appliend only for \"at\" axis\n      second axis, will always use \"fit over\" \n    */\n\t\tconst dy = menuRect.bottom - bodyRect.bottom;\n\t\tif (dy > 0) top -= dy;\n\n\t\tconst dxR = menuRect.right - bodyRect.right;\n\t\tif (dxR > 0) {\n\t\t\tif (at !== \"right\") {\n\t\t\t\tleft = pos.right - menuRect.width;\n\t\t\t} else {\n\t\t\t\tfixLeft = true;\n\t\t\t}\n\t\t}\n\n\t\t// correct left position\n\t\t// can't do it earlier, because width of menu is unknown\n\t\tif (fixLeft)\n\t\t\tleft = (level > 1 ? 0 : pos.left) - menuRect.width;\n\t\t\n\t\tconst dxL = left - bodyRect.left;\n\t\tif (dxL < 0 && level < 2){ // [FIXME] left submenu is impossible\n\t\t\tif (at !== \"left\") {\n\t\t\t\tleft -= dxL;\n\t\t\t} else {\n\t\t\t\tleft = level > 1 ? pos.width : pos.right;\n\t\t\t}\n\t\t}\n\t}\n\n\t// unfortunately svelte doesn't guarantee that afterUpdate of child component\n\t// will be called after onMount in the parent one, so to be sure that Portal is already\n\t// moved menu to the correct parent we are registering single time handler\n\tif (mount)\n\t\tmount(fitToBody);\n\tonMount(fitToBody);\n\n\tfunction onLeave() {\n\t\tshowSub = false;\n\t}\n\tfunction cancel() {\n\t\tdispatch(\"click\", { action: null });\n\t}\n\n</script>\n\n<div\n\tuse:clickOutside={cancel}\n\tbind:this={self}\n\tclass=\"menu {level > 1 ? 'sub' : ''}\"\n\tstyle=\"top:{top}px;left:{left}px;width:{width}\"\n\tdata-level={level}\n\ton:mouseleave={onLeave}>\n\t{#each options as item (item.id)}\n\t\t{#if item.type === \"separator\"}\n\t\t\t<div class=\"separator\" />\n\t\t{:else}\n\t\t\t<MenuItem\n\t\t\t\t{item}\n\t\t\t\tbind:showSub\n\t\t\t\tbind:activeItem\n\t\t\t\ton:click={ev => {\n\t\t\t\t\tif (!item.data && !ev.defaultPrevented) {\n\t\t\t\t\t\tconst pack = { item:object, action:item };\n\t\t\t\t\t\tif (item.handler)\n\t\t\t\t\t\t\titem.handler(pack);\n\t\t\t\t\t\tdispatch('click', pack);\n\t\t\t\t\t}\n\t\t\t\t}} />\n\t\t{/if}\n\t\t{#if item.data && showSub === item.id}\n\t\t\t<svelte:self\n\t\t\t\trelativeTo={self}\n\t\t\t\toptions={item.data}\n\t\t\t\tlevel={level + 1}\n\t\t\t\tat=\"right\"\n\t\t\t\tparent={activeItem}\n\t\t\t\ton:click />\n\t\t{/if}\n\t{/each}\n</div>\n\n<style>\n\t.menu {\n\t\tmin-width: 125px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tposition: absolute;\n\t\tz-index: 20;\n\t\toutline: var(--wx-border-medium);\n\t\tborder-radius: var(--wx-border-radius);\n\t\tbackground-color: var(--wx-background);\n\t\tbox-shadow: var(--wx-shadow-light);\n\t}\n\t.sub {\n\t\tz-index: 30;\n\t}\n\t.separator {\n\t\twidth: 100%;\n\t\tborder-top: var(--wx-border-medium);\n\t}\n\n</style>","<script>\n    import { Portal } from \"@xbs/svelte-wx\";\n    import { id } from \"@xbs/lib-core-dom\";\n    import Menu from \"./Menu.svelte\";\n    import { filterMenu } from \"../helpers\";\n\n    import { createEventDispatcher } from \"svelte\";\n    const dispatch = createEventDispatcher();\n\n    const SLOTS = $$props.$$slots;\n\n    export let options;\n    export let at = \"bottom\";\n    export let resolver = null;\n    export let dataKey = \"contextId\";\n    export let filter = null;\n    export const handler = show;\n    export let relativeTo = undefined;\n\n    var filteredOptions;\n    $: filteredOptions = options;\n\n    var item = null;\n    var parent = null;\n    let left = 0, top = 0;\n    \n    function onClick(ev){\n        parent = null;\n        dispatch(\"click\", ev.detail);\n    }\n    function getDataAttr(node, name){\n        let v = null;\n        while (node && node.dataset && !v){\n            v = node.dataset[name];\n            node = node.parentNode;\n        }\n        return v ? id(v) : null;\n    }\n    function show(ev, obj){\n        if (!ev) {\n            parent = null;\n            return;\n        }\n\n        const target = ev.target;\n        if (target && target.dataset && target.dataset.menuIgnore) return;\n\n        left = ev.clientX+1;\n        top = ev.clientY+1;\n\n        item = (typeof obj !== \"undefined\" ? obj: getDataAttr(target, dataKey));\n        if (resolver){\n            item = resolver(item, ev);\n            if (!item) return;\n        }\n\n        if (item !== null && filter){\n            filteredOptions = filterMenu(options, v => filter(v, item));\n        }\n        parent = target;\n        ev.preventDefault();\n    }\n</script>\n    \n{#if SLOTS && SLOTS.default}\n<div on:contextmenu={show} data-menu-ignore=\"true\">\n    <slot />\n</div>\n{/if}\n{#if parent}\n<Portal target={relativeTo} let:mount>\n    <Menu \n        {at}\n        {top}\n        {left}\n        {mount}\n        {parent}\n        {relativeTo}\n        object={item}\n        on:click={onClick}\n        options={filteredOptions}\n        />\n</Portal>\n{/if}","<script>\nimport { Portal } from \"@xbs/svelte-wx\";\nimport Menu from \"./Menu.svelte\";\nimport { createEventDispatcher } from \"svelte\";\n  const dispatch = createEventDispatcher();\n\nexport let options;\nexport let at = \"bottom\";\nexport let relativeTo = undefined;\n\nexport const handler = (ev) => {\n    parent = ev.target;\n    ev.preventDefault();\n};\n\n\nvar parent = null;\nfunction onClick(ev){\n    parent = null;\n    dispatch(\"click\", ev.detail);\n}\nfunction show(ev){\n    const target = ev.target;\n    if (!target.dataset.menuIgnore)\n        parent = target;\n}\n\n</script>\n\n<div on:click={show} data-menu-ignore=\"true\">\n    <slot />\n</div>\n{#if parent}\n<Portal target={relativeTo} let:mount>\n    <Menu \n        {at}\n        {mount}\n        {parent}\n        {options}\n        on:click={onClick}\n        {relativeTo}\n        />\n</Portal>\n{/if}","<script lang=\"ts\">\n\timport { createEventDispatcher, getContext } from \"svelte\";\n\n\timport { getAreaId } from \"@xbs/lib-kanban\";\n\n\timport type {\n\t\tIApi,\n\t\tTCardsMap,\n\t\tIColumn,\n\t\tIRow,\n\t\tIRowShape,\n\t\tTEventDispatcher,\n\t\tTMenuItemsFn,\n\t} from \"@xbs/lib-kanban\";\n\timport Icon from \"./../lib/Icon.svelte\";\n\n\timport { DropDownMenu } from \"@xbs/svelte-menu\";\n\n\texport let row: IRow = {\n\t\tid: \"default\",\n\t\tlabel: \"default\",\n\t\tcollapsed: false,\n\t};\n\texport let rows: IRow[] = [];\n\texport let api: IApi;\n\n\texport let collapsable = true;\n\n\tconst _ = getContext<any>(\"wx-i18n\").getGroup(\"kanban\");\n\tconst dispatch: TEventDispatcher = createEventDispatcher();\n\n\tfunction handleRowCollapse() {\n\t\tdispatch(\"action\", {\n\t\t\taction: \"update-row\",\n\t\t\tdata: {\n\t\t\t\tid: row.id,\n\t\t\t\trow: {\n\t\t\t\t\tcollapsed: !row.collapsed,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\tconst { readonly, rowShape, cardsMap, columns } = api.getReactiveState();\n\n\t$: edit = $readonly.edit;\n\n\tlet renaming = false;\n\tlet rowLabel = null;\n\t$: rowIndex = rows.findIndex(c => c.id === row.id);\n\n\tfunction endRenaming() {\n\t\tif (renaming && rowLabel?.trim()) {\n\t\t\tdispatch(\"action\", {\n\t\t\t\taction: \"update-row\",\n\t\t\t\tdata: {\n\t\t\t\t\tid: row.id,\n\t\t\t\t\trow: {\n\t\t\t\t\t\tlabel: rowLabel,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\trenaming = false;\n\t\trowLabel = null;\n\t}\n\n\tfunction handleRowRename() {\n\t\tif (!edit) {\n\t\t\treturn;\n\t\t}\n\t\trenaming = true;\n\t}\n\tfunction handleLabelInput(e: any) {\n\t\trowLabel = e.target.value;\n\t}\n\tfunction handleInputKeypress(e: KeyboardEvent) {\n\t\tif (e.charCode === 13) {\n\t\t\tendRenaming();\n\t\t}\n\t}\n\n\tfunction focus(node: HTMLElement) {\n\t\tnode.focus();\n\t}\n\n\tlet menuOpen = false;\n\tfunction handleMenuClick() {\n\t\tmenuOpen = true;\n\t}\n\n\tfunction handleMove(dir: \"up\" | \"down\") {\n\t\tconst beforeIndex = dir === \"up\" ? rowIndex - 1 : rowIndex + 2;\n\t\tconst before = rows[beforeIndex]?.id;\n\n\t\tdispatch(\"action\", {\n\t\t\taction: \"move-row\",\n\t\t\tdata: {\n\t\t\t\tid: row.id,\n\t\t\t\tbefore,\n\t\t\t},\n\t\t});\n\t}\n\n\tfunction handleMenuAction(ev: any) {\n\t\tconst action = ev.detail.action;\n\t\tif (action) {\n\t\t\tif (action.onClick) {\n\t\t\t\taction.onClick({\n\t\t\t\t\tid: action.id,\n\t\t\t\t\titem: action,\n\t\t\t\t\trow,\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch (action.id) {\n\t\t\t\tcase \"set-edit\":\n\t\t\t\t\thandleRowRename();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"delete-row\":\n\t\t\t\t\tdispatch(\"action\", {\n\t\t\t\t\t\taction: \"delete-row\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tid: row.id,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"move-row:up\":\n\t\t\t\t\thandleMove(\"up\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"move-row:down\":\n\t\t\t\t\thandleMove(\"down\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tmenuOpen = null;\n\t}\n\n\tlet labelEl: HTMLElement;\n\tlet menuEl: HTMLElement;\n\n\tconst getMenuItems = (\n\t\trow: IRow,\n\t\trowIndex: number,\n\t\trows: IRow[],\n\t\trowShape: IRowShape\n\t) => {\n\t\tconst menuItems = (\n\t\t\trowShape.menu.items as TMenuItemsFn<{\n\t\t\t\trow: IRow;\n\t\t\t\trows: IRow[];\n\t\t\t\trowIndex: number;\n\t\t\t}>\n\t\t)({\n\t\t\trows,\n\t\t\trowIndex,\n\t\t\trow: row,\n\t\t});\n\n\t\tif (!menuItems || !menuItems.length) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn menuItems.map(item => {\n\t\t\treturn {\n\t\t\t\t...item,\n\t\t\t\ttext: _(item.text),\n\t\t\t\tcss: item.disabled ? \"disabled\" : \"\",\n\t\t\t};\n\t\t});\n\t};\n\n\t$: menuItems = getMenuItems(row, rowIndex, rows, $rowShape);\n\t$: isMenuVisible = $rowShape.menu.show && !!menuItems && edit && !renaming;\n\n\tfunction buildRowCss(\n\t\trow: IRow,\n\t\trowShape: IRowShape,\n\t\tcolumns: IColumn[],\n\t\tcardsMap: TCardsMap\n\t) {\n\t\tlet rowClass = \"wx-row\";\n\t\tif (row.collapsed) rowClass += \" wx-collapsed\";\n\t\tif (row.css) rowClass += \" \" + row.css;\n\t\tif (rowShape && rowShape.css) {\n\t\t\tlet cards = [];\n\t\t\tcolumns.forEach(\n\t\t\t\tcolumn =>\n\t\t\t\t\t(cards = cards.concat(\n\t\t\t\t\t\tcardsMap[getAreaId(column.id, row.id)]\n\t\t\t\t\t))\n\t\t\t);\n\t\t\trowClass += \" \" + rowShape.css(row, cards);\n\t\t}\n\t\treturn rowClass;\n\t}\n\n\t$: rowClass = buildRowCss(row, $rowShape, $columns, $cardsMap);\n\n</script>\n\n<div class={rowClass} class:wx-collapsed={row.collapsed}>\n\t<div\n\t\tclass=\"wx-label {collapsable ? 'collapsable' : ''}\"\n\t\tdata-row-header={row.id}\n\t\tbind:this={labelEl}>\n\t\t{#if collapsable}\n\t\t\t<div class=\"wx-label-icon\">\n\t\t\t\t<Icon\n\t\t\t\t\tname={row.collapsed ? `wxi-angle-right` : `wxi-angle-down`}\n\t\t\t\t\tsize={18}\n\t\t\t\t\tclickable\n\t\t\t\t\tclick={handleRowCollapse} />\n\t\t\t</div>\n\t\t\t<div class=\"wx-label-text\" on:dblclick={handleRowRename}>\n\t\t\t\t{#if renaming}\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclass=\"wx-input\"\n\t\t\t\t\t\tvalue={row.label}\n\t\t\t\t\t\ton:input={handleLabelInput}\n\t\t\t\t\t\ton:keypress={handleInputKeypress}\n\t\t\t\t\t\ton:blur={endRenaming}\n\t\t\t\t\t\tuse:focus />\n\t\t\t\t{:else}{row.label}{/if}\n\t\t\t</div>\n\t\t\t{#if isMenuVisible}\n\t\t\t\t<DropDownMenu options={menuItems} on:click={handleMenuAction}>\n\t\t\t\t\t<div class=\"wx-menu\" bind:this={menuEl}>\n\t\t\t\t\t\t<Icon name=\"wxi-dots-h\" click={handleMenuClick} />\n\t\t\t\t\t</div>\n\t\t\t\t</DropDownMenu>\n\t\t\t{/if}\n\t\t{/if}\n\t\t<div class=\"wx-label-line {collapsable ? 'collapsable' : ''}\" />\n\t</div>\n\t{#if !row.collapsed}\n\t\t<div class=\"wx-content\">\n\t\t\t<slot />\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.wx-row {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-width: 100%;\n\t\twidth: fit-content;\n\t\tmax-height: 100%;\n\t}\n\t.wx-row:not(.wx-collapsed) {\n\t\theight: auto;\n\t}\n\t.wx-label {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tposition: relative;\n\t\tz-index: 10;\n\t}\n\t.wx-label.collapsable {\n\t\tpadding: 14px 12px 0 24px;\n\t}\n\t.wx-label-text {\n\t\tmax-width: 50%;\n\t\tmargin: 0 var(--wx-padding);\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t}\n\t.wx-label-line {\n\t\tflex: 1 1 auto;\n\t\tborder-top: var(--wx-kanban-row-line);\n\t}\n\t.wx-label-line.collapsable {\n\t\tborder-top: var(--wx-border);\n\t}\n\t.wx-label-icon {\n\t\tpadding: 0;\n\t}\n\t.wx-content {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tmax-height: 100%;\n\t\theight: auto;\n\t}\n\n\t.wx-input {\n\t\tpadding: var(--wx-input-padding);\n\t\toutline: none;\n\t\tflex: 1;\n\t\tcolor: var(--wx-color-font);\n\t\twidth: 100%;\n\t\tbox-sizing: border-box;\n\t\tborder: var(--wx-input-border);\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tbackground-color: transparent;\n\t}\n\t.wx-input:focus {\n\t\tborder: 1px solid var(--wx-color-primary);\n\t}\n\n\t.wx-menu {\n\t\tposition: relative;\n\t\tmargin-right: var(--wx-padding);\n\t}\n\n</style>\n","<script lang=\"ts\">\n\texport let label = \"\";\n\texport let min = 0;\n\texport let max = 100;\n\texport let value = 0;\n\texport let showValue = true;\n\n\tlet progress = \"0\";\n\tlet bgStyle = \"\";\n\n\t$: {\n\t\tprogress = Math.round(((value - min) / (max - min)) * 100) + \"%\";\n\t\tbgStyle = `background: linear-gradient(90deg, var(--wx-color-primary) 0% ${progress}, var(--wx-kanban-progress-inactive-color) ${progress} 100%);`;\n\t}\n\n</script>\n\n<div class=\"wx-layout\">\n\t{#if label}\n\t\t<div class=\"wx-label\">{label}</div>\n\t{/if}\n\t<div class=\"wx-wrap\">\n\t\t<div class=\"wx-progress\" style={bgStyle} />\n\t\t{#if showValue}\n\t\t\t<div class=\"wx-value\">{progress}</div>\n\t\t{/if}\n\t</div>\n</div>\n\n<style>\n\t.wx-layout {\n\t\tmargin-bottom: 5px;\n\t\tmin-width: 100%;\n\t}\n\n\t.wx-label {\n\t\tdisplay: block;\n\t\tmargin: var(--wx-label-margin);\n\t\tpadding: var(--wx-label-padding);\n\t\tfont-family: var(--wx-label-font-family);\n\t\tfont-size: var(--wx-label-font-size);\n\t\tline-height: var(--wx-label-line-height);\n\t\tfont-weight: var(--wx-label-font-weight);\n\t\tcolor: var(--wx-label-font-color);\n\t}\n\n\t.wx-wrap {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.wx-progress {\n\t\twidth: 100%;\n\t\tborder-radius: 4px;\n\t\theight: var(--wx-progress-height);\n\t\tmin-height: var(--wx-progress-height);\n\t\tmax-height: var(--wx-progress-height);\n\t}\n\n\t.wx-value {\n\t\tmin-width: 35px;\n\t\ttext-align: end;\n\t}\n\n</style>\n","<script lang=\"ts\">\n\tinterface IData {\n\t\tlabel?: string;\n\t\tavatar?: string;\n\t\tavatarColor?: string;\n\t}\n\n\texport let data: IData = {\n\t\tlabel: \"\",\n\t\tavatar: \"\",\n\t\tavatarColor: \"\",\n\t};\n\texport let noTransform = false;\n\texport let size = \"normal\";\n\texport let border = true;\n\n\t$: firstLetters = data.label\n\t\t.split(\" \")\n\t\t.map(name => name[0])\n\t\t.join(\"\");\n\n\tlet style = \"\";\n\t$: {\n\t\tif (data.avatarColor) {\n\t\t\tstyle = `background: ${data.avatarColor}; color: var(--wx-color-primary-font);`;\n\t\t}\n\t}\n\n</script>\n\n<div class=\"wx-user {size}\" class:border {style}>\n\t{#if data.avatar}\n\t\t<img src={data.avatar} alt={data.label} />\n\t{:else if noTransform}{data.label}{:else}{firstLetters}{/if}\n</div>\n\n<style>\n\t.wx-user {\n\t\tborder-radius: 50%;\n\t\tbackground: var(--wx-kanban-background);\n\n\t\tcolor: var(--wx-color-font);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\toverflow: hidden;\n\t\tbackground: var(--wx-kanban-background);\n\t}\n\n\t.wx-user.normal {\n\t\twidth: var(--wx-kanban-user-icon-size);\n\t\theight: var(--wx-kanban-user-icon-size);\n\t\tfont-size: var(--wx-font-size);\n\t}\n\n\t.wx-user.small {\n\t\twidth: calc(var(--wx-kanban-user-icon-size) - 8px);\n\t\theight: calc(var(--wx-kanban-user-icon-size) - 8px);\n\t\tfont-size: var(--wx-font-size-sm);\n\t}\n\n\t.wx-user.border {\n\t\tborder: solid var(--wx-kanban-card-background) 2px;\n\t}\n\n\t.wx-user img {\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tobject-fit: cover;\n\t}\n\n\t.wx-user:nth-child(2) {\n\t\ttransform: translateX(-15px);\n\t}\n\t.wx-user:nth-child(3) {\n\t\ttransform: translateX(-20px);\n\t}\n\t.wx-user:nth-child(4) {\n\t\ttransform: translateX(-30px);\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport Icon from \"../../lib/Icon.svelte\";\n\timport UserIcon from \"../../lib/UserIcon.svelte\";\n\n\timport type { ICardShape, INormalizedCard, TID } from \"@xbs/lib-kanban\";\n\n\timport { dateToString } from \"@xbs/lib-core-dom\";\n\timport { getContext } from \"svelte\";\n\timport type { Writable } from \"svelte/store\";\n\n\texport let cardFields: INormalizedCard;\n\texport let cardShape: ICardShape;\n\texport let api;\n\n\ttype TFooterValues = {\n\t\tusers?: ICardShape[\"users\"][\"values\"];\n\t\tendDate?: string;\n\t\tstartDate?: string;\n\t\tattached?: number;\n\t\tcomments?: number;\n\t\tvotes?: number;\n\t};\n\n\tconst lang = getContext<any>(\"wx-i18n\");\n\tconst defaultFormat = \"%M %d\";\n\n\tfunction getFooterValues(\n\t\tcardFields: INormalizedCard,\n\t\tshape: ICardShape\n\t): TFooterValues {\n\t\tlet values = {} as TFooterValues;\n\n\t\tconst { show } = shape?.users || {};\n\t\tconst usersIds = cardFields.users;\n\n\t\tif (show && usersIds) {\n\t\t\tconst usersConfig = (\n\t\t\t\tArray.isArray(usersIds) ? usersIds : [usersIds]\n\t\t\t).reduce((c, id) => {\n\t\t\t\tconst user = shape.users.values?.find(v => v.id === id);\n\t\t\t\tif (user) {\n\t\t\t\t\tc.push(user);\n\t\t\t\t}\n\t\t\t\treturn c;\n\t\t\t}, []) as ICardShape[\"users\"][\"values\"];\n\n\t\t\tlet users = usersConfig.map(user => ({\n\t\t\t\t...user,\n\t\t\t\tlabel: user.label || \"\",\n\t\t\t}));\n\t\t\tconst maxUsersCount = 2;\n\t\t\tif (usersConfig.length > maxUsersCount) {\n\t\t\t\tusers = users.splice(0, maxUsersCount);\n\t\t\t\tusers.push({\n\t\t\t\t\tlabel: `+${usersConfig.length - users.length}`,\n\t\t\t\t\tid: \"$total\",\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (users?.length) {\n\t\t\t\tvalues.users = users;\n\t\t\t}\n\t\t}\n\t\tconst { show: showStartDate, format: startFormat } =\n\t\t\tshape.start_date || {};\n\t\tconst { show: showEndDate, format: endFormat } = shape.end_date || {};\n\n\t\tlet { end_date, start_date } = cardFields;\n\n\t\tif (showStartDate || showEndDate) {\n\t\t\tif (start_date) {\n\t\t\t\tvalues.startDate = dateToString(\n\t\t\t\t\tstartFormat || defaultFormat,\n\t\t\t\t\tlang.getRaw().calendar\n\t\t\t\t)(start_date as Date);\n\t\t\t}\n\t\t\tif (end_date) {\n\t\t\t\tvalues.endDate = dateToString(\n\t\t\t\t\tendFormat || defaultFormat,\n\t\t\t\t\tlang.getRaw().calendar\n\t\t\t\t)(end_date as Date);\n\t\t\t}\n\t\t}\n\n\t\tif (shape?.attached?.show && cardFields.attached?.length) {\n\t\t\tvalues.attached = cardFields.attached.length;\n\t\t}\n\t\tif (shape.comments?.show && cardFields.comments?.length) {\n\t\t\tvalues.comments = cardFields.comments?.length;\n\t\t}\n\t\tif (shape.votes?.show && cardFields.votes?.length) {\n\t\t\tvalues.votes = cardFields.votes?.length;\n\t\t}\n\n\t\treturn values;\n\t}\n\t$: footerValues = getFooterValues(cardFields, cardShape);\n\n\tlet currentUser: Writable<TID> = null;\n\t$: if (api) currentUser = api.getReactiveState().currentUser;\n\n</script>\n\n<div\n\tclass=\"wx-footer\"\n\tclass:wx-with-content={!!Object.keys(footerValues).length}>\n\t{#if footerValues.users}\n\t\t<div class=\"wx-users\">\n\t\t\t{#each footerValues.users as user (user.id)}\n\t\t\t\t<UserIcon data={user} noTransform={user.id === '$total'} />\n\t\t\t{/each}\n\t\t</div>\n\t{/if}\n\n\t<div class=\"wx-card-icons\">\n\t\t<div class=\"wx-icons-container\">\n\t\t\t<!-- hack for left alignment of icons -->\n\t\t\t{#if footerValues.endDate || footerValues.startDate}\n\t\t\t\t<div class=\"wx-date\">\n\t\t\t\t\t<Icon name=\"wxi-calendar\" />\n\t\t\t\t\t{#if footerValues.startDate}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"wx-date-value\">{footerValues.startDate}</span>\n\t\t\t\t\t{/if}\n\t\t\t\t\t{#if footerValues.endDate && footerValues.startDate}-{/if}\n\t\t\t\t\t{#if footerValues.endDate}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"wx-date-value\">{footerValues.endDate}</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"wx-icons-container\">\n\t\t\t{#if footerValues.votes}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"wx-votes\"\n\t\t\t\t\tclass:wx-kanban-editor-voted={cardFields.votes.includes($currentUser)}>\n\t\t\t\t\t<Icon name=\"wxi-like\" />\n\t\t\t\t\t<span class=\"wx-item-value\">{footerValues.votes}</span>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t\t{#if footerValues.comments}\n\t\t\t\t<div class=\"wx-comments\">\n\t\t\t\t\t<Icon name=\"wxi-message\" />\n\t\t\t\t\t<span class=\"wx-item-value\">{footerValues.comments}</span>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t\t{#if footerValues.attached}\n\t\t\t\t<div class=\"wx-attached\">\n\t\t\t\t\t<Icon name=\"wxi-paperclip\" />\n\t\t\t\t\t<span class=\"wx-item-value\">{footerValues.attached}</span>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n</div>\n\n<style>\n\t.wx-footer {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 12px;\n\t}\n\t.wx-with-content {\n\t\tpadding-top: var(--wx-kanban-card-field-padding);\n\t}\n\t.wx-users {\n\t\tdisplay: flex;\n\t}\n\t.wx-date {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tcolor: var(--wx-color-font-alt);\n\t}\n\n\t.wx-item-value,\n\t.wx-date-value {\n\t\tpadding: 0 4px;\n\t\twhite-space: nowrap;\n\t}\n\n\t.wx-card-icons,\n\t.wx-attached,\n\t.wx-comments,\n\t.wx-votes {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.wx-card-icons {\n\t\tjustify-content: space-between;\n\t}\n\n\t.wx-icons-container {\n\t\tdisplay: flex;\n\t\tgap: var(--wx-padding);\n\t}\n\n\t.wx-kanban-editor-voted :global(i) {\n\t\tcolor: var(--wx-color-primary);\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport type { ICard, ICardShape } from \"@xbs/lib-kanban\";\n\n\texport let cardFields: ICard;\n\texport let cardShape: ICardShape;\n\n\tfunction getHeaderValues(cardFields: ICard, shape: ICardShape) {\n\t\tlet values = [];\n\n\t\tif (shape.priority?.show) {\n\t\t\tconst priorityValue = shape.priority.values?.find(\n\t\t\t\tpriority => priority.id === cardFields.priority\n\t\t\t);\n\n\t\t\tif (priorityValue) {\n\t\t\t\tvalues.push({\n\t\t\t\t\ttype: \"priority\",\n\t\t\t\t\tvalue: priorityValue.label,\n\t\t\t\t\tcolor: priorityValue.color,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tconst customFieldsConfig = shape.headerFields;\n\t\tif (customFieldsConfig) {\n\t\t\tconst customFields = customFieldsConfig.reduce((total, field) => {\n\t\t\t\tif (cardFields[field.key]) {\n\t\t\t\t\ttotal.push({\n\t\t\t\t\t\tvalue: cardFields[field.key],\n\t\t\t\t\t\tlabel: field.label,\n\t\t\t\t\t\tcss: field.css,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn total;\n\t\t\t}, []);\n\t\t\tif (customFields) {\n\t\t\t\tvalues.push(...customFields);\n\t\t\t}\n\t\t}\n\t\treturn values;\n\t}\n\n\t$: headerValues = getHeaderValues(cardFields, cardShape);\n\n</script>\n\n<div class=\"wx-card-header\">\n\t{#each headerValues as field}\n\t\t{#if field.value}\n\t\t\t{#if field.type === 'priority'}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"wx-field wx-priority\"\n\t\t\t\t\tstyle=\"background:{field.color}\">\n\t\t\t\t\t<span class=\"wx-priority-label\"> {field.value} </span>\n\t\t\t\t</div>\n\t\t\t{:else}\n\t\t\t\t<div class=\"wx-field {field.css || ''}\">\n\t\t\t\t\t{#if field?.label}\n\t\t\t\t\t\t<span class=\"wx-label\"> {field.label}: </span>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<span class=\"wx-value\"> {field.value} </span>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t{/if}\n\t{/each}\n</div>\n\n<style>\n\t.wx-card-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t.wx-card-header .wx-field {\n\t\tmargin-right: 10px;\n\t\tline-height: 25px;\n\t\tfont-size: var(--wx-font-size);\n\t\tmargin-bottom: var(--wx-kanban-card-field-padding);\n\t}\n\n\t.wx-card-header .wx-field.wx-priority {\n\t\tfont-weight: 500;\n\t\tline-height: 22px;\n\t\theight: 22px;\n\t\tpadding: 0 6px;\n\t\tborder-radius: 2px;\n\t\tcolor: #fff;\n\t}\n\t.wx-priority-label {\n\t\ttext-transform: capitalize;\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport type { INormalizedCard, ICardShape } from \"@xbs/lib-kanban\";\n\n\timport Icon from \"../lib/Icon.svelte\";\n\timport Progress from \"../lib/Progress.svelte\";\n\n\timport Footer from \"./cardFields/Footer.svelte\";\n\timport Header from \"./cardFields/Header.svelte\";\n\n\texport let cardFields: INormalizedCard;\n\texport let cardShape: ICardShape;\n\texport let menu = true;\n\texport let api;\n\n\t$: coverAttachment = cardFields?.attached?.find(obj => obj.isCover);\n\t$: coverURL = coverAttachment\n\t\t? coverAttachment.coverURL || coverAttachment.url\n\t\t: null;\n\n\tfunction getCss(\n\t\tcardFields: INormalizedCard,\n\t\tcardShape: ICardShape\n\t): () => string {\n\t\tlet contentClasses = \"wx-content\";\n\t\tif (cardFields.css) contentClasses += \" \" + cardFields.css;\n\t\tif (cardShape.css)\n\t\t\treturn () =>\n\t\t\t\t(contentClasses += ` ${(\n\t\t\t\t\tcardShape.css as (obj: INormalizedCard) => string\n\t\t\t\t)(cardFields)}`);\n\n\t\treturn () => contentClasses;\n\t}\n\n\t$: css = getCss(cardFields, cardShape)();\n\n</script>\n\n{#if cardShape.color?.show && cardFields.color}\n\t<div class=\"wx-color wx-rounded\" style=\"background:{cardFields.color}\" />\n{/if}\n{#if cardShape?.cover?.show && coverURL}\n\t<div\n\t\tclass=\"wx-field wx-image\"\n\t\tclass:wx-rounded={!(cardShape.color?.show && cardFields.color)}>\n\t\t<img src={coverURL} alt=\"\" />\n\t</div>\n{/if}\n<div class={css}>\n\t<Header {cardFields} {cardShape} />\n\t<div class=\"wx-body\">\n\t\t<div class=\"wx-field wx-label\">\n\t\t\t{#if cardShape?.label?.show && cardFields.label}\n\t\t\t\t<span> {cardFields.label} </span>\n\t\t\t{/if}\n\t\t\t{#if menu}\n\t\t\t\t<div class=\"wx-menu\" data-ignore-selection=\"true\">\n\t\t\t\t\t<div data-menu-id={cardFields.id}>\n\t\t\t\t\t\t<Icon name={'wxi-dots-v'} clickable />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t\t{#if cardShape?.description?.show && cardFields.description}\n\t\t\t<div class=\"wx-field wx-description\">{cardFields.description}</div>\n\t\t{/if}\n\n\t\t{#if cardShape?.progress?.show && cardFields.progress}\n\t\t\t<div class=\"wx-field\">\n\t\t\t\t<Progress\n\t\t\t\t\tmin={cardShape.progress?.config?.min || 0}\n\t\t\t\t\tmax={cardShape.progress?.config?.max || 100}\n\t\t\t\t\tvalue={cardFields.progress} />\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<Footer {cardFields} {cardShape} {api} />\n</div>\n\n<style>\n\t.wx-content {\n\t\tpadding: 20px 16px;\n\n\t\tflex: 1 1 auto;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\tposition: relative;\n\t}\n\n\t.wx-color {\n\t\theight: 5px;\n\t\tmin-height: 5px;\n\t\twidth: 100%;\n\t}\n\t.wx-rounded {\n\t\tborder-radius: var(--wx-kanban-card-border-radius)\n\t\t\tvar(--wx-kanban-card-border-radius) 0 0;\n\t}\n\t.wx-field {\n\t\tmargin-bottom: var(--wx-kanban-card-field-padding);\n\t}\n\n\t.wx-body .wx-field:last-child {\n\t\tmargin-bottom: 0;\n\t}\n\t.wx-label {\n\t\tfont-weight: var(--wx-font-weight-md);\n\t\tfont-size: var(--wx-font-size);\n\t\tmin-height: 1em;\n\t\tmax-width: 100%;\n\t\tposition: relative;\n\t\tpadding-right: 10px;\n\t\tword-break: break-word;\n\t}\n\t.wx-description {\n\t\tfont-size: var(--wx-font-size);\n\t\t/* [todo] uses non standard properties, try to implement another way */\n\t\tdisplay: -webkit-box;\n\t\t-webkit-line-clamp: 3;\n\t\t-webkit-box-orient: vertical;\n\t\toverflow: hidden;\n\t}\n\t.wx-image {\n\t\toverflow: hidden;\n\t\twidth: 100%;\n\t\theight: 150px;\n\t\tmargin-bottom: 0;\n\t}\n\t.wx-image img {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\t.wx-menu {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: -5px;\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport type { SvelteComponent } from \"svelte\";\n\timport type {\n\t\tICardMeta,\n\t\tICardShape,\n\t\tINormalizedCard,\n\t} from \"@xbs/lib-kanban\";\n\n\texport let cardFields: INormalizedCard;\n\texport let dragging = false;\n\texport let selected = false;\n\n\texport let cardShape: ICardShape;\n\texport let cardTemplate: SvelteComponent;\n\texport let meta: ICardMeta = null;\n\texport let cardHeight: number | null;\n\texport let menu: boolean;\n\texport let api;\n\n\t$: cardHeightValue = cardHeight ? cardHeight + \"px\" : \"auto\";\n\n</script>\n\n<div\n\tclass=\"wx-card\"\n\tclass:wx-hidden={dragging}\n\tclass:wx-selected={selected}\n\tclass:wx-dimmed={meta?.dimmed}\n\tdata-drag-item={cardFields.id}\n\tstyle=\"height:{cardHeightValue};max-height:{cardHeightValue};\"\n\tdata-id={cardFields.id}>\n\t<svelte:component\n\t\tthis={cardTemplate}\n\t\t{api}\n\t\t{cardFields}\n\t\t{dragging}\n\t\t{selected}\n\t\t{cardShape}\n\t\t{menu}\n\t\ton:action />\n</div>\n\n<style>\n\t.wx-card {\n\t\tbox-sizing: border-box;\n\n\t\tbackground: var(--wx-kanban-content-background);\n\t\tborder: var(--wx-kanban-card-border);\n\t\tborder-radius: var(--wx-kanban-card-border-radius);\n\t\tbox-shadow: var(--wx-kanban-shadow);\n\n\t\twidth: 100%;\n\t\tmin-height: 20px;\n\t\tmargin: 12px 0;\n\n\t\tposition: relative;\n\t\tfont-size: var(--wx-font-size);\n\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\tcursor: pointer;\n\t}\n\t.wx-dimmed {\n\t\topacity: 0.2;\n\t}\n\t.wx-hidden {\n\t\tdisplay: none;\n\t}\n\n\t.wx-selected {\n\t\tborder: 1px solid var(--wx-color-primary);\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport type { TID } from \"@xbs/lib-kanban\";\n\n\timport { scrollManager } from \"@xbs/lib-kanban\";\n\n\timport { onMount, tick, createEventDispatcher } from \"svelte\";\n\n\texport let items: any[];\n\texport let scrollToId: TID;\n\n\texport let height = \"100%\";\n\texport let itemHeight = undefined;\n\n\texport let start = 0;\n\texport let end = 0;\n\n\tconst dispatch = createEventDispatcher();\n\n\tlet heightMap = [];\n\tlet rows: HTMLCollectionOf<HTMLElement>;\n\n\tlet viewport: HTMLElement;\n\tlet contents: HTMLElement;\n\n\tlet viewportHeight = 0;\n\tlet visibleItems: { index: number; data: any }[];\n\tlet isMounted = false;\n\n\tlet top = 0;\n\tlet bottom = 0;\n\tlet averageHeight: number;\n\n\t$: visibleItems = items.slice(start, end).map((data, i) => {\n\t\treturn { index: i + start, data };\n\t});\n\n\t$: if (isMounted) init(items, viewportHeight, itemHeight, scrollToId);\n\n\tasync function scrollTo(id: TID) {\n\t\tconst item = viewport.querySelector(`[data-id=\"${id}\"]`);\n\t\tif (item) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst ind = items.findIndex(item => item.id === id);\n\n\t\tif (ind > -1) {\n\t\t\tviewport.scrollTop = (ind + 1) * averageHeight - viewportHeight / 2;\n\t\t\tupdateVisibleItems();\n\n\t\t\tid = null;\n\t\t}\n\t}\n\n\tasync function init(\n\t\titems: any[],\n\t\tviewportHeight: number,\n\t\titemHeight: number,\n\t\tscrollToId: TID\n\t) {\n\t\tawait tick();\n\n\t\theightMap.length = items.length;\n\t\theightMap.fill(0);\n\n\t\tconst { scrollTop } = viewport;\n\t\tlet contentHeight = top - scrollTop;\n\n\t\tfor (let i = start; i < items.length; i++) {\n\t\t\tif (contentHeight > viewportHeight) {\n\t\t\t\tend = i;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tlet row = rows[i - start];\n\t\t\tif (!row) {\n\t\t\t\tend = i + 1;\n\t\t\t\tawait tick();\n\t\t\t\trow = rows[i - start];\n\t\t\t}\n\n\t\t\tconst rowHeight = itemHeight || row.offsetHeight;\n\t\t\theightMap[i] = rowHeight;\n\t\t\tcontentHeight += rowHeight;\n\t\t}\n\n\t\taverageHeight = Math.round((top + contentHeight) / end);\n\t\tupdateRemainigHeight(averageHeight);\n\n\t\tawait tick();\n\t\tif (scrollToId) {\n\t\t\tscrollTo(scrollToId);\n\t\t}\n\t}\n\n\tfunction updateRemainigHeight(averageHeight: number) {\n\t\tconst remaining = items.length - end;\n\t\tbottom = remaining * averageHeight;\n\t}\n\n\tasync function updateVisibleItems() {\n\t\tconst { scrollTop } = viewport;\n\n\t\tvisibleItems.forEach((item, i) => {\n\t\t\tconst { index } = item;\n\t\t\theightMap[index] = itemHeight || rows[i].offsetHeight;\n\t\t});\n\n\t\tlet i = 0;\n\t\tlet rowsHeight = 0;\n\n\t\twhile (i < items.length) {\n\t\t\tconst rowHeight = heightMap[i] || averageHeight;\n\n\t\t\tif (rowsHeight + rowHeight > scrollTop) {\n\t\t\t\tstart = i;\n\t\t\t\ttop = rowsHeight;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\trowsHeight += rowHeight;\n\t\t\ti += 1;\n\t\t}\n\n\t\twhile (i < items.length) {\n\t\t\trowsHeight += heightMap[i] || averageHeight;\n\t\t\ti += 1;\n\n\t\t\tif (rowsHeight > scrollTop + viewportHeight) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tend = i;\n\n\t\taverageHeight = Math.round(rowsHeight / end);\n\t\tupdateRemainigHeight(averageHeight);\n\t}\n\n\tasync function handleScroll() {\n\t\tupdateVisibleItems();\n\t\tdispatch(\"scroll\", { start, end });\n\t}\n\n\tonMount(() => {\n\t\trows = contents.children as HTMLCollectionOf<HTMLElement>;\n\t\tisMounted = true;\n\t});\n\n</script>\n\n<div\n\tclass=\"wx-virtual-list\"\n\tbind:this={viewport}\n\tbind:offsetHeight={viewportHeight}\n\ton:scroll={handleScroll}\n\tuse:scrollManager\n\tstyle=\"height: {height};\">\n\t<div\n\t\tclass=\"wx-content\"\n\t\tbind:this={contents}\n\t\tstyle=\"padding-top: {top}px; padding-bottom: {bottom}px;\">\n\t\t{#each visibleItems as row (row.index)}\n\t\t\t<div class=\"wx-item\" data-id={row.data.id} data-index={row.index}>\n\t\t\t\t<slot name=\"item\" item={row.data} />\n\t\t\t</div>\n\t\t{/each}\n\t</div>\n\t<slot name=\"extra\" />\n</div>\n\n<style>\n\t.wx-virtual-list {\n\t\tposition: relative;\n\t\toverflow-y: auto;\n\t\t-webkit-overflow-scrolling: touch;\n\t\tdisplay: block;\n\t}\n\n\t.wx-content,\n\t.wx-item {\n\t\tdisplay: block;\n\t}\n\n\t.wx-item {\n\t\toverflow: hidden;\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport type { Writable } from \"svelte/store\";\n\n\timport Card from \"../Card.svelte\";\n\timport CardContainer from \"../CardContainer.svelte\";\n\timport VirtualList from \"../../lib/VirtualList.svelte\";\n\n\timport { includesId, isSameId } from \"@xbs/lib-kanban\";\n\timport type {\n\t\tICard,\n\t\tICardShape,\n\t\tIColumn,\n\t\tTID,\n\t\tIScrollConfig,\n\t} from \"@xbs/lib-kanban\";\n\n\texport let column: IColumn;\n\texport let cards: ICard[];\n\texport let overCardId: TID;\n\texport let overColId: TID;\n\texport let movedCardId: TID;\n\texport let selected: TID[];\n\texport let cardShape: ICardShape;\n\texport let cardTemplate = null;\n\texport let cardsMeta = {};\n\texport let cardHeight: number = null;\n\n\texport let movedCardHeight = 0;\n\texport let areaId: TID;\n\texport let scrollTo: Writable<IScrollConfig>;\n\texport let isMenuVisible;\n\n\texport let api;\n\n\t$: items = cards.filter(card => {\n\t\treturn (\n\t\t\t!isSameId(movedCardId, card.id) && !isSameId(overColId, column.id)\n\t\t);\n\t});\n\n\tlet scrollToId: TID;\n\t$: {\n\t\tif ($scrollTo && $scrollTo.to === \"card\" && $scrollTo.id) {\n\t\t\tif (items.find(card => isSameId(card.id, $scrollTo.id))) {\n\t\t\t\tscrollToId = $scrollTo.id;\n\t\t\t\t$scrollTo = null;\n\t\t\t}\n\t\t}\n\t}\n\n</script>\n\n{#if cards}\n\t<div class=\"wx-list-wrapper\" data-id=\"scroll-column\">\n\t\t<VirtualList {items} let:item={card} {scrollToId}>\n\t\t\t<div slot=\"item\">\n\t\t\t\t{#if isSameId(card.id, overCardId)}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"wx-drop-area\"\n\t\t\t\t\t\tstyle=\"min-height:{movedCardHeight}px;\" />\n\t\t\t\t{/if}\n\n\t\t\t\t<CardContainer\n\t\t\t\t\t{api}\n\t\t\t\t\tcardTemplate={cardTemplate || Card}\n\t\t\t\t\tcardFields={card}\n\t\t\t\t\t{cardHeight}\n\t\t\t\t\ton:action\n\t\t\t\t\tdragging={cardsMeta[card.id]?.dragging}\n\t\t\t\t\tselected={includesId(selected, card.id)}\n\t\t\t\t\tmeta={cardsMeta && cardsMeta[card.id]}\n\t\t\t\t\t{cardShape}\n\t\t\t\t\tmenu={isMenuVisible[card.id]} />\n\t\t\t</div>\n\n\t\t\t<div slot=\"extra\">\n\t\t\t\t{#if !overCardId && isSameId(overColId, areaId)}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"wx-drop-area\"\n\t\t\t\t\t\tstyle=\"min-height:{movedCardHeight}px;\" />\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</VirtualList>\n\t</div>\n{/if}\n\n<style>\n\t.wx-list-wrapper {\n\t\theight: var(--wx-kanban-column-height);\n\t}\n\t.wx-drop-area {\n\t\twidth: 100%;\n\t\tborder-radius: var(--wx-kanban-card-border-radius);\n\t\tmargin-top: var(--wx-padding);\n\t\tborder: dotted 1px var(--wx-color-primary);\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport Card from \"../Card.svelte\";\n\timport CardContainer from \"../CardContainer.svelte\";\n\n\timport { includesId, isSameId, scrollManager } from \"@xbs/lib-kanban\";\n\timport type { INormalizedCard, ICardShape, TID } from \"@xbs/lib-kanban\";\n\n\texport let cards: INormalizedCard[];\n\texport let overCardId: TID;\n\texport let overColId: TID;\n\texport let selected: TID[];\n\texport let cardShape: ICardShape;\n\texport let cardTemplate = null;\n\texport let cardsMeta = {};\n\texport let cardHeight: number = null;\n\n\texport let movedCardHeight = 0;\n\texport let areaId: TID;\n\texport let isMenuVisible;\n\n\texport let api;\n\n</script>\n\n{#if cards}\n\t<div class=\"wx-list-wrapper\" use:scrollManager>\n\t\t{#if cards}\n\t\t\t{#each cards as card (card.id)}\n\t\t\t\t{#if isSameId(card.id, overCardId)}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"wx-drop-area\"\n\t\t\t\t\t\tstyle=\"min-height:{movedCardHeight}px;\" />\n\t\t\t\t{/if}\n\t\t\t\t<CardContainer\n\t\t\t\t\t{api}\n\t\t\t\t\tcardTemplate={cardTemplate || Card}\n\t\t\t\t\tcardFields={card}\n\t\t\t\t\t{cardHeight}\n\t\t\t\t\ton:action\n\t\t\t\t\tdragging={cardsMeta[card.id]?.dragging}\n\t\t\t\t\tselected={includesId(selected, card.id)}\n\t\t\t\t\tmeta={cardsMeta && cardsMeta[card.id]}\n\t\t\t\t\t{cardShape}\n\t\t\t\t\tmenu={isMenuVisible[card.id]} />\n\t\t\t{/each}\n\t\t\t{#if !overCardId && isSameId(overColId, areaId)}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"wx-drop-area\"\n\t\t\t\t\tstyle=\"min-height:{movedCardHeight}px;\" />\n\t\t\t{/if}\n\t\t{/if}\n\t</div>\n{/if}\n\n<style>\n\t.wx-list-wrapper {\n\t\theight: var(--wx-kanban-column-height);\n\t\toverflow: scroll;\n\t}\n\t.wx-drop-area {\n\t\twidth: 100%;\n\t\tborder-radius: var(--wx-kanban-card-border-radius);\n\t\tmargin-top: var(--wx-padding);\n\t\tborder: dotted 1px var(--wx-color-primary);\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport { createEventDispatcher, getContext } from \"svelte\";\n\n\timport Card from \"./Card.svelte\";\n\timport CardContainer from \"./CardContainer.svelte\";\n\timport Icon from \"../lib/Icon.svelte\";\n\n\timport { getAreaId, includesId, isSameId } from \"@xbs/lib-kanban\";\n\timport type {\n\t\tIApi,\n\t\tICard,\n\t\tINormalizedCard,\n\t\tIColumn,\n\t\tIColumnShape,\n\t\tIRow,\n\t\tTEventDispatcher,\n\t\tTAreaMeta,\n\t} from \"@xbs/lib-kanban\";\n\timport VirtualScrollColumn from \"./columnLayouts/VirtualScrollColumn.svelte\";\n\timport ScrollColumn from \"./columnLayouts/ScrollColumn.svelte\";\n\n\texport let column: IColumn;\n\texport let areaMeta: TAreaMeta;\n\texport let row: IRow;\n\texport let cards: INormalizedCard[];\n\texport let cardTemplate = null;\n\texport let api: IApi;\n\texport let isMenuVisible;\n\n\tconst _ = getContext<any>(\"wx-i18n\").getGroup(\"kanban\");\n\n\tconst {\n\t\tselected: rSelected,\n\t\tcardShape: rCardShape,\n\t\tcardsMeta: rCardsMeta,\n\t\tscroll: scrollTo,\n\t\treadonly: rReadonly,\n\t\tcolumnShape,\n\t\tbefore: rOverCardId,\n\t\toverAreaId: rOverColId,\n\t\tdragItemId: rMovedCardId,\n\t\tdragItemsCoords: rDragItemsCoords,\n\t\tlayout: rLayout,\n\t\tcardHeight: rCardHeight,\n\t\tcardsMap,\n\t} = api.getReactiveState();\n\n\t$: add = $rReadonly.add;\n\t$: movedCardCoords = $rDragItemsCoords && $rDragItemsCoords[$rMovedCardId];\n\n\t$: selected = $rSelected;\n\t$: cardShape = $rCardShape;\n\t$: cardsMeta = $rCardsMeta;\n\t$: overCardId = $rOverCardId;\n\t$: overColId = $rOverColId;\n\t$: movedCardId = $rMovedCardId;\n\t$: layout = $rLayout;\n\t$: cardHeight = $rCardHeight;\n\n\tconst dispatch: TEventDispatcher = createEventDispatcher();\n\tfunction handleAddCardClick(e: MouseEvent) {\n\t\te.stopPropagation();\n\t\tdispatch(\"action\", {\n\t\t\taction: \"add-card\",\n\t\t\tdata: {\n\t\t\t\tcolumnId: column.id,\n\t\t\t\trowId: row.id,\n\t\t\t\tcard: {\n\t\t\t\t\tlabel: _(\"Untitled\"),\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\t$: areaId = getAreaId(column.id, row.id);\n\t$: areaHeight = areaMeta?.height;\n\t$: areaDragHeight = areaHeight ? `${areaHeight}px` : \"auto\";\n\n\tconst borders = 2;\n\t$: movedCardHeight = (movedCardCoords?.height || 50) - borders;\n\n\tfunction buildColumnCss(\n\t\tcolumnShape: IColumnShape,\n\t\tcolumn: IColumn,\n\t\tisOverLimit: boolean,\n\t\tcards: ICard[]\n\t) {\n\t\tlet columnClass = \"wx-column\";\n\t\tif (column.collapsed) columnClass += \" wx-collapsed\";\n\t\tif (isOverLimit) columnClass += \" wx-over-limit\";\n\t\tif (column.css) columnClass += \" \" + column.css;\n\t\tif (columnShape && columnShape.css)\n\t\t\tcolumnClass += \" \" + columnShape.css(column, cards);\n\t\treturn columnClass;\n\t}\n\n\t$: columnClass = buildColumnCss(\n\t\t$columnShape,\n\t\tcolumn,\n\t\tareaMeta.isOverLimit,\n\t\t$cardsMap[column.id]\n\t);\n\n</script>\n\n<div\n\tclass={columnClass}\n\tdata-drop-area={areaId}\n\tstyle=\"min-height:{areaDragHeight};\">\n\t{#if !column.collapsed}\n\t\t{#if layout === 'column:lazy'}\n\t\t\t<VirtualScrollColumn\n\t\t\t\t{api}\n\t\t\t\t{column}\n\t\t\t\t{cards}\n\t\t\t\t{overCardId}\n\t\t\t\t{overColId}\n\t\t\t\t{movedCardId}\n\t\t\t\t{selected}\n\t\t\t\t{cardShape}\n\t\t\t\t{cardTemplate}\n\t\t\t\t{cardsMeta}\n\t\t\t\t{movedCardHeight}\n\t\t\t\t{areaId}\n\t\t\t\t{scrollTo}\n\t\t\t\t{cardHeight}\n\t\t\t\t{isMenuVisible}\n\t\t\t\ton:action />\n\t\t{:else if layout === 'column:default'}\n\t\t\t<ScrollColumn\n\t\t\t\t{api}\n\t\t\t\t{cards}\n\t\t\t\t{overCardId}\n\t\t\t\t{overColId}\n\t\t\t\t{selected}\n\t\t\t\t{cardShape}\n\t\t\t\t{cardTemplate}\n\t\t\t\t{cardsMeta}\n\t\t\t\t{movedCardHeight}\n\t\t\t\t{areaId}\n\t\t\t\t{cardHeight}\n\t\t\t\t{isMenuVisible}\n\t\t\t\ton:action />\n\t\t{:else}\n\t\t\t{#if cards}\n\t\t\t\t{#each cards as card (card.id)}\n\t\t\t\t\t{#if isSameId(card.id, overCardId)}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"wx-drop-area\"\n\t\t\t\t\t\t\tstyle=\"min-height:{movedCardHeight}px;\" />\n\t\t\t\t\t{/if}\n\t\t\t\t\t<CardContainer\n\t\t\t\t\t\t{api}\n\t\t\t\t\t\tcardTemplate={cardTemplate || Card}\n\t\t\t\t\t\tcardFields={card}\n\t\t\t\t\t\ton:action\n\t\t\t\t\t\tdragging={cardsMeta[card.id]?.dragging}\n\t\t\t\t\t\tselected={includesId(selected, card.id)}\n\t\t\t\t\t\tmeta={cardsMeta && cardsMeta[card.id]}\n\t\t\t\t\t\t{cardShape}\n\t\t\t\t\t\t{cardHeight}\n\t\t\t\t\t\tmenu={isMenuVisible[card.id]} />\n\t\t\t\t{/each}\n\t\t\t{/if}\n\t\t\t{#if !overCardId && isSameId(overColId, areaId)}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"wx-drop-area\"\n\t\t\t\t\tstyle=\"min-height:{movedCardHeight}px;\" />\n\t\t\t{/if}\n\t\t{/if}\n\n\t\t<div class=\"wx-controls-wrapper\">\n\t\t\t{#if add && !areaMeta.noFreeSpace}\n\t\t\t\t<div class=\"wx-add-card-btn\" on:click={handleAddCardClick}>\n\t\t\t\t\t<Icon name=\"wxi-plus\" />\n\t\t\t\t\t<span class=\"wx-add-card-tip\">\n\t\t\t\t\t\t{_('Add new card')}...\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t\t{#if areaMeta.rowId && column.limit}\n\t\t\t\t<div class=\"wx-swimlane-limit\">\n\t\t\t\t\t{areaMeta.cardsCount}/{areaMeta.totalLimit}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t{:else}\n\t\t<div class=\"wx-collapsed-label\">\n\t\t\t<div class=\"wx-label-text\">{column.label}</div>\n\t\t</div>\n\t{/if}\n\t{#if column.overlay}\n\t\t<svelte:component this={column.overlay} />\n\t{/if}\n</div>\n\n<style>\n\t.wx-add-card-tip {\n\t\topacity: 0;\n\t\ttransition: all 0.2s ease-in;\n\t\tcolor: var(--wx-color-font-alt);\n\t}\n\t.wx-column {\n\t\tmin-width: var(--wx-kanban-column-width);\n\t\twidth: var(--wx-kanban-column-width);\n\n\t\tmargin-left: 12px;\n\t\tposition: relative;\n\t}\n\t.wx-column:last-child {\n\t\tmargin-right: 12px;\n\t}\n\t.wx-column:hover .wx-add-card-tip {\n\t\topacity: 1;\n\t}\n\t.wx-swimlane-limit {\n\t\tpadding-right: var(--wx-padding);\n\t\tbackground: var(--wx-kanban-background);\n\t\tpadding: 2px var(--wx-padding);\n\t\tborder-radius: var(--wx-kanban-card-border-radius);\n\t\tborder: var(--wx-kanban-card-border);\n\t\tposition: absolute;\n\t\tright: 0;\n\t}\n\t.wx-controls-wrapper {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmin-height: 24px;\n\t}\n\t.wx-over-limit .wx-swimlane-limit {\n\t\tborder: solid 1px var(--wx-kanban-over-limit-color);\n\t}\n\t.wx-collapsed {\n\t\tmax-width: var(--wx-kanban-collapsed-column-width);\n\t\twidth: var(--wx-kanban-collapsed-column-width);\n\t\tmin-width: 0px;\n\t\tbackground: var(--wx-kanban-collapsed-background);\n\t\tbox-shadow: var(--wx-kanban-shadow);\n\t\tpadding: var(--wx-kanban-collapsed-padding) 0;\n\t\tmargin-top: var(--wx-kanban-collapsed-margin);\n\t\tmargin-bottom: 23px;\n\t\tborder-radius: var(--wx-kanban-card-border-radius);\n\t}\n\t.wx-collapsed-label {\n\t\twriting-mode: tb-rl;\n\t\tfont-weight: 500;\n\t\tfont-size: var(--wx-font-size);\n\t\tmargin: 10px 0;\n\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t\tz-index: 5;\n\t}\n\t.wx-label-text {\n\t\twhite-space: nowrap;\n\t\ttransform: rotate(180deg);\n\t\tz-index: 5;\n\t\tpointer-events: none;\n\t}\n\t.wx-add-card-btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\t\tgap: 4px;\n\t\tfont-size: var(--wx-font-size);\n\t\tmargin-top: var(--wx-padding);\n\t\tmargin-bottom: var(--wx-padding);\n\t\tcursor: pointer;\n\t}\n\n\t.wx-drop-area {\n\t\twidth: 100%;\n\t\tborder-radius: var(--wx-kanban-card-border-radius);\n\t\tmargin-top: var(--wx-padding);\n\t\tborder: dotted 1px var(--wx-color-primary);\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport { afterUpdate, createEventDispatcher, onDestroy } from \"svelte\";\n\timport { portal } from \"@xbs/lib-kanban\";\n\timport type {\n\t\tIApi,\n\t\tICard,\n\t\tIColumn,\n\t\tIColumnShape,\n\t\tTAreasMeta,\n\t\tTEventDispatcher,\n\t} from \"@xbs/lib-kanban\";\n\n\timport Icon from \"./../lib/Icon.svelte\";\n\n\texport let api: IApi;\n\texport let contentEl: HTMLElement;\n\texport let column: IColumn;\n\texport let areasMeta: TAreasMeta;\n\texport let isMenuVisible: boolean;\n\texport let renaming = false;\n\n\tconst dispatch: TEventDispatcher = createEventDispatcher();\n\n\tconst { readonly, columnShape, cardsMap } = api.getReactiveState();\n\t$: edit = $readonly.edit;\n\n\tlet columnLabel = null;\n\tlet columnEl: HTMLElement;\n\n\tfunction endRenaming() {\n\t\tif (renaming && columnLabel?.trim()) {\n\t\t\tdispatch(\"action\", {\n\t\t\t\taction: \"update-column\",\n\t\t\t\tdata: {\n\t\t\t\t\tid: column.id,\n\t\t\t\t\tcolumn: {\n\t\t\t\t\t\tlabel: columnLabel,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\trenaming = false;\n\t\tcolumnLabel = null;\n\t\tdispatch(\"action\", { action: \"close-column-input\", data: {} });\n\t}\n\n\tfunction handleColumnRename() {\n\t\tif (!edit) {\n\t\t\treturn;\n\t\t}\n\t\trenaming = true;\n\t}\n\n\tfunction handleColumnInput(e: any) {\n\t\tcolumnLabel = e.target.value;\n\t}\n\n\tfunction handleInputKeypress(e: any) {\n\t\tif (e.charCode === 13) {\n\t\t\tendRenaming();\n\t\t}\n\t}\n\n\tfunction focus(node: HTMLElement) {\n\t\tnode.focus();\n\t}\n\n\tfunction handleColumnCollapse() {\n\t\tdispatch(\"action\", {\n\t\t\taction: \"update-column\",\n\t\t\tdata: {\n\t\t\t\tid: column.id,\n\t\t\t\tcolumn: {\n\t\t\t\t\tcollapsed: !column.collapsed,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\tlet columnOffset = null;\n\tfunction positionCollapsedCol() {\n\t\tcolumnOffset = columnEl?.offsetLeft;\n\t}\n\n\tafterUpdate(() => {\n\t\tpositionCollapsedCol();\n\t});\n\n\tlet isValid;\n\tif (process.env.TRIALPACKAGE) {\n\t\tisValid = () => {\n\t\t\tif (typeof window === \"undefined\") return true;\n\n\t\t\tconst l = location.hostname;\n\t\t\tconst t = [\n\t\t\t\t// dhtmlx.com\n\t\t\t\t\"ZGh0bWx4LmNvbQ==\",\n\t\t\t\t// dhtmlxcode.com\n\t\t\t\t\"ZGh0bWx4Y29kZS5jb20=\",\n\t\t\t\t// webixcode.com\n\t\t\t\t\"d2ViaXhjb2RlLmNvbQ==\",\n\t\t\t\t// webix.io\n\t\t\t\t\"d2ViaXguaW8=\",\n\t\t\t\t// repl.co\n\t\t\t\t\"cmVwbC5jbw==\",\n\t\t\t];\n\n\t\t\tfor (let i = 0; i < t.length; i++) {\n\t\t\t\tconst x = window.atob(t[i]);\n\t\t\t\tif (x === l || l.endsWith(\".\" + x)) return true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\t}\n\n\tfunction buildColumnCss(\n\t\tcolumnShape: IColumnShape,\n\t\tcolumn: IColumn,\n\t\tisOverLimit: boolean,\n\t\tcards: ICard[]\n\t) {\n\t\tlet columnClass = \"wx-column\";\n\t\tif (column.collapsed) columnClass += \" wx-collapsed\";\n\t\tif (isOverLimit) columnClass += \" wx-over-limit\";\n\t\tif (column.css) columnClass += \" \" + column.css;\n\n\t\tif (columnShape && columnShape.css)\n\t\t\tcolumnClass += \" \" + columnShape.css(column, cards);\n\t\treturn columnClass;\n\t}\n\n\t$: columnClass = buildColumnCss(\n\t\t$columnShape,\n\t\tcolumn,\n\t\tareasMeta[column.id].isOverLimit,\n\t\t$cardsMap[column.id]\n\t);\n\n\tconst ro = new ResizeObserver(() => {\n\t\tpositionCollapsedCol();\n\t});\n\t$: if (contentEl) ro.observe(contentEl);\n\n\tonDestroy(() => {\n\t\tro.disconnect();\n\t});\n\n</script>\n\n<div bind:this={columnEl} class={columnClass} data-column-header={column.id}>\n\t{#if column.collapsed && columnEl && contentEl}\n\t\t<div\n\t\t\tclass=\"wx-collapsed-column{column.css ? ' ' + column.css : ''}\"\n\t\t\tstyle=\"left:{columnOffset}px;\"\n\t\t\ton:click={() => handleColumnCollapse()}\n\t\t\tuse:portal={{ container: contentEl }} />\n\t{/if}\n\t<div class=\"wx-collapse-icon\">\n\t\t<Icon\n\t\t\tname={column.collapsed ? 'wxi-angle-right' : 'wxi-angle-left'}\n\t\t\tsize={24}\n\t\t\tclickable\n\t\t\tclick={() => handleColumnCollapse()} />\n\t</div>\n\n\t<div class=\"wx-label\" on:dblclick={() => handleColumnRename()}>\n\t\t{#if renaming}\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"wx-input\"\n\t\t\t\tvalue={column.label}\n\t\t\t\ton:input={handleColumnInput}\n\t\t\t\ton:keypress={handleInputKeypress}\n\t\t\t\ton:blur={endRenaming}\n\t\t\t\tuse:focus />\n\t\t{:else}{column.label}{/if}\n\t\t{#if isMenuVisible && edit && !renaming}\n\t\t\t{#if column.limit}\n\t\t\t\t({areasMeta[column.id].cardsCount}/{areasMeta[column.id].totalLimit})\n\t\t\t{/if}\n\t\t\t<div class=\"wx-menu\" data-menu-id={column.id}>\n\t\t\t\t<Icon name=\"wxi-dots-h\" clickable />\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t{#if process.env.TRIALPACKAGE && !isValid()}\n\t\t<span\n\t\t\tclass=\"wx-mark\"\n\t\t\tclass:wx-error={process.env.TRIALDATE < new Date()}>Trial</span>\n\t{/if}\n</div>\n\n<style>\n\t.wx-column {\n\t\tmin-width: var(--wx-kanban-column-width);\n\t\twidth: var(--wx-kanban-column-width);\n\t\tmargin-left: 12px;\n\n\t\tbackground: var(--wx-kanban-content-background);\n\t\tborder: var(--wx-kanban-card-border);\n\t\tborder-radius: var(--wx-kanban-header-border-radius);\n\t\tpadding: 0 var(--wx-padding);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tposition: relative;\n\t\tz-index: 10;\n\t\tbox-shadow: var(--wx-kanban-shadow);\n\t}\n\t.wx-column:last-child {\n\t\tmargin-right: 12px;\n\t}\n\t.wx-over-limit {\n\t\tborder: solid var(--wx-kanban-over-limit-color) 1px;\n\t}\n\t.wx-collapsed {\n\t\tmax-width: var(--wx-kanban-collapsed-column-width);\n\t\twidth: var(--wx-kanban-collapsed-column-width);\n\t\tmin-width: var(--wx-kanban-collapsed-column-width);\n\t\toverflow: hidden;\n\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t.wx-column.wx-collapsed .wx-label {\n\t\tdisplay: none;\n\t}\n\t.wx-column.wx-collapsed .wx-menu {\n\t\tdisplay: none;\n\t}\n\t.wx-collapse-icon:hover {\n\t\tbackground: var(--wx-background);\n\t\tcursor: pointer;\n\t}\n\t.wx-label {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\n\t\tfont-weight: var(--wx-font-weight-md);\n\t\tfont-size: var(--wx-font-size);\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tmargin-left: 4px;\n\t}\n\t.wx-input {\n\t\tpadding: var(--wx-input-padding);\n\t\toutline: none;\n\t\tflex: 1;\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tcolor: var(--wx-color-font);\n\t\twidth: 100%;\n\t\tbox-sizing: border-box;\n\t\tborder: var(--wx-input-border);\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tbackground-color: transparent;\n\t\tfont-weight: var(--wx-font-weight-md);\n\t}\n\t.wx-input:focus {\n\t\tborder: 1px solid var(--wx-color-primary);\n\t}\n\n\t.wx-mark {\n\t\tposition: absolute;\n\t\tright: 34px;\n\t\ttop: 12px;\n\t\ttransform: rotate(30deg);\n\t\tcolor: #ccc;\n\t\tfont-weight: 400;\n\t\ttext-transform: uppercase;\n\t}\n\t.wx-mark.wx-error {\n\t\tcolor: var(--wx-color-danger);\n\t}\n\t.wx-menu {\n\t\tposition: absolute;\n\t\ttop: calc(50% - 10px);\n\t\tright: 10px;\n\t\tcursor: pointer;\n\t}\n\t.wx-menu:hover {\n\t\tbackground: var(--wx-background);\n\t}\n\t.wx-collapsed-column {\n\t\tposition: absolute;\n\t\ttop: 50px;\n\t\tborder-radius: 4px;\n\t\twidth: var(--wx-kanban-collapsed-column-width);\n\t\theight: calc(100% - 50px);\n\t\tcursor: pointer;\n\t\ttransition: background 0.2s ease;\n\t}\n\t.wx-collapsed-column:hover {\n\t\tbackground: var(--wx-kanban-collapsed-background-hover);\n\t\tbox-shadow: var(--wx-kanban-shadow);\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport { createEventDispatcher, getContext } from \"svelte\";\n\timport type {\n\t\tIColumn,\n\t\tTAreasMeta,\n\t\tIColumnShape,\n\t\tTEventDispatcher,\n\t\tTID,\n\t\tTMenuItemsFn,\n\t\tIApi,\n\t} from \"@xbs/lib-kanban\";\n\n\timport { ContextMenu } from \"@xbs/svelte-menu\";\n\n\timport HeaderCard from \"./HeaderCard.svelte\";\n\n\texport let columns: IColumn[];\n\texport let areasMeta: TAreasMeta;\n\texport let api: IApi;\n\texport let contentEl: HTMLElement;\n\n\tconst _ = getContext<any>(\"wx-i18n\").getGroup(\"kanban\");\n\tconst dispatch: TEventDispatcher = createEventDispatcher();\n\n\tconst { readonly, columnShape } = api.getReactiveState();\n\n\tconst fixed = $columnShape.fixedHeaders !== false;\n\n\tconst getMenuItems = (\n\t\tcolumn: IColumn,\n\t\tcolumnIndex: number,\n\t\tcolumns: IColumn[],\n\t\tcolumnShape: IColumnShape\n\t) => {\n\t\tconst menuItems = (\n\t\t\tcolumnShape.menu.items as TMenuItemsFn<{\n\t\t\t\tcolumn: IColumn;\n\t\t\t\tcolumns: IColumn[];\n\t\t\t\tcolumnIndex: number;\n\t\t\t}>\n\t\t)({\n\t\t\tcolumns,\n\t\t\tcolumnIndex,\n\t\t\tcolumn,\n\t\t});\n\n\t\tif (!menuItems || !menuItems.length) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn menuItems.map(item => {\n\t\t\treturn {\n\t\t\t\t...item,\n\t\t\t\ttext: _(item.text),\n\t\t\t\tcss: item.disabled ? \"disabled\" : \"\",\n\t\t\t};\n\t\t});\n\t};\n\n\tlet columnMenuItems = {};\n\t$: {\n\t\tcolumns.forEach((column, i) => {\n\t\t\tcolumnMenuItems[column.id] = getMenuItems(\n\t\t\t\tcolumn,\n\t\t\t\ti,\n\t\t\t\tcolumns,\n\t\t\t\t$columnShape\n\t\t\t);\n\t\t});\n\t}\n\n\tfunction handleMove(column: TID, dir: \"left\" | \"right\") {\n\t\tconst columnIndex = columns.findIndex(c => c.id === column);\n\t\tconst beforeIndex = dir === \"left\" ? columnIndex - 1 : columnIndex + 2;\n\t\tconst before = columns[beforeIndex]?.id;\n\n\t\tdispatch(\"action\", {\n\t\t\taction: \"move-column\",\n\t\t\tdata: {\n\t\t\t\tid: column,\n\t\t\t\tbefore,\n\t\t\t},\n\t\t});\n\t}\n\n\tlet renamingCard = null;\n\n\tfunction handleMenuAction(ev: any) {\n\t\tconst { action, item } = ev.detail;\n\n\t\tif (action) {\n\t\t\tif (action.onClick) {\n\t\t\t\taction.onClick({\n\t\t\t\t\tid: action.id,\n\t\t\t\t\titem: action,\n\t\t\t\t\tcolumn: item,\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch (action.id) {\n\t\t\t\tcase \"add-card\":\n\t\t\t\t\tdispatch(\"action\", {\n\t\t\t\t\t\taction: \"add-card\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tcolumnId: item.id,\n\t\t\t\t\t\t\tcard: {\n\t\t\t\t\t\t\t\tlabel: _(\"Untitled\"),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"set-edit\":\n\t\t\t\t\tif ($readonly.edit) renamingCard = item.id;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"delete-column\":\n\t\t\t\t\tdispatch(\"action\", {\n\t\t\t\t\t\taction: \"delete-column\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tid: item.id,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"move-column:left\":\n\t\t\t\t\thandleMove(item.id, \"left\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"move-column:right\":\n\t\t\t\t\thandleMove(item.id, \"right\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tlet showMenu = null;\n\t// FIXME - temporary fix for the https://tracker.webix.io/issue/SVAR-1166\n\tconst showMenuFix = ev => {\n\t\tev.cancelBubble = true;\n\t\treturn showMenu(ev);\n\t};\n\tlet menuItems = [];\n\n\tfunction resolver(item) {\n\t\tmenuItems = columnMenuItems[item] || [];\n\t\treturn columns.find(c => c.id === item);\n\t}\n\n\tconst handleColumnActions = ({ detail: { action, data } }) => {\n\t\tif (action === \"close-column-input\") renamingCard = null;\n\n\t\tdispatch(\"action\", { action, data });\n\t};\n\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<div class=\"wx-header\" class:fixed on:click={showMenuFix}>\n\t{#each columns as column (column.id)}\n\t\t<HeaderCard\n\t\t\t{column}\n\t\t\tisMenuVisible={$columnShape.menu.show && columnMenuItems[column.id]?.length}\n\t\t\t{contentEl}\n\t\t\t{api}\n\t\t\t{areasMeta}\n\t\t\trenaming={renamingCard === column.id}\n\t\t\ton:action={handleColumnActions} />\n\t{/each}\n</div>\n\n<ContextMenu\n\tat={'left-bottom'}\n\toptions={menuItems}\n\tbind:handler={showMenu}\n\t{resolver}\n\tdataKey=\"menuId\"\n\ton:click={handleMenuAction} />\n\n<style>\n\t/* [todo] add ability to disable list item to wx, remove this block  */\n\t:global([data-id=\"wx-list-disabled\"]) {\n\t\topacity: 0.5;\n\t\tpointer-events: none;\n\t}\n\t.wx-header {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tposition: relative;\n\n\t\tpadding: 12px 0 var(--wx-padding) 0;\n\n\t\theight: var(--wx-kanban-header-height);\n\t\tmin-height: var(--wx-kanban-header-height);\n\t}\n\n\t.wx-header.fixed {\n\t\tposition: sticky;\n\t\tz-index: 100;\n\t\ttop: 0;\n\t\tbackground: var(--wx-kanban-background);\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport {\n\t\tgetAreaId,\n\t\tgetCardAreaId,\n\t\tisSameId,\n\t\tscrollManager,\n\t} from \"@xbs/lib-kanban\";\n\timport type { IApi, ICard, TID } from \"@xbs/lib-kanban\";\n\n\timport { onMount, tick } from \"svelte\";\n\n\texport let api: IApi;\n\n\tconst {\n\t\tcardsMap: rCardsMap,\n\t\tcolumns: rColumns,\n\t\trows: rRows,\n\t\tcardHeight: rCardHeight,\n\t\tcards: rCards,\n\t\tcolumnKey: rColumnKey,\n\t\tscroll: scrollTo,\n\t} = api.getReactiveState();\n\n\t$: cardsMap = $rCardsMap;\n\t$: columns = $rColumns;\n\t$: rows = $rRows;\n\t$: cardHeight = $rCardHeight;\n\t$: cards = $rCards;\n\t$: columnKey = $rColumnKey;\n\n\tconst margins = 10;\n\t$: fullCardHeight = cardHeight + margins;\n\t$: heightReserve = fullCardHeight * 2;\n\n\tlet listEl: HTMLElement;\n\tlet maxCardsCount = 0;\n\tlet byRow = {};\n\tlet startIndex = 0;\n\tlet endIndex = 1;\n\n\t$: {\n\t\tif (rows && columns && cardsMap) {\n\t\t\tcreateByRowConfig();\n\t\t}\n\t}\n\t$: {\n\t\tif ($scrollTo && $scrollTo.to === \"card\" && $scrollTo.id) {\n\t\t\tscrollToItem($scrollTo.id).then(ready => {\n\t\t\t\tif (ready) {\n\t\t\t\t\t$scrollTo = null;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t$: updateRows(startIndex, endIndex);\n\n\t$: topPadding = startIndex * fullCardHeight;\n\t$: bottomPadding = (maxCardsCount - endIndex) * fullCardHeight;\n\n\tonMount(() => {\n\t\tupdateIndexes();\n\t});\n\n\tfunction createByRowConfig() {\n\t\tmaxCardsCount = 0;\n\n\t\trows.reduce((prev, row) => {\n\t\t\tif (row.collapsed) {\n\t\t\t\treturn prev;\n\t\t\t}\n\t\t\tconst maxInRow = columns.reduce((max, col) => {\n\t\t\t\tconst areaId = getAreaId(col.id, row.id);\n\t\t\t\tconst areaCardsCount = cardsMap[areaId].length;\n\t\t\t\tif (areaCardsCount > max) {\n\t\t\t\t\tmax = areaCardsCount;\n\t\t\t\t}\n\t\t\t\treturn max;\n\t\t\t}, 0);\n\n\t\t\tbyRow[row.id] = {\n\t\t\t\tid: row.id,\n\t\t\t\tmaxCardsCount: maxInRow,\n\t\t\t\tminIndex: prev,\n\t\t\t\tmaxIndex: prev + maxInRow,\n\n\t\t\t\tstartIndex: 0,\n\t\t\t\tendIndex: 0,\n\t\t\t\tvisible: true,\n\t\t\t};\n\t\t\tmaxCardsCount += maxInRow;\n\n\t\t\treturn prev + maxInRow;\n\t\t}, 0);\n\n\t\tif (listEl) {\n\t\t\tstartIndex = 0;\n\t\t\tendIndex = 0;\n\t\t\tupdateIndexes();\n\t\t}\n\t}\n\tasync function scrollToItem(id: TID) {\n\t\tconst item = listEl.querySelector(`[data-drag-item=\"${id}\"]`);\n\t\tif (item) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst card = cards.find(card => isSameId(card.id, id));\n\n\t\tconst columnId = getCardAreaId(card, columnKey);\n\t\tconst topIndex = cardsMap[columnId].findIndex((c: ICard) =>\n\t\t\tisSameId(c.id, id)\n\t\t);\n\t\tconst leftIndex = columns.findIndex(col => col.id === columnId);\n\t\tconst columnWidth =\n\t\t\tparseFloat(\n\t\t\t\tgetComputedStyle(listEl).getPropertyValue(\n\t\t\t\t\t\"--wx-kanban-column-width\"\n\t\t\t\t)\n\t\t\t) || 300;\n\n\t\tif (topIndex > -1) {\n\t\t\tawait tick();\n\n\t\t\tlistEl.scrollTop = topIndex * fullCardHeight;\n\t\t\tlistEl.scrollLeft = columnWidth * leftIndex;\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction updateIndexes() {\n\t\tconst scrollTop = listEl.scrollTop - heightReserve;\n\n\t\tconst newStartIndex = Math.floor(\n\t\t\tscrollTop < 0 ? 0 : scrollTop / fullCardHeight\n\t\t);\n\n\t\tconst newEndIndex =\n\t\t\tnewStartIndex +\n\t\t\tMath.floor(\n\t\t\t\t(listEl.offsetHeight + heightReserve * 2) / fullCardHeight\n\t\t\t);\n\n\t\tif (newEndIndex >= maxCardsCount) {\n\t\t\tendIndex = maxCardsCount;\n\t\t\treturn;\n\t\t}\n\n\t\tstartIndex = newStartIndex;\n\t\tendIndex = newEndIndex;\n\t}\n\n\tfunction updateRows(startIndex: number, endIndex: number) {\n\t\trows.forEach(row => {\n\t\t\tconst byRowConfig = byRow[row.id];\n\t\t\tconst d = endIndex - startIndex;\n\n\t\t\tlet start = startIndex - byRowConfig.minIndex;\n\t\t\tlet end = start + d;\n\n\t\t\tbyRowConfig.startIndex = start < 0 ? 0 : start;\n\t\t\tbyRowConfig.endIndex =\n\t\t\t\tend > byRowConfig.maxIndex ? byRowConfig.maxIndex : end;\n\n\t\t\tconst visible = start < byRowConfig.maxIndex && end > 0;\n\t\t\tbyRowConfig.visible = visible;\n\n\t\t\tif (row.collapsed) {\n\t\t\t\tbyRowConfig.visible = true;\n\t\t\t}\n\n\t\t\tbyRow[row.id] = byRowConfig;\n\t\t});\n\t}\n\n\tfunction handleScroll() {\n\t\tupdateIndexes();\n\t}\n\n\tlet virtualContentEl;\n\n</script>\n\n<div\n\tclass=\"wx-list-wrapper\"\n\tdata-id=\"virtual-content\"\n\ton:scroll={handleScroll}\n\tbind:this={listEl}\n\tuse:scrollManager>\n\t<div\n\t\tbind:this={virtualContentEl}\n\t\tclass=\"wx-content\"\n\t\tstyle=\"padding-top:{topPadding}px;padding-bottom:{bottomPadding}px;\">\n\t\t<slot {startIndex} {endIndex} {byRow} {virtualContentEl} />\n\t</div>\n</div>\n\n<style>\n\t.wx-list-wrapper {\n\t\theight: 100%;\n\t\twidth: 100%;\n\n\t\toverflow-y: scroll;\n\t\toverflow-x: scroll;\n\t}\n\t.wx-content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tposition: relative;\n\t\twidth: fit-content;\n\t}\n\n</style>\n","import { writable } from \"svelte/store\";\nfunction isSame(left, right) {\n    for (const key in right) {\n        const v = left[key];\n        const nv = right[key];\n        if (v === nv)\n            continue;\n        if (Array.isArray(v) && Array.isArray(nv) && v.length === nv.length) {\n            for (let i = v.length - 1; i >= 0; i--) {\n                if (v[i] !== nv[i]) {\n                    return false;\n                }\n            }\n            continue;\n        }\n        return false;\n    }\n    return true;\n}\nexport function form(v, changes, config) {\n    let ready = false;\n    let timer = null;\n    const store = writable(v);\n    const { set } = store;\n    let base = { ...v };\n    store.set = function (nv) {\n        if (!isSame(base, nv)) {\n            base = { ...nv };\n            set(nv);\n        }\n    };\n    store.update = function (upd) {\n        const nv = upd(v);\n        if (!isSame(base, nv)) {\n            base = { ...nv };\n            set(nv);\n        }\n    };\n    store.reset = function (v) {\n        ready = false;\n        base = {};\n        store.set(v);\n    };\n    store.subscribe(v => {\n        if (ready) {\n            if (v) {\n                if (!config || !config.debounce)\n                    changes(v);\n                else {\n                    clearTimeout(timer);\n                    timer = setTimeout(() => changes(v), config.debounce);\n                }\n            }\n        }\n        else\n            ready = true;\n    });\n    return store;\n}\n//# sourceMappingURL=form.js.map","<script lang=\"ts\">\n\timport { isImage } from \"@xbs/lib-kanban\";\n\timport { Button } from \"@xbs/svelte-wx\";\n\timport Icon from \"./Icon.svelte\";\n\n\timport type { Writable } from \"svelte/store\";\n\timport type { IAttachment, TID } from \"@xbs/lib-kanban\";\n\n\texport let data: Writable<IAttachment[]>;\n\n\tconst fileSize = [\"b\", \"Kb\", \"Mb\", \"Gb\", \"Tb\", \"Pb\", \"Eb\"];\n\n\tfunction removeAll() {\n\t\tdata.set([]);\n\t}\n\n\tfunction remove(id: TID) {\n\t\tdata.update(v => v.filter(i => i.id !== id));\n\t}\n\n\tfunction formatSize(size: number) {\n\t\tlet index = 0;\n\t\twhile (size > 1024) {\n\t\t\tindex++;\n\t\t\tsize = size / 1024;\n\t\t}\n\t\treturn Math.round(size * 100) / 100 + \" \" + fileSize[index];\n\t}\n\tfunction isPreview(obj: IAttachment) {\n\t\tconst ext = obj?.url?.split(\".\").pop();\n\t\tconst previewExt = obj?.previewURL?.split(\".\").pop();\n\n\t\treturn isImage(previewExt) || isImage(ext);\n\t}\n\n\tfunction handleMakeCover(id: TID) {\n\t\tdata.update(v => {\n\t\t\treturn v.map(obj => {\n\t\t\t\tif (obj.id === id) {\n\t\t\t\t\treturn { ...obj, isCover: true };\n\t\t\t\t} else {\n\t\t\t\t\tdelete obj.isCover;\n\t\t\t\t\treturn obj;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tfunction handleRemoveCover() {\n\t\tdata.update(v => {\n\t\t\treturn v.map(obj => {\n\t\t\t\tconst copy = { ...obj };\n\t\t\t\tdelete copy.isCover;\n\t\t\t\treturn copy;\n\t\t\t});\n\t\t});\n\t}\n\n</script>\n\n{#if $data.length}\n\t<div class=\"wx-layout\">\n\t\t<div class=\"wx-header\">\n\t\t\t<Icon name=\"wxi-close\" click={removeAll} />\n\t\t</div>\n\t\t<div class=\"wx-list\">\n\t\t\t{#each $data as obj (obj.id)}\n\t\t\t\t<div class=\"wx-row\">\n\t\t\t\t\t<div class=\"wx-file-icon\">\n\t\t\t\t\t\t{#if isPreview(obj)}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"wx-thumb\"\n\t\t\t\t\t\t\t\tstyle=\"background-image: url('{obj.previewURL || obj.url}')\" />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<Icon name=\"wxi-paperclip\" size={20} />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"wx-name\">{obj.name}</div>\n\t\t\t\t\t{#if obj.file}\n\t\t\t\t\t\t<div class=\"wx-size\">{formatSize(obj.file.size)}</div>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<div class=\"wx-controls\">\n\t\t\t\t\t\t{#if obj.status === 'client'}\n\t\t\t\t\t\t\t<Icon name=\"wxi-loading\" spin />\n\t\t\t\t\t\t{:else if obj.status === 'error'}\n\t\t\t\t\t\t\t<Icon name=\"wxi-alert\" />\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\tname=\"wxi-delete-outline\"\n\t\t\t\t\t\t\t\tclick={() => remove(obj.id)} />\n\t\t\t\t\t\t{:else if !obj.status || obj.status === 'server'}\n\t\t\t\t\t\t\t<div class=\"wx-hidden\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclass=\"wx-upload-link\"\n\t\t\t\t\t\t\t\t\thref={obj.url}\n\t\t\t\t\t\t\t\t\tdownload={obj.name}\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\trel=\"noreferrer nofollow noopener\">\n\t\t\t\t\t\t\t\t\t<Icon name=\"wxi-external\" clickable />\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\tname=\"wxi-delete-outline\"\n\t\t\t\t\t\t\t\t\tclick={() => remove(obj.id)} />\n\n\t\t\t\t\t\t\t\t{#if isPreview(obj)}\n\t\t\t\t\t\t\t\t\t{#if !obj.isCover}\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tclick={() => handleMakeCover(obj.id)}>\n\t\t\t\t\t\t\t\t\t\t\tMake cover\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<Button click={handleRemoveCover}>\n\t\t\t\t\t\t\t\t\t\t\tRemove cover\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\t</div>\n{/if}\n\n<style>\n\t.wx-layout {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\twidth: 100%;\n\t}\n\t.wx-header {\n\t\tpadding: 10px;\n\t\tborder-bottom: var(--wx-border);\n\t\ttext-align: right;\n\t}\n\n\t.wx-list {\n\t\toverflow: auto;\n\t}\n\n\t.wx-row {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 10px;\n\t\tpadding: 10px;\n\t\tborder-bottom: var(--wx-border);\n\t}\n\n\t.wx-name {\n\t\tflex: 1;\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t}\n\n\t.wx-controls {\n\t\tdisplay: flex;\n\t}\n\t.wx-hidden {\n\t\tdisplay: none;\n\t}\n\t.wx-row:hover .wx-hidden {\n\t\tdisplay: flex;\n\t}\n\t.wx-file-icon {\n\t\tmin-width: 40px;\n\t\tmin-height: 40px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t.wx-thumb {\n\t\twidth: 40px;\n\t\theight: 40px;\n\t\tmax-width: 40px;\n\t\tmax-height: 40px;\n\n\t\tbackground-size: cover;\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: center;\n\t}\n\t.wx-upload-link {\n\t\ttext-decoration: none;\n\t\tdisplay: flex;\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport { writable } from \"svelte/store\";\n\timport { Uploader } from \"@xbs/svelte-wx\";\n\timport UploaderList from \"./UploaderList.svelte\";\n\n\timport type { Writable } from \"svelte/store\";\n\timport type { IAttachment, TFilesFieldShape, ICard } from \"@xbs/lib-kanban\";\n\n\texport let field: TFilesFieldShape;\n\texport let values: Writable<ICard>;\n\n\tconst files = writable($values[field.key] || []) as Writable<IAttachment[]>;\n\n\tlet ready = false;\n\t$: {\n\t\tif (ready) {\n\t\t\t$values[field.key] = $files;\n\t\t}\n\t\tready = true;\n\t}\n\n\tfunction uploadFn(files: any[]) {\n\t\treturn files.map(rec => {\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append(\"upload\", rec.file);\n\n\t\t\tconst config = {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: formData,\n\t\t\t};\n\n\t\t\treturn fetch(field.uploadURL, config)\n\t\t\t\t.then(res => res.json())\n\t\t\t\t.then(\n\t\t\t\t\tdata => {\n\t\t\t\t\t\trec.id = data.id;\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t},\n\t\t\t\t\t() => ({ id: rec.id, status: \"error\" })\n\t\t\t\t)\n\t\t\t\t.catch();\n\t\t});\n\t}\n\n</script>\n\n<UploaderList data={files} />\n<Uploader bind:data={$files} uploadURL={uploadFn} {...field.config} />\n","<script lang=\"ts\">\n\timport { getContext } from \"svelte\";\n\timport { uid, dateToString } from \"@xbs/lib-core-dom\";\n\timport {\n\t\tText,\n\t\tDropdown,\n\t\tButton,\n\t\tRangeCalendar,\n\t\tPortal,\n\t} from \"@xbs/svelte-wx\";\n\timport Icon from \"./Icon.svelte\";\n\n\texport let start = null;\n\texport let end = null;\n\n\texport let id: number = uid();\n\texport let format: string;\n\n\tconst _ = getContext<any>(\"wx-i18n\").getGroup(\"calendar\");\n\n\tlet popup: boolean;\n\tlet dateFormat =\n\t\ttypeof format === \"function\" ? format : dateToString(format, _);\n\n\tfunction cancel(e: any) {\n\t\te.stopPropagation();\n\t\tpopup = null;\n\t}\n\n\tfunction setToday() {\n\t\tconst date = new Date();\n\t\tstart = date;\n\t\tend = date;\n\t}\n\tfunction clearDate() {\n\t\tstart = null;\n\t\tend = null;\n\t}\n\n\tlet formattedValue = \"\";\n\t$: {\n\t\tif (start) {\n\t\t\tformattedValue =\n\t\t\t\tdateFormat(start) + (end ? ` - ${dateFormat(end)}` : \"\");\n\t\t} else {\n\t\t\tformattedValue = \"\";\n\t\t}\n\t}\n\n\tfunction showPopup() {\n\t\tpopup = true;\n\t}\n\tlet layoutEl: HTMLElement;\n\n</script>\n\n<svelte:window on:scroll={cancel} />\n\n<div class=\"wx-layout\" on:click={showPopup} bind:this={layoutEl}>\n\t<Text\n\t\tvalue={formattedValue}\n\t\t{id}\n\t\treadonly={true}\n\t\tinputStyle={'cursor: pointer; text-overflow: ellipsis; padding-right: 18px;'} />\n\t<div class=\"wx-input-icon\">\n\t\t<Icon name=\"wxi-calendar\" />\n\t</div>\n\n\t{#if popup}\n\t\t<Portal target={layoutEl}>\n\t\t\t<Dropdown {cancel} width={'unset'}>\n\t\t\t\t<RangeCalendar bind:start bind:end buttons={false} />\n\t\t\t\t<div class=\"wx-buttons\">\n\t\t\t\t\t<Button type=\"link wx-calendar-btn\" click={clearDate}>\n\t\t\t\t\t\tClear\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button type=\"link wx-calendar-btn\" click={setToday}>\n\t\t\t\t\t\tToday\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button type=\"primary wx-calendar-btn\" click={cancel}>\n\t\t\t\t\t\tDone\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</Dropdown>\n\t\t</Portal>\n\t{/if}\n</div>\n\n<style>\n\t.wx-layout {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t}\n\n\t.wx-buttons {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: var(--wx-calendar-padding) 0;\n\t}\n\t:global(.wx-calendar-btn:not(:last-child)) {\n\t\tmargin-right: 12px;\n\t}\n\t.wx-input-icon {\n\t\tposition: absolute;\n\t\tright: var(--wx-input-icon-indent);\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport { uid } from \"@xbs/lib-core-dom\";\n\n\timport DateRangePicker from \"./CustomDateRangePicker.svelte\";\n\n\texport let start: Date;\n\texport let end: Date;\n\texport let format: string;\n\texport let id: number = uid();\n\n</script>\n\n<DateRangePicker bind:start bind:end {id} {format} />\n","import { locateID } from \"@xbs/lib-core-dom\";\n\nexport function getListHandlers() {\n\tlet navIndex = null;\n\tlet isVisible = false;\n\n\tlet list, options, navCallback, selectCallback;\n\tconst init = (l, o, n, c) => {\n\t\tlist = l;\n\t\toptions = o;\n\t\tnavCallback = n;\n\t\tselectCallback = c;\n\t};\n\n\tconst setNav = index => {\n\t\tnavIndex = index;\n\t\tisVisible = navIndex !== null;\n\t\tnavCallback(navIndex);\n\t};\n\tconst navigate = (dir, ev) => {\n\t\tconst index =\n\t\t\tdir === null\n\t\t\t\t? null\n\t\t\t\t: Math.max(0, Math.min(navIndex + dir, options.length - 1));\n\t\tif (index === navIndex) return;\n\t\tsetNav(index);\n\n\t\tif (navIndex && list) {\n\t\t\tconst next = list.querySelectorAll(`.list > .item`)[navIndex];\n\t\t\tif (next) {\n\t\t\t\tnext.scrollIntoView({ block: \"nearest\" });\n\t\t\t\tif (ev) ev.preventDefault();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst move = ev => {\n\t\tconst id = locateID(ev);\n\t\tconst index = options.findIndex(a => a.id === id);\n\n\t\tif (index !== navIndex) {\n\t\t\tsetNav(index);\n\t\t}\n\t};\n\n\tconst keydown = ev => {\n\t\tswitch (ev.code) {\n\t\t\tcase \"Enter\":\n\t\t\t\tisVisible ? selectCallback() : setNav(0);\n\t\t\t\tbreak;\n\n\t\t\tcase \"Space\":\n\t\t\t\tisVisible ? null : setNav(0);\n\t\t\t\tbreak;\n\n\t\t\tcase \"Escape\":\n\t\t\t\tnavCallback((navIndex = null));\n\t\t\t\tbreak;\n\n\t\t\tcase \"Tab\":\n\t\t\t\tnavCallback((navIndex = null));\n\t\t\t\tbreak;\n\n\t\t\tcase \"ArrowDown\":\n\t\t\t\tisVisible ? navigate(1, ev) : setNav(0);\n\t\t\t\tbreak;\n\n\t\t\tcase \"ArrowUp\":\n\t\t\t\tisVisible ? navigate(-1, ev) : setNav(0);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\treturn { move, keydown, init, navigate };\n}\n","<script>\n\timport { createEventDispatcher, onMount } from \"svelte\";\n\timport { getListHandlers } from \"./listnav\";\n\timport { Dropdown } from \"@xbs/svelte-wx\";\n\n\texport let items = [];\n\n\tlet list;\n\tlet navIndex = null;\n\n\tconst dispatch = createEventDispatcher();\n\tconst { move, keydown, init, navigate } = getListHandlers();\n\n\tconst select = () => dispatch(\"select\", { id: items[navIndex]?.id });\n\t$: init(list, items, i => (navIndex = i), select);\n\n\tonMount(() => {\n\t\tdispatch(\"ready\", { navigate, keydown, move });\n\t});\n\n</script>\n\n{#if navIndex !== null}\n\t<Dropdown cancel={() => navigate(null)}>\n\t\t<div\n\t\t\tclass=\"list\"\n\t\t\tbind:this={list}\n\t\t\ton:click|stopPropagation={select}\n\t\t\ton:mousemove={move}>\n\t\t\t{#if items.length}\n\t\t\t\t{#each items as data, index (data.id)}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"item\"\n\t\t\t\t\t\tclass:disabled={data.disabled}\n\t\t\t\t\t\tclass:focus={index === navIndex}\n\t\t\t\t\t\tdata-id={data.id}>\n\t\t\t\t\t\t<slot option={data}>{data.name}</slot>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t{:else}\n\t\t\t\t<div class=\"no-data\">No data</div>\n\t\t\t{/if}\n\t\t</div>\n\t</Dropdown>\n{/if}\n\n<style>\n\t.list {\n\t\tmax-height: 250px;\n\t\toverflow-y: auto;\n\t}\n\n\t.item {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tfont-family: var(--wx-input-font-family);\n\t\tfont-size: var(--wx-input-font-size);\n\t\tline-height: var(--wx-input-line-height);\n\t\tfont-weight: var(--wx-input-font-weigth);\n\t\tcolor: var(--wx-input-font-color);\n\t\tpadding: var(--wx-input-padding);\n\t\tcursor: pointer;\n\t}\n\t.disabled {\n\t\topacity: 0.8;\n\t\tpointer-events: none;\n\t}\n\t.item.focus {\n\t\tbackground: var(--wx-background-hover);\n\t}\n\t.no-data {\n\t\tpadding: var(--wx-input-padding);\n\t}\n\n</style>\n","<script>\n\timport { createEventDispatcher } from \"svelte\";\n\timport { Checkbox } from \"@xbs/svelte-wx\";\n\timport List from \"./helpers/List.svelte\";\n\n\texport let values = [];\n\texport let options = [];\n\texport let textField = \"label\";\n\texport let placeholder = \"\";\n\texport let disabled = false;\n\texport let error = false;\n\texport let checkboxes = false;\n\texport let limit = null;\n\n\tconst dispatch = createEventDispatcher();\n\n\tlet text = \"\";\n\tlet selected = [];\n\tlet filterOptions;\n\tlet focus = false;\n\n\t$: selectedId = selected.map(s => s.id);\n\t$: filterOptions = options.map(op => {\n\t\top.disabled = false;\n\t\tif (\n\t\t\tlimit &&\n\t\t\tselected.length &&\n\t\t\tselected.length >= limit &&\n\t\t\t!selectedId.includes(op.id)\n\t\t) {\n\t\t\top.disabled = true;\n\t\t}\n\t\treturn op;\n\t});\n\n\tlet navigate;\n\tlet keydown;\n\tfunction ready(ev) {\n\t\tnavigate = ev.detail.navigate;\n\t\tkeydown = ev.detail.keydown;\n\t}\n\n\t$: selected = options.filter(i => values.includes(i.id));\n\n\tfunction input() {\n\t\tfilterOptions = text\n\t\t\t? options.filter(i =>\n\t\t\t\t\ti[textField].toLowerCase().includes(text.toLowerCase())\n\t\t\t  )\n\t\t\t: options;\n\t\tif (filterOptions.length) navigate(0);\n\t\telse navigate(null);\n\t}\n\n\tfunction select(ev) {\n\t\tconst { id } = ev.detail;\n\n\t\tif (id) {\n\t\t\tvalues = values.includes(id)\n\t\t\t\t? values.filter(i => i !== id)\n\t\t\t\t: [...values, id];\n\n\t\t\tselected = options.filter(i => values.includes(i.id));\n\n\t\t\tdispatch(\"select\", { selected });\n\t\t}\n\t}\n\n\tfunction remove(id) {\n\t\tvalues = values.filter(i => i !== id);\n\t}\n\n</script>\n\n<div\n\tclass=\"combo {focus && !disabled ? 'focus' : ''} {error ? 'error' : ''} {disabled ? 'disabled' : ''} {selected.length ? 'not-empty' : ''}\"\n\ton:click={() => navigate(0)}\n\ton:keydown={ev => keydown(ev)}>\n\t<div class=\"wrapper\">\n\t\t<div class=\"tags\">\n\t\t\t{#each selected as tag (tag.id)}\n\t\t\t\t<div class=\"tag\">\n\t\t\t\t\t<slot option={tag}>{tag[textField]}</slot>\n\t\t\t\t\t{#if !disabled}\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\tclass=\"wxi-close\"\n\t\t\t\t\t\t\ton:click|stopPropagation={() => remove(tag.id)} />\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\t\t<div class=\"select\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"input\"\n\t\t\t\tbind:value={text}\n\t\t\t\ton:input={input}\n\t\t\t\t{placeholder}\n\t\t\t\t{disabled} />\n\t\t\t<i class=\"icon wxi-angle-down\" />\n\t\t</div>\n\t</div>\n\n\t{#if !disabled}\n\t\t<List\n\t\t\tlet:option\n\t\t\titems={filterOptions}\n\t\t\ton:ready={ready}\n\t\t\ton:select={select}>\n\t\t\t{#if checkboxes}\n\t\t\t\t<Checkbox\n\t\t\t\t\tstyle=\"margin-right: 8px; pointer-events: none;\"\n\t\t\t\t\tvalue={option.id}\n\t\t\t\t\tchecked={values.includes(option.id)} />\n\t\t\t{/if}\n\t\t\t<slot {option}>{option.name}</slot>\n\t\t</List>\n\t{/if}\n</div>\n\n<style>\n\t.combo {\n\t\tposition: relative;\n\t\twidth: var(--wx-input-width);\n\t}\n\t.combo.focus .wrapper {\n\t\tborder: var(--wx-input-border-focus);\n\t}\n\t.combo.disabled .wrapper {\n\t\tborder: var(--wx-input-border-disabled);\n\t\tbackground: var(--wx-input-background-disabled);\n\t}\n\t.combo.disabled .tag {\n\t\tbackground: var(--wx-color-disabled);\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\t.combo:not(.disabled) .tag {\n\t\tpadding-right: calc(\n\t\t\tvar(--wx-input-icon-size) + var(--wx-input-icon-indent) * 2\n\t\t);\n\t}\n\t.combo.disabled input {\n\t\tcursor: not-allowed;\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\t.combo.disabled .icon {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\t.combo.error .wrapper {\n\t\tborder-color: var(--wx-color-danger);\n\t}\n\t.combo.error input {\n\t\tcolor: var(--wx-color-danger);\n\t}\n\t.combo.error .icon {\n\t\tcolor: var(--wx-color-danger);\n\t}\n\t.combo.not-empty .tags {\n\t\tgap: var(--wx-multicombo-tag-gap);\n\t\tpadding: var(--wx-multicombo-tag-gap);\n\t}\n\t.combo.not-empty input {\n\t\tborder-top: var(--wx-input-border);\n\t}\n\t.combo.not-empty.focus input {\n\t\tborder-top: var(--wx-input-border-focus);\n\t}\n\t.combo.not-empty.disabled input {\n\t\tborder-top: var(--wx-input-border-disabled);\n\t}\n\t.combo.not-empty.error input {\n\t\tborder-top-color: var(--wx-color-danger);\n\t}\n\n\t.wrapper {\n\t\tborder: var(--wx-input-border);\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tbackground: var(--wx-input-background);\n\t}\n\n\t.tags {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\talign-items: flex-start;\n\t\toverflow: hidden;\n\t}\n\n\t.tag {\n\t\tposition: relative;\n\t\tfont-family: var(--wx-input-font-family);\n\t\tfont-size: var(--wx-input-font-size);\n\t\tline-height: var(--wx-input-line-height);\n\t\tfont-weight: var(--wx-input-font-weigth); /* typo in wx theme */\n\t\ttext-align: var(--wx-input-text-align);\n\t\tcolor: var(--wx-input-font-color);\n\t\tborder: var(--wx-multicombo-tag-border);\n\t\tborder-radius: var(--wx-multicombo-tag-border-radius);\n\t\tbackground: var(--wx-multicombo-tag-background);\n\t\tpadding: var(--wx-multicombo-tag-pading); /* typo in wx theme */\n\t}\n\n\t.wxi-close {\n\t\tposition: absolute;\n\t\tright: var(--wx-input-icon-indent);\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tfont-size: var(--wx-input-icon-size);\n\t\tline-height: 1;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\twidth: var(--wx-input-icon-size);\n\t\theight: var(--wx-input-icon-size);\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tcolor: var(--wx-input-icon-color);\n\t\tcursor: pointer;\n\t}\n\t.wxi-close:hover {\n\t\tcolor: var(--wx-color-primary);\n\t}\n\n\t.select {\n\t\tposition: relative;\n\t}\n\n\tinput {\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t\theight: var(--wx-input-height);\n\t\toutline: none;\n\t\tbackground: transparent;\n\t\tborder: none;\n\t\tborder-radius: 0;\n\t\tfont-family: var(--wx-input-font-family);\n\t\tfont-size: var(--wx-input-font-size);\n\t\tline-height: var(--wx-input-line-height);\n\t\tfont-weight: var(--wx-input-font-weigth);\n\t\ttext-align: var(--wx-input-text-align);\n\t\tcolor: var(--wx-input-font-color);\n\t\tpadding: var(--wx-input-padding);\n\t\tpadding-right: calc(\n\t\t\tvar(--wx-input-icon-size) + var(--wx-input-icon-indent) * 2\n\t\t);\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tcursor: pointer;\n\t}\n\n\t.icon {\n\t\tposition: absolute;\n\t\tright: var(--wx-input-icon-indent);\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tfont-size: var(--wx-input-icon-size);\n\t\tline-height: 1;\n\t\twidth: var(--wx-input-icon-size);\n\t\theight: var(--wx-input-icon-size);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tpointer-events: none;\n\t\tuser-select: none;\n\t\tcolor: var(--wx-input-icon-color);\n\t}\n\t.icon:before {\n\t\tdisplay: block;\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport { getContext } from \"svelte\";\n\timport type { TLocaleGroup } from \"@xbs/lib-kanban\";\n\n\texport const locale = getContext<any>(\"wx-i18n\");\n\texport const _: TLocaleGroup = locale.getGroup(\"kanban\");\n\n</script>\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\n\texport let value = \"\";\n\texport let focus = false;\n\texport let placeholder = \"\";\n\texport let resize = true;\n\n\tconst dispatch = createEventDispatcher();\n\n\tfunction handleInput(e: any) {\n\t\tvalue = e.target.value;\n\t}\n\tfunction handleKeydown(e: KeyboardEvent) {\n\t\tif (e.key === \"Enter\" && (e.ctrlKey || e.metaKey)) {\n\t\t\t(e as any).target.blur();\n\t\t}\n\t}\n\tfunction handleBlur() {\n\t\tdispatch(\"blur\", { value });\n\t}\n\tfunction focusAction(node: HTMLElement) {\n\t\tif (focus) {\n\t\t\tnode.focus();\n\t\t}\n\t}\n\n</script>\n\n<textarea\n\ttype=\"text\"\n\tclass=\"wx-textarea\"\n\tclass:wx-no-resize={!resize}\n\t{value}\n\t{placeholder}\n\trows={5}\n\ton:input={handleInput}\n\ton:keydown={handleKeydown}\n\ton:blur={handleBlur}\n\tuse:focusAction />\n\n<style>\n\t.wx-textarea {\n\t\tpadding: var(--wx-input-padding);\n\t\toutline: none;\n\t\tflex: 1;\n\t\tcolor: var(--wx-color-font);\n\t\twidth: 100%;\n\t\tbox-sizing: border-box;\n\n\t\tborder: var(--wx-input-border);\n\t\tborder-radius: var(--wx-input-border-radius);\n\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tbackground: var(--wx-kanban-content-background);\n\t}\n\t.wx-textarea:focus {\n\t\tborder: 1px solid var(--wx-color-primary);\n\t}\n\t.wx-no-resize {\n\t\tresize: none;\n\t}\n\n\t.wx-textarea::placeholder {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport {\n\t\tisSameId,\n\t\ttype IApi,\n\t\ttype ICard,\n\t\ttype IComment,\n\t\ttype IUser,\n\t\ttype TCommentsShape,\n\t\ttype TID,\n\t} from \"@xbs/lib-kanban\";\n\n\timport { Button } from \"@xbs/svelte-wx\";\n\timport { dateToString } from \"@xbs/lib-core-dom\";\n\n\timport { ContextMenu } from \"@xbs/svelte-menu\";\n\n\timport UserIcon from \"../lib/UserIcon.svelte\";\n\timport Textarea from \"../lib/Textarea.svelte\";\n\timport Icon from \"../lib/Icon.svelte\";\n\n\timport { getContext } from \"svelte\";\n\timport { tempID } from \"@xbs/lib-state\";\n\texport let api: IApi;\n\n\texport let card: ICard;\n\texport let users: IUser[] = [];\n\texport let shape: TCommentsShape | any;\n\n\tconst lang = getContext<any>(\"wx-i18n\");\n\tconst _ = lang.getGroup(\"kanban\");\n\tconst { showModal } = getContext<any>(\"wx-helpers\");\n\n\tconst { cards, currentUser } = api.getReactiveState();\n\n\t$: comments = $cards.find(c => c.id === card?.id)?.comments || [];\n\n\tconst config = shape.config || {};\n\n\tconst usersById = users.reduce((acc, user) => {\n\t\tacc[user.id] = user;\n\t\treturn acc;\n\t}, {});\n\n\tconst dateFormat = config.format || \"%M %d %Y %h:%i\";\n\tconst dateFormatter = dateToString(dateFormat, lang.getRaw().calendar);\n\n\tlet inputValue = \"\";\n\tfunction handleAdd() {\n\t\tif (inputValue) {\n\t\t\tapi.exec(\"add-comment\", {\n\t\t\t\tid: tempID(),\n\t\t\t\tcardId: card.id,\n\t\t\t\tcomment: {\n\t\t\t\t\ttext: inputValue,\n\t\t\t\t\tdate: new Date(),\n\t\t\t\t},\n\t\t\t});\n\t\t\tinputValue = \"\";\n\t\t}\n\t}\n\n\tlet editId = null;\n\tlet editText = null;\n\n\tfunction handleEdit(comment: IComment) {\n\t\teditId = comment.id;\n\t\teditText = comment.text;\n\t}\n\tfunction handleEditEnd() {\n\t\tif (editText) {\n\t\t\tapi.exec(\"update-comment\", {\n\t\t\t\tcardId: card.id,\n\t\t\t\tid: editId,\n\t\t\t\tcomment: {\n\t\t\t\t\ttext: editText,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tcancelEdit();\n\t}\n\n\tfunction cancelEdit() {\n\t\teditId = null;\n\t\teditText = null;\n\t}\n\tfunction handleDelete(id: TID) {\n\t\tshowModal({ message: _(\"Would you like to delete this comment?\") })\n\t\t\t.then(() => {\n\t\t\t\tapi.exec(\"delete-comment\", { cardId: card.id, id });\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\t/* to avoid unhandled rejected promise error */\n\t\t\t});\n\t}\n\n\tfunction handleMenuAction(e: any) {\n\t\tconst { item, action } = e.detail;\n\n\t\tif (action) {\n\t\t\tswitch (action.id) {\n\t\t\t\tcase \"edit-comment\":\n\t\t\t\t\thandleEdit(comments.find(c => c.id == item));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"delete-comment\":\n\t\t\t\t\thandleDelete(item);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tlet showMenu = null;\n\n\tconst menuItems = [\n\t\t{ id: \"edit-comment\", text: _(\"Edit\"), icon: \"wxi-edit-outline\" },\n\t\t{\n\t\t\tid: \"delete-comment\",\n\t\t\ttext: _(\"Delete\"),\n\t\t\ticon: \"wxi-delete-outline\",\n\t\t},\n\t];\n\n</script>\n\n<div class=\"wx-comments\">\n\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t{#if comments.length}\n\t\t<div class=\"wx-comment-list\" on:click={showMenu}>\n\t\t\t{#each comments as comment (comment.id)}\n\t\t\t\t<div class=\"wx-comment\" data-comment-id={comment.id}>\n\t\t\t\t\t<div class=\"wx-comment-icon\">\n\t\t\t\t\t\t<UserIcon\n\t\t\t\t\t\t\tsize={'small'}\n\t\t\t\t\t\t\tborder={false}\n\t\t\t\t\t\t\tdata={usersById[comment.userId]} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"wx-content\">\n\t\t\t\t\t\t<div class=\"wx-comment-header\">\n\t\t\t\t\t\t\t<div class=\"wx-name\">\n\t\t\t\t\t\t\t\t{usersById[comment.userId].label}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{#if isSameId(comment.userId, $currentUser)}\n\t\t\t\t\t\t\t\t<div class=\"wx-menu\" data-menu-id={comment.id}>\n\t\t\t\t\t\t\t\t\t<Icon name=\"wxi-dots-v\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"wx-date\">{dateFormatter(comment.date)}</div>\n\n\t\t\t\t\t\t{#if isSameId(editId, comment.id)}\n\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\tresize={false}\n\t\t\t\t\t\t\t\tbind:value={editText}\n\t\t\t\t\t\t\t\tfocus />\n\t\t\t\t\t\t\t<div class=\"wx-edit-btns\">\n\t\t\t\t\t\t\t\t<div class=\"wx-comment-textarea-btn\">\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\ttype=\"secondary block\"\n\t\t\t\t\t\t\t\t\t\tclick={cancelEdit}>\n\t\t\t\t\t\t\t\t\t\t{_('Cancel')}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"wx-comment-textarea-btn\">\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\ttype=\"primary block\"\n\t\t\t\t\t\t\t\t\t\tclick={handleEditEnd}>\n\t\t\t\t\t\t\t\t\t\t{_('Save')}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else if comment.html && config.html}\n\t\t\t\t\t\t\t{@html comment.html}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<pre class=\"wx-text\">{comment.text}</pre>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\t{:else if !$currentUser}\n\t\t<div class=\"wx-kanban-no-comments\">{_('No comments yet')}</div>\n\t{/if}\n\n\t<ContextMenu\n\t\tat={'left-bottom'}\n\t\toptions={menuItems}\n\t\tbind:handler={showMenu}\n\t\tresolver={item => item}\n\t\tdataKey=\"menuId\"\n\t\ton:click={handleMenuAction} />\n\n\t{#if $currentUser && !editId}\n\t\t<div class=\"wx-new-comment\">\n\t\t\t<div class=\"wx-comment-icon\">\n\t\t\t\t<UserIcon\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tborder={false}\n\t\t\t\t\tdata={usersById[$currentUser]} />\n\t\t\t</div>\n\t\t\t<Textarea\n\t\t\t\tbind:value={inputValue}\n\t\t\t\tresize={false}\n\t\t\t\tplaceholder={_('Add a comment...')} />\n\t\t</div>\n\n\t\t<div class=\"wx-comment-textarea-btn\">\n\t\t\t<Button type=\"primary block\" click={handleAdd}>{_('Send')}</Button>\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.wx-comments {\n\t\twidth: var(--wx-field-width);\n\t\tmax-width: 100%;\n\t\tmargin-top: 22px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.wx-comment-list {\n\t\tmargin-bottom: var(--wx-padding);\n\t}\n\n\t.wx-comment {\n\t\tbox-sizing: border-box;\n\n\t\twidth: 100%;\n\t\tmin-height: 70px;\n\t\tmargin: 12px 0;\n\n\t\tposition: relative;\n\t\tfont-size: var(--wx-font-size);\n\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t}\n\n\t.wx-new-comment {\n\t\tdisplay: flex;\n\t\tgap: 12px;\n\t}\n\n\t.wx-content {\n\t\twidth: 100%;\n\t\tpadding-left: 12px;\n\t}\n\n\t.wx-content > * {\n\t\tmargin-bottom: 4px;\n\t}\n\n\t.wx-comment-header {\n\t\twidth: 100%;\n\t\tpadding-right: 10px;\n\t\tposition: relative;\n\t}\n\n\t.wx-menu {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: 0;\n\t\tcursor: pointer;\n\t}\n\n\t.wx-comment-icon {\n\t\talign-self: flex-start;\n\t}\n\t.wx-date {\n\t\tfont-size: var(--wx-font-size-sm);\n\t\tcolor: var(--wx-color-font-alt);\n\t}\n\t.wx-name {\n\t\tfont-weight: var(--wx-font-weight-md);\n\t}\n\t.wx-text {\n\t\tmargin: 0;\n\t\twhite-space: pre-wrap;\n\t\tline-height: var(--wx-line-height);\n\t\tfont-family: var(--wx-font-family);\n\t}\n\n\t.wx-comment-textarea-btn {\n\t\tmargin-top: var(--wx-padding);\n\t\twidth: fit-content;\n\t\talign-self: flex-end;\n\t}\n\n\t.wx-edit-btns {\n\t\tdisplay: flex;\n\t\tgap: var(--wx-padding);\n\t\tjustify-content: flex-end;\n\t}\n\n\t.wx-kanban-no-comments {\n\t\tcolor: var(--wx-color-font-alt);\n\t}\n\n\t:global(.wx-sm-button) {\n\t\t--wx-button-padding: 0 10px;\n\t\theight: 24px;\n\t}\n\t:global(.wx-sm-button:not(:last-child)) {\n\t\tmargin-right: 10px;\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport {\n\t\tisSameId,\n\t\ttype IApi,\n\t\ttype ICard,\n\t\ttype ILink,\n\t\ttype TID,\n\t\ttype TRelationOptions,\n\t} from \"@xbs/lib-kanban\";\n\timport Icon from \"../lib/Icon.svelte\";\n\timport { getContext } from \"svelte\";\n\timport { Combo, Button } from \"@xbs/svelte-wx\";\n\n\texport let api: IApi;\n\texport let card: ICard;\n\n\tconst _ = getContext<any>(\"wx-i18n\").getGroup(\"kanban\");\n\tconst { cards: storeCards, links: storeLinks } = api.getReactiveState();\n\n\tconst relationOptions = [\n\t\t{ id: 1, relation: \"relatesTo\", master: false, label: _(\"Relates to\") },\n\t\t{\n\t\t\tid: 2,\n\t\t\trelation: \"requiredFor\",\n\t\t\tmaster: true,\n\t\t\tlabel: _(\"Is required for\"),\n\t\t},\n\t\t{\n\t\t\tid: 3,\n\t\t\trelation: \"requiredFor\",\n\t\t\tmaster: false,\n\t\t\tlabel: _(\"Depends on\"),\n\t\t},\n\t\t{ id: 4, relation: \"duplicate\", master: true, label: _(\"Duplicates\") },\n\t\t{\n\t\t\tid: 5,\n\t\t\trelation: \"duplicate\",\n\t\t\tmaster: false,\n\t\t\tlabel: _(\"Is duplicated by\"),\n\t\t},\n\t\t{ id: 6, relation: \"parent\", master: true, label: _(\"Is parent for\") },\n\t\t{ id: 7, relation: \"parent\", master: false, label: _(\"Is subtask of\") },\n\t];\n\n\tlet selectedRelationId: TID = null;\n\tlet selectedCardId: TID = null;\n\tlet cardOptions = [];\n\tlet relation: TRelationOptions = null;\n\tlet isCardSelectDisabled = true;\n\tlet addLinkMode = false;\n\n\tinterface IDisplayedLink extends ILink {\n\t\tisMaster?: boolean;\n\t\tlabel?: string;\n\t}\n\n\tlet links: IDisplayedLink[];\n\t$: links = $storeLinks\n\t\t.filter(\n\t\t\tl => isSameId(l.masterId, card.id) || isSameId(l.slaveId, card.id)\n\t\t)\n\t\t.map(l => {\n\t\t\tconst dlink: IDisplayedLink = { ...l };\n\t\t\tdlink.isMaster = isSameId(dlink.masterId, card.id);\n\t\t\tdlink.label = relationOptions.find(\n\t\t\t\to =>\n\t\t\t\t\to.relation === dlink.relation &&\n\t\t\t\t\t(dlink.relation === \"relatesTo\" ||\n\t\t\t\t\t\tdlink.isMaster === o.master)\n\t\t\t).label;\n\t\t\treturn dlink;\n\t\t});\n\n\tfunction handleAddClick(): void {\n\t\taddLinkMode = true;\n\t}\n\n\tfunction handleCancel(): void {\n\t\taddLinkMode = false;\n\t\tisCardSelectDisabled = true;\n\t\tselectedCardId = selectedRelationId = \"\";\n\t}\n\n\tfunction getRelatedCardLabel(link: IDisplayedLink): string {\n\t\tconst related = link.isMaster ? \"slaveId\" : \"masterId\";\n\t\tconst card = $storeCards.find(c => isSameId(c.id, link[related]));\n\t\treturn card.label;\n\t}\n\n\t$: {\n\t\tcardOptions =\n\t\t\tlinks && $storeCards.filter(c => !isSameId(c.id, card.id));\n\t\thandleCancel();\n\t}\n\n\tfunction filterCardOptions() {\n\t\tcardOptions = cardOptions.filter(c => {\n\t\t\treturn !links.find(\n\t\t\t\tl =>\n\t\t\t\t\t((isSameId(c.id, l.slaveId) &&\n\t\t\t\t\t\tisSameId(l.masterId, card.id)) ||\n\t\t\t\t\t\t(isSameId(c.id, l.masterId) &&\n\t\t\t\t\t\t\tisSameId(l.slaveId, card.id))) &&\n\t\t\t\t\tl.relation === relation\n\t\t\t);\n\t\t});\n\t}\n\n\tfunction handleAddLink() {\n\t\tif (selectedRelationId && selectedCardId) {\n\t\t\tconst isMaster = relationOptions.find(r =>\n\t\t\t\tisSameId(r.id, selectedRelationId)\n\t\t\t).master;\n\t\t\tapi.exec(\"add-link\", {\n\t\t\t\tlink: {\n\t\t\t\t\tmasterId: isMaster ? card.id : selectedCardId,\n\t\t\t\t\tslaveId: !isMaster ? card.id : selectedCardId,\n\t\t\t\t\trelation,\n\t\t\t\t},\n\t\t\t});\n\t\t\thandleCancel();\n\t\t}\n\t}\n\n\tfunction handleDelete(id: TID) {\n\t\tapi.exec(\"delete-link\", { id });\n\t}\n\n\tfunction handleRelationSelectorChange() {\n\t\tif (selectedRelationId)\n\t\t\trelation = relationOptions.find(r =>\n\t\t\t\tisSameId(r.id, selectedRelationId)\n\t\t\t).relation as TRelationOptions;\n\n\t\tfilterCardOptions();\n\n\t\tselectedCardId = \"\";\n\t\tisCardSelectDisabled = false;\n\t}\n\n\tfunction goToRelatedLink(link: IDisplayedLink) {\n\t\tconst related = link.isMaster ? \"slaveId\" : \"masterId\";\n\t\tapi.exec(\"select-card\", { id: link[related] });\n\t}\n\n</script>\n\n<div class=\"wx-links\">\n\t{#each links as link (link.id)}\n\t\t<div class=\"wx-link\">\n\t\t\t<div class=\"wx-link-content\">\n\t\t\t\t<div class=\"wx-relates\">{link.label}</div>\n\t\t\t\t<div class=\"wx-task\" on:click={() => goToRelatedLink(link)}>\n\t\t\t\t\t{getRelatedCardLabel(link)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"wx-delete-icon\">\n\t\t\t\t<Icon\n\t\t\t\t\tname=\"wxi-delete-outline\"\n\t\t\t\t\tclick={() => handleDelete(link.id)} />\n\t\t\t</div>\n\t\t</div>\n\t{/each}\n\n\t{#if addLinkMode}\n\t\t<div class=\"wx-set-link\">\n\t\t\t<div class=\"wx-combos-wrapper\">\n\t\t\t\t<div class=\"wx-relates-combo\">\n\t\t\t\t\t<Combo\n\t\t\t\t\t\toptions={relationOptions}\n\t\t\t\t\t\tbind:value={selectedRelationId}\n\t\t\t\t\t\tplaceholder={_('Select a relation')}\n\t\t\t\t\t\ton:select={() => handleRelationSelectorChange()}\n\t\t\t\t\t\tlet:option>\n\t\t\t\t\t\t{option.label}\n\t\t\t\t\t</Combo>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"wx-tasks-combo\">\n\t\t\t\t\t<Combo\n\t\t\t\t\t\toptions={cardOptions}\n\t\t\t\t\t\tbind:value={selectedCardId}\n\t\t\t\t\t\tplaceholder={_('Select a task')}\n\t\t\t\t\t\tdisabled={isCardSelectDisabled}\n\t\t\t\t\t\tlet:option>\n\t\t\t\t\t\t{option.label}\n\t\t\t\t\t</Combo>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"wx-btns-wrapper\">\n\t\t\t\t<div class=\"wx-cancel-btn\">\n\t\t\t\t\t<Button type=\"secondary block\" click={handleCancel}>\n\t\t\t\t\t\t{_('Cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"wx-link-btn\">\n\t\t\t\t\t<Button type=\"primary block\" click={() => handleAddLink()}>\n\t\t\t\t\t\t{_('Link Task')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\t<div class=\"wx-add-link\" on:click={handleAddClick}>\n\t\t<Icon name=\"wxi-plus\" />\n\t\t<span>{_('Add link')}</span>\n\t</div>\n</div>\n\n<style>\n\t.wx-links {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\twidth: 100%;\n\t\tgap: 12px;\n\t}\n\t.wx-link {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t}\n\t.wx-relates {\n\t\tfont-size: var(--wx-font-size-sm);\n\t\tline-height: var(--wx-line-height-sm);\n\t\tcolor: var(--wx-color-font-alt);\n\t}\n\t.wx-task {\n\t\tcursor: pointer;\n\t\tcolor: var(--wx-color-primary);\n\t\ttext-decoration: underline;\n\t}\n\t.wx-delete-icon {\n\t\tvisibility: hidden;\n\t\tcursor: pointer;\n\t}\n\t.wx-link:hover .wx-delete-icon {\n\t\tvisibility: visible;\n\t}\n\t.wx-add-link {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 4px;\n\t\tjustify-content: flex-start;\n\t\tfont-size: var(--wx-font-size);\n\t\tmargin-top: var(--wx-padding);\n\t\tmargin-bottom: var(--wx-padding);\n\t\tcolor: var(--wx-color-font-alt);\n\t\tcursor: pointer;\n\t}\n\t.wx-add-link:hover,\n\t.wx-delete-icon:hover {\n\t\topacity: 0.7;\n\t}\n\t.wx-set-link {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 8px;\n\t\twidth: 100%;\n\t}\n\t.wx-combos-wrapper {\n\t\tdisplay: flex;\n\t\tgap: 8px;\n\t}\n\t.wx-relates-combo {\n\t\tflex: 0 0 33%;\n\t}\n\t.wx-tasks-combo {\n\t\tflex: 0 0 66%;\n\t}\n\t.wx-btns-wrapper {\n\t\tdisplay: flex;\n\t\talign-self: flex-end;\n\t\tgap: 8px;\n\t}\n\t.wx-btns-wrapper .wx-link-btn {\n\t\twidth: fit-content;\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport {\n\t\tButton,\n\t\tDropdown,\n\t\tText,\n\t\tArea,\n\t\tField,\n\t\tSelect,\n\t\tCombo,\n\t\tDatePicker,\n\t\tColorPicker,\n\t\tSlider,\n\t\tLocale,\n\t} from \"@xbs/svelte-wx\";\n\n\timport {\n\t\telementsIds,\n\t\tdefaultEditorConfig,\n\t\tisSameId,\n\t\tnormalizeEditorShape,\n\t\ttype TID,\n\t} from \"@xbs/lib-kanban\";\n\n\timport type {\n\t\tINormalizedCard,\n\t\tTLocaleGroup,\n\t\tTEditorShape,\n\t\tIEditConfig,\n\t\tICardShape,\n\t} from \"@xbs/lib-kanban\";\n\n\timport { form } from \"@xbs/lib-svelte\";\n\timport en from \"../en\";\n\timport { en as coreEn } from \"@xbs/wx-core-locales\";\n\n\timport FilesControl from \"../lib/FilesControl.svelte\";\n\timport UserIcon from \"../lib/UserIcon.svelte\";\n\timport DateRangePicker from \"../lib/DateRangePicker.svelte\";\n\timport MultiCombo from \"../lib/Multicombo.svelte\";\n\timport InlineLocale from \"../lib/InlineLocale.svelte\";\n\timport Icon from \"../lib/Icon.svelte\";\n\timport Comments from \"./Comments.svelte\";\n\timport Links from \"./Links.svelte\";\n\n\timport type { ICard, IApi, IKanbanEditorConfig } from \"@xbs/lib-kanban\";\n\timport type { Writable } from \"svelte/store\";\n\n\texport let config: IKanbanEditorConfig = defaultEditorConfig;\n\texport let shape: TEditorShape[] = null;\n\texport let api: IApi | undefined;\n\n\t$: {\n\t\tconfig = { ...defaultEditorConfig, ...config };\n\t}\n\n\tlet editCard = null;\n\tlet edit: Writable<IEditConfig> = null;\n\tlet cardShape: Writable<ICardShape> = null;\n\tlet editorShape: TEditorShape[] = null;\n\tlet cards: Writable<INormalizedCard[]> = null;\n\tlet dragItemId: Writable<TID> = null;\n\tlet currentUser: Writable<TID> = null;\n\t$: {\n\t\tif (api) {\n\t\t\tif (!edit && !cardShape) {\n\t\t\t\tconst rState = api.getReactiveState();\n\t\t\t\tedit = rState.edit;\n\t\t\t\tcardShape = rState.cardShape;\n\t\t\t\tcards = rState.cards;\n\t\t\t\tdragItemId = rState.dragItemId;\n\t\t\t\tcurrentUser = rState.currentUser;\n\t\t\t}\n\t\t}\n\t}\n\n\t$: editCard =\n\t\t!$dragItemId &&\n\t\tcards &&\n\t\t$cards.find(c => isSameId(c.id, $edit?.cardId));\n\t$: editorShape = cardShape && normalizeEditorShape(shape, $cardShape);\n\n\tlet formValues: ICard;\n\tfunction saveForm() {\n\t\tif (formValues) {\n\t\t\tapi.exec(\"update-card\", {\n\t\t\t\tcard: { ...formValues },\n\t\t\t\tid: formValues.id,\n\t\t\t});\n\t\t}\n\t}\n\tconst values = form(\n\t\t{},\n\t\tval => {\n\t\t\tformValues = val;\n\t\t\tif (config.autoSave) {\n\t\t\t\tsaveForm();\n\t\t\t}\n\t\t},\n\t\t{ debounce: config.debounce }\n\t);\n\t$: editorShape && values.reset(setDefaults(editCard));\n\n\tfunction setDefaults(obj: any) {\n\t\tconst copy = { ...obj };\n\t\teditorShape.forEach(f => {\n\t\t\tif (typeof copy[f.key] === \"undefined\") {\n\t\t\t\tif (typeof copy[f.key] === \"undefined\") {\n\t\t\t\t\tif (f.type === \"files\") {\n\t\t\t\t\t\tcopy[f.key] = [];\n\t\t\t\t\t} else if (f.type === \"date\") {\n\t\t\t\t\t\tcopy[f.key] = null;\n\t\t\t\t\t} else if (f.type === \"progress\") {\n\t\t\t\t\t\tcopy[f.key] = 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcopy[f.key] = \"\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn copy;\n\t}\n\tfunction handleClose() {\n\t\tapi.exec(\"set-edit\", null);\n\t}\n\tlet _: TLocaleGroup;\n\n\tlet view = \"main\";\n\tfunction handleViewChange(v: string) {\n\t\tview = v;\n\t}\n\n\tlet votersList = false;\n\n\tfunction handleVote() {\n\t\tconst cardId = editCard.id;\n\t\tif (editCard.votes?.includes($currentUser))\n\t\t\tapi.exec(\"delete-vote\", { cardId });\n\t\telse api.exec(\"add-vote\", { cardId });\n\t}\n\n\tlet users = [];\n\tlet voters = [];\n\t$: {\n\t\tif (api) {\n\t\t\tconst userConfig = api.getState().cardShape.users;\n\t\t\tif (userConfig?.values?.length) {\n\t\t\t\tusers = userConfig.values;\n\t\t\t\tif ($values?.votes?.length) {\n\t\t\t\t\tvoters = $values.votes.map(v => users.find(u => u.id == v));\n\t\t\t\t} else {\n\t\t\t\t\tvoters = [];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n</script>\n\n<Locale words={{ ...coreEn, ...en }} optional>\n\t<InlineLocale bind:_ />\n\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t<div\n\t\tclass=\"wx-editor\"\n\t\tclass:wx-editor-open={editCard}\n\t\tdata-kanban-id={elementsIds.editor}\n\t\ton:click|stopPropagation>\n\t\t{#if _ && editCard}\n\t\t\t<div class=\"wx-editor-controls-wrapper\">\n\t\t\t\t{#if view === 'main' && !config.autoSave}\n\t\t\t\t\t<Button type=\"primary wx-editor-btn\" click={saveForm}>\n\t\t\t\t\t\t{_('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t{/if}\n\t\t\t\t<div class=\"wx-editor-controls\">\n\t\t\t\t\t{#if view === 'main'}\n\t\t\t\t\t\t{#if $cardShape.votes?.show}\n\t\t\t\t\t\t\t<div class=\"wx-kanban-editor-voting\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"wx-kanban-editor-vote\"\n\t\t\t\t\t\t\t\t\tclass:wx-kanban-editor-voted={editCard.votes?.includes($currentUser)}\n\t\t\t\t\t\t\t\t\ton:mouseenter={() => (votersList = true)}\n\t\t\t\t\t\t\t\t\ton:mouseleave={() => (votersList = false)}>\n\t\t\t\t\t\t\t\t\t<Button click={handleVote}>\n\t\t\t\t\t\t\t\t\t\t<Icon name=\"wxi-like\" />\n\t\t\t\t\t\t\t\t\t\t{editCard.votes?.length || 0}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{#if votersList && voters?.length}\n\t\t\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\t\t\twidth=\"230px\"\n\t\t\t\t\t\t\t\t\t\tcancel={() => (votersList = false)}>\n\t\t\t\t\t\t\t\t\t\t<div class=\"wx-kanban-voters-list\">\n\t\t\t\t\t\t\t\t\t\t\t{#each voters as user (user.id)}\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"wx-multiselect-option\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<UserIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={'small'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata={user} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"wx-multiselect-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{user.label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<Icon name=\"wxi-close\" click={handleClose} />\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<Button click={() => handleViewChange('main')}>\n\t\t\t\t\t\t\t{_('Back')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{#if view === 'main'}\n\t\t\t\t<div class=\"wx-kanban-editor-main\">\n\t\t\t\t\t{#each editorShape as field (field.id)}\n\t\t\t\t\t\t{#if field.type === 'text'}\n\t\t\t\t\t\t\t<Field label={_(field.label)} position=\"top\" let:id>\n\t\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\t\t{id}\n\t\t\t\t\t\t\t\t\tbind:value={$values[field.key]}\n\t\t\t\t\t\t\t\t\tfocus\n\t\t\t\t\t\t\t\t\t{...field.config} />\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{:else if field.type === 'textarea'}\n\t\t\t\t\t\t\t<Field label={_(field.label)} position=\"top\" let:id>\n\t\t\t\t\t\t\t\t<Area\n\t\t\t\t\t\t\t\t\t{id}\n\t\t\t\t\t\t\t\t\tbind:value={$values[field.key]}\n\t\t\t\t\t\t\t\t\t{...field.config} />\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{:else if field.type === 'progress'}\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tlabel={`${_(field.label)} ${$values[field.key]}%`}\n\t\t\t\t\t\t\t\tposition=\"top\"\n\t\t\t\t\t\t\t\tlet:id>\n\t\t\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\t\t\t{id}\n\t\t\t\t\t\t\t\t\tbind:value={$values[field.key]}\n\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t{...field.config} />\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{:else if field.type === 'combo'}\n\t\t\t\t\t\t\t<Field label={_(field.label)} position=\"top\" let:id>\n\t\t\t\t\t\t\t\t<Combo\n\t\t\t\t\t\t\t\t\t{id}\n\t\t\t\t\t\t\t\t\toptions={field.values}\n\t\t\t\t\t\t\t\t\tbind:value={$values[field.key]}\n\t\t\t\t\t\t\t\t\tlet:option\n\t\t\t\t\t\t\t\t\t{...field.config}>\n\t\t\t\t\t\t\t\t\t<div class=\"wx-combo-option\">\n\t\t\t\t\t\t\t\t\t\t{#if option.color}\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"wx-color\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"background:{option.color}\" />\n\t\t\t\t\t\t\t\t\t\t{:else if option.avatar || option.avatarColor}\n\t\t\t\t\t\t\t\t\t\t\t<UserIcon data={option} />\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Combo>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{:else if field.type === 'select'}\n\t\t\t\t\t\t\t<Field label={_(field.label)} position=\"top\" let:id>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t{id}\n\t\t\t\t\t\t\t\t\tbind:value={$values[field.key]}\n\t\t\t\t\t\t\t\t\toptions={field.values}\n\t\t\t\t\t\t\t\t\t{...field.config} />\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{:else if field.type === 'color'}\n\t\t\t\t\t\t\t<Field label={_(field.label)} position=\"top\" let:id>\n\t\t\t\t\t\t\t\t<ColorPicker\n\t\t\t\t\t\t\t\t\t{id}\n\t\t\t\t\t\t\t\t\tbind:value={$values[field.key]}\n\t\t\t\t\t\t\t\t\tcolors={field.values}\n\t\t\t\t\t\t\t\t\t{...field.config} />\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{:else if field.type === 'multiselect'}\n\t\t\t\t\t\t\t<Field label={_(field.label)} position=\"top\">\n\t\t\t\t\t\t\t\t<MultiCombo\n\t\t\t\t\t\t\t\t\tbind:values={$values[field.key]}\n\t\t\t\t\t\t\t\t\tcheckboxes\n\t\t\t\t\t\t\t\t\toptions={field.values}\n\t\t\t\t\t\t\t\t\tlet:option\n\t\t\t\t\t\t\t\t\t{...field.config}>\n\t\t\t\t\t\t\t\t\t<div class=\"wx-multiselect-option\">\n\t\t\t\t\t\t\t\t\t\t<UserIcon data={option} />\n\t\t\t\t\t\t\t\t\t\t<span class=\"wx-multiselect-label\">\n\t\t\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</MultiCombo>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{:else if field.type === 'date'}\n\t\t\t\t\t\t\t<Field label={_(field.label)} position=\"top\" let:id>\n\t\t\t\t\t\t\t\t<DatePicker\n\t\t\t\t\t\t\t\t\t{id}\n\t\t\t\t\t\t\t\t\tformat={field.format || '%m/%d/%Y'}\n\t\t\t\t\t\t\t\t\tbind:value={$values[field.key]}\n\t\t\t\t\t\t\t\t\t{...field.config} />\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{:else if field.type === 'dateRange'}\n\t\t\t\t\t\t\t<Field label={_(field.label)} position=\"top\" let:id>\n\t\t\t\t\t\t\t\t<DateRangePicker\n\t\t\t\t\t\t\t\t\t{id}\n\t\t\t\t\t\t\t\t\tformat={field.format || '%m/%d/%Y'}\n\t\t\t\t\t\t\t\t\tbind:start={$values[field.key.start]}\n\t\t\t\t\t\t\t\t\tbind:end={$values[field.key.end]} />\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{:else if field.type === 'files'}\n\t\t\t\t\t\t\t<div class=\"files\">\n\t\t\t\t\t\t\t\t<Field label={_(field.label)} position=\"top\">\n\t\t\t\t\t\t\t\t\t<FilesControl {field} {values} />\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else if field.type === 'links'}\n\t\t\t\t\t\t\t<Field label={_(field.label)} position=\"top\">\n\t\t\t\t\t\t\t\t<Links card={editCard} {api} />\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{:else if field.type === 'comments' && users.length}\n\t\t\t\t\t\t\t<div class=\"wx-card-comments\">\n\t\t\t\t\t\t\t\t<Field label={_(field.label)} position=\"top\">\n\t\t\t\t\t\t\t\t\t{#if field.config?.placement === 'editor'}\n\t\t\t\t\t\t\t\t\t\t<Comments\n\t\t\t\t\t\t\t\t\t\t\tcard={editCard}\n\t\t\t\t\t\t\t\t\t\t\t{api}\n\t\t\t\t\t\t\t\t\t\t\t{users}\n\t\t\t\t\t\t\t\t\t\t\tshape={field} />\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"primary block\"\n\t\t\t\t\t\t\t\t\t\t\tclick={() => handleViewChange('comments')}>\n\t\t\t\t\t\t\t\t\t\t\t{_('Show comments')}\n\t\t\t\t\t\t\t\t\t\t\t({editCard.comments?.length || 0})\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t{:else if view === 'comments'}\n\t\t\t\t<Comments\n\t\t\t\t\tcard={editCard}\n\t\t\t\t\t{api}\n\t\t\t\t\t{users}\n\t\t\t\t\tshape={editorShape.find(field => field.type === 'comments')} />\n\t\t\t{/if}\n\t\t{/if}\n\t</div>\n</Locale>\n\n<style>\n\t.wx-editor {\n\t\tbackground: var(--wx-kanban-editor-background);\n\t\tpadding: var(--wx-modal-padding);\n\t\twidth: 100%;\n\t\tmin-width: 100%;\n\t\theight: var(--wx-kanban-editor-height);\n\t}\n\n\t.wx-editor-controls-wrapper {\n\t\tdisplay: flex;\n\t\tmargin-bottom: 22px;\n\t}\n\n\t.wx-editor-controls {\n\t\tdisplay: flex;\n\t\tgap: 12px;\n\t\tjustify-content: flex-end;\n\t\twidth: 100%;\n\t}\n\n\t.wx-editor-controls-wrapper :global(.wx-editor-btn) {\n\t\tflex: 0 0 auto;\n\t}\n\n\t.wx-multiselect-option {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t.wx-kanban-editor-voting .wx-multiselect-option:not(:last-child) {\n\t\tmargin-bottom: 12px;\n\t}\n\n\t.wx-multiselect-label {\n\t\tpadding: 0 5px;\n\t}\n\t.wx-combo-option {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 12px;\n\t}\n\t.wx-color {\n\t\tborder-radius: 50%;\n\t\twidth: 20px;\n\t\theight: 20px;\n\t\tmargin-right: 10px;\n\t}\n\n\t.wx-card-comments {\n\t\twidth: calc(100% + var(--wx-kanban-editor-x-padding) * 2);\n\t\tpadding: var(--wx-padding) var(--wx-kanban-editor-x-padding);\n\t\tmargin: 0 calc(-1 * var(--wx-kanban-editor-x-padding));\n\t\tbackground: var(--wx-kanban-background);\n\t}\n\n\t.wx-kanban-editor-voting {\n\t\tposition: relative;\n\t}\n\n\t.wx-kanban-editor-vote :global(button) {\n\t\tdisplay: flex;\n\t\tgap: 4px;\n\t\tpadding: 5px;\n\t}\n\n\t.wx-kanban-editor-vote.wx-kanban-editor-voted :global(button i) {\n\t\tcolor: var(--wx-color-primary);\n\t}\n\n\t.wx-kanban-voters-list {\n\t\tpadding: var(--wx-padding);\n\t}\n\n\t/* [todo] create similar functionality in svelte-ws */\n\t:global(.wx-editor-controls .wx-list-item) {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tmargin: 5px 0;\n\t}\n\t:global(.wx-editor-controls .wx-hover) {\n\t\tcursor: pointer;\n\t}\n\t:global(.wx-kanban > .wx-editor label) {\n\t\tpadding-left: 0;\n\t}\n\t.files :global(.field-control .label) {\n\t\tdisplay: block;\n\t}\n\n\t.files :global(.field-control .dropzone) {\n\t\theight: 68px;\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport {\n\t\telementsIds,\n\t\tdefaultEditorConfig,\n\t\ttype TEditorShape,\n\t} from \"@xbs/lib-kanban\";\n\timport type { IApi, IKanbanEditorConfig } from \"@xbs/lib-kanban\";\n\timport Editor from \"./Editor.svelte\";\n\n\texport let config: IKanbanEditorConfig = defaultEditorConfig;\n\texport let api: IApi;\n\texport let shape: TEditorShape[];\n\n\tconst { edit } = api.getReactiveState();\n\n\t$: editCard = api.getCard($edit?.cardId);\n\n\t$: {\n\t\tconfig = { ...defaultEditorConfig, ...config };\n\t}\n\n</script>\n\n<div\n\tclass=\"wx-sidebar\"\n\tclass:wx-sidebar-open={!!editCard}\n\tdata-kanban-id={elementsIds.editor}\n\ton:click|stopPropagation>\n\t<Editor {api} {config} {shape} />\n</div>\n\n<style>\n\t.wx-sidebar {\n\t\tbackground: var(--wx-kanban-editor-background);\n\t\twidth: 0;\n\t\tmin-width: 0;\n\t\theight: auto;\n\t\ttransition: width 0.1s, min-width 0.1s;\n\t\toverflow-y: auto;\n\t\toverflow-x: hidden;\n\t\tz-index: 999999;\n\t}\n\t.wx-sidebar-open {\n\t\twidth: var(--wx-kanban-editor-width);\n\t\tmin-width: var(--wx-kanban-editor-width);\n\t\tbox-shadow: var(--wx-kanban-shadow);\n\t\tborder-left: var(--wx-kanban-box-border);\n\t\tborder-top: var(--wx-kanban-editor-top-border);\n\t}\n\n</style>\n","<script type=\"ts\">\n\timport { getContext, tick } from \"svelte\";\n\n\timport Row from \"./Row.svelte\";\n\timport Column from \"./Column.svelte\";\n\timport ColumnsHeader from \"./ColumnsHeader.svelte\";\n\n\timport type {\n\t\tINormalizedCard,\n\t\tICardShape,\n\t\tTMenuItemsFn,\n\t\tIApi,\n\t\tTEditorShape,\n\t\tIKanbanEditorConfig,\n\t\tTLayoutType,\n\t} from \"@xbs/lib-kanban\";\n\n\timport { ContextMenu } from \"@xbs/svelte-menu\";\n\n\timport {\n\t\tdndAction,\n\t\tselection,\n\t\tscroll,\n\t\tkeyManager,\n\t\tgetAreaId,\n\t\telementsIds,\n\t} from \"@xbs/lib-kanban\";\n\timport VirtualContent from \"./VirtualContent.svelte\";\n\timport EditorContainer from \"./EditorContainer.svelte\";\n\n\texport let editorShape: TEditorShape[];\n\texport let cardTemplate;\n\texport let layout: TLayoutType;\n\texport let editor: IKanbanEditorConfig;\n\texport let api: IApi;\n\n\tlet contentEl: HTMLElement;\n\tconst _ = getContext<any>(\"wx-i18n\").getGroup(\"kanban\");\n\n\tlet {\n\t\tcolumns: storeColumns,\n\t\trowKey: storeRowKey,\n\t\trows: storeRows,\n\t\treadonly: storeReadonly,\n\t\tdragItemId: movedCardId,\n\t\tareasMeta,\n\t\tcardsMap,\n\t\tcardShape: rCardShape,\n\t\tcards: rCards,\n\t} = api.getReactiveState();\n\n\t$: ({ edit, select, dnd } = $storeReadonly);\n\n\tconst { showModal } = getContext<any>(\"wx-helpers\");\n\tlet showMenu = null;\n\tlet menuItems = [];\n\tconst cardMenuItems = {};\n\tconst isMenuVisible = {};\n\t$: {\n\t\t$rCards.forEach(card => {\n\t\t\tcardMenuItems[card.id] = getMenuItems(card, $rCardShape);\n\t\t\tisMenuVisible[card.id] = !!(\n\t\t\t\t$rCardShape.menu.show && cardMenuItems[card.id]?.length\n\t\t\t);\n\t\t});\n\t}\n\n\tfunction resolver(id) {\n\t\tconst card = $rCards.find(c => c.id == id);\n\t\tif (card) {\n\t\t\tif (api.getState().selected?.length > 1) {\n\t\t\t\tapi.exec(\"select-card\", { id: parseInt(id) });\n\t\t\t}\n\t\t\tmenuItems = cardMenuItems[card.id] || [];\n\t\t}\n\t\treturn card;\n\t}\n\n\tconst getMenuItems = (card: INormalizedCard, cardShape: ICardShape) => {\n\t\tconst menuItems = (\n\t\t\tcardShape.menu.items as TMenuItemsFn<{ card: INormalizedCard }>\n\t\t)({\n\t\t\tcard,\n\t\t});\n\n\t\tif (!menuItems || !menuItems.length) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn menuItems.map(item => {\n\t\t\treturn {\n\t\t\t\t...item,\n\t\t\t\ttext: _(item.text),\n\t\t\t};\n\t\t});\n\t};\n\n\tfunction handleMenuAction(e: any) {\n\t\tconst { action, item } = e.detail;\n\n\t\tif (action) {\n\t\t\tif (action.onClick) {\n\t\t\t\taction.onClick({\n\t\t\t\t\tid: action.id,\n\t\t\t\t\titem: action,\n\t\t\t\t\tcard: item,\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch (action.id) {\n\t\t\t\tcase \"delete-card\":\n\t\t\t\t\tshowModal({\n\t\t\t\t\t\tmessage: _(\"Would you like to delete this card?\"),\n\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tapi.exec(\"delete-card\", { id: item.id });\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t/* handling cancel */\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"set-edit\":\n\t\t\t\t\tapi.exec(\"set-edit\", { cardId: item.id });\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"duplicate-card\":\n\t\t\t\t\tapi.exec(\"duplicate-card\", {\n\t\t\t\t\t\tid: item.id,\n\t\t\t\t\t\tcard: {\n\t\t\t\t\t\t\tlabel: `${_(\"Duplicate of\")} ${item.label}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n</script>\n\n<div\n\tclass=\"wx-kanban\"\n\tclass:wx-dragged={!!$movedCardId}\n\tdata-wx-widget={elementsIds.kanban}\n\tuse:dndAction={{ api, readonly: dnd === false }}\n\tuse:keyManager={{ api, readonly: edit === false, locale: _ }}\n\tuse:scroll={{ api, tick }}>\n\t<div\n\t\tclass=\"wx-content-wrapper\"\n\t\tclass:wx-virtual-content={layout === 'default:lazy'}\n\t\tdata-kanban-id={elementsIds.content}\n\t\tuse:selection={{ api, readonly: select === false }}>\n\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t\t<div\n\t\t\tclass=\"wx-content\"\n\t\t\tclass:wx-virtual-content={layout === 'default:lazy'}\n\t\t\tdata-kanban-id={elementsIds.scrollableContent}\n\t\t\tbind:this={contentEl}\n\t\t\ton:click={showMenu}>\n\t\t\t{#if layout === 'default:lazy'}\n\t\t\t\t<VirtualContent\n\t\t\t\t\t{api}\n\t\t\t\t\tlet:startIndex\n\t\t\t\t\tlet:endIndex\n\t\t\t\t\tlet:byRow\n\t\t\t\t\tlet:virtualContentEl>\n\t\t\t\t\t<ColumnsHeader\n\t\t\t\t\t\tcolumns={$storeColumns}\n\t\t\t\t\t\tareasMeta={$areasMeta}\n\t\t\t\t\t\ton:action\n\t\t\t\t\t\tcontentEl={virtualContentEl}\n\t\t\t\t\t\t{api} />\n\t\t\t\t\t{#if $storeColumns.length}\n\t\t\t\t\t\t{#each $storeRows as row (row.id)}\n\t\t\t\t\t\t\t{#if byRow[row.id].visible}\n\t\t\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\t\t\t{row}\n\t\t\t\t\t\t\t\t\trows={$storeRows}\n\t\t\t\t\t\t\t\t\tcollapsable={!!$storeRowKey}\n\t\t\t\t\t\t\t\t\ton:action\n\t\t\t\t\t\t\t\t\t{api}>\n\t\t\t\t\t\t\t\t\t{#each $storeColumns as column (column.id)}\n\t\t\t\t\t\t\t\t\t\t<Column\n\t\t\t\t\t\t\t\t\t\t\t{api}\n\t\t\t\t\t\t\t\t\t\t\ton:action\n\t\t\t\t\t\t\t\t\t\t\t{column}\n\t\t\t\t\t\t\t\t\t\t\t{row}\n\t\t\t\t\t\t\t\t\t\t\tareaMeta={$areasMeta[getAreaId(column.id, row.id)]}\n\t\t\t\t\t\t\t\t\t\t\tcards={byRow[row.id] ? $cardsMap[getAreaId(column.id, row.id)]?.slice(byRow[row.id].startIndex, byRow[row.id].endIndex) : $cardsMap[getAreaId(column.id, row.id)]?.slice(startIndex, endIndex)}\n\t\t\t\t\t\t\t\t\t\t\t{cardTemplate}\n\t\t\t\t\t\t\t\t\t\t\t{isMenuVisible} />\n\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t{/if}\n\t\t\t\t</VirtualContent>\n\t\t\t{:else}\n\t\t\t\t<ColumnsHeader\n\t\t\t\t\tcolumns={$storeColumns}\n\t\t\t\t\tareasMeta={$areasMeta}\n\t\t\t\t\ton:action\n\t\t\t\t\t{contentEl}\n\t\t\t\t\t{api} />\n\t\t\t\t{#if $storeColumns.length}\n\t\t\t\t\t{#each $storeRows as row (row.id)}\n\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\t{row}\n\t\t\t\t\t\t\trows={$storeRows}\n\t\t\t\t\t\t\tcollapsable={!!$storeRowKey}\n\t\t\t\t\t\t\ton:action\n\t\t\t\t\t\t\t{api}>\n\t\t\t\t\t\t\t{#each $storeColumns as column (column.id)}\n\t\t\t\t\t\t\t\t<Column\n\t\t\t\t\t\t\t\t\t{api}\n\t\t\t\t\t\t\t\t\ton:action\n\t\t\t\t\t\t\t\t\t{column}\n\t\t\t\t\t\t\t\t\t{row}\n\t\t\t\t\t\t\t\t\tareaMeta={$areasMeta[getAreaId(column.id, row.id)]}\n\t\t\t\t\t\t\t\t\tcards={$cardsMap[getAreaId(column.id, row.id)]}\n\t\t\t\t\t\t\t\t\t{cardTemplate}\n\t\t\t\t\t\t\t\t\t{isMenuVisible} />\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t{/each}\n\t\t\t\t{/if}\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n\t{#if edit && !$movedCardId && editor.show !== false}\n\t\t<EditorContainer {api} config={editor} shape={editorShape} />\n\t{/if}\n</div>\n\n<ContextMenu\n\tat={'left-bottom'}\n\toptions={menuItems}\n\tbind:handler={showMenu}\n\t{resolver}\n\tdataKey=\"menuId\"\n\ton:click={handleMenuAction} />\n\n<style>\n\t.wx-kanban * {\n\t\tbox-sizing: border-box;\n\t}\n\t.wx-kanban {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tposition: relative;\n\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tmax-width: 100%;\n\t\tmax-height: 100%;\n\n\t\tbackground: var(--wx-kanban-background);\n\t\tcolor: var(--wx-color-font);\n\t\toverflow: hidden;\n\n\t\tz-index: var(--wx-kanban-z-index);\n\t}\n\t:global(.wx-dragged *) {\n\t\tuser-select: none;\n\t}\n\t:global(.wx-dragged .wx-content-wrapper) {\n\t\toverflow: hidden;\n\t}\n\t.wx-content-wrapper {\n\t\tdisplay: flex;\n\t\tflex: 1 1 auto;\n\t\toverflow: auto;\n\t\tposition: relative;\n\t}\n\t.wx-content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\tflex: 1 1 auto;\n\n\t\tposition: relative;\n\t\theight: max-content;\n\t\tpadding-bottom: var(--wx-padding);\n\t}\n\t.wx-virtual-content {\n\t\theight: 100%;\n\t\tmax-width: 100%;\n\t\toverflow: hidden;\n\t\tpadding-bottom: 0;\n\t}\n\t:global(.wx-kanban .wx-dragged-card) {\n\t\tcolor: var(--wx-color-font);\n\t\twidth: var(--wx-kanban-column-width);\n\t\tmin-height: 70px;\n\t\tposition: fixed;\n\t\tz-index: 999999;\n\t\tuser-select: none;\n\t\tpointer-events: none;\n\n\t\tbox-shadow: var(--wx-kanban-shadow);\n\t}\n\t:global(.wx-kanban .wx-dragged-card:after) {\n\t\tcontent: var(--wx-kanban-dragged-cards-count);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 30px;\n\t\theight: 30px;\n\t\tbackground: var(--wx-color-primary);\n\t\tcolor: var(--wx-color-primary-font);\n\t\tposition: absolute;\n\t\tborder-radius: 50%;\n\t\ttop: -10px;\n\t\tright: -10px;\n\t\tz-index: 1;\n\t}\n\t:global(.wx-ondrag) {\n\t\toverflow: hidden;\n\t}\n\n\t/** [todo] We should probably move this to svelte-menu */\n\t:global(.menu .item) {\n\t\twhite-space: nowrap;\n\t}\n\n\t:global(.menu .item.disabled) {\n\t\tpointer-events: none;\n\t}\n\t:global(.menu .item.disabled .value) {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport en from \"../en\";\n\timport { en as coreEn } from \"@xbs/wx-core-locales\";\n\n\timport type {\n\t\tICard,\n\t\tIColumn,\n\t\tTEditorShape,\n\t\tIRow,\n\t\tTHandlersConfig,\n\t\tTReadonlyConfig,\n\t\tTRenderType,\n\t\tTScrollType,\n\t\tTLayoutType,\n\t\tTCardShape,\n\t\tTColumnShape,\n\t\tTRowShape,\n\t\tILink,\n\t\tIKanbanEditorConfig,\n\t\tTID,\n\t} from \"@xbs/lib-kanban\";\n\n\timport type { IEventBus } from \"@xbs/lib-state\";\n\timport { EventBusRouter } from \"@xbs/lib-state\";\n\n\timport { Globals, Locale } from \"@xbs/svelte-wx\";\n\timport { createEventDispatcher } from \"svelte\";\n\timport { writable } from \"svelte/store\";\n\n\timport {\n\t\tgetApi,\n\t\tdefaultCardShape,\n\t\tDataStore,\n\t\tdefaultEditorConfig,\n\t} from \"@xbs/lib-kanban\";\n\n\timport Layout from \"./Layout.svelte\";\n\n\texport let columns: IColumn[];\n\texport let rows: IRow[] = null;\n\texport let cards: ICard[];\n\texport let cardShape: TCardShape = defaultCardShape;\n\texport let columnShape: TColumnShape = null;\n\texport let rowShape: TRowShape = null;\n\texport let editorShape: TEditorShape[] = null;\n\texport let readonly: TReadonlyConfig = false;\n\texport let columnKey = \"column\";\n\texport let rowKey = \"\";\n\texport let scrollType: TScrollType = \"default\";\n\texport let renderType: TRenderType = \"default\";\n\texport let cardHeight: number | null = null;\n\texport let cardTemplate = null;\n\texport let editor: IKanbanEditorConfig = defaultEditorConfig;\n\texport let history = true;\n\texport let currentUser: TID = null;\n\texport let links: ILink[] = null;\n\n\t/** @deprecated use editor.autoSave instead */\n\texport let editorAutoSave = true;\n\t$: {\n\t\tif (editorAutoSave === false) {\n\t\t\teditor.autoSave = false;\n\t\t}\n\t}\n\n\tconst dispatch = createEventDispatcher();\n\tconst dataStore = new DataStore(x => writable(x), { history });\n\tlet lastInRoute: IEventBus<THandlersConfig> = new EventBusRouter(\n\t\tdispatch as any\n\t);\n\n\tdataStore.out.setNext(lastInRoute.exec);\n\texport const api = getApi(dataStore, lastInRoute);\n\n\t$: {\n\t\tdataStore.init({\n\t\t\tcolumnKey,\n\t\t\trowKey,\n\t\t\tcolumns,\n\t\t\trows,\n\t\t\tcards,\n\t\t\tcardsMap: {},\n\t\t\tcardsMeta: {},\n\t\t\tcardShape,\n\t\t\tcolumnShape,\n\t\t\trowShape,\n\t\t\treadonly,\n\t\t\tlayout,\n\t\t\tcardHeight,\n\t\t\tcurrentUser,\n\t\t\tlinks,\n\t\t});\n\t}\n\n\t$: layout = `${scrollType}:${renderType}` as TLayoutType;\n\n\tconst handleAction = ({ detail: { action, data } }) => {\n\t\tapi.exec(action, data);\n\t};\n\n</script>\n\n<Locale words={{ ...coreEn, ...en }} optional>\n\t<Globals>\n\t\t<Layout\n\t\t\t{api}\n\t\t\t{editorShape}\n\t\t\t{cardTemplate}\n\t\t\t{layout}\n\t\t\t{editor}\n\t\t\ton:action={handleAction} />\n\t</Globals>\n</Locale>\n","import { getAreaId } from \"./helpers\";\nimport { ExportManager } from \"./ExportManager\";\nexport function getApi(dataStore, lastInRoute) {\n    let lastRoute = lastInRoute;\n    return {\n        exec: dataStore.in.exec.bind(dataStore.in),\n        on: dataStore.out.on.bind(dataStore.out),\n        intercept: dataStore.in.on.bind(dataStore.in),\n        getState: dataStore.getState.bind(dataStore),\n        getReactiveState: dataStore.getReactive.bind(dataStore),\n        setNext: (ev) => {\n            lastRoute.setNext(ev.exec);\n            lastRoute = ev;\n        },\n        getStores: () => ({ data: dataStore }),\n        getCard: id => {\n            const { cards } = dataStore.getState();\n            return cards.find(card => card.id == id);\n        },\n        serialize: () => {\n            const { cards, links, columns, rows } = dataStore.getState();\n            return {\n                cards,\n                links,\n                columns,\n                rows,\n            };\n        },\n        export: new ExportManager(dataStore),\n        undo: dataStore.undo.bind(dataStore),\n        redo: dataStore.redo.bind(dataStore),\n        getAreaCards: (columnId, rowId) => {\n            const { cardsMap } = dataStore.getState();\n            const areaId = getAreaId(columnId, rowId);\n            return cardsMap[areaId];\n        },\n    };\n}\n//# sourceMappingURL=api.js.map","<script>\n\timport { Material } from \"@xbs/svelte-wx\";\n\n\texport let fonts = true;\n\tconst SLOTS = $$slots;\n\n</script>\n\n{#if SLOTS && SLOTS.default}\n\t<Material {fonts}>\n\t\t<slot />\n\t</Material>\n{:else}\n\t<Material {fonts} />\n{/if}\n\n<style global>\n\t.wx-material-theme * {\n\t\tbox-sizing: border-box;\n\t}\n\t.wx-material-theme {\n\t\t--wx-field-width: 100%;\n\t\t--wx-theme-name: material;\n\n\t\t/* Kanban */\n\t\t--wx-kanban-background: #f1f1f1;\n\n\t\t--wx-kanban-column-width: 300px;\n\t\t--wx-kanban-column-height: 300px;\n\n\t\t--wx-kanban-toolbar-height: 56px;\n\t\t--wx-kanban-toolbar-align: center;\n\t\t--wx-kanban-toolbar-justify: flex-start;\n\t\t--wx-kanban-toolbar-control-hover: rgba(0, 0, 0, 0.07);\n\t\t--wx-kanban-toolbar-control-active: rgba(0, 0, 0, 0.15);\n\t\t--wx-kanban-toolbar-border: var(--wx-border);\n\n\t\t--wx-kanban-card-field-padding: 12px;\n\t\t--wx-kanban-content-background: var(--wx-background);\n\t\t--wx-kanban-card-border: var(--wx-border);\n\t\t--wx-kanban-card-border-radius: 6px;\n\t\t--wx-kanban-header-border-radius: var(--wx-kanban-card-border-radius);\n\n\t\t--wx-kanban-row-line: var(--wx-border);\n\n\t\t--wx-kanban-user-icon-size: 36px;\n\n\t\t--wx-kanban-header-height: 64px;\n\t\t--wx-kanban-editor-width: 569px;\n\t\t--wx-kanban-editor-height: auto;\n\t\t--wx-kanban-editor-x-padding: 20px;\n\t\t--wx-kanban-editor-background: var(--wx-kanban-content-background);\n\t\t--wx-kanban-editor-top-border: none;\n\n\t\t--wx-kanban-over-limit-color: var(--wx-color-danger);\n\t\t--wx-kanban-collapsed-column-width: 44px;\n\t\t--wx-kanban-z-index: 1;\n\n\t\t--wx-progress-height: 4px;\n\t\t--wx-kanban-progress-inactive-color: #dbdbdb;\n\n\t\t--wx-kanban-menu-min-width: 100px;\n\n\t\t--wx-kanban-shadow: none;\n\t\t--wx-kanban-box-border: var(--wx-border);\n\n\t\t--wx-kanban-collapsed-padding: var(--wx-padding);\n\t\t--wx-kanban-collapsed-margin: 0px;\n\t\t--wx-kanban-collapsed-background: transparent;\n\t\t--wx-kanban-collapsed-background-hover: #dfdfdf;\n\t\t/* End Kanban */\n\t}\n\n\t.wx-styled-scroll {\n\t\t--wx-styled-scroll-track-color: #fafafa;\n\t\t--wx-styled-scroll-thumb-color: #babac0;\n\t\t--wx-styled-scroll-width: 16px;\n\t}\n\t.wx-styled-scroll * {\n\t\tscrollbar-width: thin;\n\t}\n\t.wx-styled-scroll *::-webkit-scrollbar {\n\t\twidth: var(--wx-styled-scroll-width);\n\t}\n\t.wx-styled-scroll *::-webkit-scrollbar-track {\n\t\tbackground-color: var(--wx-styled-scroll-track-color);\n\t}\n\t.wx-styled-scroll *::-webkit-scrollbar-thumb {\n\t\tbackground-color: var(--wx-styled-scroll-thumb-color);\n\t\tborder-radius: var(--wx-styled-scroll-width);\n\t\tborder: 4px solid var(--wx-styled-scroll-track-color);\n\t}\n\t.wx-styled-scroll *::-webkit-scrollbar-button {\n\t\tdisplay: none;\n\t}\n\n</style>\n","<script>\n\timport { Willow } from \"@xbs/svelte-wx\";\n\n\texport let fonts = true;\n\tconst SLOTS = $$slots;\n\n</script>\n\n{#if SLOTS && SLOTS.default}\n\t<Willow {fonts}>\n\t\t<slot />\n\t</Willow>\n{:else}\n\t<Willow {fonts} />\n{/if}\n\n<style global>\n\t.wx-willow-theme * {\n\t\tbox-sizing: border-box;\n\t}\n\t.wx-willow-theme {\n\t\t--wx-field-width: 100%;\n\t\t--wx-theme-name: willow;\n\n\t\t/* Kanban */\n\t\t--wx-kanban-background: var(--wx-background-alt);\n\n\t\t--wx-kanban-column-width: 290px;\n\t\t--wx-kanban-column-height: 300px;\n\n\t\t--wx-kanban-toolbar-height: 56px;\n\t\t--wx-kanban-toolbar-align: center;\n\t\t--wx-kanban-toolbar-justify: flex-start;\n\t\t--wx-kanban-toolbar-control-hover: rgba(0, 0, 0, 0.07);\n\t\t--wx-kanban-toolbar-control-active: rgba(0, 0, 0, 0.15);\n\t\t--wx-kanban-toolbar-border: none;\n\n\t\t--wx-kanban-card-field-padding: 12px;\n\t\t--wx-kanban-content-background: var(--wx-background);\n\t\t--wx-kanban-card-border: 1px solid rgba(44, 47, 60, 0.12);\n\t\t--wx-kanban-card-border-radius: 3px;\n\t\t--wx-kanban-header-border-radius: 6px;\n\n\t\t--wx-kanban-row-line: none;\n\n\t\t--wx-kanban-user-icon-size: 36px;\n\n\t\t--wx-kanban-header-height: 64px;\n\t\t--wx-kanban-editor-width: 569px;\n\t\t--wx-kanban-editor-modal-width: 1000px;\n\t\t--wx-kanban-editor-height: auto;\n\t\t--wx-kanban-editor-x-padding: 20px;\n\t\t--wx-kanban-editor-background: var(--wx-background);\n\t\t--wx-kanban-editor-top-border: var(--wx-border);\n\n\t\t--wx-kanban-over-limit-color: var(--wx-color-danger);\n\t\t--wx-kanban-collapsed-column-width: 44px;\n\t\t--wx-kanban-z-index: 1;\n\n\t\t--wx-progress-height: 4px;\n\t\t--wx-kanban-progress-inactive-color: var(--wx-background-hover);\n\n\t\t--wx-kanban-menu-min-width: 122px;\n\n\t\t--wx-kanban-shadow: 0px 1px 2px rgba(44, 47, 60, 0.06),\n\t\t\t0px 3px 10px rgba(44, 47, 60, 0.12);\n\t\t--wx-kanban-box-border: none;\n\n\t\t--wx-kanban-collapsed-padding: 21px;\n\t\t--wx-kanban-collapsed-margin: 12px;\n\t\t--wx-kanban-collapsed-background: var(--wx-background);\n\t\t--wx-kanban-collapsed-background-hover: #e6e6e6;\n\t\t/* End Kanban */\n\t}\n\n\t.wx-styled-scroll {\n\t\t--wx-styled-scroll-track-color: #fafafa;\n\t\t--wx-styled-scroll-thumb-color: #babac0;\n\t\t--wx-styled-scroll-width: 16px;\n\t}\n\t.wx-styled-scroll * {\n\t\tscrollbar-width: thin;\n\t}\n\t.wx-styled-scroll *::-webkit-scrollbar {\n\t\twidth: var(--wx-styled-scroll-width);\n\t}\n\t.wx-styled-scroll *::-webkit-scrollbar-track {\n\t\tbackground-color: var(--wx-styled-scroll-track-color);\n\t}\n\t.wx-styled-scroll *::-webkit-scrollbar-thumb {\n\t\tbackground-color: var(--wx-styled-scroll-thumb-color);\n\t\tborder-radius: var(--wx-styled-scroll-width);\n\t\tborder: 4px solid var(--wx-styled-scroll-track-color);\n\t}\n\t.wx-styled-scroll *::-webkit-scrollbar-button {\n\t\tdisplay: none;\n\t}\n\n</style>\n","<script>\n\timport { WillowDark } from \"@xbs/svelte-wx\";\n\n\texport let fonts = true;\n\tconst SLOTS = $$slots;\n\n</script>\n\n{#if SLOTS && SLOTS.default}\n\t<WillowDark {fonts}>\n\t\t<slot />\n\t</WillowDark>\n{:else}\n\t<WillowDark {fonts} />\n{/if}\n\n<style global>\n\t.wx-willow-dark-theme * {\n\t\tcolor-scheme: dark;\n\t\tbox-sizing: border-box;\n\t}\n\t.wx-willow-dark-theme {\n\t\t--wx-field-width: 100%;\n\t\t--wx-theme-name: willow-dark;\n\n\t\t/* Kanban */\n\t\t--wx-kanban-background: #2b343b;\n\n\t\t--wx-kanban-column-width: 290px;\n\t\t--wx-kanban-column-height: 300px;\n\n\t\t--wx-kanban-toolbar-height: 56px;\n\t\t--wx-kanban-toolbar-align: center;\n\t\t--wx-kanban-toolbar-justify: flex-start;\n\t\t--wx-kanban-toolbar-control-hover: rgba(0, 0, 0, 0.07);\n\t\t--wx-kanban-toolbar-control-active: rgba(0, 0, 0, 0.15);\n\t\t--wx-kanban-toolbar-border: none;\n\n\t\t--wx-kanban-card-field-padding: 12px;\n\t\t--wx-kanban-content-background: var(--wx-background);\n\t\t--wx-kanban-card-border: 1px solid transparent;\n\t\t--wx-kanban-card-border-radius: 3px;\n\t\t--wx-kanban-header-border-radius: 6px;\n\n\t\t--wx-kanban-row-line: none;\n\n\t\t--wx-kanban-user-icon-size: 36px;\n\n\t\t--wx-kanban-header-height: 64px;\n\t\t--wx-kanban-editor-width: 569px;\n\t\t--wx-kanban-editor-modal-width: 1000px;\n\t\t--wx-kanban-editor-height: auto;\n\t\t--wx-kanban-editor-x-padding: 20px;\n\t\t--wx-kanban-editor-background: var(--wx-background);\n\t\t--wx-kanban-editor-top-border: var(--wx-border);\n\n\t\t--wx-kanban-over-limit-color: var(--wx-color-danger);\n\t\t--wx-kanban-collapsed-column-width: 44px;\n\t\t--wx-kanban-z-index: 1;\n\n\t\t--wx-progress-height: 4px;\n\t\t--wx-kanban-progress-inactive-color: var(--wx-background-alt);\n\n\t\t--wx-kanban-menu-min-width: 122px;\n\n\t\t--wx-kanban-shadow: none;\n\t\t--wx-kanban-box-border: var(--wx-border);\n\n\t\t--wx-kanban-collapsed-padding: 21px;\n\t\t--wx-kanban-collapsed-margin: 12px;\n\t\t--wx-kanban-collapsed-background: var(--wx-background);\n\t\t--wx-kanban-collapsed-background-hover: #384047;\n\t\t/* End Kanban */\n\t}\n\n\t.wx-styled-scroll {\n\t\t--wx-styled-scroll-track-color: var(--wx-kanban-content-background);\n\t\t--wx-styled-scroll-thumb-color: var(--wx-kanban-background);\n\t\t--wx-styled-scroll-width: 16px;\n\t}\n\t.wx-styled-scroll * {\n\t\tscrollbar-width: thin;\n\t}\n\t.wx-styled-scroll *::-webkit-scrollbar {\n\t\twidth: var(--wx-styled-scroll-width);\n\t}\n\t.wx-styled-scroll *::-webkit-scrollbar-track {\n\t\tbackground-color: var(--wx-styled-scroll-track-color);\n\t}\n\t.wx-styled-scroll *::-webkit-scrollbar-thumb {\n\t\tbackground-color: var(--wx-styled-scroll-thumb-color);\n\t\tborder-radius: var(--wx-styled-scroll-width);\n\t\tborder: 4px solid var(--wx-styled-scroll-track-color);\n\t}\n\t.wx-styled-scroll *::-webkit-scrollbar-button {\n\t\tdisplay: none;\n\t}\n\t.wx-styled-scroll *::-webkit-scrollbar-corner {\n\t\tbackground-color: var(--wx-styled-scroll-track-color);\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport en from \"../en\";\n\timport { en as coreEn } from \"@xbs/wx-core-locales\";\n\timport { Locale } from \"@xbs/svelte-wx\";\n\timport { elementsIds } from \"@xbs/lib-kanban\";\n\timport type { IApi } from \"@xbs/lib-kanban\";\n\n\texport let api: IApi;\n\n</script>\n\n<Locale words={{ ...coreEn, ...en }} optional>\n\t<div class=\"wx-toolbar\" data-wx-widget={elementsIds.toolbar}>\n\t\t{#if api}\n\t\t\t<slot />\n\t\t{/if}\n\t</div>\n</Locale>\n\n<style>\n\t.wx-toolbar {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: var(--wx-kanban-toolbar-align);\n\t\tjustify-content: var(--wx-kanban-toolbar-justify);\n\t\theight: var(--wx-kanban-toolbar-height);\n\t\tmin-height: var(--wx-kanban-toolbar-height);\n\t\twidth: 100%;\n\t\tpadding: var(--wx-padding);\n\t\tbackground: var(--wx-kanban-content-background);\n\t\tcolor: var(--wx-color-font);\n\t\tborder-bottom: var(--wx-kanban-toolbar-border);\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport { createEventDispatcher, onMount, getContext } from \"svelte\";\n\timport { Dropdown } from \"@xbs/svelte-wx\";\n\timport { uid } from \"@xbs/lib-core-dom\";\n\timport Icon from \"./Icon.svelte\";\n\n\tconst _ = getContext<any>(\"wx-i18n\").getGroup(\"kanban\");\n\n\texport let value = \"\";\n\texport let id = uid();\n\texport let readonly = false;\n\texport let focus = false;\n\texport let placeholder = _(\"Search\");\n\n\texport let searchResults: { id: string; label: string }[] = null;\n\n\tconst dispatch = createEventDispatcher();\n\tlet searchFocused = false;\n\n\tlet input: HTMLElement;\n\tif (focus) {\n\t\tonMount(() => input.focus());\n\t}\n\n\tlet searchEl: HTMLElement;\n\n\tfunction handlePopupClose(e: any) {\n\t\tif (!searchEl.contains(e.target)) {\n\t\t\tsearchFocused = false;\n\t\t\tvalue = \"\";\n\t\t}\n\t}\n\n\tfunction handleSearchFocus() {\n\t\tsearchFocused = true;\n\t\tdispatch(\"action\", { action: \"search-focus\" });\n\t}\n\n\tfunction handleSearchBlur() {\n\t\tdispatch(\"action\", { action: \"search-blur\" });\n\t}\n\n\tfunction handleSearchResultClick(id: string) {\n\t\tdispatch(\"action\", { action: \"result-click\", id });\n\t\tsearchFocused = false;\n\t}\n\n\tfunction handleClear() {\n\t\tvalue = \"\";\n\t}\n\n</script>\n\n<div\n\tclass=\"wx-search\"\n\ttabindex={1}\n\ton:click|stopPropagation\n\tbind:this={searchEl}>\n\t<div class=\"wx-search-icon\">\n\t\t<Icon name=\"wxi-search\" />\n\t</div>\n\t<input\n\t\tbind:value\n\t\tbind:this={input}\n\t\tid={`${id}`}\n\t\t{readonly}\n\t\t{placeholder}\n\t\ton:focus={handleSearchFocus}\n\t\ton:blur={handleSearchBlur} />\n\t{#if !!value}\n\t\t<div class=\"wx-close-icon\">\n\t\t\t<Icon name=\"wxi-close\" clickable click={handleClear} />\n\t\t</div>\n\t{/if}\n\t{#if searchFocused}\n\t\t<Dropdown cancel={handlePopupClose}>\n\t\t\t<div class=\"wx-search-popup\">\n\t\t\t\t{#if $$slots?.default}\n\t\t\t\t\t<div class=\"wx-settings\">\n\t\t\t\t\t\t<slot />\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t\t{#if searchResults}\n\t\t\t\t\t<div class=\"wx-results\">\n\t\t\t\t\t\t{#each searchResults as result}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"wx-list-item\"\n\t\t\t\t\t\t\t\ton:click={() => handleSearchResultClick(result.id)}>\n\t\t\t\t\t\t\t\t<span class=\"wx-list-item-text\">\n\t\t\t\t\t\t\t\t\t{result.label}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"wx-list-item wx-no-results\">\n\t\t\t\t\t\t{_('No results')}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</Dropdown>\n\t{/if}\n</div>\n\n<style>\n\t.wx-search {\n\t\tposition: relative;\n\t\tmin-width: 300px;\n\t\tcursor: pointer;\n\t}\n\t@media (max-width: 420px) {\n\t\t.wx-search {\n\t\t\tmin-width: 100px;\n\t\t}\n\t}\n\t.wx-search-popup {\n\t\tmax-height: 300px;\n\t\toverflow: auto;\n\t}\n\tinput {\n\t\tpadding: 4px;\n\t\tpadding-left: 28px;\n\t\tpadding-right: 26px;\n\n\t\toutline: none;\n\t\tflex: 1;\n\t\tcolor: var(--wx-color-font);\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\twidth: 100%;\n\t\tbox-sizing: border-box;\n\n\t\tborder: none;\n\t\tbackground-color: transparent;\n\t}\n\tinput:focus {\n\t\tborder: none;\n\t}\n\tinput::placeholder {\n\t\tcolor: var(--wx-color-font-alt);\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t}\n\t.wx-search-icon {\n\t\tposition: absolute;\n\t\ttop: calc(50% - 10px);\n\t\tleft: 4px;\n\t}\n\t.wx-close-icon {\n\t\tposition: absolute;\n\t\ttop: calc(50% - 10px);\n\t\tright: 4px;\n\t}\n\t.wx-settings {\n\t\tborder-bottom: var(--wx-border);\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tbackground-color: var(--wx-kanban-content-background);\n\t}\n\t.wx-list-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\n\t\tpadding-left: 12px;\n\t\tpadding-right: 8px;\n\t\theight: 32px;\n\n\t\tcursor: pointer;\n\t\toverflow: hidden;\n\t}\n\t.wx-list-item:hover:not(.wx-no-results) {\n\t\tbackground: var(--wx-background-hover);\n\t}\n\t.wx-list-item-text {\n\t\tline-height: 20px;\n\t\toverflow: hidden;\n\t\tdisplay: -webkit-box;\n\t\t-webkit-line-clamp: 1;\n\t\t-webkit-box-orient: vertical;\n\t}\n\t.wx-no-results {\n\t\tcolor: var(--wx-color-font-alt);\n\t\theight: 36px;\n\t\tcursor: initial;\n\t}\n\t.wx-results {\n\t\tmargin: 8px 0;\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport { getContext } from \"svelte\";\n\timport { Select } from \"@xbs/svelte-wx\";\n\timport { form } from \"@xbs/lib-svelte\";\n\timport type { IApi, ISearchOption } from \"@xbs/lib-kanban\";\n\n\timport Search from \"../Search.svelte\";\n\n\tconst _ = getContext<any>(\"wx-i18n\").getGroup(\"kanban\");\n\n\texport let api: IApi;\n\texport let showOptions = true;\n\texport let options: ISearchOption[] = [\n\t\t{ id: null, label: _(\"Everywhere\") },\n\t\t{ id: \"label\", label: _(\"Label\") },\n\t\t{ id: \"description\", label: _(\"Description\") },\n\t];\n\n\t$: cardsMeta = api && api.getReactiveState().cardsMeta;\n\n\tlet searchResults = null;\n\t$: {\n\t\tif ($cardsMeta) {\n\t\t\tsearchResults = Object.keys($cardsMeta).reduce((total, key) => {\n\t\t\t\tif ($cardsMeta[key].found) {\n\t\t\t\t\ttotal.push(api?.getCard(key));\n\t\t\t\t}\n\t\t\t\treturn total;\n\t\t\t}, []);\n\t\t\tif (!searchResults.length) {\n\t\t\t\tsearchResults = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tconst search = form({ value: \"\", by: options[0].id }, ({ value, by }) => {\n\t\tconst item = options.find(option => option.id === by);\n\t\tapi.exec(\"set-search\", {\n\t\t\tvalue,\n\t\t\tby,\n\t\t\tsearchRule: item?.searchRule,\n\t\t});\n\t});\n\n\tlet changeHandler: any;\n\t$: {\n\t\tif (!changeHandler) {\n\t\t\tchangeHandler = (config: { value: string; by?: string }) => {\n\t\t\t\tif (\n\t\t\t\t\tconfig?.value !== $search.value ||\n\t\t\t\t\tconfig?.by !== $search?.by\n\t\t\t\t) {\n\t\t\t\t\tsearch.reset(config);\n\t\t\t\t}\n\t\t\t};\n\t\t\tapi.on(\"set-search\", changeHandler);\n\t\t}\n\t}\n\n\tfunction handleSearchAction({ detail }) {\n\t\tconst { id, action } = detail;\n\n\t\tswitch (action) {\n\t\t\tcase \"result-click\":\n\t\t\t\tapi.exec(\"select-card\", { id });\n\t\t\t\tbreak;\n\t\t\tcase \"search-focus\":\n\t\t\t\tif ($search.value) {\n\t\t\t\t\tapi.exec(\"set-search\", {\n\t\t\t\t\t\tvalue: $search.value,\n\t\t\t\t\t\tby: $search.by,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n</script>\n\n<Search\n\tbind:value={$search.value}\n\t{searchResults}\n\ton:action={handleSearchAction}>\n\t{#if showOptions}\n\t\t<div class=\"wx-select\">\n\t\t\t<div class=\"wx-title\">{_('Search in')}:</div>\n\t\t\t<Select bind:value={$search.by} {options} />\n\t\t</div>\n\t{/if}\n</Search>\n\n<style>\n\t.wx-title {\n\t\tdisplay: block;\n\t\tpadding-right: 2px;\n\t\tflex: 1 0 auto;\n\t\tfont-family: var(--wx-label-font-family);\n\t\tfont-size: var(--wx-label-font-size);\n\t\tline-height: var(--wx-label-line-height);\n\t\tfont-weight: var(--wx-label-font-weight);\n\t\tcolor: var(--wx-label-font-color);\n\t}\n\t.wx-select {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\theight: 36px;\n\t\tpadding-left: 12px;\n\t\tpadding-right: 8px;\n\n\t\t--wx-input-border: none;\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport type { TWxIcons, customIcons } from \"@xbs/lib-kanban\";\n\n\timport Icon from \"../Icon.svelte\";\n\n\texport let name = \"\";\n\texport let icon: TWxIcons | keyof typeof customIcons;\n\texport let label: string;\n\texport let disabled = false;\n\n\texport let click: any = null;\n\n\tfunction handleClick() {\n\t\tif (click) {\n\t\t\tclick(name);\n\t\t}\n\t}\n\n</script>\n\n<div\n\tclass=\"wx-control\"\n\tclass:wx-disabled={disabled}\n\ton:click={handleClick}\n\ttitle={label}>\n\t<Icon name={icon} />\n</div>\n\n<style>\n\t.wx-control {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\n\t\tcursor: pointer;\n\t\tpadding: 4px;\n\t\tmargin-left: 4px;\n\t\ttransition: background-color 0.2s ease-out;\n\t}\n\t.wx-control:hover {\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tbackground-color: var(--wx-kanban-toolbar-control-hover);\n\t}\n\t.wx-control:active {\n\t\tbackground-color: var(--wx-kanban-toolbar-control-active);\n\t}\n\n\t.wx-disabled {\n\t\topacity: 0.5;\n\t\tpointer-events: none;\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport { getContext } from \"svelte\";\n\timport { tempID } from \"@xbs/lib-state\";\n\timport type { IApi } from \"@xbs/lib-kanban\";\n\n\timport IconButton from \"./IconButton.svelte\";\n\texport let api: IApi;\n\n\tconst _ = getContext<any>(\"wx-i18n\").getGroup(\"kanban\");\n\n\tfunction handleClick() {\n\t\tapi.exec(\"add-row\", { id: tempID(), row: { label: _(\"Untitled\") } });\n\t}\n\n</script>\n\n<IconButton\n\tclick={handleClick}\n\tlabel={_('Add new row')}\n\ticon=\"wxi-table-row-plus-after\" />\n","<script lang=\"ts\">\n\timport { getContext } from \"svelte\";\n\timport { tempID } from \"@xbs/lib-state\";\n\timport type { IApi } from \"@xbs/lib-kanban\";\n\n\timport IconButton from \"./IconButton.svelte\";\n\texport let api: IApi;\n\n\tconst _ = getContext<any>(\"wx-i18n\").getGroup(\"kanban\");\n\n\tfunction handleClick() {\n\t\tapi.exec(\"add-column\", {\n\t\t\tid: tempID(),\n\t\t\tcolumn: { label: _(\"Untitled\") },\n\t\t});\n\t}\n\n</script>\n\n<IconButton\n\tclick={handleClick}\n\tlabel={_('Add new column')}\n\ticon=\"wxi-table-column-plus-after\" />\n","<script lang=\"ts\">\n\timport { getContext } from \"svelte\";\n\timport { getSortConfig } from \"@xbs/lib-kanban\";\n\timport { uid } from \"@xbs/lib-core-dom\";\n\n\timport type {\n\t\tIApi,\n\t\tTSortDir,\n\t\tISortConfig,\n\t\tISortItemOption,\n\t} from \"@xbs/lib-kanban\";\n\timport type { Writable } from \"svelte/store\";\n\n\timport Icon from \"../Icon.svelte\";\n\n\timport { DropDownMenu } from \"@xbs/svelte-menu\";\n\n\tconst _ = getContext<any>(\"wx-i18n\").getGroup(\"kanban\");\n\n\texport let api: IApi;\n\texport let options: ISortItemOption[] = null;\n\n\t$: {\n\t\toptions = Array.isArray(options) ? options : getSortConfig();\n\n\t\toptions = options.map(el => {\n\t\t\tlet { id, text, label, dir } = el;\n\t\t\treturn {\n\t\t\t\t...el,\n\t\t\t\tid: id || (uid() as any),\n\t\t\t\ttext: _(text || label),\n\t\t\t\ticon: dir === \"asc\" ? \"wxi-asc\" : \"wxi-desc\",\n\t\t\t};\n\t\t});\n\t}\n\n\tlet preserve = null;\n\tlet stateSort: Writable<ISortConfig | null>;\n\t$: {\n\t\tif (!stateSort) {\n\t\t\tstateSort = api.getReactiveState()\n\t\t\t\t.sort as Writable<ISortConfig | null>;\n\t\t}\n\t\tif ($stateSort?.preserve) {\n\t\t\tpreserve = options.find(\n\t\t\t\tel => el.by === $stateSort.by && el.dir === $stateSort.dir\n\t\t\t);\n\t\t} else {\n\t\t\tpreserve = null;\n\t\t}\n\t}\n\n\tfunction handleMenuAction(ev: any) {\n\t\tconst action = ev?.detail.action;\n\t\tif (action) {\n\t\t\tconst sortRule = options.find(s => s.id === action.id);\n\n\t\t\tif (sortRule) {\n\t\t\t\tapi.exec(\"set-sort\", {\n\t\t\t\t\tby: sortRule.by,\n\t\t\t\t\tdir: sortRule.dir as TSortDir,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction handleReset() {\n\t\tapi.exec(\"set-sort\", null);\n\t}\n\n</script>\n\n{#if preserve}\n\t<div class=\"wx-preserve\">\n\t\t<Icon name=\"wxi-close\" click={handleReset} />\n\t\t{preserve.text}\n\t</div>\n{/if}\n<DropDownMenu {options} at={'left-bottom'} on:click={handleMenuAction}>\n\t<div class=\"wx-control\" title={_('Sort')}>\n\t\t<Icon name=\"wxi-sort\" />\n\t</div>\n</DropDownMenu>\n\n<style>\n\t.wx-control {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\n\t\tcursor: pointer;\n\t\tpadding: 4px;\n\t\tmargin-left: 4px;\n\t\ttransition: background-color 0.2s ease-out;\n\t}\n\t.wx-control:hover {\n\t\tborder-radius: var(--wx-input-border-radius);\n\t\tbackground-color: rgba(0, 0, 0, 0.07);\n\t}\n\t.wx-control:active {\n\t\tbackground-color: rgba(0, 0, 0, 0.15);\n\t}\n\n\t.wx-preserve {\n\t\tpadding: 4px;\n\t\tpadding-right: 8px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tbackground: var(--wx-kanban-background);\n\t}\n\n</style>\n","<div class=\"wx-spacer\" />\n\n<style>\n\t.wx-spacer {\n\t\tflex: 1 1 auto;\n\t}\n\n</style>\n","<script lang=\"ts\">\n\timport { getContext } from \"svelte\";\n\timport type { IApi } from \"@xbs/lib-kanban\";\n\n\timport IconButton from \"./IconButton.svelte\";\n\texport let api: IApi;\n\n\tconst _ = getContext<any>(\"wx-i18n\").getGroup(\"kanban\");\n\n\tfunction handleUndo() {\n\t\tapi.getStores().data.undo();\n\t}\n\n\tconst { history: rHistory } = api.getReactiveState();\n\n\t$: canUndo = $rHistory.undo.length > 0;\n\n</script>\n\n<IconButton\n\tclick={handleUndo}\n\tlabel={_('Undo')}\n\tdisabled={!canUndo}\n\ticon=\"wxi-undo\" />\n","<script lang=\"ts\">\n\timport { getContext } from \"svelte\";\n\timport type { IApi } from \"@xbs/lib-kanban\";\n\n\timport IconButton from \"./IconButton.svelte\";\n\texport let api: IApi;\n\n\tconst _ = getContext<any>(\"wx-i18n\").getGroup(\"kanban\");\n\n\tfunction handleRedo() {\n\t\tapi.getStores().data.redo();\n\t}\n\n\tconst { history: rHistory } = api.getReactiveState();\n\n\t$: canRedo = $rHistory.redo?.length > 0;\n\n</script>\n\n<IconButton\n\tclick={handleRedo}\n\tlabel={_('Redo')}\n\tdisabled={!canRedo}\n\ticon=\"wxi-redo\" />\n","<script lang=\"ts\">\n\texport let template: string | ((config: Record<string, any>) => void);\n\n\t$: htmlString =\n\t\ttypeof template === \"function\"\n\t\t\t? template({ ...$$restProps })\n\t\t\t: template;\n\n</script>\n\n{#if htmlString}\n\t{@html htmlString}\n{/if}\n\n<style>\n</style>\n",null,null,"<script lang=\"ts\">\n\timport type { IApi, IEditorConfig, TEditorShape } from \"@xbs/lib-kanban\";\n\timport { Editor } from \"@xbs/svelte-kanban\";\n\n\texport let api: IApi;\n\texport let config: IEditorConfig;\n\texport let shape: TEditorShape[];\n\n</script>\n\n<Editor {api} {config} {shape} />\n","<script lang=\"ts\">\n\timport type { IApi, IToolbarItem } from \"@xbs/lib-kanban\";\n\n\timport {\n\t\tToolbar,\n\t\tSearch,\n\t\tAddColumn,\n\t\tAddRow,\n\t\tSort,\n\t\tSpacer,\n\t\tUndo,\n\t\tRedo,\n\t} from \"@xbs/svelte-kanban\";\n\timport Template from \"./Template.svelte\";\n\n\texport let api: IApi;\n\texport let items: IToolbarItem[] = [];\n\n</script>\n\n<Toolbar {api}>\n\t{#each items as item}\n\t\t{#if item.type === 'search'}\n\t\t\t<Search {api} options={item.options} />\n\t\t{:else if item.type === 'undo'}\n\t\t\t<Undo {api} />\n\t\t{:else if item.type === 'redo'}\n\t\t\t<Redo {api} />\n\t\t{:else if item.type === 'spacer'}\n\t\t\t<Spacer />\n\t\t{:else if item.type === 'sort'}\n\t\t\t<Sort {api} options={item.options} />\n\t\t{:else if item.type === 'addColumn'}\n\t\t\t<AddColumn {api} />\n\t\t{:else if item.type === 'addRow'}\n\t\t\t<AddRow {api} />\n\t\t{:else if item.type === 'template' && item.template}\n\t\t\t<Template template={item.template} />\n\t\t{:else if item}\n\t\t\t<Template template={item.type} />\n\t\t{/if}\n\t{/each}\n</Toolbar>\n","import { EventBus } from \"@xbs/lib-state\";\nimport { isTempID } from \"@xbs/lib-state\";\nconst cantSendYet = Symbol();\nexport default class RestDataProvider extends EventBus {\n    constructor(url) {\n        super();\n        this._customHeaders = {};\n        this._url = url;\n        this._queue = new ActionQueue();\n        const defaultHandlers = {\n            \"add-card\": {\n                ignoreID: true,\n                handler: (ev) => {\n                    ev.card = this.prepareCard(ev.card);\n                    return this.send(\"cards\", \"POST\", ev);\n                },\n            },\n            \"update-card\": {\n                debounce: 500,\n                handler: (ev) => {\n                    ev.card = this.prepareCard(ev.card);\n                    return this.send(`cards/${ev.id}`, \"PUT\", ev);\n                },\n            },\n            \"move-card\": {\n                handler: (ev) => this.send(`cards/${ev.id}/move`, \"PUT\", ev),\n            },\n            \"delete-card\": {\n                handler: (ev) => this.send(`cards/${ev.id}`, \"DELETE\"),\n            },\n            \"add-column\": {\n                ignoreID: true,\n                handler: (ev) => this.send(`columns`, \"POST\", ev),\n            },\n            \"update-column\": {\n                debounce: 500,\n                handler: (ev) => this.send(`columns/${ev.id}`, \"PUT\", ev),\n            },\n            \"move-column\": {\n                handler: (ev) => this.send(`columns/${ev.id}/move`, \"PUT\", ev),\n            },\n            \"delete-column\": {\n                handler: (ev) => this.send(`columns/${ev.id}`, \"DELETE\"),\n            },\n            \"add-row\": {\n                ignoreID: true,\n                handler: (ev) => this.send(`rows`, \"POST\", ev),\n            },\n            \"update-row\": {\n                debounce: 500,\n                handler: (ev) => this.send(`rows/${ev.id}`, \"PUT\", ev),\n            },\n            \"move-row\": {\n                handler: (ev) => this.send(`rows/${ev.id}/move`, \"PUT\", ev),\n            },\n            \"delete-row\": {\n                handler: (ev) => this.send(`rows/${ev.id}`, \"DELETE\"),\n            },\n            \"add-vote\": {\n                handler: (ev) => this.send(`cards/${ev.cardId}/vote`, \"POST\"),\n            },\n            \"delete-vote\": {\n                handler: (ev) => this.send(`cards/${ev.cardId}/vote`, \"DELETE\"),\n            },\n            \"add-comment\": {\n                ignoreID: true,\n                handler: (ev) => this.send(`cards/${ev.cardId}/comments`, \"POST\", ev.comment),\n            },\n            \"update-comment\": {\n                handler: (ev) => this.send(`cards/${ev.cardId}/comments/${ev.id}`, \"PUT\", ev.comment),\n            },\n            \"delete-comment\": {\n                handler: (ev) => this.send(`cards/${ev.cardId}/comments/${ev.id}`, \"DELETE\"),\n            },\n            \"add-link\": {\n                ignoreID: true,\n                handler: (ev) => this.send(\"links\", \"POST\", ev),\n            },\n            \"delete-link\": {\n                handler: (ev) => this.send(`links/${ev.id}`, \"DELETE\"),\n            },\n        };\n        const handlers = this.getHandlers(defaultHandlers);\n        for (const x in handlers) {\n            this.on(x, ev => {\n                if (!ev.skipProvider)\n                    this._queue.add(x, ev, handlers[x]);\n            });\n        }\n    }\n    getCards() {\n        return this.send(\"cards\", \"GET\").then(this.parseCards);\n    }\n    getColumns() {\n        return this.send(\"columns\", \"GET\");\n    }\n    getRows() {\n        return this.send(\"rows\", \"GET\");\n    }\n    getUsers() {\n        return this.send(\"users\", \"GET\");\n    }\n    getLinks() {\n        return this.send(\"links\", \"GET\");\n    }\n    getHandlers(handlers) {\n        return handlers;\n    }\n    setHeaders(headers) {\n        this._customHeaders = headers;\n    }\n    getIDResolver() {\n        return this._queue.resolve.bind(this._queue);\n    }\n    send(url, method, data, customHeaders = {}) {\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            ...customHeaders,\n            ...this._customHeaders,\n        };\n        const req = {\n            method,\n            headers,\n        };\n        if (data) {\n            req.body = typeof data === \"object\" ? JSON.stringify(data) : data;\n        }\n        return fetch(`${this._url}/${url}`, req).then(res => res.json());\n    }\n    parseCards(data) {\n        data.forEach(card => {\n            if (card.end_date) {\n                card.end_date = new Date(card.end_date);\n            }\n            if (card.start_date) {\n                card.start_date = new Date(card.start_date);\n            }\n            return card;\n        });\n        return data;\n    }\n    prepareCard(card) {\n        if (!card)\n            return null;\n        return {\n            ...card,\n            users: card.users || null,\n        };\n    }\n}\nclass ActionQueue {\n    constructor() {\n        this._awaitAddingQueue = [];\n        this._queue = {};\n        this._idPool = {};\n        this._backId = [];\n        this.add = this.add.bind(this);\n    }\n    resolve(id, type) {\n        const col = this._backId[type];\n        if (typeof col === \"undefined\")\n            return id;\n        const tID = col[id];\n        return typeof tID === \"undefined\" ? id : tID;\n    }\n    add(action, data, proc) {\n        if (proc.debounce) {\n            const qid = `${action}\"/\"${data.id}`;\n            const item = this._queue[qid];\n            if (item) {\n                clearTimeout(item);\n            }\n            this._queue[qid] = setTimeout(() => {\n                this.add(action, data, { ...proc, debounce: false });\n            }, proc.debounce);\n            return;\n        }\n        const ready = this.tryExec(action, data, proc);\n        if (ready === null) {\n            //can't send data yet\n            this._awaitAddingQueue.push({ action, data, proc });\n        }\n        else {\n            ready.then((res) => {\n                if (res && res.id && res.id != data.id && isTempID(data.id)) {\n                    this._idPool[data.id] = res.id;\n                    if (proc.kind) {\n                        let t = this._backId[proc.kind];\n                        if (!t)\n                            t = this._backId[proc.kind] = {};\n                        t[res.id] = data.id;\n                    }\n                    this.execQueue();\n                }\n            });\n        }\n    }\n    tryExec(action, data, proc) {\n        const ready = this.exec(action, data, proc);\n        if (ready === null) {\n            this._awaitAddingQueue.push({ action, data, proc });\n        }\n        return ready;\n    }\n    exec(action, data, proc) {\n        const correctData = this.correctID(data, proc.ignoreID ? data.id : null);\n        if (correctData === cantSendYet) {\n            return null;\n        }\n        return proc.handler(correctData, action, data);\n    }\n    correctID(obj, ignore) {\n        let copy = null;\n        for (const key in obj) {\n            // $meta is a special property that is used to store meta data\n            // it can contain temporary ids, so we need to ignore it\n            if (key === \"$meta\")\n                continue;\n            const test = obj[key];\n            if (typeof test === \"object\") {\n                const after = this.correctID(test, ignore);\n                if (after !== test) {\n                    if (after === cantSendYet) {\n                        return cantSendYet;\n                    }\n                    if (copy === null) {\n                        copy = { ...obj };\n                    }\n                    copy[key] = after;\n                }\n            }\n            else if (test !== ignore && isTempID(test)) {\n                const hasRealID = this._idPool[test];\n                if (!hasRealID) {\n                    return cantSendYet;\n                }\n                if (copy === null) {\n                    copy = { ...obj };\n                }\n                copy[key] = hasRealID;\n            }\n        }\n        return copy || obj;\n    }\n    execQueue() {\n        this._awaitAddingQueue = this._awaitAddingQueue\n            .map(a => {\n            return this.tryExec(a.action, a.data, a.proc)\n                ? null\n                : a;\n        })\n            .filter(a => a !== null);\n    }\n}\n//# sourceMappingURL=RestDataProvider.js.map","class t{constructor(t){const{url:e,token:s}=t;this._url=e,this._token=s,this._mode=1,this._seed=1,this._queue=[],this.data={},this.api={},this._events={}}headers(){return{Accept:\"application/json\",\"Content-Type\":\"application/json\",\"Remote-Token\":this._token}}fetch(t,e){const s={credentials:\"include\",headers:this.headers()};return e&&(s.method=\"POST\",s.body=e),fetch(t,s).then(t=>t.json())}load(t){return t&&(this._url=t),this.fetch(this._url).then(t=>this.parse(t))}parse(t){const{key:e,websocket:s}=t;e&&(this._token=t.key);for(const e in t.data)this.data[e]=t.data[e];for(const e in t.api){const s=this.api[e]={},i=t.api[e];for(const t in i)s[t]=this._wrapper(e+\".\"+t)}return s&&this.connect(),this}connect(){const t=this._socket;t&&(this._socket=null,t.onclose=function(){},t.close()),this._mode=2,this._socket=function(t,e,s,i){let n=e;\"/\"===n[0]&&(n=document.location.protocol+\"//\"+document.location.host+e);n=n.replace(/^http(s|):/,\"ws$1:\");const o=-1!=n.indexOf(\"?\")?\"&\":\"?\";n=`${n}${o}token=${s}&ws=1`;const r=new WebSocket(n);return r.onclose=()=>setTimeout(()=>t.connect(),2e3),r.onmessage=e=>{const s=JSON.parse(e.data);switch(s.action){case\"result\":t.result(s.body,[]);break;case\"event\":t.fire(s.body.name,s.body.value);break;case\"start\":i();break;default:t.onError(s.data)}},r}(this,this._url,this._token,()=>(this._mode=3,this._send(),this._resubscribe(),this))}_wrapper(t){return function(){const e=[].slice.call(arguments);let s=null;const i=new Promise((i,n)=>{s={data:{id:this._uid(),name:t,args:e},status:1,resolve:i,reject:n},this._queue.push(s)});return this.onCall(s,i),3===this._mode?this._send(s):setTimeout(()=>this._send(),1),i}.bind(this)}_uid(){return(this._seed++).toString()}_send(t){if(2==this._mode)return void setTimeout(()=>this._send(),100);const e=t?[t]:this._queue.filter(t=>1===t.status);if(!e.length)return;const s=e.map(t=>(t.status=2,t.data));3!==this._mode?this.fetch(this._url,JSON.stringify(s)).catch(t=>this.onError(t)).then(t=>this.result(t,s)):this._socket.send(JSON.stringify({action:\"call\",body:s}))}result(t,e){const s={};if(t)for(let e=0;e<t.length;e++)s[t[e].id]=t[e];else for(let t=0;t<e.length;t++)s[e[t].id]={id:e[t].id,error:\"Network Error\",data:null};for(let t=this._queue.length-1;t>=0;t--){const e=this._queue[t],i=s[e.data.id];i&&(this.onResponse(e,i),i.error?e.reject(i.error):e.resolve(i.data),this._queue.splice(t,1))}}on(t,e){const s=this._uid();let i=this._events[t];const n=!!i;return n||(i=this._events[t]=[]),i.push({id:s,handler:e}),n||3!=this._mode||this._socket.send(JSON.stringify({action:\"subscribe\",name:t})),{name:t,id:s}}_resubscribe(){if(3==this._mode)for(const t in this._events)this._socket.send(JSON.stringify({action:\"subscribe\",name:t}))}detach(t){if(!t){if(3==this._mode)for(const t in this._events)this._socket.send(JSON.stringify({action:\"unsubscribe\",key:t}));return void(this._events={})}const{id:e,name:s}=t,i=this._events[s];if(i){const t=i.filter(t=>t.id!=e);t.length?this._events[s]=t:(delete this._events[s],3==this._mode&&this._socket.send(JSON.stringify({action:\"unsubscribe\",name:s})))}}fire(t,e){const s=this._events[t];if(s)for(let t=0;t<s.length;t++)s[t].handler(e)}onError(t){return null}onCall(t,e){}onResponse(t,e){}}export{t as Client};\n//# sourceMappingURL=remote.es6.js.map\n",null,"import { Client } from \"remote-client\";\nexport default class RemoteEvents {\n    constructor(url, token) {\n        const remote = new Client({\n            url,\n            token,\n        });\n        // temporary patch, as we do not want credentials\n        remote.fetch = function (url, body) {\n            const req = {\n                headers: this.headers(),\n            };\n            if (body) {\n                req.method = \"POST\";\n                req.body = body;\n            }\n            return fetch(url, req).then(res => res.json());\n        };\n        this._ready = remote.load().then(back => (this._remote = back));\n    }\n    ready() {\n        return this._ready;\n    }\n    on(name, handler) {\n        this.ready().then(back => {\n            if (typeof name === \"string\")\n                back.on(name, handler);\n            else {\n                for (const key in name) {\n                    back.on(key, name[key]);\n                }\n            }\n        });\n    }\n}\n//# sourceMappingURL=RemoteEvents.js.map",null,"import { CardID, ColumnID, RowID, LinkID } from \"./constants\";\nexport default function kanbanUpdates(api, resolver) {\n    function card(obj) {\n        if (\"id\" in obj)\n            obj.id = resolver(obj.id, CardID);\n        if (\"column\" in obj)\n            obj.column = resolver(obj.column, ColumnID);\n        if (\"row\" in obj)\n            obj.row = resolver(obj.row, RowID);\n        return obj;\n    }\n    function row(obj) {\n        if (\"id\" in obj)\n            obj.id = resolver(obj.id, RowID);\n        return obj;\n    }\n    function column(obj) {\n        if (\"id\" in obj)\n            obj.id = resolver(obj.id, ColumnID);\n        return obj;\n    }\n    function link(obj) {\n        if (\"id\" in obj)\n            obj.id = resolver(obj.id, LinkID);\n        if (\"masterId\" in obj)\n            obj.masterId = resolver(obj.masterId, CardID);\n        if (\"slaveId\" in obj)\n            obj.slaveId = resolver(obj.slaveId, CardID);\n        return obj;\n    }\n    function cardsUpdate(obj) {\n        const c = card(obj.card);\n        c.start_date = c.start_date ? new Date(c.start_date) : null;\n        c.end_date = c.end_date ? new Date(c.end_date) : null;\n        switch (obj.type) {\n            case \"add-card\":\n                api.exec(obj.type, {\n                    skipProvider: true,\n                    card: c,\n                    select: false,\n                });\n                break;\n            case \"update-card\":\n                api.exec(\"update-card\", {\n                    skipProvider: true,\n                    id: c.id,\n                    card: c,\n                });\n                break;\n            case \"delete-card\":\n                api.exec(\"delete-card\", {\n                    skipProvider: true,\n                    id: c.id,\n                });\n                break;\n            case \"move-card\": {\n                api.exec(\"move-card\", {\n                    skipProvider: true,\n                    id: c.id,\n                    rowId: c.row,\n                    columnId: c.column,\n                    before: resolver(obj.before, CardID),\n                });\n                break;\n            }\n        }\n    }\n    function columnsUpdate(obj) {\n        const c = column(obj.column);\n        switch (obj.type) {\n            case \"add-column\":\n                api.exec(\"add-column\", {\n                    skipProvider: true,\n                    column: c,\n                });\n                break;\n            case \"delete-column\":\n                api.exec(\"delete-column\", {\n                    skipProvider: true,\n                    id: c.id,\n                });\n                break;\n            case \"update-column\":\n                api.exec(\"update-column\", {\n                    skipProvider: true,\n                    id: c.id,\n                    column: c,\n                });\n                break;\n            case \"move-column\":\n                api.exec(\"move-column\", {\n                    skipProvider: true,\n                    id: c.id,\n                    before: resolver(obj.before, ColumnID),\n                });\n        }\n    }\n    function rowsUpdate(obj) {\n        const r = row(obj.row);\n        switch (obj.type) {\n            case \"add-row\":\n                api.exec(\"add-row\", {\n                    skipProvider: true,\n                    row: r,\n                });\n                break;\n            case \"delete-row\":\n                api.exec(\"delete-row\", {\n                    skipProvider: true,\n                    id: r.id,\n                });\n                break;\n            case \"update-row\":\n                api.exec(\"update-row\", {\n                    skipProvider: true,\n                    id: r.id,\n                    row: r,\n                });\n                break;\n            case \"move-row\":\n                api.exec(\"move-row\", {\n                    skipProvider: true,\n                    id: r.id,\n                    before: resolver(obj.before, RowID),\n                });\n        }\n    }\n    function linksUpdate(obj) {\n        const l = link(obj.link);\n        switch (obj.type) {\n            case \"add-link\":\n                api.exec(\"add-link\", {\n                    skipProvider: true,\n                    id: l.id,\n                    link: l,\n                });\n                break;\n            case \"delete-link\":\n                api.exec(\"delete-link\", {\n                    skipProvider: true,\n                    id: l.id,\n                });\n        }\n    }\n    return {\n        cards: cardsUpdate,\n        columns: columnsUpdate,\n        rows: rowsUpdate,\n        links: linksUpdate,\n    };\n}\n//# sourceMappingURL=KanbanUpdates.js.map","export const CardID = 1;\nexport const RowID = 2;\nexport const ColumnID = 3;\nexport const LinkID = 4;\n//# sourceMappingURL=constants.js.map"],"names":["noop","identity","x","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","src_url_equal_anchor","src_url_equal","element_src","url","document","createElement","href","subscribe","store","callbacks","unsub","unsubscribe","component_subscribe","component","callback","$$","on_destroy","push","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","slice","get_slot_changes","dirty","lets","undefined","merged","len","Math","max","length","i","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","p","get_all_dirty_from_scope","exclude_internal_props","props","result","compute_rest_props","keys","rest","Set","has","compute_slots","slots","key","null_to_empty","value","set_store_value","ret","set","action_destroyer","action_result","destroy","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","run_tasks","task","c","delete","f","size","append","target","node","appendChild","get_root_for_style","root","getRootNode","ownerDocument","host","append_empty_stylesheet","style_element","element","style","head","sheet","append_stylesheet","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","name","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","prevent_default","preventDefault","call","this","stop_propagation","stopPropagation","attr","attribute","removeAttribute","getAttribute","setAttribute","to_number","set_data","set_input_value","input","set_style","important","removeProperty","setProperty","select_option","select","mounting","option","__value","selected","selectedIndex","crossorigin","is_crossorigin","parent","error","toggle_class","toggle","classList","custom_event","type","detail","bubbles","cancelable","e","createEvent","initCustomEvent","HtmlTag","constructor","is_svg","n","html","h","m","nodeName","nodeType","t","tagName","content","innerHTML","Array","from","childNodes","construct_svelte_component","managed_styles","Map","current_component","active","create_rule","duration","delay","ease","uid","step","keyframes","rule","str","hash","charCodeAt","doc","stylesheet","rules","get","info","create_style_information","insertRule","cssRules","animation","delete_rule","previous","split","next","filter","anim","indexOf","deleted","join","ownerNode","clear","set_current_component","get_current_component","Error","onMount","on_mount","afterUpdate","after_update","onDestroy","createEventDispatcher","defaultPrevented","setContext","context","getContext","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","schedule_update","then","flush","tick","add_render_callback","add_flush_callback","seen_callbacks","promise","flushidx","saved_component","update","pop","add","fragment","before_update","dispatch","direction","kind","dispatchEvent","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","null_transition","create_bidirectional_transition","params","intro","config","running_program","pending_program","animation_name","clear_animation","init","program","abs","start","end","group","go","easing","css","fulfill","loop","globals","globalThis","global","destroy_block","lookup","outro_and_destroy_block","update_keyed_each","old_blocks","get_key","dynamic","list","create_each_block","get_context","old_indexes","new_blocks","new_lookup","deltas","updates","child_ctx","will_move","did_move","first","new_block","old_block","new_key","old_key","get_spread_update","levels","to_null_out","accounted_for","get_spread_object","spread_props","bind","index","bound","create_component","mount_component","customElement","new_on_destroy","map","destroy_component","filtered","targets","flush_render_callbacks","instance","create_fragment","not_equal","append_styles","parent_component","on_disconnect","skip_bound","ready","fill","make_dirty","hydrate","nodes","children","l","SvelteComponent","$destroy","$on","splice","$set","$$props","obj","$$set","en","kanban","Save","Close","Delete","Name","Description","Type","Result","Search","Edit","Everywhere","Label","Status","Color","Priority","Progress","Users","Untitled","Rename","Sort","Duplicate","Duplicates","Cancel","core","ok","cancel","calendar","monthFull","monthShort","dayFull","dayShort","hours","minutes","done","today","am","pm","weekStart","timeFormat","iid","valueOf","tempID","isTempID","v","parseInt","substr","DataRouter","_setter","_routes","_triggers","_sources","_prev","_parsers","s","in","arr","out","_calckSize","cfg","parser","setState","needExec","trgs","_execNext","sort","exec","sources","prev","sizes","Store","_state","_values","_writable","writable","state","_wrapWritable","getState","getReactive","val","wr","EventBus","_handlers","_nextHandler","on","ev","resolvePromise","setNext","res","EventBusRouter","_dispatch","locate","el","locateID","isNaN","id","delegateClick","handlers","lastClick","dataset","action","test","click","dblclick","toFixed","num","toString","emptyAmPm","date2str","mask","date","locale","getDate","getMonth","getFullYear","getDay","getHours","getMinutes","getSeconds","temp","toFixedMs","getMilliseconds","ndate","nday","first_thursday","setDate","year_number","ordinal_date","floor","getTime","getISOWeek","formatFlags","isObject","isArray","extend","words","getGroup","getRaw","values","optional","textarea","placeholder","disabled","create_if_block","default","button","apply","arguments","icon","SLOTS","$$slots","span","div","label_1","label","checked","div_class_value","current","position","align","autoFit","width","nodeCoords","getBoundingClientRect","bodyCoords","body","right","$$invalidate","bottom","contains","$$value","div1","div0","create_if_block_2","create_if_block_1","popup","colors","selectColor","color","t_value","div_data_id_value","if_block","items","navIndex","move","keydown","navigate","navCallback","selectCallback","isVisible","setNav","dir","min","querySelectorAll","scrollIntoView","findIndex","code","getListHandlers","input_1","textField","prevValue","filterOptions","find","toLowerCase","includes","readonly","focus","inputStyle","setTimeout","monthNames","month","year","part","diff","t0_value","day","t0","div2","isWeekEnd","markers","weekdays","concat","days","dv","dm","dd","ranges","selectDates","getStart","getEnd","curMonth","mark","months","monthNum","selectMonths","setMonth","_","years","selectYears","setFullYear","y","configs","newCurrent","duodecade","div2_class_value","buttons","selectDate","doShift","doChange","format","dateFormat","replace","dateToString","addMonth","rPrev","leftCurrent","rightCurrent","doChangeStart","selectChange","doChangeEnd","final","option_value_value","selected_option","querySelector","progress","bgStyle","fade","linear","getComputedStyle","opacity","notice","remove","button_changes","each_blocks","div2_transition","modal","title","reject","modal_1_changes","message","notices","showNotice","msg","expire","showModal","rej","portal","theme","span1","span0","drag","accept","multiple","folder","uploadURL","count","flatten","item","path","isFile","file","addFile","isDirectory","createReader","readEntries","status","upload","files","requests","rec","formData","FormData","fetch","method","json","catch","console","log","defaultUploader","all","updateData","err","ind","webkitdirectory","dataTransfer","entry","webkitGetAsEntry","link0","link1","if_block0","fonts","subscriber_queue","stop","subscribers","new_value","run_queue","subscriber","invalidate","defaultCardShape","show","description","start_date","end_date","users","priority","cover","attached","menu","defaultEditorShape","defaultEditorConfig","debounce","autoSave","elementsIds","toolbar","editor","scrollableContent","customIcons","getDefaultCardMenuItems","baseItems","edit","getDefaultColumnMenuItems","columns","columnIndex","getDefaultRowMenuItems","rows","rowIndex","isSameId","firstId","secondId","includesId","getAreaId","columnId","rowId","splitAreaId","areaId","getCardAreaId","card","columnKey","rowKey","normalizeMenuConfig","_a","shape","defaultMenuItems","nShape","menuItemsFn","getNormalizedMenuItems","getSortedCards","sortRule","cards","cardsByColumn","reduce","getSortItem","by","sortConfig","second","localeCompare","numeric","flat","moveCard","before","cardIndex","cardsMap","isInSameArea","isInSameColumn","areasMeta","noFreeSpace","movedCard","originalCard","cardArea","movedCardIndex","afterCard","overCardIndex","$meta","skipHistory","addCard","cardObj","updateCard","duplicateCard","cardToCopy","newCard","deleteCard","restore","moveColumn","col","afterColumn","beforeColumnIndex","addColumn","column","colObj","to","updateColumn","originalColumn","deleteColumn","moveRow","afterRow","row","beforeRowIndex","addRow","rowObj","collapsed","updateRow","originalRow","deleteRow","startDrag","source","dragItemsCoords","dropAreasCoords","cardsMeta","layout","area","height","meta","dragging","overAreaId","dragItemId","dragItemArea","moveInSameArea","endDrag","nextState","batchId","batch","updatedAreasMeta","selectCard","groupMode","stateSelected","search","cardId","unselectCard","selectedId","compare","isValueInCard","setSearch","rawValue","searchRule","trim","acc","getVisibleCards","found","dimmed","scrollHandler","scroll","setSort","preserve","setEdit","addComment","comment","currentUser","commentId","commentCard","comments","userId","updateComment","originalComment","deleteComment","addLink","link","links","linkId","storeLink","linkObj","deleteLink","originalLink","addVote","votes","deleteVote","DataStore","w","super","history","_router","cardsCount","_computeLimits","_initStructure","_setHandlers","rawCards","rawLinks","rawColumns","rawRows","rawReadonly","_normalizeReadonlyConfig","_normalizeCards","cardShape","columnShape","rowShape","_normalizeShapes","undo","redo","batches","handlersMap","_b","cardHeight","limit","box","totalLimit","isOverLimit","strictLimit","normalizedCardShape","total","fieldKey","defaultValue","user","avatar","avatarColor","normalizeUsers","dnd","isInRange","range","getDragItemCoords","pointerDown","dragItemOrigin","getEventData","firstTouch","touches","clientX","clientY","locateAttr","getTheme","force","fallback","nameDiv","className","getPropertyValue","dndAction","clone","kanbanElement","kanbanContent","scrollTimer","dragCoords","pointerDownData","dropAreaItemsCoords","api","onAction","dataStore","getStores","checkScroll","clearTimeout","contentRect","scrollState","scrollLeft","scrollTop","shift","left","scrollTo","top","getOverItems","relativeCoords","coords","rect","byX","byY","isInRect","dragItems","pointerCoords","itemId","JSON","stringify","setDragItemClone","overItems","downHandler","itemsId","kanbanEl","updateMode","draggedItem","dragItemHeight","offsetHeight","totalMap","colRect","parse","stayed","cardElem","prevItem","itemCoords","stayedItems","colParentHeight","offsetParent","gap","offsetTop","scrollHeight","getCoords","cloneNode","up","moveHandler","upHandler","itemRect","initialScroll","contentScroll","getPointerRelativeCoords","down","threshold","passThreshold","dragItemCoords","moveDragItem","removeDragItemClone","selection","pressedElem","handleDown","handleUp","dataId","metaKey","ctrlKey","rangeMode","shiftKey","getCard","lastSelectedCard","isSameColumn","columnCards","itemIndex","lastSelectedIndex","startIndex","endIndex","handleSelectAction","getReactiveState","dataAttrKeys","selector","behavior","inline","scrollManager","handleMouseOver","handleMouseLeave","cancelTimer","handleMouseMove","handleMouseUp","keyManager","_node","inFocus","handleKeydown","hotkey","handleHotkey","handleMousedown","widgetId","isImage","extension","ExportManager","_store","fileName","_save","fileExtension","display","blob","Blob","URL","createObjectURL","download","revokeObjectURL","container","at","getNode","svg","spin","clickable","clickOutside","events","handleClick","walkData","filterMenu","sub","prepareMenuData","getItemHandler","i_class_value","subtext","create_if_block_3","if_block2","if_block3","showSub","activeItem","level","menu_changes","if_block1","pos","atBottom","atLeft","atFit","self","relativeTo","mount","object","fitToBody","bodyRect","menuRect","fixLeft","dy","dxL","off","positionToParent","pack","resolver","dataKey","filteredOptions","menuIgnore","getDataAttr","icon_changes","input_value_value","div1_data_row_header_value","collapsable","labelEl","menuEl","renaming","rowLabel","endRenaming","handleRowRename","handleMove","$readonly","menuItems","getMenuItems","$rowShape","isMenuVisible","rowClass","buildRowCss","$columns","$cardsMap","charCode","onClick","showValue","round","img","img_src_value","img_alt_value","noTransform","border","firstLetters","each_value","startDate","create_if_block_6","endDate","create_if_block_5","create_if_block_4","t1_value","t1","create_if_block_7","if_block4","div3","defaultFormat","cardFields","lang","footerValues","_c","_d","_e","_f","_g","_h","usersIds","usersConfig","maxUsersCount","showStartDate","startFormat","showEndDate","endFormat","getFooterValues","$$subscribe_currentUser","headerValues","priorityValue","customFieldsConfig","headerFields","customFields","field","getHeaderValues","div0_data_menu_id_value","progress_changes","if_block5","coverAttachment","isCover","coverURL","contentClasses","getCss","div_data_drag_item_value","cardTemplate","cardHeightValue","get_item_slot_context","div_data_index_value","iframe","tabIndex","contentWindow","onload","__awaiter","thisArg","_arguments","P","generator","fulfilled","rejected","scrollToId","itemHeight","viewport","contents","visibleItems","averageHeight","heightMap","viewportHeight","isMounted","updateVisibleItems","updateRemainigHeight","remaining","rowsHeight","rowHeight","contentHeight","show_if","Card","cardcontainer_changes","overCardId","overColId","movedCardId","movedCardHeight","$scrollTo","textContent","t2_value","t2","switch_value","overlay","areaMeta","rSelected","rCardShape","rCardsMeta","rReadonly","rOverCardId","rOverColId","rMovedCardId","rDragItemsCoords","rLayout","rCardHeight","$rReadonly","movedCardCoords","$rDragItemsCoords","$rMovedCardId","$rSelected","$rCardShape","$rCardsMeta","$rOverCardId","$rOverColId","$rLayout","$rCardHeight","areaHeight","areaDragHeight","columnClass","buildColumnCss","$columnShape","portal_action","div_data_menu_id_value","t3_value","t3","div2_data_column_header_value","contentEl","columnEl","columnLabel","handleColumnRename","handleColumnCollapse","columnOffset","positionCollapsedCol","offsetLeft","ro","ResizeObserver","disconnect","observe","isValid","fixed","fixedHeaders","columnMenuItems","renamingCard","showMenu","cancelBubble","rCardsMap","rColumns","rRows","rCards","rColumnKey","listEl","virtualContentEl","maxCardsCount","byRow","updateIndexes","heightReserve","newStartIndex","fullCardHeight","newEndIndex","$rCardsMap","$rColumns","$rRows","$rCards","$rColumnKey","maxInRow","areaCardsCount","minIndex","maxIndex","visible","topIndex","leftIndex","columnWidth","parseFloat","scrollToItem","byRowConfig","updateRows","topPadding","bottomPadding","isSame","nv","form","changes","timer","base","upd","reset","previewURL","a_href_value","a_download_value","fileSize","handleMakeCover","ext","copy","$values","$files","layoutEl","formattedValue","checkbox_changes","checkboxes","op","tag","blur","resize","pre","raw_value","html_tag","show_if_1","div5","div5_data_comment_id_value","div4","t4","t4_value","usericon_changes","func","usersById","dateFormatter","inputValue","editId","editText","cancelEdit","$cards","handleDelete","div6","storeCards","storeLinks","relationOptions","relation","master","selectedRelationId","selectedCardId","cardOptions","isCardSelectDisabled","addLinkMode","handleCancel","handleAddLink","isMaster","masterId","slaveId","handleRelationSelectorChange","goToRelatedLink","related","$storeLinks","dlink","$storeCards","create_if_block_21","create_if_block_19","create_if_block_20","func_3","comments_changes","placement","daterangepicker_props","daterangepicker_changes","area_spread_levels","text_1_spread_levels","coreEn","editCard","editorShape","formValues","saveForm","view","handleViewChange","votersList","voters","rState","$dragItemId","$edit","rawEditorShape","cardField","normalizeEditorShape","$cardShape","setDefaults","userConfig","u","$currentUser","$$self","storeColumns","storeRowKey","storeRows","storeReadonly","cardMenuItems","$storeReadonly","scrollType","renderType","editorAutoSave","lastInRoute","lastRoute","intercept","serialize","export","getAreaCards","getApi","searchResults","searchEl","searchFocused","handleSearchResultClick","select_props","select_changes","search_1_props","search_1_changes","showOptions","changeHandler","$cardsMeta","$search","stateSort","$stateSort","rHistory","canUndo","$rHistory","canRedo","template","htmlString","$$restProps","Events","_api","themes","material","willow","template_changes","sort_changes","search_changes","cantSendYet","Symbol","ActionQueue","_awaitAddingQueue","_queue","_idPool","_backId","tID","proc","qid","tryExec","execQueue","correctData","correctID","ignoreID","ignore","after","hasRealID","token","_url","_token","_mode","_seed","_events","headers","Accept","credentials","load","websocket","_wrapper","connect","_socket","onclose","close","location","protocol","WebSocket","onmessage","fire","onError","_send","_resubscribe","_uid","args","onCall","send","onResponse","_init","destructor","_component","setConfig","setLocale","externalContext","SvelteEditor","_configToProps","_kanban","getSelection","SvelteKanban","remote","Client","req","_ready","back","_remote","_customHeaders","defaultHandlers","prepareCard","getHandlers","skipProvider","getCards","parseCards","getColumns","getRows","getUsers","getLinks","setHeaders","getIDResolver","customHeaders","_toolbar","SvelteToolbar","_normalizeItems","Proxy","Template","construct"],"mappings":"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","x_google_ignoreList":[0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,89,90,91,92,93,94,95,96,97,98,149]}