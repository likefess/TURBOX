{"version":3,"file":"todo.js","sources":["../../../node_modules/@xbs/lib-core-dom/dist/locate.js","../../../node_modules/@xbs/lib-core-dom/dist/delegateClick.js","../../../node_modules/@xbs/lib-core-dom/dist/clickOutside.js","../../../node_modules/@xbs/lib-core-dom/dist/locale.js","../../../node_modules/svelte/internal/index.mjs","../../../node_modules/@xbs/lib-core-dom/dist/uid.js","../../../node_modules/@xbs/svelte-wx/src/common/Dropdown.svelte","../../../node_modules/@xbs/svelte-wx/src/common/calendar/Header.svelte","../../../node_modules/@xbs/svelte-wx/src/common/calendar/Month.svelte","../../../node_modules/@xbs/svelte-wx/src/common/calendar/Button.svelte","../../../node_modules/@xbs/svelte-wx/src/common/calendar/Year.svelte","../../../node_modules/@xbs/svelte-wx/src/common/calendar/Duodecade.svelte","../../../node_modules/@xbs/svelte-wx/src/common/Calendar.svelte","../../../node_modules/@xbs/svelte-wx/src/common/Portal.svelte","../../../node_modules/@xbs/svelte-wx/src/themes/Material.svelte","../../../node_modules/@xbs/svelte-wx/src/locales/en.js","../../../node_modules/@xbs/svelte-wx/src/locales/Locale.svelte","../../../svelte/src/themes/Material.svelte","../../../node_modules/@xbs/wx-core-locales/locales/en.js","../../../svelte/src/locales/en.ts","../../../node_modules/@xbs/lib-state/dist/helpers.js","../../../node_modules/@xbs/lib-state/dist/DataRouter.js","../../../node_modules/@xbs/lib-state/dist/EventBus.js","../../../node_modules/@xbs/lib-state/dist/EventBusRouter.js","../../../lib-todo/dist/helpers.js","../../../lib-todo/dist/data/constants.js","../../../lib-todo/dist/common/regexp.js","../../../lib-todo/dist/common/filter.js","../../../lib-todo/dist/common/normalize.js","../../../lib-todo/dist/common/user.js","../../../lib-todo/dist/actions/common.js","../../../lib-todo/dist/handlers/task/add.js","../../../lib-todo/dist/handlers/task/update.js","../../../lib-todo/dist/handlers/task/move.js","../../../lib-todo/dist/handlers/task/copy.js","../../../lib-todo/dist/handlers/task/paste.js","../../../lib-todo/dist/handlers/task/delete.js","../../../lib-todo/dist/handlers/task/expand.js","../../../lib-todo/dist/handlers/task/collapse.js","../../../lib-todo/dist/handlers/task/check.js","../../../lib-todo/dist/handlers/task/uncheck.js","../../../lib-todo/dist/handlers/task/indent.js","../../../lib-todo/dist/handlers/task/unindent.js","../../../lib-todo/dist/handlers/task/showCompleted.js","../../../lib-todo/dist/handlers/task/hideCompleted.js","../../../lib-todo/dist/handlers/selection/select.js","../../../lib-todo/dist/handlers/selection/unselect.js","../../../lib-todo/dist/handlers/project/add.js","../../../lib-todo/dist/handlers/project/update.js","../../../lib-todo/dist/handlers/project/set.js","../../../lib-todo/dist/handlers/project/delete.js","../../../lib-todo/dist/common/date.js","../../../lib-todo/dist/data/menu.js","../../../lib-todo/dist/handlers/menu/open.js","../../../lib-todo/dist/handlers/menu/close.js","../../../lib-todo/dist/actions/task/common.js","../../../lib-todo/dist/actions/project.js","../../../lib-todo/dist/actions/task/add.js","../../../lib-todo/dist/actions/task/delete.js","../../../lib-todo/dist/actions/task/paste.js","../../../lib-todo/dist/actions/task/duplicate.js","../../../lib-todo/dist/actions/task/copy.js","../../../lib-todo/dist/actions/task/indent.js","../../../lib-todo/dist/actions/task/unindent.js","../../../lib-todo/dist/actions/task/priority.js","../../../lib-todo/dist/handlers/menu/handlers/task.js","../../../lib-todo/dist/common/text.js","../../../lib-todo/dist/handlers/menu/handlers/toolbar.js","../../../lib-todo/dist/handlers/menu/click.js","../../../lib-todo/dist/handlers/user/assign.js","../../../lib-todo/dist/handlers/user/unassign.js","../../../lib-todo/dist/handlers/editor/open.js","../../../lib-todo/dist/handlers/editor/close.js","../../../lib-todo/dist/handlers/editor/editing.js","../../../lib-dom/dist/locate.js","../../../lib-dom/dist/carret.js","../../../lib-todo/dist/actions/task/check.js","../../../lib-todo/dist/actions/task/move.js","../../../lib-todo/dist/handlers/keyNavigation.js","../../../lib-todo/dist/actions/task/uncheck.js","../../../lib-todo/dist/handlers/filter.js","../../../lib-todo/dist/handlers/sort.js","../../../lib-todo/dist/handlers/components/search.js","../../../lib-todo/dist/handlers/components/duedate.js","../../../lib-todo/dist/handlers/components/combo.js","../../../lib-todo/dist/handlers/dnd/start.js","../../../lib-todo/dist/handlers/dnd/end.js","../../../lib-todo/dist/handlers/dnd/drag.js","../../../lib-todo/dist/common/sort.js","../../../lib-todo/dist/DataStore.js","../../../node_modules/@xbs/lib-state/dist/Store.js","../../../lib-todo/dist/package/package.js","../../../lib-todo/dist/common/priority.js","../../../lib-todo/dist/data/tag.js","../../../lib-todo/dist/common/locale.js","../../../lib-todo/dist/actions/selection.js","../../../lib-todo/dist/actions/dnd.js","../../../lib-todo/dist/actions/menu/taskMenu.js","../../../lib-todo/dist/actions/menu/userMenu.js","../../../lib-todo/dist/actions/tagFilter.js","../../../lib-todo/dist/actions/listEditor.js","../../../lib-todo/dist/actions/keyNavigation.js","../../../node_modules/@xbs/svelte-menu/src/helpers.js","../../../node_modules/@xbs/svelte-menu/src/components/MenuItem.svelte","../../../node_modules/@xbs/svelte-menu/src/components/Menu.svelte","../../../svelte/src/library/Icon.svelte","../../../svelte/src/components/Menu/Items/Item.svelte","../../../svelte/src/library/Avatar.svelte","../../../svelte/src/components/Menu/Items/UserItem.svelte","../../../svelte/src/components/Menu/Items/DatePicker.svelte","../../../svelte/src/components/Menu/Items/PriorityItem.svelte","../../../svelte/src/components/Menu/Menu.svelte","../../../svelte/src/library/Checkbox.svelte","../../../svelte/src/library/Button.svelte","../../../svelte/src/components/List/components/Text.svelte","../../../svelte/src/library/Popup.svelte","../../../svelte/src/library/DatePicker.svelte","../../../svelte/src/library/List.svelte","../../../svelte/src/components/List/components/Editor.svelte","../../../svelte/src/components/List/components/DueDate.svelte","../../../svelte/src/components/List/components/Priority.svelte","../../../svelte/src/components/List/List.svelte","../../../svelte/src/library/Separator.svelte","../../../svelte/src/components/Tree/TreeView.svelte","../../../svelte/src/components/Tree/Tree.svelte","../../../svelte/src/components/AddButton.svelte","../../../node_modules/svelte/store/index.mjs","../../../svelte/src/components/ToDo.svelte","../../../lib-todo/dist/api.js","../../../svelte/src/components/Toolbar.svelte","../../../svelte/src/components/Toolbar/Menu.svelte","../../../svelte/src/library/Input.svelte","../../../svelte/src/components/Toolbar/Search.svelte","../../../svelte/src/library/Text.svelte","../../../svelte/src/components/Toolbar/Combo.svelte","../../../Events.ts","../../src/components/Template.svelte","../../src/components/Toolbar.svelte","../../../provider/dist/constants.js","../../../provider/dist/ActionQueue.js","../../../node_modules/remote-client/dist/remote.es6.js","../../../provider/dist/RemoteEvents.js","../../../provider/dist/RestDataProvider.js","../../../ToDo.ts","../../../Toolbar.ts","../../../provider/dist/TodoUpdates.js"],"sourcesContent":["export function locate(el, attr = \"data-id\") {\n    let node = el;\n    if (!node.tagName && el.target)\n        node = el.target;\n    while (node) {\n        if (node.getAttribute) {\n            const id = node.getAttribute(attr);\n            if (id)\n                return node;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nexport function locateAttr(el, attr = \"data-id\") {\n    const node = locate(el, attr);\n    if (node)\n        return node.getAttribute(attr);\n    return null;\n}\nexport function locateID(el, attr = \"data-id\") {\n    const node = locate(el, attr);\n    if (node) {\n        return id(node.getAttribute(attr));\n    }\n    return null;\n}\nexport function locateNode(el, node) {\n    let n = el;\n    while (n) {\n        if (n === node) {\n            return true;\n        }\n        n = n?.parentNode;\n    }\n    return null;\n}\nexport function id(value) {\n    if (typeof value === \"string\") {\n        const t = value * 1;\n        if (!isNaN(t))\n            return t;\n    }\n    return value;\n}\n//# sourceMappingURL=locate.js.map","import { locate, locateID } from \"./locate\";\nexport function delegateClick(node, handlers) {\n    let lastClick = null;\n    function handleClick(ev) {\n        const node = locate(ev);\n        if (!node)\n            return;\n        const id = parseInt(node.dataset.id);\n        let action;\n        let test = ev.target;\n        while (test != node) {\n            action = test.dataset ? test.dataset.action : null;\n            if (action) {\n                if (handlers[action])\n                    handlers[action](id, ev);\n                lastClick = new Date().valueOf();\n                break;\n            }\n            test = test.parentNode;\n        }\n        if (handlers.click && !action)\n            handlers.click(id, ev);\n    }\n    function handleDblClick(ev) {\n        if (lastClick && new Date().valueOf() - lastClick < 200)\n            return;\n        const id = locateID(ev);\n        if (id && handlers.dblclick)\n            handlers.dblclick(id, ev);\n    }\n    node.addEventListener(\"click\", handleClick);\n    node.addEventListener(\"dblclick\", handleDblClick);\n}\n//# sourceMappingURL=delegateClick.js.map","export function clickOutside(node, callback) {\n    const events = [\"click\"];\n    const handleClick = (event) => {\n        if (node &&\n            !node.contains(event.target) &&\n            !event.defaultPrevented) {\n            callback(event);\n        }\n    };\n    events.forEach(e => document.addEventListener(e, handleClick, true));\n    return {\n        destroy() {\n            events.forEach(e => document.removeEventListener(e, handleClick, true));\n        },\n    };\n}\n//# sourceMappingURL=clickOutside.js.map","function isObject(a) {\n    return a && typeof a === \"object\" && !Array.isArray(a);\n}\nfunction extend(a, b) {\n    for (const key in b) {\n        const from = b[key];\n        if (isObject(a[key]) && isObject(from)) {\n            a[key] = extend({ ...a[key] }, b[key]);\n        }\n        else {\n            a[key] = b[key];\n        }\n    }\n    return a;\n}\nexport function locale(words) {\n    return {\n        getGroup(group) {\n            const block = words[group];\n            return (key) => {\n                return block ? block[key] || key : key;\n            };\n        },\n        getRaw() {\n            return words;\n        },\n        extend(values, optional) {\n            if (!values)\n                return this;\n            let data;\n            if (optional) {\n                data = extend({ ...values }, words);\n            }\n            else {\n                data = extend({ ...words }, values);\n            }\n            return locale(data);\n        },\n    };\n}\n//# sourceMappingURL=locale.js.map","function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentElement !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration();\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    select.selectedIndex = -1; // no option should be selected\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, bubbles = false) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor() {\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes) {\n        super();\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = append_empty_stylesheet(node).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro  we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro  needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction escape_attribute_value(value) {\n    return typeof value === 'string' ? escape(value) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(context || (parent_component ? parent_component.$$.context : [])),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.44.2' }, detail), true));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","let id = new Date().valueOf();\nexport function uid() {\n    id += 1;\n    return id;\n}\n//# sourceMappingURL=uid.js.map","<script>\n\timport { afterUpdate } from \"svelte\";\n\n\texport let position = \"bottom\";\n\texport let align = \"start\";\n\texport let autoFit = true;\n\texport let cancel = null;\n\texport let width = \"100%\";\n\n\tlet node;\n\n\tafterUpdate(() => {\n\t\tif (autoFit) {\n\t\t\tconst nodeCoords = node.getBoundingClientRect();\n\t\t\tconst bodyCoords = document.body.getBoundingClientRect();\n\n\t\t\tif (nodeCoords.right >= bodyCoords.right) {\n\t\t\t\talign = \"end\";\n\t\t\t}\n\n\t\t\tif (nodeCoords.bottom >= bodyCoords.bottom) {\n\t\t\t\tposition = \"top\";\n\t\t\t}\n\t\t\treturn `${position}-${align}`;\n\t\t}\n\t});\n\n\tfunction down(e) {\n\t\tif (!node.contains(e.target)) {\n\t\t\tif (cancel) cancel(e);\n\t\t}\n\t}\n\n</script>\n\n<svelte:body on:mousedown={down} />\n\n<div\n\tbind:this={node}\n\tclass=\"dropdown {`${position}-${align}`}\"\n\tstyle=\"width:{width}\">\n\t<slot />\n</div>\n\n<style>\n\t.dropdown {\n\t\tposition: absolute;\n\t\tz-index: 5;\n\t\tbackground: var(--wx-popup-background);\n\t\tbox-shadow: var(--wx-popup-shadow);\n\t\tborder: var(--wx-popup-border);\n\t\tborder-radius: var(--wx-popup-border-radius);\n\t\toverflow: hidden;\n\t}\n\n\t.top-center {\n\t\ttop: 0;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -100%) translateY(-2px);\n\t}\n\n\t.top-start {\n\t\ttop: 0;\n\t\tleft: 0;\n\t\ttransform: translateY(-100%) translateY(-2px);\n\t}\n\n\t.top-end {\n\t\ttop: 0;\n\t\tright: 0;\n\t\ttransform: translateY(-100%) translateY(-2px);\n\t}\n\n\t.bottom-center {\n\t\tbottom: 0;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, 100%) translateY(2px);\n\t}\n\n\t.bottom-start {\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\ttransform: translateY(100%) translateY(2px);\n\t}\n\n\t.bottom-end {\n\t\tbottom: 0;\n\t\tright: 0;\n\t\ttransform: translateY(100%) translateY(2px);\n\t}\n\n\t.left-center {\n\t\tbottom: 50%;\n\t\tleft: 0;\n\t\ttransform: translate(-100%, 50%) translateX(-2px);\n\t}\n\n\t.left-start {\n\t\ttop: 0;\n\t\tleft: 0;\n\t\ttransform: translateX(-100%) translateX(-2px);\n\t}\n\n\t.left-end {\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\ttransform: translateX(-100%) translateX(-2px);\n\t}\n\n\t.right-center {\n\t\tbottom: 50%;\n\t\tright: 0;\n\t\ttransform: translate(100%, 50%) translateX(2px);\n\t}\n\n\t.right-start {\n\t\ttop: 0;\n\t\tright: 0;\n\t\ttransform: translateX(100%) translateX(2px);\n\t}\n\n\t.right-end {\n\t\tbottom: 0;\n\t\tright: 0;\n\t\ttransform: translateX(100%) translateX(2px);\n\t}\n\n</style>\n","<script>\n\timport { getContext } from \"svelte\";\n\n\tconst locale = getContext(\"wx-i18n\").getRaw().calendar;\n\tconst monthNames = locale.monthFull;\n\n\texport let date;\n\texport let type;\n\texport let prev;\n\texport let next;\n\n\texport let part;\n\n\tlet month, year, label;\n\t$: {\n\t\tmonth = date.getMonth();\n\t\tyear = date.getFullYear();\n\n\t\tswitch (type) {\n\t\t\tcase \"month\":\n\t\t\t\tlabel = `${monthNames[month]} ${year}`;\n\t\t\t\tbreak;\n\t\t\tcase \"year\":\n\t\t\t\tlabel = year;\n\t\t\t\tbreak;\n\t\t\tcase \"duodecade\": {\n\t\t\t\tconst start = year - (year % 10);\n\t\t\t\tconst end = start + 9;\n\n\t\t\t\tlabel = `${start} - ${end}`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction changeType() {\n\t\tif (type === \"month\") type = \"year\";\n\t\telse if (type === \"year\") type = \"duodecade\";\n\t}\n\n</script>\n\n<div class=\"header\">\n\t{#if part != 'right'}\n\t\t<i class=\"pager wxi-angle-left\" on:click={prev} />\n\t{:else}<span class=\"spacer\" />{/if}\n\t<span class=\"label\" on:click={changeType}>{label}</span>\n\t{#if part != 'left'}\n\t\t<i class=\"pager wxi-angle-right\" on:click={next} />\n\t{:else}<span class=\"spacer\" />{/if}\n</div>\n\n<style>\n\t.header {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tmargin-bottom: var(--wx-calendar-gutter);\n\t\tfont-size: var(--wx-calendar-header-font-size);\n\t\tline-height: var(--wx-calendar-header-line-height);\n\t\tfont-weight: var(--wx-calendar-header-font-weight);\n\t}\n\n\t.spacer,\n\t.pager {\n\t\twidth: var(--wx-calendar-cell-size);\n\t\theight: var(--wx-calendar-cell-size);\n\t\tflex-shrink: 0;\n\t}\n\t.pager {\n\t\tcursor: pointer;\n\t\tborder-radius: 50%;\n\t\tline-height: 1;\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tuser-select: none;\n\t\tcolor: var(--wx-calendar-icon-color);\n\t\tfont-size: var(--wx-calendar-icon-size);\n\t}\n\t.pager:before {\n\t\tdisplay: block;\n\t}\n\t.pager:hover {\n\t\tbackground-color: var(--wx-background-hover);\n\t}\n\n\t.label {\n\t\tflex: 0 0 calc(100% - var(--wx-calendar-cell-size) * 2);\n\t\tmax-width: calc(100% - var(--wx-calendar-cell-size) * 2);\n\t\ttext-align: center;\n\t\tcolor: var(--wx-color-link);\n\t\tcursor: pointer;\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t}\n\n</style>\n","<script>\n\timport { getContext } from \"svelte\";\n\timport { delegateClick } from \"@xbs/lib-core-dom\";\n\n\texport let value;\n\texport let current;\n\texport let cancel;\n\texport let part;\n\texport let markers = null;\n\n\tconst locale = getContext(\"wx-i18n\").getRaw().calendar;\n\tconst weekStart = (locale.weekStart || 7) % 7;\n\tconst weekdays = locale.dayShort\n\t\t.slice(weekStart)\n\t\t.concat(locale.dayShort.slice(0, weekStart));\n\n\tlet days;\n\tlet date;\n\n\tconst dv = (d, dm, dd) =>\n\t\tnew Date(\n\t\t\td.getFullYear(),\n\t\t\td.getMonth() + (dm || 0),\n\t\t\td.getDate() + (dd || 0)\n\t\t);\n\tlet ranges = part !== \"normal\";\n\t$: {\n\t\tif (part == \"normal\") date = [value ? dv(value).valueOf() : 0];\n\t\telse\n\t\t\tdate = value\n\t\t\t\t? [\n\t\t\t\t\t\tvalue.start ? dv(value.start).valueOf() : 0,\n\t\t\t\t\t\tvalue.end ? dv(value.end).valueOf() : 0,\n\t\t\t\t  ]\n\t\t\t\t: [0, 0];\n\n\t\tconst start = getStart();\n\t\tconst end = getEnd();\n\t\tconst curMonth = current.getMonth();\n\t\tdays = [];\n\t\tfor (let d = start; d <= end; d.setDate(d.getDate() + 1)) {\n\t\t\tconst day = {\n\t\t\t\tday: d.getDate(),\n\t\t\t\tin: d.getMonth() === curMonth,\n\t\t\t\tdate: d.valueOf(),\n\t\t\t};\n\n\t\t\tlet css = \"\";\n\t\t\tcss += !day.in ? \" inactive\" : \"\";\n\t\t\tcss += date.indexOf(day.date) > -1 ? \" selected\" : \"\";\n\n\t\t\tif (ranges) {\n\t\t\t\tconst s = day.date == date[0];\n\t\t\t\tconst e = day.date == date[1];\n\t\t\t\tif (s && !e) css += \" left\";\n\t\t\t\telse if (e && !s) css += \" right\";\n\n\t\t\t\tif (day.date > date[0] && day.date < date[1]) css += \" inrange\";\n\t\t\t}\n\n\t\t\tcss += isWeekEnd(d) ? \" weekend\" : \"\";\n\t\t\tif (markers) {\n\t\t\t\tconst mark = markers(d);\n\t\t\t\tif (mark) css += \" \" + mark;\n\t\t\t}\n\n\t\t\tdays.push({ ...day, css });\n\t\t}\n\t}\n\n\tfunction isWeekEnd(date) {\n\t\tconst d = date.getDay();\n\t\treturn d === 0 || d === 6;\n\t}\n\n\tfunction getStart() {\n\t\tconst start = dv(current, 0, 1 - current.getDate());\n\t\tstart.setDate(\n\t\t\tstart.getDate() - ((start.getDay() - (weekStart - 7)) % 7)\n\t\t);\n\t\treturn start;\n\t}\n\tfunction getEnd() {\n\t\tconst end = dv(current, 1, -current.getDate());\n\t\tend.setDate(end.getDate() + ((6 - end.getDay() + weekStart) % 7));\n\t\treturn end;\n\t}\n\n\tconst selectDates = {\n\t\tclick: selectDate,\n\t};\n\n\tfunction selectDate(date, e) {\n\t\te.stopPropagation();\n\n\t\tif (date) {\n\t\t\tcurrent = new Date(date);\n\t\t\tif (part === \"normal\") value = new Date(current);\n\t\t\telse {\n\t\t\t\tif (!value) value = { start: null, end: null };\n\t\t\t\tif (value.end || !value.start)\n\t\t\t\t\tvalue = {\n\t\t\t\t\t\tstart: new Date(current),\n\t\t\t\t\t\tend: null,\n\t\t\t\t\t};\n\t\t\t\telse {\n\t\t\t\t\tvalue.end = new Date(current);\n\t\t\t\t\tif (value.end < value.start)\n\t\t\t\t\t\t[value.start, value.end] = [value.end, value.start];\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvalue = null;\n\t\t\tcurrent = new Date();\n\t\t}\n\n\t\tif (part === \"normal\") cancel();\n\t}\n\n</script>\n\n<div class=\"weekdays\">\n\t{#each weekdays as day}\n\t\t<div class=\"weekday\">{day}</div>\n\t{/each}\n</div>\n<div class=\"days\" use:delegateClick={selectDates}>\n\t{#each days as day (day.date)}\n\t\t<div class=\"day {day.css}\" class:out={!day.in} data-id={day.date}>\n\t\t\t{day.day}\n\t\t</div>\n\t{/each}\n</div>\n\n<style>\n\t.weekdays {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\tmargin-bottom: var(--wx-calendar-gutter);\n\t}\n\n\t.weekday {\n\t\tflex: 0 0 calc(100% / 7);\n\t\tmax-width: calc(100% / 7);\n\t\tfont-size: var(--wx-font-size-sm);\n\t\tline-height: var(--wx-line-height-sm);\n\t\tcolor: var(--wx-color-font-alt);\n\t\ttext-align: center;\n\t}\n\n\t.days {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tmargin: calc(var(--wx-calendar-cell-gap) / -2);\n\t}\n\n\t.day {\n\t\tborder-radius: 50%;\n\t\tflex: 0 0 calc(100% / 7 - var(--wx-calendar-cell-gap));\n\t\tmax-width: calc(100% / 7 - var(--wx-calendar-cell-gap));\n\t\tmargin: calc(var(--wx-calendar-cell-gap) / 2);\n\t\theight: var(--wx-calendar-cell-size);\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttext-align: center;\n\t}\n\t.day:not(.out):not(.selected) {\n\t\tcursor: pointer;\n\t}\n\t.day:not(.out):not(.selected):hover {\n\t\tbackground: var(--wx-background-hover);\n\t}\n\t.day.out {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\t.day.selected:not(.out) {\n\t\tbackground: var(--wx-color-primary);\n\t\tcolor: var(--wx-color-primary-font);\n\t}\n\t.day.selected.left:not(.out) {\n\t\tborder-radius: calc(var(--wx-calendar-cell-size) / 2) 0 0\n\t\t\tcalc(var(--wx-calendar-cell-size) / 2);\n\t}\n\t.day.selected.right:not(.out) {\n\t\tborder-radius: 0 calc(var(--wx-calendar-cell-size) / 2)\n\t\t\tcalc(var(--wx-calendar-cell-size) / 2) 0;\n\t}\n\t.day.inrange:not(.out) {\n\t\tborder-radius: 0;\n\t\tbackground: var(--wx-color-primary-selected);\n\t}\n\t.day.weekend:not(.selected):not(.out) {\n\t\tcolor: var(--wx-color-primary);\n\t}\n\t.day.inactive {\n\t\tpointer-events: none;\n\t}\n\n</style>\n","<script>\n\texport let click;\n\n</script>\n\n<button on:click={click}>\n\t<slot />\n</button>\n\n<style>\n\tbutton {\n\t\tdisplay: inline-block;\n\t\tvertical-align: top;\n\t\ttext-decoration: none;\n\t\ttext-align: center;\n\t\tletter-spacing: normal;\n\t\tfont-family: var(--wx-calendar-controls-font-family);\n\t\tfont-size: var(--wx-calendar-controls-font-size);\n\t\tline-height: var(--wx-calendar-controls-line-height);\n\t\tfont-weight: var(--wx-calendar-controls-font-weight);\n\t\ttext-transform: none;\n\t\tpadding: 0;\n\t\tborder: none;\n\t\tborder-radius: 0;\n\t\tbackground: transparent;\n\t\tcolor: var(--wx-calendar-controls-font-color);\n\t\tcursor: pointer;\n\t\tbox-shadow: none;\n\t\ttransition: none;\n\t\tmax-width: 100%;\n\t\tuser-select: none;\n\t}\n\tbutton,\n\tbutton:focus,\n\tbutton:active {\n\t\toutline: none;\n\t}\n\tbutton:active {\n\t\topacity: 0.8;\n\t}\n\n</style>\n","<script>\n\timport { getContext } from \"svelte\";\n\timport { delegateClick } from \"@xbs/lib-core-dom\";\n\timport Button from \"./Button.svelte\";\n\n\texport let value;\n\texport let current;\n\texport let cancel;\n\texport let part;\n\n\tconst locale = getContext(\"wx-i18n\").getRaw().calendar;\n\tconst months = locale.monthShort;\n\n\tlet monthNum;\n\t$: {\n\t\tif (part !== \"normal\" && value) {\n\t\t\tif (part === \"left\" && value.start)\n\t\t\t\tmonthNum = value.start.getMonth();\n\t\t\telse if (part === \"right\" && value.end)\n\t\t\t\tmonthNum = value.end.getMonth();\n\t\t\telse monthNum = current.getMonth();\n\t\t} else {\n\t\t\tmonthNum = current.getMonth();\n\t\t}\n\t}\n\n\tconst selectMonths = {\n\t\tclick: selectMonth,\n\t};\n\tfunction selectMonth(month) {\n\t\tif (month) {\n\t\t\tcurrent.setMonth(month);\n\t\t\tcurrent = current;\n\t\t}\n\n\t\tif (part === \"normal\") value = new Date(current);\n\n\t\tcancel();\n\t}\n\n</script>\n\n<div class=\"months\" use:delegateClick={selectMonths}>\n\t{#each months as month, i}\n\t\t<div class=\"month\" class:current={monthNum === i} data-id={i}>\n\t\t\t{month}\n\t\t</div>\n\t{/each}\n</div>\n<div class=\"buttons\">\n\t<Button click={cancel}>{locale.done}</Button>\n</div>\n\n<style>\n\t.months {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tmargin: calc(var(--wx-calendar-cell-gap) / -2);\n\t}\n\n\t.month {\n\t\tflex: 0 0 calc(100% / 4 - var(--wx-calendar-cell-gap));\n\t\tmax-width: calc(100% / 4 - var(--wx-calendar-cell-gap));\n\t\tmargin: calc(var(--wx-calendar-cell-gap) / 2 + 5px)\n\t\t\tcalc(var(--wx-calendar-cell-gap) / 2);\n\t\ttext-align: center;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\theight: var(--wx-calendar-cell-size);\n\t\tborder-radius: calc(var(--wx-calendar-cell-size) / 2);\n\t}\n\t.month.current {\n\t\tbackground: var(--wx-color-primary);\n\t\tcolor: var(--wx-color-primary-font);\n\t}\n\t.month:not(.current):hover {\n\t\tbackground-color: var(--wx-background-hover);\n\t}\n\n\t.buttons {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmargin-top: var(--wx-calendar-gutter);\n\t}\n\n</style>\n","<script>\n\timport { getContext } from \"svelte\";\n\timport { delegateClick } from \"@xbs/lib-core-dom\";\n\timport Button from \"./Button.svelte\";\n\n\tconst _ = getContext(\"wx-i18n\").getRaw().calendar;\n\n\texport let value;\n\texport let current;\n\texport let cancel;\n\texport let part;\n\n\tlet years;\n\tlet year;\n\t$: {\n\t\tif (part !== \"normal\" && value) {\n\t\t\tif (part === \"left\" && value.start)\n\t\t\t\tyear = value.start.getFullYear();\n\t\t\telse if (part === \"right\" && value.end)\n\t\t\t\tyear = value.end.getFullYear();\n\t\t\telse year = current.getFullYear();\n\t\t} else {\n\t\t\tyear = current.getFullYear();\n\t\t}\n\n\t\tconst start = year - (year % 10) - 1;\n\t\tconst end = start + 12;\n\t\tyears = [];\n\t\tfor (let y = start; y < end; ++y) {\n\t\t\tyears.push(y);\n\t\t}\n\t}\n\n\tconst selectYears = {\n\t\tclick: selectYear,\n\t};\n\tfunction selectYear(year) {\n\t\tif (year) {\n\t\t\tcurrent.setFullYear(year);\n\t\t\tcurrent = current;\n\t\t}\n\n\t\tif (part === \"normal\") value = new Date(current);\n\n\t\tcancel();\n\t}\n\n</script>\n\n<div class=\"years\" use:delegateClick={selectYears}>\n\t{#each years as y, i}\n\t\t<div\n\t\t\tclass=\"year\"\n\t\t\tclass:current={year == y}\n\t\t\tclass:prev-decade={i === 0}\n\t\t\tclass:next-decade={i === 11}\n\t\t\tdata-id={y}>\n\t\t\t{y}\n\t\t</div>\n\t{/each}\n</div>\n<div class=\"buttons\">\n\t<Button click={cancel}>{_.done}</Button>\n</div>\n\n<style>\n\t.years {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tmargin: calc(var(--wx-calendar-cell-gap) / -2);\n\t}\n\n\t.year {\n\t\tflex: 0 0 calc(100% / 4 - var(--wx-calendar-cell-gap));\n\t\tmax-width: calc(100% / 4 - var(--wx-calendar-cell-gap));\n\t\tmargin: calc(var(--wx-calendar-cell-gap) / 2 + 5px)\n\t\t\tcalc(var(--wx-calendar-cell-gap) / 2);\n\t\ttext-align: center;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\theight: var(--wx-calendar-cell-size);\n\t\tborder-radius: calc(var(--wx-calendar-cell-size) / 2);\n\t}\n\t.year.current {\n\t\tbackground: var(--wx-color-primary);\n\t\tcolor: var(--wx-color-primary-font);\n\t}\n\t.year:not(.current):hover {\n\t\tbackground-color: var(--wx-background-hover);\n\t}\n\t.prev-decade,\n\t.next-decade {\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\t.buttons {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmargin-top: var(--wx-calendar-gutter);\n\t}\n\n</style>\n","<script>\n\timport { getContext } from \"svelte\";\n\n\timport Header from \"./calendar/Header.svelte\";\n\timport Month from \"./calendar/Month.svelte\";\n\timport Year from \"./calendar/Year.svelte\";\n\timport Duodecade from \"./calendar/Duodecade.svelte\";\n\timport Button from \"./calendar/Button.svelte\";\n\n\tconst _ = getContext(\"wx-i18n\").getGroup(\"calendar\");\n\n\texport let value;\n\texport let current;\n\texport let cancel = null;\n\texport let part = \"normal\";\n\texport let markers = null;\n\texport let buttons = true;\n\n\t$: current = current || value || new Date();\n\n\tlet type = \"month\";\n\tconst types = {\n\t\tmonth: {\n\t\t\tcomponent: Month,\n\t\t\tnext: nextMonth,\n\t\t\tprev: prevMonth,\n\t\t\tcancel: cancelMonth,\n\t\t},\n\t\tyear: {\n\t\t\tcomponent: Year,\n\t\t\tnext: nextYear,\n\t\t\tprev: prevYear,\n\t\t\tcancel: backToMonth,\n\t\t},\n\t\tduodecade: {\n\t\t\tcomponent: Duodecade,\n\t\t\tnext: nextDuodecade,\n\t\t\tprev: prevDuodecade,\n\t\t\tcancel: backToYear,\n\t\t},\n\t};\n\n\tfunction prevMonth() {\n\t\tlet newCurrent = new Date(current);\n\t\tnewCurrent.setMonth(current.getMonth() - 1);\n\t\twhile (current.getMonth() === newCurrent.getMonth()) {\n\t\t\tnewCurrent.setDate(newCurrent.getDate() - 1);\n\t\t}\n\t\tcurrent = newCurrent;\n\t}\n\tfunction nextMonth() {\n\t\tcurrent.setMonth(current.getMonth() + 1);\n\t\tcurrent = current;\n\t}\n\tfunction prevYear() {\n\t\tcurrent.setFullYear(current.getFullYear() - 1);\n\t\tcurrent = current;\n\t}\n\tfunction nextYear() {\n\t\tcurrent.setFullYear(current.getFullYear() + 1);\n\t\tcurrent = current;\n\t}\n\tfunction prevDuodecade() {\n\t\tcurrent.setFullYear(current.getFullYear() - 10);\n\t\tcurrent = current;\n\t}\n\tfunction nextDuodecade() {\n\t\tcurrent.setFullYear(current.getFullYear() + 10);\n\t\tcurrent = current;\n\t}\n\n\tfunction cancelMonth() {\n\t\tif (value) {\n\t\t\tif (part === \"normal\") current = new Date(value);\n\t\t}\n\t\ttype = \"month\";\n\t\tif (cancel) cancel();\n\t}\n\tfunction backToMonth() {\n\t\ttype = \"month\";\n\t}\n\tfunction backToYear() {\n\t\ttype = \"year\";\n\t}\n\n\tfunction selectDate(e, date) {\n\t\te.stopPropagation();\n\t\tif (date) {\n\t\t\tcurrent = new Date(date);\n\t\t\tvalue = new Date(current);\n\t\t} else {\n\t\t\tvalue = null;\n\t\t\tcurrent = new Date();\n\t\t}\n\t\tif (part === \"normal\") cancelMonth();\n\t}\n\n</script>\n\n<div class=\"calendar {part !== 'normal' ? 'part' : ''}\">\n\t<div class=\"wrap\">\n\t\t<Header\n\t\t\tdate={current}\n\t\t\t{part}\n\t\t\tbind:type\n\t\t\tprev={types[type].prev}\n\t\t\tnext={types[type].next} />\n\t\t<div class=\"body\">\n\t\t\t<svelte:component\n\t\t\t\tthis={types[type].component}\n\t\t\t\tbind:value\n\t\t\t\tbind:current\n\t\t\t\t{part}\n\t\t\t\t{markers}\n\t\t\t\tcancel={types[type].cancel} />\n\t\t\t{#if type === 'month' && part === 'normal' && buttons}\n\t\t\t\t<div class=\"buttons\">\n\t\t\t\t\t<div class=\"button-item\">\n\t\t\t\t\t\t<Button click={e => selectDate(e)}>{_('clear')}</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"button-item\">\n\t\t\t\t\t\t<Button click={e => selectDate(e, new Date())}>\n\t\t\t\t\t\t\t{_('today')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n</div>\n\n<style>\n\t.calendar {\n\t\theight: auto;\n\t\twidth: 100%;\n\t\tpadding: var(--wx-calendar-padding);\n\t\tcursor: default;\n\t\tfont-family: var(--wx-calendar-font-family);\n\t\tfont-size: var(--wx-calendar-font-size);\n\t\tline-height: var(--wx-calendar-line-height);\n\t\tfont-weight: var(--wx-calendar-font-weight);\n\t\tcolor: var(--wx-calendar-font-color);\n\t}\n\t.calendar.part {\n\t\tpadding-bottom: 0;\n\t}\n\n\t.wrap {\n\t\twidth: calc(\n\t\t\tvar(--wx-calendar-cell-size) * 7 + var(--wx-calendar-cell-gap) * 6\n\t\t);\n\t\tmargin: 0 auto;\n\t}\n\n\t.buttons {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\tmargin-top: var(--wx-calendar-gutter);\n\t}\n\n\t.button-item + .button-item {\n\t\tmargin-left: var(--wx-calendar-gutter);\n\t}\n\n</style>\n","<script>\n\timport { onMount, getContext } from \"svelte\";\n\n\tlet portal;\n\texport let theme = \"\";\n\texport let target = document.body;\n\n\tif (theme === \"\") theme = getContext(\"wx-theme\");\n\n\tonMount(() => {\n\t\ttarget.appendChild(portal);\n\t});\n\n</script>\n\n<div class=\"wx-portal wx-{theme}-theme\" bind:this={portal}>\n\t<slot />\n</div>\n","<script>\n\timport { setContext } from \"svelte\";\n\timport RobotoFont from \"./FonttRoboto.svelte\";\n\n\texport let fonts = true;\n\tconst SLOTS = $$props.$$slots;\n\tsetContext(\"wx-theme\", \"material\");\n\n</script>\n\n{#if SLOTS && SLOTS.default}\n\t<div class=\"wx-material-theme\" style=\"height:100%\">\n\t\t<slot />\n\t</div>\n{/if}\n\n<svelte:head>\n\t{#if fonts}\n\t\t<link rel=\"preconnect\" href=\"https://cdn.webix.com\" crossorigin />\n\t\t<RobotoFont />\n\t\t<link\n\t\t\trel=\"stylesheet\"\n\t\t\thref=\"https://webix.io/dev/fonts/wxi/wx-icons.css\" />\n\t{/if}\n</svelte:head>\n\n<style>\n\t:global(.wx-material-theme) {\n\t\t/* base colors */\n\t\t--wx-color-primary: #2f77e3;\n\t\t--wx-color-primary-selected: #d5e6ff;\n\t\t--wx-color-primary-font: #fff;\n\t\t--wx-color-secondary: rgba(0, 0, 0, 0.04);\n\t\t--wx-color-secondary-hover: rgba(0, 0, 0, 0.1);\n\t\t--wx-color-secondary-font: rgba(0, 0, 0, 0.7);\n\t\t--wx-color-secondary-font-hover: rgba(0, 0, 0, 0.7);\n\t\t--wx-color-secondary-border: transparent;\n\t\t--wx-color-secondary-border-disabled: transparent;\n\n\t\t--wx-color-success: #00d19a;\n\t\t--wx-color-warning: #ffc975;\n\t\t--wx-color-info: #37a9ef;\n\t\t--wx-color-danger: #ff5252;\n\t\t--wx-color-disabled: #ededed;\n\n\t\t--wx-color-font: rgba(0, 0, 0, 0.7);\n\t\t--wx-color-font-alt: rgba(0, 0, 0, 0.5);\n\t\t--wx-color-font-disabled: rgba(0, 0, 0, 0.3);\n\t\t--wx-color-link: var(--wx-color-primary);\n\n\t\t--wx-background: #fff;\n\t\t--wx-background-alt: #f7f7f7;\n\t\t--wx-background-hover: linear-gradient(\n\t\t\trgba(0, 0, 0, 0.15) 0%,\n\t\t\trgba(0, 0, 0, 0.15) 100%\n\t\t);\n\t\t/* end base colors */\n\n\t\t/* font */\n\t\t--wx-font-family: Roboto, Arial, Helvetica, sans-serif;\n\t\t--wx-font-size: 14px;\n\t\t--wx-line-height: 20px;\n\t\t--wx-font-size-md: 16px;\n\t\t--wx-line-height-md: 24px;\n\t\t--wx-font-size-sm: 12px;\n\t\t--wx-line-height-sm: 16px;\n\t\t--wx-font-weight: 400;\n\t\t--wx-font-weight-md: 500;\n\t\t--wx-font-weight-b: 700;\n\t\t/* end font */\n\n\t\t/* icons */\n\t\t--wx-icon-color: var(--wx-color-font-alt);\n\t\t--wx-icon-size: var(--wx-line-height);\n\t\t/* end icons */\n\n\t\t/* other */\n\t\t--wx-border: 1px solid #dfdfdf;\n\t\t--wx-border-radius: 2px;\n\n\t\t--wx-box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.15);\n\t\t--wx-box-shadow-strong: 0px 2px 5px rgba(0, 0, 0, 0.3);\n\n\t\t--wx-padding: 8px;\n\t\t/* end other */\n\n\t\t/* field */\n\t\t--wx-field-gutter: 16px;\n\t\t--wx-field-width: 400px;\n\t\t/* end field */\n\n\t\t/* input */\n\t\t--wx-input-font-family: var(--wx-font-family);\n\t\t--wx-input-font-size: var(--wx-font-size);\n\t\t--wx-input-line-height: var(--wx-line-height);\n\t\t--wx-input-font-weigth: var(--wx-font-weight);\n\t\t--wx-input-text-align: left;\n\t\t--wx-input-font-color: var(--wx-color-font);\n\t\t--wx-input-background: var(--wx-background);\n\t\t--wx-input-background-disabled: var(--wx-background);\n\t\t--wx-input-placeholder-color: var(--wx-color-font-alt);\n\t\t--wx-input-border: var(--wx-border);\n\t\t--wx-input-border-focus: 1px solid rgba(0, 0, 0, 0.5);\n\t\t--wx-input-border-disabled: 1px solid var(--wx-color-disabled);\n\t\t--wx-input-border-radius: var(--wx-border-radius);\n\t\t--wx-input-height: 32px;\n\t\t--wx-input-width: 100%;\n\t\t--wx-input-padding: 5px 8px;\n\t\t--wx-input-icon-indent: 6px;\n\t\t--wx-input-icon-color: var(--wx-icon-color);\n\t\t--wx-input-icon-size: var(--wx-icon-size);\n\t\t/* end input */\n\n\t\t/* multi combo */\n\t\t--wx-multicombo-tag-gap: 4px;\n\t\t--wx-multicombo-tag-border: none;\n\t\t--wx-multicombo-tag-border-radius: var(--wx-input-border-radius);\n\t\t--wx-multicombo-tag-pading: 2px 8px;\n\t\t--wx-multicombo-tag-background: var(--wx-background-alt);\n\t\t/* end multi combo */\n\n\t\t/* checkbox and radio */\n\t\t--wx-checkbox-height: var(--wx-line-height);\n\t\t--wx-checkbox-size: 18px;\n\t\t--wx-checkbox-border-width: 2px;\n\t\t--wx-checkbox-border-color: var(--wx-color-font-alt);\n\t\t--wx-checkbox-border-color-disabled: var(--wx-color-font-disabled);\n\t\t--wx-checkbox-border-radius: var(--wx-input-border-radius);\n\t\t--wx-checkbox-font-family: var(--wx-font-family);\n\t\t--wx-checkbox-font-size: var(--wx-font-size);\n\t\t--wx-checkbox-line-height: var(--wx-line-height);\n\t\t--wx-checkbox-font-weight: var(--wx-font-weight);\n\t\t--wx-checkbox-font-color: var(--wx-color-font);\n\t\t/* end checkbox and radio */\n\n\t\t/* label */\n\t\t--wx-label-width: 80px;\n\t\t--wx-label-margin: 0 0 8px;\n\t\t--wx-label-padding: 0;\n\t\t--wx-label-font-family: var(--wx-font-family);\n\t\t--wx-label-font-size: var(--wx-font-size);\n\t\t--wx-label-line-height: var(--wx-line-height);\n\t\t--wx-label-font-weight: var(--wx-font-weight-md);\n\t\t--wx-label-font-color: var(--wx-color-font);\n\t\t/* end label */\n\n\t\t/* button */\n\t\t--wx-button-font-family: var(--wx-font-family);\n\t\t--wx-button-font-size: var(--wx-font-size);\n\t\t--wx-button-line-height: var(--wx-line-height);\n\t\t--wx-button-font-weigth: var(--wx-font-weight-md);\n\t\t--wx-button-text-transform: none;\n\t\t--wx-button-font-color: var(--wx-color-font);\n\t\t--wx-button-danger-font-color: #fff;\n\t\t--wx-button-background: var(--wx-background-alt);\n\t\t--wx-button-border: 1px solid transparent;\n\t\t--wx-button-border-radius: var(--wx-border-radius);\n\t\t--wx-button-height: 32px;\n\t\t--wx-button-padding: 5px 20px;\n\t\t--wx-button-icon-indent: 7px;\n\t\t--wx-button-icon-size: 16px;\n\t\t/* end button */\n\n\t\t/* segmented */\n\t\t--wx-segmented-background: var(--wx-background-alt);\n\t\t--wx-segmented-background-hover: var(--wx-background-hover);\n\t\t--wx-segmented-border: var(--wx-border);\n\t\t--wx-segmented-border-radius: var(--wx-border-radius);\n\t\t--wx-segmented-padding: 3px;\n\t\t/* end segmented */\n\n\t\t/* tabs */\n\t\t--wx-tabs-background: var(--wx-background-alt);\n\t\t--wx-tabs-background-hover: var(--wx-background-hover);\n\t\t--wx-tabs-border-width: 1px;\n\t\t--wx-tabs-border-radius: var(--wx-border-radius);\n\t\t--wx-tabs-divider-width: 1px;\n\t\t--wx-tabs-divider-height: 100%;\n\t\t--wx-tabs-divider-color: #dfdfdf;\n\t\t--wx-tabs-cell-min-width: 100px;\n\t\t/* end tabs */\n\n\t\t/* slider */\n\t\t--wx-slider-height: 16px;\n\t\t--wx-slider-primary: var(--wx-color-primary);\n\t\t--wx-slider-background: #dfdfdf;\n\t\t--wx-slider-track-height: 4px;\n\t\t--wx-slider-track-border-radius: 2px;\n\t\t--wx-slider-thumb-size: var(--wx-slider-height);\n\t\t--wx-slider-thumb-border: 2px solid var(--wx-background);\n\t\t--wx-slider-thumb-border-disabled: none;\n\t\t--wx-slider-thumb-shadow: var(--wx-box-shadow-strong);\n\t\t--wx-slider-label-margin: 0 0 5px;\n\t\t--wx-slider-label-font-family: var(--wx-font-family);\n\t\t--wx-slider-label-font-size: var(--wx-font-size);\n\t\t--wx-slider-label-line-height: var(--wx-line-height);\n\t\t--wx-slider-label-font-weight: var(--wx-font-weight-md);\n\t\t--wx-slider-label-font-color: var(--wx-color-font);\n\t\t/* end slider */\n\n\t\t/* switch */\n\t\t--wx-switch-primary: var(--wx-color-primary);\n\t\t--wx-switch-background: rgba(0, 0, 0, 0.3);\n\t\t--wx-switch-width: 44px;\n\t\t--wx-switch-height: 22px;\n\t\t--wx-switch-border-width: 1px;\n\t\t--wx-switch-border-color: transparent;\n\t\t--wx-switch-border-color-disabled: #dfdfdf;\n\t\t--wx-switch-thumb-offset: 1px;\n\t\t--wx-switch-thumb-border: none;\n\t\t--wx-switch-thumb-border-disabled: none;\n\t\t--wx-switch-thumb-background: var(--wx-background);\n\t\t--wx-switch-thumb-background-disabled: var(--wx-background);\n\t\t--wx-switch-thumb-shadow: var(--wx-box-shadow-strong);\n\t\t/* end switch */\n\n\t\t/* popup and dropdown */\n\t\t--wx-popup-z-index: 100;\n\t\t--wx-popup-background: var(--wx-background);\n\t\t--wx-popup-shadow: var(--wx-box-shadow);\n\t\t--wx-popup-border: none;\n\t\t--wx-popup-border-radius: var(--wx-border-radius);\n\t\t/* end popup and dropdown */\n\n\t\t/* modal */\n\t\t--wx-modal-z-index: 1000;\n\t\t--wx-modal-background: var(--wx-background);\n\t\t--wx-modal-shadow: var(--wx-box-shadow-strong);\n\t\t--wx-modal-border: none;\n\t\t--wx-modal-border-radius: var(--wx-border-radius);\n\t\t--wx-modal-width: 280px;\n\t\t--wx-modal-padding: 16px 20px;\n\t\t--wx-modal-gutter: 14px;\n\t\t--wx-modal-backdrop: rgba(0, 0, 0, 0.5);\n\t\t--wx-modal-header-font-family: var(--wx-font-family);\n\t\t--wx-modal-header-font-size: var(--wx-font-size-md);\n\t\t--wx-modal-header-line-height: var(--wx-line-height-md);\n\t\t--wx-modal-header-font-weight: var(--wx-font-weight-b);\n\t\t--wx-modal-header-font-color: #000;\n\t\t/* end modal */\n\n\t\t/* notice */\n\t\t--wx-notice-z-index: 1010;\n\t\t--wx-notice-background: var(--wx-background);\n\t\t--wx-notice-shadow: var(--wx-box-shadow-strong);\n\t\t--wx-notice-border: none;\n\t\t--wx-notice-border-radius: var(--wx-border-radius);\n\t\t--wx-notice-margin: 6px 12px;\n\t\t--wx-notice-font-family: var(--wx-font-family);\n\t\t--wx-notice-font-size: var(--wx-font-size);\n\t\t--wx-notice-line-height: var(--wx-line-height);\n\t\t--wx-notice-font-weight: var(--wx-font-weight);\n\t\t--wx-notice-font-color: var(--wx-color-font);\n\t\t--wx-notice-padding: var(--wx-padding);\n\t\t--wx-notice-text-width: 240px;\n\t\t--wx-notice-icon-size: var(--wx-icon-size);\n\t\t--wx-notice-icon-color: var(--wx-icon-color);\n\t\t--wx-notice-type-border-width: 0px;\n\t\t--wx-notice-type-border-color: transparent;\n\t\t--wx-notice-type-font-color: #fff;\n\t\t--wx-notice-type-icon-color: rgba(255, 255, 255, 0.8);\n\t\t--wx-notice-type-background-opacity: 1;\n\t\t--wx-notice-type-close-hover-opacity: 0.3;\n\t\t/* end notice */\n\n\t\t/* uploader */\n\t\t--wx-uploader-background: var(--wx-background-alt);\n\t\t/* end uploader */\n\n\t\t/* calendar */\n\t\t--wx-calendar-padding: 16px;\n\t\t--wx-calendar-gutter: 12px;\n\t\t--wx-calendar-cell-size: 28px;\n\t\t--wx-calendar-cell-gap: 0px;\n\t\t--wx-calendar-font-family: var(--wx-font-family);\n\t\t--wx-calendar-font-size: var(--wx-font-size);\n\t\t--wx-calendar-line-height: var(--wx-line-height);\n\t\t--wx-calendar-font-weight: var(--wx-font-weight);\n\t\t--wx-calendar-font-color: var(--wx-color-font);\n\t\t--wx-calendar-icon-color: var(--wx-icon-color);\n\t\t--wx-calendar-icon-size: var(--wx-icon-size);\n\t\t--wx-calendar-header-font-size: var(--wx-font-size);\n\t\t--wx-calendar-header-line-height: var(--wx-line-height);\n\t\t--wx-calendar-header-font-weight: var(--wx-font-weight-md);\n\t\t--wx-calendar-controls-font-family: var(--wx-button-font-family);\n\t\t--wx-calendar-controls-font-size: var(--wx-button-font-size);\n\t\t--wx-calendar-controls-line-height: var(--wx-button-line-height);\n\t\t--wx-calendar-controls-font-weight: var(--wx-button-font-weigth);\n\t\t--wx-calendar-controls-font-color: var(--wx-color-link);\n\t\t/* end calendar */\n\t}\n\n\t:global(.wx-material-theme) {\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tline-height: var(--wx-line-height);\n\t\tfont-weight: var(--wx-font-weight);\n\t\tfont-style: normal;\n\t\tletter-spacing: normal;\n\t\ttext-align: left;\n\t\tcolor: var(--wx-color-font);\n\t\tbackground: var(--wx-background);\n\t}\n\t:global(.wx-material-theme *, .wx-material-theme\n\t\t\t*:before, .wx-material-theme *:after) {\n\t\tbox-sizing: border-box;\n\t}\n\n</style>\n","const calendar = {\n\tmonthFull: [\n\t\t\"January\",\n\t\t\"February\",\n\t\t\"March\",\n\t\t\"April\",\n\t\t\"May\",\n\t\t\"June\",\n\t\t\"July\",\n\t\t\"August\",\n\t\t\"September\",\n\t\t\"October\",\n\t\t\"November\",\n\t\t\"December\",\n\t],\n\tmonthShort: [\n\t\t\"Jan\",\n\t\t\"Feb\",\n\t\t\"Mar\",\n\t\t\"Apr\",\n\t\t\"May\",\n\t\t\"Jun\",\n\t\t\"Jul\",\n\t\t\"Aug\",\n\t\t\"Sep\",\n\t\t\"Oct\",\n\t\t\"Nov\",\n\t\t\"Dec\",\n\t],\n\tdayFull: [\n\t\t\"Sunday\",\n\t\t\"Monday\",\n\t\t\"Tuesday\",\n\t\t\"Wednesday\",\n\t\t\"Thursday\",\n\t\t\"Friday\",\n\t\t\"Saturday\",\n\t],\n\tdayShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n\thours: \"Hours\",\n\tminutes: \"Minutes\",\n\tdone: \"Done\",\n\tclear: \"Clear\",\n\ttoday: \"Today\",\n\tam: [\"am\", \"AM\"],\n\tpm: [\"pm\", \"PM\"],\n\n\tweekStart: 7,\n\ttimeFormat: 24,\n};\n\nconst core = {\n\tok: \"OK\",\n\tcancel: \"Cancel\",\n};\n\nconst data = {\n\tcore,\n\tcalendar,\n};\n\nexport default data;\n","<script>\n\timport { getContext, setContext } from \"svelte\";\n\timport { locale } from \"@xbs/lib-core-dom\";\n\timport en from \"./en\";\n\n\texport let words = null;\n\texport let optional = false;\n\n\tlet l = getContext(\"wx-i18n\");\n\tif (!l) {\n\t\tl = locale(en);\n\t}\n\tl = l.extend(words, optional);\n\tsetContext(\"wx-i18n\", l);\n\n</script>\n\n<slot />\n","<script>\n\timport { Material } from \"@xbs/svelte-wx\";\n\tconst SLOTS = $$props.$$slots;\n\n</script>\n\n{#if SLOTS && SLOTS.default}\n\t<Material>\n\t\t<div class=\"wx-material-theme\" style=\"height:100%;width:100%;\">\n\t\t\t<slot />\n\t\t</div>\n\t</Material>\n{/if}\n\n<style global>\n\t.wx-material-theme * {\n\t\tbox-sizing: border-box;\n\t}\n\t.wx-material-theme {\n\t\t/* base colors */\n\t\t--wx-color-primary: #0a76bf;\n\t\t--wx-color-success: #0ab169;\n\t\t--wx-color-danger: #ff5252;\n\n\t\t--wx-color-font: #4d4d4d;\n\t\t--wx-color-font-disabled: #b3b3b3;\n\n\t\t--wx-color-secondary: #808080;\n\t\t--wx-color-secondary-hover: #4d4d4d;\n\t\t--wx-color-secondary-font: #fff;\n\t\t--wx-color-secondary-light: #b3b3b3;\n\n\t\t--wx-background: #fff;\n\t\t--wx-background-selected: #ededed;\n\t\t/* end base colors */\n\n\t\t/* font */\n\t\t--wx-font-family: Roboto, Arial, Helvetica, sans-serif;\n\t\t--wx-font-size: 14px;\n\t\t--wx-font-size-s: 12px;\n\t\t--wx-font-weight: 400;\n\t\t--wx-font-weight-medium: 500;\n\t\t--wx-line-height: 20px;\n\t\t/* end font */\n\n\t\t/* icons */\n\t\t--wx-icon-color: var(--wx-color-secondary);\n\t\t--wx-icon-background-hover: #d4d4d4;\n\t\t/* end icons */\n\n\t\t/* animation */\n\t\t--wx-all-transition: all 0.2s ease-out;\n\t\t/* end animation */\n\n\t\t/* border */\n\t\t--wx-border-color: #dfdfdf;\n\t\t--wx-border-width: 1px;\n\t\t--wx-border-radius: 2px;\n\t\t--wx-border: var(--wx-border-width) solid var(--wx-border-color);\n\t\t/* end border */\n\n\t\t/* checkbox */\n\t\t--wx-checkbox-size: var(--wx-base-size);\n\t\t--wx-checkbox-border-size: 2px;\n\t\t--wx-checkbox-color-unchecked: var(--wx-color-secondary);\n\t\t--wx-checkbox-color-checked: var(--wx-color-success);\n\t\t/* end checkbox */\n\n\t\t/* Main component */\n\t\t--wx-todo-toolbar-background: var(--wx-background);\n\t\t--wx-todo-toolbar-height: 56px;\n\t\t--wx-todo-toolbar-align: center;\n\t\t--wx-todo-toolbar-justify: flex-start;\n\n\t\t--wx-todo-mark-background: #ffff88;\n\t\t--wx-todo-mark-background-strict: #d4c5f9;\n\n\t\t--wx-todo-date-color-current: var(--wx-color-success);\n\t\t--wx-todo-date-color-expired: var(--wx-color-danger);\n\t\t--wx-todo-date-color-regular: var(--wx-color-secondary);\n\t\t/* End main component */\n\n\t\t/* other */\n\t\t--wx-base-size: 20px;\n\t\t--wx-box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.3);\n\t\t/* end other */\n\t}\n\n</style>\n","const calendar = {\n\tmonthFull: [\n\t\t\"January\",\n\t\t\"February\",\n\t\t\"March\",\n\t\t\"April\",\n\t\t\"May\",\n\t\t\"June\",\n\t\t\"July\",\n\t\t\"August\",\n\t\t\"September\",\n\t\t\"October\",\n\t\t\"November\",\n\t\t\"December\",\n\t],\n\tmonthShort: [\n\t\t\"Jan\",\n\t\t\"Feb\",\n\t\t\"Mar\",\n\t\t\"Apr\",\n\t\t\"May\",\n\t\t\"Jun\",\n\t\t\"Jul\",\n\t\t\"Aug\",\n\t\t\"Sep\",\n\t\t\"Oct\",\n\t\t\"Nov\",\n\t\t\"Dec\",\n\t],\n\tdayFull: [\n\t\t\"Sunday\",\n\t\t\"Monday\",\n\t\t\"Tuesday\",\n\t\t\"Wednesday\",\n\t\t\"Thursday\",\n\t\t\"Friday\",\n\t\t\"Saturday\",\n\t],\n\tdayShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n\thours: \"Hours\",\n\tminutes: \"Minutes\",\n\tdone: \"Done\",\n\tclear: \"Clear\",\n\ttoday: \"Today\",\n\tam: [\"am\", \"AM\"],\n\tpm: [\"pm\", \"PM\"],\n\n\tweekStart: 7,\n\ttimeFormat: 24,\n};\n\nconst core = {\n\tok: \"OK\",\n\tcancel: \"Cancel\",\n};\n\nconst data = {\n\tcore,\n\tcalendar,\n};\n\nexport default data;\n","export default {\n\ttodo: {\n\t\t\"No project\": \"No project\",\n\t\t\"Search project\": \"Search project\",\n\t\t\"Add project\": \"Add project\",\n\t\t\"Rename project\": \"Rename project\",\n\t\t\"Delete project\": \"Delete project\",\n\n\t\t\"Completed tasks\": \"Completed tasks\",\n\t\tShow: \"Show\",\n\t\tHide: \"Hide\",\n\t\t\"Sort by\": \"Sort by\",\n\t\t\"Text (a-z)\": \"Text (a-z)\",\n\t\t\"Text (z-a)\": \"Text (z-a)\",\n\t\t\"Due date (new to old)\": \"Due date (new to old)\",\n\t\t\"Due date (old to new)\": \"Due date (old to new)\",\n\t\t\"Completion date (new to old)\": \"Completion date (new to old)\",\n\t\t\"Completion date (old to new)\": \"Completion date (old to new)\",\n\t\t\"Created (new to old)\": \"Created (new to old)\",\n\t\t\"Created (old to new)\": \"Created (old to new)\",\n\t\t\"Edited (new to old)\": \"Edited (new to old)\",\n\t\t\"Edited (old to new)\": \"Edited (old to new)\",\n\t\t\"Priority (high to low)\": \"Priority (high to low)\",\n\t\t\"Priority (low to high)\": \"Priority (low to high)\",\n\n\t\t\"Add task below\": \"Add task below\",\n\t\t\"Add subtask\": \"Add subtask\",\n\t\t\"Set due date\": \"Set due date\",\n\t\t\"Set priority\": \"Set priority\",\n\t\t\"Reset priority\": \"Reset priority\",\n\t\tIndent: \"Indent\",\n\t\tUnindent: \"Unindent\",\n\t\t\"Assign to\": \"Assign to\",\n\t\t\"Move to\": \"Move to\",\n\t\tDuplicate: \"Duplicate\",\n\t\tCopy: \"Copy\",\n\t\tPaste: \"Paste\",\n\t\tDelete: \"Delete\",\n\n\t\tEnter: \"Enter\",\n\t\tTab: \"Tab\",\n\t\t\"Shift+Tab\": \"Shift+Tab\",\n\t\t\"Ctrl+D\": \"Ctrl+D\",\n\t\t\"Ctrl+C\": \"Ctrl+C\",\n\t\t\"Ctrl+V\": \"Ctrl+V\",\n\t\t\"CMD+D\": \"CMD+D\",\n\t\t\"CMD+C\": \"CMD+C\",\n\t\t\"CMD+V\": \"CMD+V\",\n\n\t\t\"Type what you want\": \"Type what you want\",\n\t\tSearch: \"Search\",\n\t\t\"Add task\": \"Add task\",\n\t\t\"New project\": \"New project\",\n\n\t\tHigh: \"High\",\n\t\tMedium: \"Medium\",\n\t\tLow: \"Low\",\n\t},\n};\n","let iid = (new Date()).valueOf();\nexport const uid = () => iid++;\n//# sourceMappingURL=helpers.js.map","export default class DataRouter {\n    constructor(s, r, p) {\n        this._setter = s;\n        this._routes = r;\n        this._parsers = p;\n        this._prev = {};\n        this._triggers = new Map();\n        this._sources = new Map();\n        this._routes.forEach(a => {\n            a.in.forEach(k => {\n                const arr = this._triggers.get(k) || [];\n                arr.push(a);\n                this._triggers.set(k, arr);\n            });\n            a.out.forEach(k => {\n                const h = this._sources.get(k) || {};\n                a.in.forEach(i => (h[i] = true));\n                this._sources.set(k, h);\n            });\n        });\n        this._routes.forEach(a => {\n            a.length = Math.max(...a.in.map(key => _calckSize(key, this._sources, 1)));\n        });\n    }\n    init(cfg) {\n        const next = {};\n        for (const key in cfg) {\n            if (this._prev[key] !== cfg[key]) {\n                const parser = this._parsers[key];\n                next[key] = parser\n                    ? parser(cfg[key])\n                    : cfg[key];\n            }\n        }\n        this._prev = this._prev ? { ...this._prev, ...cfg } : { ...cfg };\n        this.setState(next);\n    }\n    setState(updates, ctx) {\n        this._setter(updates);\n        const needExec = !ctx;\n        ctx = ctx || [];\n        for (const key in updates) {\n            const trgs = this._triggers.get(key);\n            if (trgs) {\n                trgs.forEach(a => {\n                    if (ctx.indexOf(a) == -1) {\n                        ctx.push(a);\n                    }\n                });\n            }\n        }\n        if (needExec) {\n            this._execNext(ctx);\n        }\n    }\n    _execNext(ctx) {\n        while (ctx.length) {\n            ctx.sort((a, b) => (a.length < b.length ? 1 : -1));\n            const next = ctx[ctx.length - 1];\n            ctx.splice(ctx.length - 1);\n            next.exec(ctx);\n        }\n    }\n}\nfunction _calckSize(key, sources, prev) {\n    const next = sources.get(key);\n    if (!next)\n        return prev;\n    const sizes = Object.keys(next).map(a => _calckSize(a, sources, prev + 1));\n    return Math.max(...sizes);\n}\n//# sourceMappingURL=DataRouter.js.map","export default class EventBus {\n    constructor() {\n        this._nextHandler = () => null;\n        this._handlers = {};\n        this.exec = this.exec.bind(this);\n    }\n    on(name, handler) {\n        const prev = this._handlers[name];\n        if (!prev) {\n            this._handlers[name] = (ev) => {\n                resolvePromise(this._nextHandler, ev, name)(handler(ev));\n            };\n        }\n        else {\n            // wrap existing handler\n            this._handlers[name] = function (ev) {\n                resolvePromise(prev, ev)(handler(ev));\n            };\n        }\n    }\n    exec(name, ev) {\n        const handler = this._handlers[name];\n        if (handler) {\n            handler(ev);\n        }\n        else {\n            this._nextHandler(name, ev);\n        }\n    }\n    setNext(next) {\n        this._nextHandler = next;\n    }\n}\nfunction resolvePromise(prev, ev, name) {\n    return (res) => {\n        if (res !== false) {\n            if (res && res.then)\n                res.then(resolvePromise(prev, ev, name));\n            else {\n                if (name)\n                    prev(name, ev);\n                else\n                    prev(ev);\n            }\n        }\n    };\n}\n//# sourceMappingURL=EventBus.js.map","export default class EventBusRouter {\n    constructor(dispatch) {\n        this._nextHandler = () => null;\n        this._dispatch = dispatch;\n        this.exec = this.exec.bind(this);\n    }\n    exec(name, ev) {\n        this._dispatch(name, ev);\n        if (this._nextHandler) {\n            this._nextHandler(name, ev);\n        }\n    }\n    setNext(next) {\n        this._nextHandler = next;\n    }\n}\n//# sourceMappingURL=EventBusRouter.js.map","let id = new Date().valueOf();\nexport function uid() {\n    id += 1;\n    return \"temp://\" + id;\n}\nexport function getRandomInt(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\nexport function isSameId(firstId, secondId) {\n    return firstId == secondId;\n}\nexport function isObject(obj) {\n    return obj !== null && typeof obj === \"object\" && !(obj instanceof Date);\n}\nexport function isDefined(some) {\n    return some !== null && some !== undefined;\n}\nexport function isNull(obj) {\n    return obj === null;\n}\nexport function findIndex(arr, predicate) {\n    const len = arr.length;\n    for (let i = 0; i < len; i++) {\n        if (predicate(arr[i])) {\n            return i;\n        }\n    }\n    return -1;\n}\nexport function hasWhiteSpace(string) {\n    return /\\s/g.test(string);\n}\nexport function isMacintosh() {\n    return navigator.userAgent.indexOf(\"Mac\") > -1;\n}\nexport function getCloneObject(obj) {\n    if (!obj)\n        return obj;\n    const clone = Array.isArray(obj) ? [] : {};\n    for (const key in obj) {\n        const value = obj[key];\n        if (value instanceof Date) {\n            clone[key] = new Date(value);\n            continue;\n        }\n        clone[key] = typeof value === \"object\" ? getCloneObject(value) : value;\n    }\n    return clone;\n}\nexport function flattenToTree(array) {\n    const children = {};\n    const tree = [];\n    const map = {};\n    for (let index = 0; index < array.length; index++) {\n        map[array[index].id] = index;\n        children[array[index].id] = [];\n        array[index].children = [];\n    }\n    for (let index = 0; index < array.length; index++) {\n        const task = array[index];\n        if (task.parent && children[task.parent]) {\n            array[map[task.parent]].children.push(task);\n            children[task.parent].push(task);\n        }\n        else if (!isDefined(task.parent)) {\n            tree.push(task);\n        }\n    }\n    return tree;\n}\nexport function treeToFlatten(array) {\n    return array.flatMap(({ children, ...obj }) => [\n        obj,\n        ...treeToFlatten(children || []),\n    ]);\n}\n//# sourceMappingURL=helpers.js.map","export const userColors = [\n    \"#607D8B\",\n    \"#00C7B5\",\n    \"#03A9F4\",\n    \"#9575CD\",\n    \"#F06292\",\n    \"#FF9800\",\n];\nexport const priorityColors = [\n    \"#ff5252\",\n    \"#ffc975\",\n    \"#0ab169\",\n    \"#607D8B\",\n    \"#00C7B5\",\n    \"#03A9F4\",\n    \"#9575CD\",\n    \"#F06292\",\n    \"#FF9800\",\n];\nexport const defaultTaskShape = {\n    counter: {\n        type: \"number\",\n    },\n    date: {\n        format: \"%d %M %Y\",\n        validate: true,\n    },\n    completed: {\n        behavior: \"auto\",\n        taskHide: false,\n    },\n    priority: {\n        label: true,\n        cover: true,\n    },\n};\nexport const defaultDragConfig = {\n    expand: true,\n};\nexport const defaultPriorities = [\n    {\n        id: 1,\n        label: \"High\",\n        color: \"#ff5252\",\n        hotkey: \"Alt+1\",\n    },\n    {\n        id: 2,\n        label: \"Medium\",\n        color: \"#ffc975\",\n        hotkey: \"Alt+2\",\n    },\n    {\n        id: 3,\n        label: \"Low\",\n        color: \"#0ab169\",\n        hotkey: \"Alt+3\",\n    },\n];\n//# sourceMappingURL=constants.js.map","export const getMatchStringRegExp = (string) => {\n    return new RegExp(String.raw `(?:^|)${string}(?:\\s|$)`, \"gm\");\n};\nexport const getMatchChar = (char) => {\n    return new RegExp(String.raw `\\B[${char}]\\w\\S+`, \"gm\");\n};\n//# sourceMappingURL=regexp.js.map","import { getMatchStringRegExp } from \"./regexp\";\nfunction compare(source, target, strict) {\n    if (strict) {\n        const regexp = getMatchStringRegExp(target);\n        return !!source.match(regexp)?.length;\n    }\n    return source.toLowerCase().includes(target.toLowerCase());\n}\nexport function checkItem(item, { match, by, strict }) {\n    if (by) {\n        return compare(item[by] || \"\", match, strict);\n    }\n    return compare(item.text || \"\", match, strict);\n}\nexport function treeFilter(data = [], filter) {\n    return data\n        .map(object => ({\n        ...object,\n        children: treeFilter(object.children, filter),\n    }))\n        .filter(object => checkItem(object, filter) || object?.children?.length);\n}\nexport function getFilteredChildren(data) {\n    const filteredChildren = {};\n    const setFilteredChildren = (data) => {\n        for (let index = 0; index < data.length; index++) {\n            const task = data[index];\n            if (!filteredChildren[task.id]) {\n                filteredChildren[task.id] = [...task?.children];\n            }\n            if (task?.children?.length) {\n                setFilteredChildren(task.children);\n            }\n        }\n    };\n    setFilteredChildren(data);\n    return filteredChildren;\n}\n//# sourceMappingURL=filter.js.map","import { uid } from \"@xbs/lib-state\";\nimport { flattenToTree, isSameId, treeToFlatten } from \"../helpers\";\nexport function normalizeStructure(tasks) {\n    return treeToFlatten(flattenToTree(tasks));\n}\nexport function normalizeData(tasks, selected) {\n    const date = new Date();\n    return normalizeStructure(tasks).map((task) => {\n        const id = task.id ?? uid().toString();\n        delete task.selected;\n        delete task.draggable;\n        if (task.checked && !task[\"completion_date\"]) {\n            task.completion_date = date;\n        }\n        if (!task[\"creation_date\"]) {\n            task.creation_date = date;\n        }\n        if (selected.some(i => isSameId(i, id))) {\n            task.selected = true;\n        }\n        return { ...task, id };\n    });\n}\nexport function normalizeTreeItem(task, children, taskShape) {\n    if (task?.children?.length) {\n        for (let index = 0; index < task.children.length; index++) {\n            normalizeTreeItem(task.children[index], children, taskShape);\n        }\n    }\n    task.counter = {\n        type: taskShape?.counter?.type || \"number\",\n        total: children[task.id].length,\n        done: children[task.id].filter(t => t.checked === true).length,\n    };\n}\n//# sourceMappingURL=normalize.js.map","import { userColors } from \"../data/constants\";\nimport { getCloneObject } from \"../helpers\";\nexport function getUsersMap(users) {\n    const map = {};\n    users = getCloneObject(users);\n    for (let index = 0; index < users?.length; index++) {\n        const user = users[index];\n        user.color = user.color || userColors[index % userColors.length];\n        map[user.id] = user;\n    }\n    return map;\n}\nexport function getAvailableUsers(users, task) {\n    const availableUsers = [];\n    for (let index = 0; index < task.assigned.length; index++) {\n        const user = users[task.assigned[index]];\n        user.type = \"user\";\n        if (user)\n            availableUsers.push(user);\n    }\n    return availableUsers;\n}\n//# sourceMappingURL=user.js.map","export function closeAllElements(store) {\n    const { menu, stateEditableItem, stateDueDate, stateCombo } = store.getState();\n    menu &&\n        store.in.exec(\"close-menu\", {\n            ...menu,\n        });\n    stateEditableItem &&\n        store.in.exec(\"close-inline-editor\", {\n            id: stateEditableItem.id,\n            save: true,\n        });\n    stateDueDate?.open &&\n        store.in.exec(\"set-state-due-date\", {\n            ...stateDueDate,\n            open: false,\n        });\n    stateCombo?.open &&\n        store.in.exec(\"set-state-due-date\", {\n            ...stateDueDate,\n            open: false,\n        });\n}\n//# sourceMappingURL=common.js.map","import { isDefined, uid } from \"../../helpers\";\nexport default function (store, { id, project, parent, targetId, task = {}, reverse, }) {\n    if (store.existsTask(id)) {\n        return;\n    }\n    const state = store.getState();\n    const { activeProject, tasksMap } = state;\n    task.id = id ?? task.id ?? uid().toString();\n    if (typeof project !== \"undefined\") {\n        task.project = project;\n    }\n    else if (typeof task.project === \"undefined\" &&\n        isDefined(activeProject)) {\n        task.project = activeProject;\n    }\n    if (typeof parent !== \"undefined\") {\n        task.parent = parent;\n    }\n    task.creation_date = new Date();\n    let { tasks } = state;\n    tasksMap[id] = task;\n    tasks = [...tasks, task];\n    const { treeTasks, childrenMap, filteredChildrenMap, usersMap, tags } = store.getInnerState(tasks, activeProject);\n    store.setState({\n        tasks,\n        treeTasks,\n        childrenMap,\n        filteredChildrenMap,\n        usersMap,\n        tags,\n        tasksMap,\n    });\n    if (isDefined(targetId) || reverse) {\n        store.moveTask({\n            id: task.id,\n            parent: task.parent,\n            project: task.project,\n            targetId,\n            reverse,\n            silent: true,\n        });\n    }\n}\n//# sourceMappingURL=add.js.map","export default function (store, { id, task, skipStateCalc = false }) {\n    store.updateTask({ id, task, skipStateCalc });\n}\n//# sourceMappingURL=update.js.map","import { closeAllElements } from \"../../actions/common\";\nexport default function (store, { id, parent, targetId, reverse, project }) {\n    closeAllElements(store);\n    store.moveTask({ id, parent, targetId, reverse, project });\n}\n//# sourceMappingURL=move.js.map","import { isNull, isSameId } from \"../../helpers\";\nexport default function (store, { id, targetId, parent, reverse, project, join = false, }) {\n    if (!store.existsTask(id))\n        return;\n    let copiedTasksId = [];\n    if (join) {\n        const copied = store.getState().copiedTasksId;\n        const parents = store.getParentIds(id);\n        if (copied.some(i => isSameId(i, id) || parents.some(p => isSameId(i, p))))\n            return;\n        const children = store.getChildrenIds({ id });\n        for (let index = 0; index < copied.length; index++) {\n            if (children.some(i => isSameId(i, copied[index]))) {\n                copied.splice(index, 1);\n            }\n        }\n        copiedTasksId = [...copied];\n    }\n    copiedTasksId.push(id);\n    store.setState({ copiedTasksId });\n    if (store.existsTask(targetId) ||\n        store.existsTask(parent) ||\n        isNull(parent)) {\n        store.pasteTask({ targetId, parent, project, reverse });\n    }\n}\n//# sourceMappingURL=copy.js.map","export default function (store, { targetId, parent, project, reverse }) {\n    store.pasteTask({ targetId, parent, project, reverse });\n}\n//# sourceMappingURL=paste.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { id }) {\n    if (!store.existsTask(id)) {\n        return;\n    }\n    const state = store.getState();\n    let { selected, tasks } = state;\n    const tasksMap = state.tasksMap;\n    const childrenIds = store.getChildrenIds({ id, tree: true });\n    const removeIds = [id, ...childrenIds];\n    for (const removed of removeIds) {\n        selected = selected.filter(i => !isSameId(i, removed));\n        tasks = tasks.filter(i => !isSameId(i.id, removed));\n        delete tasksMap[removed];\n    }\n    const { treeTasks, childrenMap, filteredChildrenMap, usersMap, tags } = store.getInnerState(tasks, state.activeProject);\n    store.setState({\n        tasks,\n        treeTasks,\n        childrenMap,\n        filteredChildrenMap,\n        usersMap,\n        tags,\n        selected,\n        tasksMap,\n    });\n}\n//# sourceMappingURL=delete.js.map","export default function (store, { id }) {\n    const task = store.getTask(id);\n    if (!task?.collapsed)\n        return;\n    store.in.exec(\"update-task\", {\n        id,\n        task: {\n            ...task,\n            collapsed: false,\n        },\n        skipProvider: true,\n    });\n}\n//# sourceMappingURL=expand.js.map","export default function (store, { id }) {\n    const task = store.getTask(id);\n    if (task?.collapsed)\n        return;\n    store.in.exec(\"update-task\", {\n        id,\n        task: {\n            ...task,\n            collapsed: true,\n        },\n        skipProvider: true,\n    });\n}\n//# sourceMappingURL=collapse.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { id, manual = false, skipStateCalc = false }) {\n    const task = store.getTask(id);\n    if (task?.checked)\n        return;\n    const batch = [];\n    const completed = store.getState().taskShape?.completed?.behavior || \"auto\";\n    if (!manual && completed !== \"manual\" && !skipStateCalc) {\n        if (store.hasChildren(id)) {\n            store.getChildren({ id, tree: true }).forEach(t => {\n                if (!t.checked) {\n                    store.in.exec(\"check-task\", {\n                        id: t.id,\n                        skipStateCalc: true,\n                    });\n                    batch.push(store.getTask(t.id));\n                }\n            });\n        }\n        const parents = store.getParentIds(id);\n        parents.forEach(parentId => {\n            const needMarkParent = store\n                .getChildren({ id: parentId })\n                .every(t => {\n                if (isSameId(t.id, id))\n                    return true;\n                return store.getTask(t.id).checked;\n            });\n            if (needMarkParent) {\n                const parent = store.getTask(parentId);\n                if (!parent.checked) {\n                    store.in.exec(\"check-task\", {\n                        id: parentId,\n                        skipStateCalc: true,\n                    });\n                    batch.push(store.getTask(parentId));\n                }\n            }\n        });\n    }\n    task.checked = true;\n    task.completion_date = new Date();\n    store.in.exec(\"update-task\", {\n        id,\n        task,\n        skipStateCalc,\n        skipProvider: skipStateCalc && !manual,\n        batch,\n    });\n}\n//# sourceMappingURL=check.js.map","import { isDefined } from \"../../helpers\";\nexport default function (store, { id, manual = false, skipStateCalc = false, }) {\n    const task = store.getTask(id);\n    if (!task?.checked)\n        return;\n    const batch = [];\n    const completed = store.getState().taskShape?.completed?.behavior || \"auto\";\n    if (!manual && completed !== \"manual\" && !skipStateCalc) {\n        if (isDefined(task.parent)) {\n            store.getParentIds(id).forEach(parentId => {\n                const parent = store.getTask(parentId);\n                if (parent.checked) {\n                    store.in.exec(\"uncheck-task\", {\n                        id: parentId,\n                        skipStateCalc: true,\n                    });\n                    batch.push(store.getTask(parentId));\n                }\n            });\n        }\n        if (store.hasChildren(id)) {\n            store.getChildren({ id, tree: true }).forEach(child => {\n                if (child.checked) {\n                    store.in.exec(\"uncheck-task\", {\n                        id: child.id,\n                        skipStateCalc: true,\n                    });\n                    batch.push(store.getTask(child.id));\n                }\n            });\n        }\n    }\n    task.checked = false;\n    delete task.completion_date;\n    store.in.exec(\"update-task\", {\n        id,\n        task,\n        skipStateCalc,\n        skipProvider: skipStateCalc && !manual,\n        batch,\n    });\n}\n//# sourceMappingURL=uncheck.js.map","import { isDefined } from \"../../helpers\";\nexport default function (store, { id, batchID }) {\n    const task = store.getTask(id);\n    const parent = store.getTask(task?.parent);\n    const state = store.getState();\n    const filtered = isDefined(state.filter?.match);\n    const hideCompleted = state?.taskShape?.completed?.taskHide;\n    const children = store.getChildren({\n        id: parent?.id,\n        tree: false,\n        filtered,\n        hideCompleted,\n    });\n    const index = store.getTreeIndex(id, filtered, hideCompleted);\n    if (index > 0) {\n        const target = store.getTask(children[index - 1]?.id);\n        store.in.exec(\"move-task\", {\n            id,\n            parent: target?.id,\n            targetId: target?.id,\n            operation: \"indent\",\n            batchID,\n        });\n        if (target.collapsed) {\n            store.in.exec(\"expand-task\", { id: target?.id });\n        }\n    }\n}\n//# sourceMappingURL=indent.js.map","import { isDefined } from \"../../helpers\";\nexport default function (store, { id, batchID }) {\n    const task = store.getTask(id);\n    const parent = store.getTask(task?.parent);\n    if (!isDefined(parent?.id))\n        return;\n    store.in.exec(\"move-task\", {\n        id,\n        parent: parent.parent ?? null,\n        targetId: parent.id,\n        operation: \"unindent\",\n        batchID,\n    });\n}\n//# sourceMappingURL=unindent.js.map","export default function (store) {\n    const { taskShape } = store.getState();\n    taskShape.completed.taskHide = false;\n    store.setState({ taskShape });\n}\n//# sourceMappingURL=showCompleted.js.map","export default function (store) {\n    const { taskShape } = store.getState();\n    taskShape.completed.taskHide = true;\n    store.setState({ taskShape });\n}\n//# sourceMappingURL=hideCompleted.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { id, join = false }) {\n    let { selected } = store.getState();\n    if (!store.existsTask(id) || (join && selected.some(i => isSameId(i, id))))\n        return;\n    if (!join) {\n        for (const deselected of selected) {\n            if (!isSameId(deselected, id)) {\n                store.in.exec(\"unselect-task\", { id: deselected });\n            }\n        }\n        selected = [id];\n    }\n    else {\n        selected.push(id);\n    }\n    store.updateTask({ id, task: { selected: true } });\n    store.setState({ selected });\n}\n//# sourceMappingURL=select.js.map","import { isDefined, isSameId } from \"../../helpers\";\nimport { closeAllElements } from \"../../actions/common\";\nexport default function (store, { id }) {\n    let { selected } = store.getState();\n    if (!selected.length ||\n        (isDefined(id) && !selected.some(i => isSameId(i, id)))) {\n        return;\n    }\n    if (!isDefined(id)) {\n        for (const deselected of selected) {\n            store.in.exec(\"unselect-task\", { id: deselected });\n        }\n        selected = [];\n    }\n    else {\n        store.updateTask({ id, task: { selected: false } });\n    }\n    selected = selected.filter(selectedId => !isSameId(selectedId, id));\n    closeAllElements(store);\n    store.setState({ selected });\n}\n//# sourceMappingURL=unselect.js.map","import { uid } from \"@xbs/lib-state\";\nexport default function (store, { id, project }) {\n    if (store.existsProject(id))\n        return;\n    project = {\n        id: id ?? uid().toString(),\n        label: \"New project\",\n        ...project,\n    };\n    const projects = [...store.getState().projects, project];\n    store.setState({ projects });\n}\n//# sourceMappingURL=add.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { id, project }) {\n    if (!store.existsProject(id))\n        return;\n    const projects = store.getState().projects.map(p => {\n        if (isSameId(id, p.id)) {\n            return { ...p, ...project, id: p.id };\n        }\n        return p;\n    });\n    store.setState({ projects });\n}\n//# sourceMappingURL=update.js.map","import { isNull } from \"../../helpers\";\nimport { closeAllElements } from \"../../actions/common\";\nexport default function (store, { id }) {\n    if ((!store.existsProject(id) && !isNull(id)) || typeof id === \"undefined\")\n        return;\n    closeAllElements(store);\n    const { treeTasks, childrenMap, filteredChildrenMap } = store.getInnerState(store.getState().tasks, id);\n    store.setState({\n        activeProject: id,\n        treeTasks,\n        childrenMap,\n        filteredChildrenMap,\n    });\n}\n//# sourceMappingURL=set.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { id }) {\n    if (!store.existsProject(id))\n        return;\n    const state = store.getState();\n    const projects = state.projects.filter(project => !isSameId(project.id, id));\n    state.tasks.forEach(task => {\n        if (isSameId(task.project, id)) {\n            store.in.exec(\"update-task\", {\n                id: task.id,\n                task: {\n                    ...task,\n                    project: null,\n                },\n                skipProvider: true,\n                skipStateCalc: true,\n            });\n        }\n        return task;\n    });\n    const tasks = state.tasks;\n    const { treeTasks, childrenMap, filteredChildrenMap } = store.getInnerState(tasks, state.activeProject);\n    store.setState({\n        projects,\n        treeTasks,\n        tasks,\n        childrenMap,\n        filteredChildrenMap,\n    });\n    if (isSameId(state.activeProject, id)) {\n        if (projects.length) {\n            store.in.exec(\"set-project\", { id: projects[0].id });\n        }\n        else {\n            store.in.exec(\"set-project\", { id: null });\n        }\n    }\n}\n//# sourceMappingURL=delete.js.map","import { findIndex } from \"../helpers\";\n/*\n    %d\tday as a number with leading zero, 01..31\n    %j\tday as a number, 1..31\n    %D\tshort name of the day, Su Mo Tu...\n    %l\tfull name of the day, Sunday Monday Tuesday...\n    %m\tmonth as a number with leading zero, 01..12\n    %n\tmonth as a number, 1..12\n    %M\tshort name of the month, Jan Feb Mar...\n    %F\tfull name of the month, January February March...\n    %y\tyear as a number, 2 digits\n    %Y\tyear as a number, 4 digits\n*/\nlet locales = {\n    monthFull: [\n        \"January\",\n        \"February\",\n        \"March\",\n        \"April\",\n        \"May\",\n        \"June\",\n        \"July\",\n        \"August\",\n        \"September\",\n        \"October\",\n        \"November\",\n        \"December\",\n    ],\n    monthShort: [\n        \"Jan\",\n        \"Feb\",\n        \"Mar\",\n        \"Apr\",\n        \"May\",\n        \"Jun\",\n        \"Jul\",\n        \"Aug\",\n        \"Sep\",\n        \"Oct\",\n        \"Nov\",\n        \"Dec\",\n    ],\n    dayFull: [\n        \"Sunday\",\n        \"Monday\",\n        \"Tuesday\",\n        \"Wednesday\",\n        \"Thursday\",\n        \"Friday\",\n        \"Saturday\",\n    ],\n    dayShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n};\nconst formatters = {\n    \"%d\": (date) => {\n        const day = date.getDate();\n        return day < 10 ? \"0\" + day : day;\n    },\n    \"%j\": (date) => date.getDate(),\n    \"%l\": (date) => {\n        return locales.dayFull[date.getDay()];\n    },\n    \"%D\": (date) => {\n        return locales.dayShort[date.getDay()];\n    },\n    \"%m\": (date) => {\n        const month = date.getMonth() + 1;\n        return month < 10 ? \"0\" + month : month;\n    },\n    \"%n\": (date) => date.getMonth() + 1,\n    \"%M\": (date) => locales.monthShort[date.getMonth()],\n    \"%F\": (date) => locales.monthFull[date.getMonth()],\n    \"%y\": (date) => date.getFullYear().toString().slice(2),\n    \"%Y\": (date) => date.getFullYear(),\n};\nconst setFormatters = {\n    \"%d\": (date, value) => {\n        const check = /(^([0-9][0-9])$)/i.test(value);\n        check ? date.setDate(Number(value)) : date.setDate(Number(1));\n    },\n    \"%j\": (date, value) => {\n        const check = /(^([0-9]?[0-9])$)/i.test(value);\n        check ? date.setDate(Number(value)) : date.setDate(Number(1));\n    },\n    \"%m\": (date, value) => {\n        const check = /(^([0-9][0-9])$)/i.test(value);\n        check ? date.setMonth(Number(value) - 1) : date.setMonth(Number(0));\n        if (check && date.getMonth() !== Number(value) - 1)\n            date.setMonth(Number(value) - 1);\n    },\n    \"%n\": (date, value) => {\n        const check = /(^([0-9]?[0-9])$)/i.test(value);\n        check ? date.setMonth(Number(value) - 1) : date.setMonth(Number(0));\n        if (check && date.getMonth() !== Number(value) - 1)\n            date.setMonth(Number(value) - 1);\n    },\n    \"%M\": (date, value) => {\n        const index = findIndex(locales.monthShort, v => v === value);\n        index === -1 ? date.setMonth(0) : date.setMonth(index);\n        if (index !== -1 && date.getMonth() !== index)\n            date.setMonth(index);\n    },\n    \"%F\": (date, value) => {\n        const index = findIndex(locales.monthFull, v => v === value);\n        index === -1 ? date.setMonth(0) : date.setMonth(index);\n        if (index !== -1 && date.getMonth() !== index)\n            date.setMonth(index);\n    },\n    \"%y\": (date, value) => {\n        const check = /(^([0-9][0-9])$)/i.test(value);\n        check\n            ? date.setFullYear(Number(\"20\" + value))\n            : date.setFullYear(Number(\"2000\"));\n    },\n    \"%Y\": (date, value) => {\n        const check = /(^([0-9][0-9][0-9][0-9])$)/i.test(value);\n        check\n            ? date.setFullYear(Number(value))\n            : date.setFullYear(Number(\"2000\"));\n    },\n};\nvar TokenType;\n(function (TokenType) {\n    TokenType[TokenType[\"separator\"] = 0] = \"separator\";\n    TokenType[TokenType[\"datePart\"] = 1] = \"datePart\";\n})(TokenType || (TokenType = {}));\nfunction tokenizeFormat(format) {\n    const tokens = [];\n    let currentSeparator = \"\";\n    for (let i = 0; i < format.length; i++) {\n        if (format[i] === \"%\") {\n            if (currentSeparator.length > 0) {\n                tokens.push({\n                    type: TokenType.separator,\n                    value: currentSeparator,\n                });\n                currentSeparator = \"\";\n            }\n            tokens.push({\n                type: TokenType.datePart,\n                value: format[i] + format[i + 1],\n            });\n            i++;\n        }\n        else {\n            currentSeparator += format[i];\n        }\n    }\n    if (currentSeparator.length > 0) {\n        tokens.push({\n            type: TokenType.separator,\n            value: currentSeparator,\n        });\n    }\n    return tokens;\n}\nexport function dateToString(date, format, locale) {\n    if (locale)\n        locales = locale;\n    return tokenizeFormat(format).reduce((res, token) => {\n        if (token.type === TokenType.separator) {\n            return res + token.value;\n        }\n        else {\n            if (!formatters[token.value]) {\n                return res;\n            }\n            return res + formatters[token.value](date);\n        }\n    }, \"\");\n}\nexport function stringToDate(string, format, validate = false, locale) {\n    if (typeof string !== \"string\") {\n        return;\n    }\n    if (locale)\n        locales = locale;\n    const tokens = tokenizeFormat(format);\n    const dateParts = [];\n    let index = 0;\n    let formatter = null;\n    for (const token of tokens) {\n        if (token.type === TokenType.separator) {\n            const sepratorIndex = string.indexOf(token.value, index);\n            if (sepratorIndex === -1) {\n                if (validate) {\n                    return false;\n                }\n                if (isDate(string)) {\n                    return new Date(string);\n                }\n                throw new Error(\"Incorrect Date or date format\");\n            }\n            if (formatter) {\n                dateParts.push({\n                    formatter,\n                    value: string.slice(index, sepratorIndex),\n                });\n                formatter = null;\n            }\n            index = sepratorIndex + token.value.length;\n        }\n        else if (token.type === TokenType.datePart) {\n            formatter = token.value;\n        }\n    }\n    if (formatter === \"%A\" || formatter === \"%a\") {\n        dateParts.unshift({\n            formatter,\n            value: string.slice(index),\n        });\n    }\n    else if (formatter) {\n        dateParts.push({\n            formatter,\n            value: string.slice(index),\n        });\n    }\n    dateParts.reverse();\n    let dateFormat;\n    for (const datePart of dateParts) {\n        if (datePart.formatter === \"%A\" || datePart.formatter === \"%a\") {\n            dateFormat = datePart.value;\n        }\n    }\n    const date = new Date(0);\n    for (const datePart of dateParts) {\n        if (setFormatters[datePart.formatter]) {\n            setFormatters[datePart.formatter](date, datePart.value, dateFormat);\n        }\n    }\n    return date;\n}\nexport function isDate(value) {\n    if (typeof value === \"string\") {\n        const dateFormat = new RegExp(\"^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?$\");\n        return dateFormat.test(value);\n    }\n    return value instanceof Date;\n}\nexport function isLastDate(value) {\n    const now = new Date();\n    const diffNow = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n    const diffValue = new Date(value.getFullYear(), value.getMonth(), value.getDate());\n    return diffNow.getTime() <= diffValue.getTime();\n}\n//# sourceMappingURL=date.js.map","import { getCloneObject, isDefined, isMacintosh, isSameId } from \"../helpers\";\nimport { stringToDate } from \"../common/date\";\nimport { userColors, priorityColors } from \"./constants\";\nexport default function ({ store, type, id, source }) {\n    switch (type) {\n        case \"task\":\n            return getTaskOptions(store, source);\n        case \"toolbar\":\n            return getToolbarOptions(store, id);\n    }\n}\nfunction getAvailableUsers(store, id, extra) {\n    const users = getCloneObject(store.getState().users);\n    const task = store.getTask(id);\n    const data = [];\n    if (users.length) {\n        for (let index = 0; index < users.length; index++) {\n            const user = users[index];\n            const checked = task?.assigned?.some(i => isSameId(i, user.id));\n            data.push({\n                ...user,\n                id: extra + \":\" + user.id,\n                color: user.color || userColors[index % userColors.length],\n                icon: checked ? \"check\" : \"empty\",\n                type: \"user\",\n                clicable: true,\n                checked,\n            });\n        }\n    }\n    return data;\n}\nfunction getAvailableProjects(store, extra) {\n    const activeProject = store.getState().activeProject;\n    let projects = getCloneObject(store.getState().projects);\n    if (projects.every(p => isDefined(p.id))) {\n        projects = [{ id: null, label: \"No project\" }, ...projects];\n    }\n    const data = [];\n    if (projects.length) {\n        for (let index = 0; index < projects.length; index++) {\n            const project = projects[index];\n            const checked = isSameId(project.id, activeProject);\n            data.push({\n                ...project,\n                id: extra + \":\" + project.id,\n                type: \"item\",\n                icon: checked ? \"check\" : \"empty\",\n                checked,\n            });\n        }\n    }\n    return data;\n}\nfunction getPriorityItems(store, id, priorities) {\n    const task = store.getTask(id);\n    const priorityItems = [];\n    for (let index = 0; index < priorities.length; index++) {\n        const item = priorities[index];\n        priorityItems.push({\n            ...item,\n            id: \"priority:\" + item.id,\n            type: \"priority\",\n            hotkey: item.hotkey,\n            color: item.color || priorityColors[index % priorityColors.length],\n            icon: isSameId(task?.priority, item.id) ? \"check\" : \"empty\",\n        });\n    }\n    return [\n        ...priorityItems,\n        { type: \"separator\" },\n        {\n            type: \"item\",\n            icon: \"refresh\",\n            label: \"Reset priority\",\n            hotkey: \"Alt+0\",\n            id: \"priority:reset\",\n        },\n    ];\n}\nfunction getTaskOptions(store, source = []) {\n    const { filter, projects, users, taskShape, priorities } = store.getState();\n    const firstSelected = source.at(0);\n    const dateFormat = taskShape?.date?.format;\n    const options = [];\n    let dueDate = store.getTask(firstSelected)?.due_date;\n    if (typeof dueDate === \"string\") {\n        dueDate = stringToDate(dueDate, dateFormat);\n    }\n    if (!isDefined(filter) && source.length === 1) {\n        options.push({\n            type: \"item\",\n            icon: \"plus\",\n            label: \"Add task below\",\n            hotkey: \"Enter\",\n            id: \"addBellow\",\n        }, {\n            type: \"item\",\n            icon: \"subtask\",\n            label: \"Add subtask\",\n            id: \"addSubtask\",\n        }, { type: \"separator\" });\n    }\n    options.push({\n        type: \"item\",\n        icon: \"indent\",\n        label: \"Indent\",\n        hotkey: \"Tab\",\n        id: \"indent\",\n    }, {\n        type: \"item\",\n        icon: \"unindent\",\n        label: \"Unindent\",\n        hotkey: \"Shift+Tab\",\n        id: \"unindent\",\n    }, {\n        type: \"item\",\n        icon: \"calendar\",\n        label: \"Set due date\",\n        id: \"setDate\",\n        data: [\n            {\n                type: \"datepicker\",\n                id: \"dueDate\",\n                value: source.length === 1 && dueDate ? dueDate : null,\n                store,\n            },\n        ],\n    });\n    if (Array.isArray(priorities) && priorities.length) {\n        options.push({\n            type: \"item\",\n            icon: \"alert\",\n            label: \"Set priority\",\n            data: getPriorityItems(store, firstSelected, priorities),\n            id: \"setPriority\",\n        });\n    }\n    if (source.length === 1 && users?.length) {\n        options.push({\n            type: \"item\",\n            icon: \"assign\",\n            label: \"Assign to\",\n            data: getAvailableUsers(store, firstSelected, \"assign\"),\n            id: \"assign\",\n        });\n    }\n    if (projects?.length) {\n        options.push({\n            type: \"item\",\n            icon: \"content-paste\",\n            label: \"Move to\",\n            data: getAvailableProjects(store, \"moveProject\"),\n            id: \"moveProject\",\n        });\n    }\n    return [\n        ...options,\n        {\n            type: \"item\",\n            icon: \"duplicate\",\n            label: \"Duplicate\",\n            hotkey: isMacintosh() ? \"CMD+D\" : \"Ctrl+D\",\n            id: \"duplicate\",\n        },\n        {\n            type: \"item\",\n            icon: \"content-copy\",\n            label: \"Copy\",\n            hotkey: isMacintosh() ? \"CMD+C\" : \"Ctrl+C\",\n            id: \"copy\",\n        },\n        {\n            type: \"item\",\n            icon: \"paste\",\n            label: \"Paste\",\n            hotkey: isMacintosh() ? \"CMD+V\" : \"Ctrl+V\",\n            id: \"paste\",\n        },\n        { type: \"separator\" },\n        {\n            type: \"item\",\n            icon: \"delete\",\n            label: \"Delete\",\n            hotkey: \"Delete\",\n            id: \"delete\",\n        },\n    ];\n}\nfunction getToolbarOptions(store, id) {\n    const { taskShape, readonly } = store.getState();\n    const isHide = taskShape?.completed?.taskHide || false;\n    const options = [\n        {\n            id: \"sort\",\n            type: \"item\",\n            label: \"Sort by\",\n            icon: \"sort\",\n            data: [\n                {\n                    id: \"sort:text-asc\",\n                    type: \"item\",\n                    label: \"Text (a-z)\",\n                    icon: \"asc\",\n                },\n                {\n                    id: \"sort:text-desc\",\n                    type: \"item\",\n                    label: \"Text (z-a)\",\n                    icon: \"desc\",\n                },\n                { type: \"separator\" },\n                {\n                    id: \"sort:priority-asc\",\n                    type: \"item\",\n                    label: \"Priority (high to low)\",\n                    icon: \"asc\",\n                },\n                {\n                    id: \"sort:priority-desc\",\n                    type: \"item\",\n                    label: \"Priority (low to high)\",\n                    icon: \"desc\",\n                },\n                { type: \"separator\" },\n                {\n                    id: \"sort:due-date-desc\",\n                    type: \"item\",\n                    label: \"Due date (new to old)\",\n                    icon: \"asc\",\n                },\n                {\n                    id: \"sort:due-date-asc\",\n                    type: \"item\",\n                    label: \"Due date (old to new)\",\n                    icon: \"desc\",\n                },\n                { type: \"separator\" },\n                {\n                    id: \"sort:completion-date-desc\",\n                    type: \"item\",\n                    label: \"Completion date (new to old)\",\n                    icon: \"asc\",\n                },\n                {\n                    id: \"sort:completion-date-asc\",\n                    type: \"item\",\n                    label: \"Completion date (old to new)\",\n                    icon: \"desc\",\n                },\n                { type: \"separator\" },\n                {\n                    id: \"sort:created-date-desc\",\n                    type: \"item\",\n                    label: \"Created (new to old)\",\n                    icon: \"asc\",\n                },\n                {\n                    id: \"sort:created-date-asc\",\n                    type: \"item\",\n                    label: \"Created (old to new)\",\n                    icon: \"desc\",\n                },\n                { type: \"separator\" },\n                {\n                    id: \"sort:edited-date-desc\",\n                    type: \"item\",\n                    label: \"Edited (new to old)\",\n                    icon: \"asc\",\n                },\n                {\n                    id: \"sort:edited-date-asc\",\n                    type: \"item\",\n                    label: \"Edited (old to new)\",\n                    icon: \"desc\",\n                },\n            ],\n        },\n        {\n            id: \"completed\",\n            icon: \"check\",\n            label: \"Completed tasks\",\n            type: \"item\",\n            data: [\n                {\n                    id: \"completed:show\",\n                    label: \"Show\",\n                    type: \"item\",\n                    icon: !isHide ? \"check\" : \"empty\",\n                },\n                {\n                    id: \"completed:hide\",\n                    label: \"Hide\",\n                    type: \"item\",\n                    icon: isHide ? \"check\" : \"empty\",\n                },\n            ],\n        },\n    ];\n    if (!readonly) {\n        options.push({ type: \"separator\" }, { id: \"add\", icon: \"plus\", label: \"Add project\", type: \"item\" });\n        if (isDefined(id)) {\n            options.push({\n                id: \"rename\",\n                icon: \"edit\",\n                label: \"Rename project\",\n                type: \"item\",\n            }, {\n                id: \"delete\",\n                icon: \"delete\",\n                label: \"Delete project\",\n                type: \"item\",\n            });\n        }\n    }\n    return options;\n}\n//# sourceMappingURL=menu.js.map","import { isDefined } from \"../../helpers\";\nimport getMenuOptions from \"../../data/menu\";\nexport default function (store, { id, type, source }) {\n    if (!isDefined(type))\n        return;\n    store.setState({\n        menu: {\n            id,\n            type,\n            source,\n            options: getMenuOptions({ store, type, id, source }),\n        },\n    });\n}\n//# sourceMappingURL=open.js.map","export default function (store) {\n    store.setState({\n        menu: null,\n    });\n}\n//# sourceMappingURL=close.js.map","import { isDefined } from \"../../helpers\";\nexport function getNextTaskId({ store, id }) {\n    const filtered = isDefined(store.getState()?.filter);\n    const hideCompleted = store.getState()?.taskShape?.completed?.taskHide;\n    const task = store.getTask(id);\n    const parentChildren = store.getChildrenIds({\n        id: task?.parent,\n        tree: true,\n        filtered,\n        hideCompleted,\n    });\n    let nextId = null;\n    if (isDefined(task?.parent) &&\n        (parentChildren.length === 1 || parentChildren.at(-1) === task.id)) {\n        nextId = store.getNearId({\n            id: task.id,\n            dir: \"prev\",\n            flat: true,\n            filtered,\n            hideCompleted,\n        });\n    }\n    else {\n        nextId =\n            store.getNearId({\n                id: task.id,\n                flat: true,\n                filtered,\n                hideCompleted,\n            }) ||\n                store.getNearId({\n                    id: task.id,\n                    dir: \"prev\",\n                    flat: true,\n                    filtered,\n                    hideCompleted,\n                });\n    }\n    return nextId;\n}\n//# sourceMappingURL=common.js.map","import { uid, isSameId } from \"../helpers\";\nimport { getNextTaskId } from \"./task/common\";\nexport function moveSelectedToProject({ store, id }) {\n    const selected = store.getSelection({ sorted: true });\n    const batch = selected.filter(t1 => {\n        const task1 = store.getTask(t1);\n        return !selected.some(t2 => {\n            return isSameId(store.getTask(t2).id, task1.parent);\n        });\n    });\n    for (let index = 0; index < selected.length; index++) {\n        const selectedId = selected[index];\n        moveToProject(store, id, selectedId, batch, !!index);\n    }\n}\nexport function moveToProject(store, projectId, taskId, batch, skipProvider) {\n    const task = store.getTask(taskId);\n    if (isSameId(projectId, task?.project) || typeof projectId === \"undefined\")\n        return;\n    store.in.exec(\"select-task\", {\n        id: getNextTaskId({ store, id: taskId }),\n    });\n    store.in.exec(\"move-task\", {\n        id: taskId,\n        project: projectId,\n        parent: null,\n        operation: \"project\",\n        skipProvider,\n        batch,\n    });\n}\nexport function createProject(store, project) {\n    const id = project?.id || uid().toString();\n    store.in.exec(\"add-project\", {\n        id,\n        project: { label: project?.label || \"New project\" },\n    });\n    store.in.exec(\"set-project\", { id });\n    store.in.exec(\"open-inline-editor\", {\n        id,\n        type: \"project\",\n    });\n}\n//# sourceMappingURL=project.js.map","import { uid } from \"../../helpers\";\nexport function addTask({ store, task, reverse = false, }) {\n    const newId = uid().toString();\n    store.in.exec(\"add-task\", {\n        id: newId,\n        targetId: task?.id,\n        parent: task?.parent,\n        project: store.getState()?.activeProject,\n        reverse,\n    });\n    store.in.exec(\"select-task\", { id: newId });\n    store.in.exec(\"open-inline-editor\", { id: newId, type: \"task\" });\n}\n//# sourceMappingURL=add.js.map","import { getNextTaskId } from \"./common\";\nexport function deleteSelectedTasks({ store }) {\n    const selected = store.getState().selected;\n    if (!selected.length)\n        return;\n    let nextSelect = getNextTaskId({ store, id: selected.at(-1) });\n    if (store.getTask(nextSelect)?.selected) {\n        nextSelect = getNextTaskId({ store, id: selected.at(0) });\n    }\n    store.eachSelected(id => {\n        if (store.existsTask(id))\n            store.in.exec(\"delete-task\", { id });\n    }, true);\n    store.in.exec(\"select-task\", {\n        id: nextSelect,\n    });\n}\n//# sourceMappingURL=delete.js.map","export function pasteCopiedTasks({ store, id }) {\n    const copied = store.getState().copiedTasksId;\n    id = id || copied.at(-1);\n    store.in.exec(\"paste-task\", {\n        targetId: id,\n        parent: store.getTask(id)?.parent ?? null,\n    });\n}\n//# sourceMappingURL=paste.js.map","import { pasteCopiedTasks } from \"./paste\";\nexport function duplicateSelectedTasks({ store }) {\n    const { selected } = store.getState();\n    store.eachSelected((id, index) => {\n        store.in.exec(\"copy-task\", {\n            id,\n            join: !!index,\n        });\n        if (selected.length - 1 === index)\n            pasteCopiedTasks({ store });\n    }, true);\n}\n//# sourceMappingURL=duplicate.js.map","export function copySelectedTasks({ store }) {\n    store.eachSelected((id, index) => {\n        store.in.exec(\"copy-task\", {\n            id,\n            join: !!index,\n        });\n    }, true);\n}\n//# sourceMappingURL=copy.js.map","import { uid } from \"../../helpers\";\nexport function indentSelectedTasks({ store }) {\n    const batchID = uid();\n    store.eachSelected(id => {\n        const parent = store.getTask(store.getTask(id).parent);\n        if (!parent?.selected) {\n            store.in.exec(\"indent-task\", { id, batchID });\n        }\n    }, true);\n}\n//# sourceMappingURL=indent.js.map","import { uid } from \"../../helpers\";\nexport function unindentSelectedTasks({ store }) {\n    const batchID = uid();\n    store.eachSelected(id => {\n        const parent = store.getTask(store.getTask(id).parent);\n        if (!parent?.selected) {\n            store.in.exec(\"unindent-task\", { id, batchID });\n        }\n    }, true);\n}\n//# sourceMappingURL=unindent.js.map","export function setPrioritySelectedTasks({ store, priority }) {\n    const selected = store.getState().selected;\n    if (!selected.length)\n        return;\n    priority = priority === \"null\" || priority == \"0\" ? null : +priority;\n    store.eachSelected((id) => {\n        const task = store.getTask(id);\n        store.in.exec(\"update-task\", {\n            id,\n            task: {\n                ...task,\n                priority,\n            },\n        });\n    });\n}\n//# sourceMappingURL=priority.js.map","import getMenuOptions from \"../../../data/menu\";\nimport { moveSelectedToProject } from \"../../../actions/project\";\nimport { addTask } from \"../../../actions/task/add\";\nimport { deleteSelectedTasks } from \"../../../actions/task/delete\";\nimport { duplicateSelectedTasks } from \"../../../actions/task/duplicate\";\nimport { copySelectedTasks } from \"../../../actions/task/copy\";\nimport { pasteCopiedTasks } from \"../../../actions/task/paste\";\nimport { indentSelectedTasks } from \"../../../actions/task/indent\";\nimport { unindentSelectedTasks } from \"../../../actions/task/unindent\";\nimport { setPrioritySelectedTasks } from \"../../../actions/task/priority\";\nimport { isSameId } from \"../../../helpers\";\nexport default function (store, id, action) {\n    const { menu } = store.getState();\n    const actions = action?.split(\":\");\n    const rootAction = actions?.at(0);\n    if (rootAction) {\n        const task = store.getTask(id);\n        let menuAction = actions.at(1);\n        switch (rootAction) {\n            case \"addBellow\":\n                addTask({ store, task });\n                break;\n            case \"addSubtask\":\n                addTask({\n                    store,\n                    task: {\n                        ...task,\n                        parent: id,\n                        targetId: id,\n                    },\n                });\n                if (task?.collapsed && store.hasChildren(id)) {\n                    store.in.exec(\"expand-task\", { id });\n                }\n                break;\n            case \"duplicate\":\n                duplicateSelectedTasks({ store });\n                break;\n            case \"delete\":\n                deleteSelectedTasks({ store });\n                break;\n            case \"indent\":\n                indentSelectedTasks({ store });\n                break;\n            case \"unindent\":\n                unindentSelectedTasks({ store });\n                break;\n            case \"copy\":\n                copySelectedTasks({ store });\n                break;\n            case \"paste\":\n                pasteCopiedTasks({ store, id });\n                break;\n            case \"priority\":\n                setPrioritySelectedTasks({ store, priority: menuAction });\n                break;\n            case \"assign\":\n                if (task?.assigned?.some(i => isSameId(i, menuAction))) {\n                    store.in.exec(\"unassign-user\", {\n                        id,\n                        userId: menuAction,\n                    });\n                }\n                else {\n                    store.in.exec(\"assign-user\", {\n                        id,\n                        userId: menuAction,\n                    });\n                }\n                store.setState({\n                    menu: {\n                        ...store.getState().menu,\n                        options: getMenuOptions({\n                            store,\n                            type: \"task\",\n                            source: menu.source,\n                        }),\n                    },\n                });\n                break;\n            case \"moveProject\":\n                if (menuAction === \"null\")\n                    menuAction = null;\n                moveSelectedToProject({\n                    store,\n                    id: menuAction,\n                });\n                break;\n        }\n    }\n    if (rootAction !== \"assign\") {\n        store.in.exec(\"close-menu\", { ...menu });\n    }\n}\n//# sourceMappingURL=task.js.map","import { getMatchChar, getMatchStringRegExp } from \"./regexp\";\nfunction toMarkValue(value, filter) {\n    const subString = filter?.strict\n        ? getMatchStringRegExp(filter.match)\n        : new RegExp(filter.match, \"gi\");\n    const css = filter?.strict ? \"wx-todo_filter--strict\" : \"wx-todo_filter\";\n    return value.replace(subString, match => {\n        return `<mark class=\"${css}\">${match}</mark>`;\n    });\n}\nfunction toTagValue(value) {\n    return value.replace(getMatchChar(\"#\"), match => {\n        return `<span class=\"wx-todo_tag\" data-tag=\"${match}\">${match}</span>`;\n    });\n}\nfunction toDateValue(value) {\n    const subString = new RegExp(/!\\((.+?)\\)/gm);\n    return value.replace(subString, match => {\n        const matchString = match.substring(2, match.length - 1);\n        return `<span class=\"wx-todo_date\" data-date=\"${matchString}\">${matchString}</span>`;\n    });\n}\nexport function htmlEscapes(value) {\n    const code = {\n        \"&\": \"&amp;\",\n        \"<\": \"&lt;\",\n        \">\": \"&gt;\",\n        '\"': \"&quot;\",\n        // \"'\": \"&#39;\", //TODO: fix for single quotes\n    };\n    return value.replace(/[&<>\"]/g, match => {\n        return code[match];\n    });\n}\nexport function getTransformValue(value, filter) {\n    if (!value) {\n        return \"\";\n    }\n    let transformValue = htmlEscapes(value);\n    if (filter?.highlight) {\n        transformValue = toMarkValue(transformValue, filter);\n    }\n    else {\n        transformValue = toTagValue(transformValue);\n        transformValue = toDateValue(transformValue);\n    }\n    return transformValue;\n}\nexport function getCountLabel(name, array, locale) {\n    const matchProjects = array.filter(p => p.label.includes(locale(name)));\n    if (!matchProjects.length)\n        return locale(name);\n    const number = new RegExp(/\\d+(?=\\))/gm);\n    let level = 0;\n    for (const { label } of matchProjects) {\n        const match = label.match(number);\n        if (match && +match[0] > level)\n            level = +match[0];\n    }\n    return `${locale(name)} (${level + 1})`;\n}\n//# sourceMappingURL=text.js.map","import { uid } from \"@xbs/lib-state\";\nimport { createProject } from \"../../../actions/project\";\nimport { getCountLabel } from \"../../../common/text\";\nexport default function (store, { action, id, locate }) {\n    const { projects, menu } = store.getState();\n    if (action) {\n        const actions = action.split(\":\");\n        const rootAction = actions.at(0);\n        const menuAction = actions.at(1);\n        switch (rootAction) {\n            case \"sort\":\n                sortActionHandler(store, menuAction);\n                break;\n            case \"completed\":\n                completedActionHandler(store, menuAction);\n                break;\n            case \"add\":\n                createProject(store, {\n                    id: \"temp://\" + uid(),\n                    label: getCountLabel(\"New project\", projects, locate),\n                });\n                break;\n            case \"rename\":\n                store.in.exec(\"open-inline-editor\", {\n                    id,\n                    type: \"project\",\n                });\n                break;\n            case \"delete\":\n                store.in.exec(\"delete-project\", {\n                    id,\n                });\n                break;\n        }\n    }\n    store.in.exec(\"close-menu\", { ...menu });\n}\nfunction completedActionHandler(store, action) {\n    switch (action) {\n        case \"show\":\n            store.in.exec(\"show-completed-tasks\", {});\n            break;\n        case \"hide\":\n            store.in.exec(\"hide-completed-tasks\", {});\n            break;\n    }\n}\nfunction sortActionHandler(store, action) {\n    switch (action) {\n        case \"text-asc\":\n            store.in.exec(\"set-sort\", {\n                by: \"text\",\n                dir: \"asc\",\n                tree: true,\n            });\n            break;\n        case \"text-desc\":\n            store.in.exec(\"set-sort\", {\n                by: \"text\",\n                dir: \"desc\",\n                tree: true,\n            });\n            break;\n        case \"due-date-asc\":\n            store.in.exec(\"set-sort\", {\n                by: \"due_date\",\n                dir: \"asc\",\n                tree: true,\n            });\n            break;\n        case \"due-date-desc\":\n            store.in.exec(\"set-sort\", {\n                by: \"due_date\",\n                dir: \"desc\",\n                tree: true,\n            });\n            break;\n        case \"completion-date-asc\":\n            store.in.exec(\"set-sort\", {\n                by: \"completion_date\",\n                dir: \"asc\",\n                tree: true,\n            });\n            break;\n        case \"completion-date-desc\":\n            store.in.exec(\"set-sort\", {\n                by: \"completion_date\",\n                dir: \"desc\",\n                tree: true,\n            });\n            break;\n        case \"created-date-asc\":\n            store.in.exec(\"set-sort\", {\n                by: \"creation_date\",\n                dir: \"asc\",\n                tree: true,\n            });\n            break;\n        case \"created-date-desc\":\n            store.in.exec(\"set-sort\", {\n                by: \"creation_date\",\n                dir: \"desc\",\n                tree: true,\n            });\n            break;\n        case \"edited-date-asc\":\n            store.in.exec(\"set-sort\", {\n                by: \"edited_date\",\n                dir: \"asc\",\n                tree: true,\n            });\n            break;\n        case \"edited-date-desc\":\n            store.in.exec(\"set-sort\", {\n                by: \"edited_date\",\n                dir: \"desc\",\n                tree: true,\n            });\n            break;\n        case \"priority-asc\":\n            store.in.exec(\"set-sort\", {\n                by: \"priority\",\n                dir: \"asc\",\n                tree: true,\n            });\n            break;\n        case \"priority-desc\":\n            store.in.exec(\"set-sort\", {\n                by: \"priority\",\n                dir: \"desc\",\n                tree: true,\n            });\n            break;\n    }\n}\n//# sourceMappingURL=toolbar.js.map","import taskHandler from \"./handlers/task\";\nimport toolbarHandler from \"./handlers/toolbar\";\nexport default function (store, { id, action, type, params }) {\n    switch (type) {\n        case \"task\":\n            taskHandler(store, id, action);\n            return;\n        case \"toolbar\":\n            toolbarHandler(store, {\n                id,\n                action,\n                locate: params.locate,\n            });\n            return;\n    }\n}\n//# sourceMappingURL=click.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { id, userId }) {\n    const users = store.getState().usersMap;\n    if (!users[userId?.toString()])\n        return;\n    const task = store.getTask(id);\n    if (!task?.assigned?.some(i => isSameId(i, userId))) {\n        store.in.exec(\"update-task\", {\n            id,\n            task: {\n                ...task,\n                assigned: task?.assigned?.length\n                    ? [...task.assigned, userId]\n                    : [userId],\n            },\n        });\n    }\n}\n//# sourceMappingURL=assign.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { id, userId }) {\n    const task = store.getTask(id);\n    if (task?.assigned?.some(i => isSameId(i, userId))) {\n        store.in.exec(\"update-task\", {\n            id,\n            task: {\n                ...task,\n                assigned: task?.assigned?.filter(id => id != userId),\n            },\n        });\n    }\n}\n//# sourceMappingURL=unassign.js.map","import { isDefined } from \"../../helpers\";\nexport default function (store, { id, type = \"task\", targetDate, }) {\n    const { stateDueDate } = store.getState();\n    if (stateDueDate?.open ||\n        !isDefined(id) ||\n        (!store.existsTask(id) && type === \"task\") ||\n        (!store.existsProject(id) && type === \"project\")) {\n        return;\n    }\n    let value = null;\n    if (type === \"task\") {\n        value = store.getTask(id)?.text;\n    }\n    else if (type === \"project\") {\n        value = store.getProject(id)?.label;\n    }\n    store.setState({\n        stateEditableItem: {\n            id,\n            type,\n            initValue: value,\n            currentValue: value,\n            targetDate,\n        },\n    });\n}\n//# sourceMappingURL=open.js.map","import { isDefined } from \"../../helpers\";\nexport default function (store, { save = true }) {\n    const { stateEditableItem } = store.getState();\n    if (!isDefined(stateEditableItem?.id))\n        return;\n    const id = stateEditableItem.id;\n    const value = stateEditableItem.currentValue;\n    if (save) {\n        if (stateEditableItem.type === \"task\") {\n            const task = store.getTask(id);\n            if (value !== task.text) {\n                task.text = value;\n                task.edited_date = new Date();\n                store.in.exec(\"update-task\", {\n                    id,\n                    task,\n                });\n            }\n        }\n        if (stateEditableItem.type === \"project\") {\n            const project = store.getProject(id);\n            if (value !== project.label) {\n                project.label = value;\n                store.in.exec(\"update-project\", {\n                    id,\n                    project,\n                });\n            }\n        }\n    }\n    store.setState({ stateEditableItem: null });\n}\n//# sourceMappingURL=close.js.map","export default function (store, { currentValue, dropdown, targetDate, }) {\n    const { stateEditableItem } = store.getState();\n    store.setState({\n        stateEditableItem: {\n            ...stateEditableItem,\n            currentValue,\n            dropdown,\n            targetDate,\n        },\n    });\n}\n//# sourceMappingURL=editing.js.map","export function locate(el, attr = \"data-id\") {\n    let node = el;\n    if (el?.changedTouches) {\n        const { clientX, clientY } = el.changedTouches[0];\n        node = document.elementFromPoint(clientX, clientY);\n    }\n    else if (!el.tagName && el.target) {\n        node = el.target;\n    }\n    while (node) {\n        if (node.getAttribute) {\n            const id = node.getAttribute(attr);\n            if (id)\n                return node;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nexport function locateID(el, attr = \"data-id\") {\n    const node = locate(el, attr);\n    if (node) {\n        return getID(node, attr);\n    }\n    return null;\n}\nexport function getID(node, attr = \"data-id\") {\n    const id = node.getAttribute(attr);\n    const numId = parseInt(id);\n    return isNaN(numId) || numId.toString() != id ? id : numId;\n}\n//# sourceMappingURL=locate.js.map","export function setCaretPosition(node, position) {\n    if (!node)\n        return;\n    if (node?.childNodes[0]) {\n        const range = document.createRange();\n        const selection = window.getSelection();\n        let textNode = node?.childNodes[node?.childNodes.length - 1];\n        const textLength = textNode?.textContent?.length;\n        let carretPosition = textLength;\n        if (typeof position === \"number\") {\n            const childNodes = node.childNodes;\n            for (let index = 0; index < childNodes.length; index++) {\n                const child = childNodes[index];\n                const length = child.textContent.length;\n                if (length >= position) {\n                    carretPosition = position;\n                    textNode = child;\n                    break;\n                }\n                else {\n                    position -= length;\n                }\n            }\n        }\n        range.setStart(textNode, carretPosition);\n        range.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    }\n    setTimeout(() => node.focus());\n}\nexport function setNodeRange(node) {\n    if (!node)\n        return;\n    const range = document.createRange();\n    const selection = window.getSelection();\n    range.setStart(node, 0);\n    range.setEnd(node, node?.childNodes?.length || 0);\n    selection.removeAllRanges();\n    selection.addRange(range);\n}\nexport function getRangeText() {\n    return window.getSelection().toString();\n}\nexport function getCaretPosition(node) {\n    const selection = window.getSelection();\n    const range = document.createRange();\n    range.setStart(node, 0);\n    range.setEnd(selection.anchorNode, selection.anchorOffset);\n    return range.toString().length;\n}\nexport function getCaretCoords() {\n    const selection = window.getSelection();\n    const range = selection.getRangeAt(0);\n    const rect = range.getBoundingClientRect();\n    return { x: rect.x, y: rect.y };\n}\n//# sourceMappingURL=carret.js.map","import { isDefined, isSameId } from \"../../helpers\";\nimport { getNextTaskId } from \"./common\";\nexport function checkSelectedTasks({ store }) {\n    store.eachSelected(id => {\n        checkTask({ store, id });\n    }, true);\n}\nexport function checkTask({ store, id }) {\n    const task = store.getTask(id);\n    if (!task || task.checked)\n        return;\n    const { taskShape } = store.getState();\n    if (taskShape?.completed?.taskHide) {\n        let nextSelect = null;\n        const parents = store.getParentIds(id);\n        const rootParent = parents[parents.length - 1];\n        const rootTasks = store.getChildren({\n            filtered: true,\n            hideCompleted: true,\n        });\n        const rootTaskIndex = rootTasks.findIndex(t => isSameId(t.id, rootParent));\n        nextSelect = getNextTaskId({ store, id });\n        store.in.exec(\"check-task\", { id });\n        if (store.getTask(rootParent)?.checked) {\n            const nextTaskId = rootTasks[rootTaskIndex + 1]?.id;\n            const lastTaskId = rootTasks[rootTaskIndex - 1]?.id;\n            nextSelect = isDefined(nextTaskId) ? nextTaskId : lastTaskId;\n        }\n        else if (store.getTask(nextSelect)?.checked) {\n            nextSelect = getNextTaskId({ store, id: nextSelect });\n        }\n        isDefined(nextSelect) &&\n            store.in.exec(\"select-task\", {\n                id: nextSelect,\n            });\n    }\n    else {\n        store.in.exec(\"check-task\", { id });\n    }\n}\n//# sourceMappingURL=check.js.map","import { isDefined, isSameId } from \"../../helpers\";\nexport function moveSelectedTasksDown({ store }) {\n    store.eachSelected(id => {\n        const parent = store.getTask(store.getTask(id).parent);\n        !parent?.selected && moveTaskDown(store, id);\n    }, true, true);\n}\nexport function moveSelectedTasksUp({ store }) {\n    store.eachSelected(id => {\n        const parent = store.getTask(store.getTask(id).parent);\n        !parent?.selected && moveTaskUp(store, id);\n    }, true);\n}\nfunction moveTaskDown(store, id) {\n    const { treeTasks, filter, taskShape } = store.getState();\n    const hideCompleted = taskShape?.completed?.taskHide;\n    const filtered = isDefined(filter?.match);\n    const targetId = store.getNearId({\n        id,\n        dir: \"next\",\n        flat: true,\n        filtered,\n        hideCompleted,\n    });\n    const target = store.getTask(targetId);\n    const task = store.getTask(id);\n    if (isSameId(treeTasks.at(-1).id, id) ||\n        !isSameId(target?.parent, task?.parent))\n        return;\n    store.in.exec(\"move-task\", {\n        id,\n        parent: task?.parent,\n        targetId,\n    });\n}\nfunction moveTaskUp(store, id) {\n    const { treeTasks, filter, taskShape } = store.getState();\n    const hideCompleted = taskShape?.completed?.taskHide;\n    const filtered = isDefined(filter?.match);\n    const targetId = store.getNearId({\n        id,\n        dir: \"prev\",\n        flat: true,\n        filtered,\n        hideCompleted,\n    });\n    const target = store.getTask(targetId);\n    const task = store.getTask(id);\n    if (isSameId(treeTasks[0].id, id) ||\n        !isSameId(target?.parent, task?.parent))\n        return;\n    store.in.exec(\"move-task\", {\n        id,\n        targetId,\n        parent: task?.parent,\n        reverse: true,\n    });\n}\n//# sourceMappingURL=move.js.map","import { getRangeText } from \"@xbs/lib-dom\";\nimport { isDefined } from \"../helpers\";\nimport { checkSelectedTasks } from \"../actions/task/check\";\nimport { uncheckSelectedTasks } from \"../actions/task/uncheck\";\nimport { addTask } from \"../actions/task/add\";\nimport { deleteSelectedTasks } from \"../actions/task/delete\";\nimport { duplicateSelectedTasks } from \"../actions/task/duplicate\";\nimport { copySelectedTasks } from \"../actions/task/copy\";\nimport { pasteCopiedTasks } from \"../actions/task/paste\";\nimport { indentSelectedTasks } from \"../actions/task/indent\";\nimport { unindentSelectedTasks } from \"../actions/task/unindent\";\nimport { setPrioritySelectedTasks } from \"../actions/task/priority\";\nimport { moveSelectedTasksDown, moveSelectedTasksUp, } from \"../actions/task/move\";\nexport default function (store, { code, event }) {\n    const { selected, stateEditableItem, filter, stateSearch, menu, stateDueDate, stateCombo, } = store.getState();\n    const isEditorOpen = isDefined(stateEditableItem?.id);\n    const lastSelected = selected.at(-1);\n    if (isDefined(lastSelected) && !stateSearch?.focus && !stateCombo?.open) {\n        taskKeyHandlers(store, code, event);\n    }\n    switch (code) {\n        case \"escape\":\n            if (menu) {\n                store.in.exec(\"close-menu\", {\n                    ...menu,\n                });\n            }\n            else if (isEditorOpen) {\n                store.in.exec(\"close-inline-editor\", {\n                    ...stateEditableItem,\n                    save: false,\n                });\n            }\n            else if (stateDueDate?.open || stateCombo?.open) {\n                store.in.exec(\"set-state-due-date\", {\n                    ...stateDueDate,\n                    open: false,\n                });\n                store.in.exec(\"set-state-combo\", {\n                    open: false,\n                });\n            }\n            else {\n                filter && store.in.exec(\"set-filter\", { match: null });\n                stateSearch?.open &&\n                    store.in.exec(\"set-state-search\", {\n                        ...stateSearch,\n                        value: null,\n                        open: false,\n                        dropdown: { open: false },\n                    });\n            }\n            break;\n    }\n}\nfunction taskKeyHandlers(store, code, event) {\n    const { selected, stateEditableItem, readonly, filter } = store.getState();\n    const isEditorOpen = isDefined(stateEditableItem?.id);\n    const lastSelected = selected.at(-1);\n    const task = store.getTask(lastSelected);\n    if (stateEditableItem?.dropdown)\n        return;\n    if (!readonly) {\n        switch (code) {\n            case \"shift+arrowup\":\n                selectNearTask(store, \"prev\");\n                break;\n            case \"shift+arrowdown\":\n                selectNearTask(store, \"next\");\n                break;\n            case \"shift+tab\":\n                event.preventDefault();\n                unindentSelectedTasks({ store });\n                break;\n            case \"tab\":\n                event.preventDefault();\n                indentSelectedTasks({ store });\n                break;\n            case \"delete\":\n            case \"backspace\":\n                if (!isEditorOpen)\n                    deleteSelectedTasks({ store });\n                break;\n            case \"enter\":\n                event.preventDefault();\n                if (isEditorOpen) {\n                    if (!stateEditableItem?.currentValue &&\n                        isDefined(task.parent)) {\n                        store.in.exec(\"unindent-task\", {\n                            id: stateEditableItem.id,\n                        });\n                        store.in.exec(\"open-inline-editor\", {\n                            id: stateEditableItem.id,\n                            type: \"task\",\n                        });\n                    }\n                    else {\n                        store.in.exec(\"close-inline-editor\", {\n                            id: stateEditableItem.id,\n                        });\n                    }\n                }\n                else if (!isDefined(filter?.match)) {\n                    addTask({ store, task });\n                }\n                break;\n            case \"ctrl+enter\":\n                !isEditorOpen &&\n                    store.in.exec(\"open-inline-editor\", {\n                        id: lastSelected,\n                        type: \"task\",\n                    });\n                break;\n            case \"ctrl+d\":\n                event.preventDefault();\n                duplicateSelectedTasks({ store });\n                break;\n            case \"ctrl+c\":\n                !getRangeText()?.length && copySelectedTasks({ store });\n                break;\n            case \"ctrl+v\":\n                !isEditorOpen && pasteCopiedTasks({ store, id: lastSelected });\n                break;\n            case \"ctrl+arrowup\":\n                moveSelectedTasksUp({ store });\n                break;\n            case \"ctrl+arrowdown\":\n                moveSelectedTasksDown({ store });\n                break;\n            case \"alt+0\":\n                setPrioritySelectedTasks({ store, priority: null });\n                break;\n            case \"alt+1\":\n                setPrioritySelectedTasks({ store, priority: 1 });\n                break;\n            case \"alt+2\":\n                setPrioritySelectedTasks({ store, priority: 2 });\n                break;\n            case \"alt+3\":\n                setPrioritySelectedTasks({ store, priority: 3 });\n                break;\n        }\n    }\n    switch (code) {\n        case \"arrowup\":\n            setArrowHandlers(store, \"up\");\n            break;\n        case \"arrowdown\":\n            setArrowHandlers(store, \"down\");\n            break;\n        case \"arrowleft\":\n            setArrowHandlers(store, \"left\");\n            break;\n        case \"arrowright\":\n            setArrowHandlers(store, \"right\");\n            break;\n        case \"space\":\n            if (!isEditorOpen) {\n                event.preventDefault();\n                if (task?.checked) {\n                    uncheckSelectedTasks({ store });\n                }\n                else {\n                    checkSelectedTasks({ store });\n                }\n            }\n            break;\n    }\n}\nfunction setArrowHandlers(store, action) {\n    const { selected, treeTasks, stateEditableItem, filter, taskShape } = store.getState();\n    const lastSelected = selected.at(-1);\n    if (isDefined(stateEditableItem?.id))\n        return;\n    if (!isDefined(lastSelected)) {\n        store.in.exec(\"select-task\", {\n            id: treeTasks.at(0)?.id,\n        });\n        return;\n    }\n    const hideCompleted = taskShape?.completed?.taskHide;\n    const task = store.getTask(lastSelected);\n    const filtered = isDefined(filter);\n    let nextSelect;\n    switch (action) {\n        case \"up\":\n            nextSelect = store.getNearId({\n                id: lastSelected,\n                dir: \"prev\",\n                filtered,\n                hideCompleted,\n            });\n            break;\n        case \"down\":\n            nextSelect = store.getNearId({\n                id: lastSelected,\n                filtered,\n                hideCompleted,\n            });\n            break;\n        case \"left\":\n            if (store.hasChildren(task.id, filtered, hideCompleted) &&\n                !task.collapsed) {\n                store.in.exec(\"collapse-task\", { id: task.id });\n            }\n            else {\n                nextSelect = task?.parent;\n            }\n            break;\n        case \"right\":\n            if (store.hasChildren(task.id, filtered, hideCompleted) &&\n                task.collapsed) {\n                store.in.exec(\"expand-task\", { id: task.id });\n            }\n            break;\n    }\n    isDefined(nextSelect) &&\n        store.in.exec(\"select-task\", {\n            id: nextSelect,\n        });\n}\nfunction selectNearTask(store, dir = \"next\") {\n    const { selected, filter, taskShape } = store.getState();\n    const hideCompleted = taskShape?.completed?.taskHide;\n    const filtered = isDefined(filter);\n    const lastSelect = selected.at(-1);\n    const nextSelect = store.getNearId({\n        id: lastSelect,\n        dir,\n        filtered,\n        hideCompleted,\n    });\n    if (!isDefined(nextSelect))\n        return;\n    if (selected.length > 1 && store.getTask(nextSelect)?.selected) {\n        store.in.exec(\"unselect-task\", { id: lastSelect });\n        return;\n    }\n    store.in.exec(\"select-task\", {\n        id: nextSelect,\n        join: true,\n    });\n    if (dir === \"next\") {\n        const children = store.getChildrenIds({ id: nextSelect });\n        for (const childId of children) {\n            if (!store.getTask(childId)?.selected) {\n                store.in.exec(\"select-task\", {\n                    id: childId,\n                    join: true,\n                });\n            }\n        }\n    }\n}\n//# sourceMappingURL=keyNavigation.js.map","export function uncheckSelectedTasks({ store }) {\n    store.eachSelected(id => {\n        if (store.getTask(id)?.checked) {\n            store.in.exec(\"uncheck-task\", { id });\n        }\n    }, true);\n}\n//# sourceMappingURL=uncheck.js.map","export default function (store, config) {\n    const match = typeof config?.match === \"string\" ? config.match.trim() : null;\n    const by = typeof config?.by === \"string\" ? config.by.trim() : null;\n    let filter = { match, by, ...config };\n    if (!config || !match?.length) {\n        filter = null;\n    }\n    store.setState({ filter });\n}\n//# sourceMappingURL=filter.js.map","export default function (store, config) {\n    if (!config)\n        return;\n    const by = config.by || \"text\";\n    const dir = config.dir || \"asc\";\n    const sort = { by, dir, ...config };\n    const { tasks, activeProject } = store.getState();\n    const { treeTasks } = store.getInnerState(tasks, activeProject, sort);\n    store.setState({ treeTasks });\n}\n//# sourceMappingURL=sort.js.map","import { isDefined } from \"../../helpers\";\nexport default function (store, { value, open, dropdown, focus }) {\n    const search = store.getState().stateSearch;\n    store.setState({\n        stateSearch: {\n            value,\n            open: isDefined(open) ? open : search?.open,\n            dropdown: isDefined(dropdown) ? dropdown : search?.dropdown,\n            focus: isDefined(focus) ? focus : search?.focus,\n        },\n    });\n}\n//# sourceMappingURL=search.js.map","export default function (store, config) {\n    store.setState({\n        stateDueDate: config,\n    });\n}\n//# sourceMappingURL=duedate.js.map","export default function (store, config) {\n    store.setState({\n        stateCombo: config,\n    });\n}\n//# sourceMappingURL=combo.js.map","export default function (store, { start, mode }) {\n    if (!store.existsTask(start)) {\n        return;\n    }\n    const draggableIds = [];\n    if (!store.getTask(start).selected) {\n        store.in.exec(\"select-task\", { id: start });\n    }\n    store.eachSelected(id => {\n        draggableIds.push(id);\n        const children = store.getChildrenIds({ id });\n        for (const childId of children) {\n            const child = store.getTask(childId);\n            if (!child?.selected)\n                draggableIds.push(childId);\n        }\n    }, true);\n    for (let index = 0; index < draggableIds.length; index++) {\n        store.updateTask({\n            id: draggableIds[index],\n            task: {\n                draggable: true,\n            },\n            skipStateCalc: index !== draggableIds.length - 1,\n        });\n    }\n    store.setState({ draggableIds, dragInfo: { mode } });\n}\n//# sourceMappingURL=start.js.map","import { isSameId } from \"../../helpers\";\nexport default function (store, { target, dropPosition, mode }) {\n    if (store.existsTask(target)) {\n        const targetTask = store.getTask(target);\n        const action = mode === \"move\" ? \"move-task\" : \"copy-task\";\n        if ((!targetTask.draggable && mode === \"move\") || mode === \"copy\") {\n            const reversed = dropPosition === \"bottom\";\n            const selected = store.getSelection({ sorted: true });\n            const batch = selected.filter(t1 => {\n                const task1 = store.getTask(t1);\n                return !selected.some(t2 => {\n                    return isSameId(store.getTask(t2).id, task1.parent);\n                });\n            });\n            store.eachSelected((id, index) => {\n                const parent = store.getTask(store.getTask(id).parent);\n                !parent?.selected &&\n                    store.in.exec(action, {\n                        id,\n                        parent: dropPosition === \"in\"\n                            ? target\n                            : targetTask.parent,\n                        targetId: target,\n                        reverse: dropPosition === \"top\",\n                        skipProvider: !!index,\n                        batch: !index && batch.length > 1 ? batch : null,\n                    });\n            }, true, reversed);\n        }\n    }\n    const { draggableIds } = store.getState();\n    for (let index = 0; index < draggableIds.length; index++) {\n        store.updateTask({\n            id: draggableIds[index],\n            task: {\n                draggable: false,\n            },\n            skipStateCalc: index !== draggableIds.length - 1,\n        });\n    }\n    store.setState({ draggableIds: [], dragInfo: null });\n}\n//# sourceMappingURL=end.js.map","export default function (store, { start, target, dropPosition }) {\n    const expand = store.getState().drag?.expand;\n    if (expand && store.getTask(target)?.collapsed) {\n        store.in.exec(\"expand-task\", { id: target });\n    }\n    const dragInfo = store.getState().dragInfo;\n    store.setState({\n        dragInfo: {\n            ...dragInfo,\n            start,\n            target,\n            dropPosition,\n        },\n    });\n}\n//# sourceMappingURL=drag.js.map","function getSortItem(item, by) {\n    return `${typeof by === \"function\" ? by(item) : item[by]}`;\n}\nfunction sortBy({ dir, by }) {\n    return (a, b) => {\n        const first = getSortItem(a, by);\n        const second = getSortItem(b, by);\n        if (first === \"undefined\" || first === \"null\")\n            return 1;\n        if (second === \"undefined\" || second == \"null\")\n            return -1;\n        if (dir === \"desc\") {\n            return second.localeCompare(first, undefined, {\n                numeric: true,\n            });\n        }\n        return first.localeCompare(second, undefined, {\n            numeric: true,\n        });\n    };\n}\nexport function sortTasks(tasks, config) {\n    if (config.tree) {\n        for (const task of tasks) {\n            if (task.children?.length)\n                sortTasks(task.children, config);\n        }\n    }\n    tasks.sort(sortBy(config));\n}\n//# sourceMappingURL=sort.js.map","import { Store, EventBus, DataRouter } from \"@xbs/lib-state\";\nimport { isSameId, uid, isDefined, findIndex, isNull, getCloneObject, isObject, treeToFlatten, } from \"./helpers\";\nimport { checkIntegrity } from \"./package/package\";\nimport { defaultDragConfig, defaultPriorities, defaultTaskShape, } from \"./data/constants\";\nimport { getMatchChar } from \"./common/regexp\";\nimport { getFilteredChildren, treeFilter } from \"./common/filter\";\nimport { normalizeData, normalizeTreeItem } from \"./common/normalize\";\nimport { getAvailableUsers, getUsersMap } from \"./common/user\";\nimport { closeAllElements } from \"./actions/common\";\nimport addTask from \"./handlers/task/add\";\nimport updateTask from \"./handlers/task/update\";\nimport moveTask from \"./handlers/task/move\";\nimport copyTask from \"./handlers/task/copy\";\nimport pasteTask from \"./handlers/task/paste\";\nimport deleteTask from \"./handlers/task/delete\";\nimport expandTask from \"./handlers/task/expand\";\nimport collapseTask from \"./handlers/task/collapse\";\nimport checkTask from \"./handlers/task/check\";\nimport uncheckTask from \"./handlers/task/uncheck\";\nimport indentTask from \"./handlers/task/indent\";\nimport unindentTask from \"./handlers/task/unindent\";\nimport showCompleted from \"./handlers/task/showCompleted\";\nimport hideCompleted from \"./handlers/task/hideCompleted\";\nimport selectTask from \"./handlers/selection/select\";\nimport unselectTask from \"./handlers/selection/unselect\";\nimport addProject from \"./handlers/project/add\";\nimport updateProject from \"./handlers/project/update\";\nimport setProject from \"./handlers/project/set\";\nimport deleteProject from \"./handlers/project/delete\";\nimport openMenu from \"./handlers/menu/open\";\nimport closeMenu from \"./handlers/menu/close\";\nimport clickItemMenu from \"./handlers/menu/click\";\nimport assignUser from \"./handlers/user/assign\";\nimport unassignUser from \"./handlers/user/unassign\";\nimport openInlineEditor from \"./handlers/editor/open\";\nimport closeInlineEditor from \"./handlers/editor/close\";\nimport editingItem from \"./handlers/editor/editing\";\nimport keypressOn from \"./handlers/keyNavigation\";\nimport setFilter from \"./handlers/filter\";\nimport setSort from \"./handlers/sort\";\nimport setStateSearch from \"./handlers/components/search\";\nimport setStateDueDate from \"./handlers/components/duedate\";\nimport setStateCombo from \"./handlers/components/combo\";\nimport dragStart from \"./handlers/dnd/start\";\nimport dragEnd from \"./handlers/dnd/end\";\nimport drag from \"./handlers/dnd/drag\";\nimport { sortTasks } from \"./common/sort\";\nimport { setPriorityMap } from \"./common/priority\";\nexport class DataStore extends Store {\n    constructor(writable) {\n        super(writable);\n        checkIntegrity();\n        this.in = new EventBus();\n        this.out = new EventBus();\n        this.in.setNext(this.out.exec);\n        this._router = new DataRouter(super.setState.bind(this), [], {});\n        const handlers = {\n            \"add-task\": addTask,\n            \"update-task\": updateTask,\n            \"move-task\": moveTask,\n            \"copy-task\": copyTask,\n            \"paste-task\": pasteTask,\n            \"delete-task\": deleteTask,\n            \"expand-task\": expandTask,\n            \"collapse-task\": collapseTask,\n            \"check-task\": checkTask,\n            \"uncheck-task\": uncheckTask,\n            \"indent-task\": indentTask,\n            \"unindent-task\": unindentTask,\n            \"add-project\": addProject,\n            \"update-project\": updateProject,\n            \"set-project\": setProject,\n            \"delete-project\": deleteProject,\n            \"show-completed-tasks\": showCompleted,\n            \"hide-completed-tasks\": hideCompleted,\n            \"select-task\": selectTask,\n            \"unselect-task\": unselectTask,\n            \"open-menu\": openMenu,\n            \"close-menu\": closeMenu,\n            \"click-menu-item\": clickItemMenu,\n            \"assign-user\": assignUser,\n            \"unassign-user\": unassignUser,\n            \"open-inline-editor\": openInlineEditor,\n            \"close-inline-editor\": closeInlineEditor,\n            \"edit-item\": editingItem,\n            \"keypress-on-todo\": keypressOn,\n            \"set-filter\": setFilter,\n            \"set-sort\": setSort,\n            \"set-state-search\": setStateSearch,\n            \"set-state-due-date\": setStateDueDate,\n            \"set-state-combo\": setStateCombo,\n            \"start-drag\": dragStart,\n            \"end-drag\": dragEnd,\n            drag,\n        };\n        this.in.on(\"set-filter\", () => {\n            const { tasks, activeProject, filter } = this.getState();\n            const { treeTasks, childrenMap, filteredChildrenMap, tags } = this.getInnerState(tasks, activeProject);\n            if (filter?.match)\n                closeAllElements(this);\n            this.setState({\n                treeTasks,\n                childrenMap,\n                filteredChildrenMap,\n                tags,\n            });\n        });\n        this._setHandlers(handlers);\n    }\n    init(initialState) {\n        this._router.init({\n            id: null,\n            selected: [],\n            projects: [],\n            tasks: [],\n            users: [],\n            tags: [],\n            readonly: false,\n            taskShape: defaultTaskShape,\n            drag: defaultDragConfig,\n            priorities: defaultPriorities,\n            // Only service\n            treeTasks: [],\n            copiedTasksId: [],\n            defaultTags: [],\n            tasksMap: null,\n            usersMap: null,\n            childrenMap: null,\n            priorityMap: null,\n            filteredChildrenMap: null,\n            stateEditableItem: null,\n            stateSearch: null,\n            stateDueDate: null,\n            stateCombo: null,\n            draggableIds: [],\n            dragInfo: null,\n            filter: null,\n            menu: null,\n            ...initialState,\n        });\n        const { tasks, users, projects, tags, priorities } = this.getState();\n        this.parse({\n            tasks,\n            users,\n            projects,\n            activeProject: initialState?.activeProject,\n            tags,\n        });\n        setPriorityMap(this, priorities);\n    }\n    setState(state, ctx) {\n        this._router.setState(state, ctx);\n    }\n    getSelection({ sorted = false } = {}) {\n        let selected = this.getState().selected;\n        if (sorted) {\n            const tasks = this.getState().tasks;\n            const pull = {};\n            for (const id of selected) {\n                pull[tasks.findIndex(t => isSameId(t.id, id))] = id;\n            }\n            selected = Object.values(pull);\n        }\n        return selected;\n    }\n    eachSelected(callback, sorted = false, reversed = false) {\n        const selection = this.getSelection({ sorted });\n        if (reversed) {\n            let counter = 0;\n            for (let index = selection.length - 1; index >= 0; index--) {\n                callback(selection[index], counter++);\n            }\n        }\n        else {\n            for (let index = 0; index < selection.length; index++) {\n                callback(selection[index], index);\n            }\n        }\n    }\n    serialize() {\n        const { tasks, projects, users, tags, activeProject } = this.getState();\n        for (const task of tasks) {\n            delete task.selected;\n            delete task.draggable;\n        }\n        return {\n            tasks: [...tasks],\n            projects: [...projects],\n            users: [...users],\n            tags: [...tags],\n            activeProject,\n        };\n    }\n    parse(obj) {\n        if (!isObject(obj))\n            return;\n        const state = this.getState();\n        if (obj?.tasks) {\n            obj.tasks = normalizeData(obj.tasks, state.selected);\n        }\n        if (obj?.tags) {\n            const tags = (obj.tags || []).map(t => t.startsWith(\"#\") ? t : `#${t}`);\n            this.setState({ defaultTags: [...new Set(tags)] });\n        }\n        const tasks = obj?.tasks || state?.tasks || [];\n        const projects = obj?.projects || state?.projects || [];\n        const users = obj?.users || state?.users || [];\n        let activeProject = state?.activeProject;\n        if ((typeof obj?.activeProject !== \"undefined\" &&\n            projects.find(p => isSameId(p?.id, obj?.activeProject))) ||\n            isNull(obj?.activeProject)) {\n            activeProject = obj.activeProject;\n        }\n        else if (!projects.find(p => isSameId(p?.id, state?.activeProject))) {\n            activeProject = projects[0]?.id || null;\n        }\n        const { treeTasks, childrenMap, filteredChildrenMap, usersMap, tags } = this.getInnerState(tasks, activeProject);\n        this.setState({\n            treeTasks,\n            childrenMap,\n            filteredChildrenMap,\n            usersMap,\n            tags,\n            tasks,\n            projects,\n            users,\n            activeProject,\n        });\n        this._setTasksMap(tasks);\n    }\n    existsTask(id) {\n        return id in this.getState().tasksMap;\n    }\n    existsProject(id) {\n        return isDefined(this.getState().projects.find(project => isSameId(project.id, id))\n            ?.id);\n    }\n    updateTask({ id, task, skipStateCalc = false, }) {\n        if (!this.existsTask(id))\n            return;\n        const state = this.getState();\n        const tasksMap = state.tasksMap;\n        const tasks = state.tasks.map(t => {\n            if (isSameId(id, t.id)) {\n                const newTask = { ...t, ...task, id: t.id };\n                tasksMap[t.id] = newTask;\n                return newTask;\n            }\n            return t;\n        });\n        if (skipStateCalc) {\n            this.setState({ tasks, tasksMap });\n            return;\n        }\n        const { treeTasks, childrenMap, filteredChildrenMap, usersMap, tags } = this.getInnerState(tasks, state.activeProject);\n        this.setState({\n            tasks,\n            treeTasks,\n            childrenMap,\n            filteredChildrenMap,\n            usersMap,\n            tags,\n            tasksMap,\n        });\n    }\n    moveTask({ id, project, parent, targetId, reverse, silent = false, }) {\n        if (!this.existsTask(id) ||\n            isSameId(id, parent) ||\n            isSameId(id, targetId)) {\n            return;\n        }\n        const state = this.getState();\n        const task = this.getTask(id);\n        const isExistsParent = this.existsTask(parent);\n        const isExistsTargetId = this.existsTask(targetId);\n        task.parent = parent ?? null;\n        if (isNull(project) || this.existsProject(project)) {\n            task.project = project;\n        }\n        else if (isExistsTargetId) {\n            task.project = this.getTask(targetId).project;\n        }\n        else if (isExistsParent) {\n            task.project = this.getTask(parent).project;\n        }\n        else {\n            task.project = state?.activeProject;\n        }\n        if (silent) {\n            this.updateTask({ id, task });\n        }\n        else {\n            this.in.exec(\"update-task\", {\n                id,\n                task,\n                skipProvider: true,\n                skipStateCalc: true,\n            });\n        }\n        const moveChildren = this.getChildrenIds({ id, tree: true });\n        const moveChildrenLengths = moveChildren.length;\n        if (typeof project !== \"undefined\" && this.hasChildren(id)) {\n            for (let index = 0; index < moveChildrenLengths; index++) {\n                const child = this.getTask(moveChildren[index]);\n                if (\"project\" in child) {\n                    if (silent) {\n                        this.updateTask({\n                            id: child.id,\n                            task: {\n                                ...this.getTask(child.id),\n                                project: task.project,\n                            },\n                        });\n                    }\n                    else {\n                        this.in.exec(\"update-task\", {\n                            id: child.id,\n                            task: {\n                                ...this.getTask(child.id),\n                                project: task.project,\n                            },\n                            skipProvider: true,\n                            skipStateCalc: true,\n                        });\n                    }\n                }\n            }\n        }\n        const tasks = state.tasks;\n        const parentIndex = tasks.findIndex(t => isSameId(t.id, id));\n        const moveTasks = tasks.splice(parentIndex, moveChildrenLengths + 1);\n        let index = reverse ? 0 : state.tasks.length + 1;\n        if (isExistsParent && !isDefined(targetId)) {\n            const parentChildren = this.getChildrenIds({\n                id: parent,\n                tree: true,\n            });\n            const parentChildrenLength = parentChildren.length;\n            const target = parentChildrenLength && !reverse\n                ? parentChildren.at(-1)\n                : parent;\n            if (isSameId(id, target)) {\n                index = parentIndex;\n            }\n            else {\n                index = tasks.findIndex(t => isSameId(t.id, target)) + 1;\n            }\n        }\n        if (isExistsTargetId) {\n            const TChildren = this.getChildrenIds({\n                id: targetId,\n                tree: true,\n            });\n            if (reverse) {\n                if (isSameId(parent, targetId)) {\n                    if (TChildren.length && !isSameId(id, TChildren[0])) {\n                        targetId = TChildren[0];\n                    }\n                }\n                index = tasks.findIndex(t => isSameId(t.id, targetId));\n            }\n            else {\n                for (let index = TChildren.length - 1; index >= 0; index--) {\n                    const TChildId = TChildren[index];\n                    if (!isSameId(TChildId, id) &&\n                        !moveChildren.some(i => isSameId(i, TChildId))) {\n                        targetId = TChildId;\n                        break;\n                    }\n                }\n                index = tasks.findIndex(t => isSameId(t.id, targetId)) + 1;\n            }\n        }\n        tasks.splice(index, 0, ...moveTasks);\n        const { treeTasks, childrenMap, filteredChildrenMap, usersMap } = this.getInnerState(tasks, state.activeProject);\n        this.setState({\n            tasks,\n            treeTasks,\n            childrenMap,\n            filteredChildrenMap,\n            usersMap,\n        });\n        this._setTasksMap(tasks);\n    }\n    pasteTask({ targetId, parent, project, reverse, }) {\n        const { copiedTasksId } = this.getState();\n        const copy = (id, parent) => {\n            const task = this.getTask(id);\n            const copiedTask = getCloneObject(task);\n            const children = this.getChildren({ id });\n            copiedTask.id = uid().toString();\n            copiedTask.parent = parent;\n            if (\"selected\" in copiedTask)\n                delete copiedTask.selected;\n            if (\"draggable\" in copiedTask)\n                delete copiedTask.draggable;\n            copiedTasks.push(copiedTask);\n            if (children.length) {\n                for (let index = 0; index < children.length; index++) {\n                    copy(children[index].id, copiedTask.id);\n                }\n            }\n        };\n        const copiedTasks = [];\n        for (const id of copiedTasksId)\n            copy(id, parent);\n        for (let index = 0; index < copiedTasks.length; index++) {\n            const copiedTask = copiedTasks[index];\n            if (index === 0) {\n                this.in.exec(\"add-task\", {\n                    task: copiedTask,\n                    id: copiedTask.id,\n                    parent,\n                    targetId,\n                    reverse,\n                    project,\n                    skipProvider: true,\n                });\n            }\n            else {\n                this.in.exec(\"add-task\", {\n                    task: copiedTask,\n                    id: copiedTask.id,\n                    parent: copiedTask.parent,\n                    targetId: copiedTasks[index - 1]?.id,\n                    project,\n                    skipProvider: true,\n                });\n            }\n        }\n        copiedTasks.length &&\n            this.in.exec(\"clone-task\", {\n                parent,\n                targetId,\n                project,\n                reverse,\n                batch: copiedTasks,\n            });\n    }\n    getTask(id) {\n        return this.getState().tasksMap[id];\n    }\n    getProject(id) {\n        return this.getState().projects.find(p => isSameId(p.id, id));\n    }\n    getChildren({ id, tree = false, filtered = false, hideCompleted = false, }) {\n        if (!this.existsTask(id) && isDefined(id)) {\n            return;\n        }\n        let treeChildren = [];\n        if (isDefined(id)) {\n            const children = this.getState()[filtered ? \"filteredChildrenMap\" : \"childrenMap\"][id];\n            treeChildren = [...treeChildren, ...children];\n            if (tree) {\n                for (let index = 0; index < children.length; index++) {\n                    const child = children[index];\n                    if (child?.children?.length) {\n                        treeChildren = [\n                            ...treeChildren,\n                            ...this.getChildren({\n                                id: child.id,\n                                tree: true,\n                                filtered,\n                            }),\n                        ];\n                    }\n                }\n            }\n        }\n        else {\n            treeChildren = this.getState().treeTasks;\n        }\n        return hideCompleted\n            ? treeChildren.filter(t => !t.checked)\n            : treeChildren;\n    }\n    getChildrenIds({ id, tree = true, filtered = false, hideCompleted = false, }) {\n        if (!this.existsTask(id) && isDefined(id))\n            return;\n        let ids = [];\n        const data = this.getChildren({\n            id,\n            tree: false,\n            filtered,\n            hideCompleted,\n        });\n        for (let index = 0; index < data.length; index++) {\n            const child = data[index];\n            ids.push(child.id);\n            if (child?.children?.length && tree) {\n                ids = [\n                    ...ids,\n                    ...this.getChildrenIds({\n                        id: child.id,\n                        tree,\n                        filtered,\n                        hideCompleted,\n                    }),\n                ];\n            }\n        }\n        return ids;\n    }\n    getParentIds(id) {\n        if (!this.existsTask(id))\n            return;\n        const parents = [];\n        const parentId = this.getTask(id)?.parent;\n        if (this.existsTask(parentId)) {\n            parents.push(parentId, ...this.getParentIds(parentId));\n        }\n        return parents;\n    }\n    getTailId(id, filtered = false, hideCompleted = false) {\n        const childrenIds = this.getChildrenIds({\n            id,\n            filtered,\n            hideCompleted,\n        });\n        if (childrenIds.length) {\n            return childrenIds.at(-1);\n        }\n        return id;\n    }\n    hasChildren(id, filtered, hideCompleted = false) {\n        const children = this.getState()[filtered ? \"filteredChildrenMap\" : \"childrenMap\"];\n        return !!(hideCompleted ? children[id]?.filter(t => !t.checked) : children[id])?.length;\n    }\n    getTreeIndex(id, filtered = false, hideCompleted = false) {\n        const task = this.getTask(id);\n        return this.getChildren({\n            id: task?.parent,\n            filtered,\n            hideCompleted,\n        }).findIndex(i => isSameId(i.id, id));\n    }\n    getNearId({ id, dir = \"next\", flat = false, filtered = false, hideCompleted = false, }) {\n        if (!this.existsTask(id)) {\n            return;\n        }\n        return dir === \"next\"\n            ? this._getNextId(id, flat, false, filtered, hideCompleted)\n            : this._getPrevId(id, flat, filtered, hideCompleted);\n    }\n    getInnerState(tasks, project, sort) {\n        const { users, filter, taskShape, defaultTags } = this.getState();\n        const rawData = getCloneObject(tasks);\n        const tags = new Set(defaultTags);\n        const usersMap = getUsersMap(users);\n        const map = {};\n        const childrenMap = {};\n        let filteredChildrenMap = {};\n        let treeTasks = [];\n        for (let index = 0; index < rawData.length; index++) {\n            const task = rawData[index];\n            if (task.assigned?.length && users?.length) {\n                task.availableUsers = getAvailableUsers(usersMap, task);\n            }\n            map[rawData[index].id] = index;\n            rawData[index].children = [];\n            childrenMap[task.id] = [];\n            if (task.text) {\n                const matches = task.text.matchAll(getMatchChar(\"#\"));\n                for (const match of matches)\n                    tags.add(match[0]);\n            }\n        }\n        for (let index = 0; index < rawData.length; index++) {\n            const task = rawData[index];\n            if (task.parent && childrenMap[task.parent]) {\n                rawData[map[task.parent]].children.push(task);\n                childrenMap[task.parent].push(task);\n            }\n            else if (!isDefined(task.parent)) {\n                treeTasks.push(task);\n            }\n        }\n        treeTasks = treeTasks.filter((task) => isSameId(task.project, project));\n        if (sort) {\n            const firstTreeId = treeTasks.at(0).id;\n            sortTasks(treeTasks, sort);\n            const sortedTasks = treeToFlatten(treeTasks);\n            const index = tasks.findIndex(t => isSameId(t.id, firstTreeId));\n            tasks.splice(index, sortedTasks.length, ...sortedTasks);\n            this.setState({ tasks });\n        }\n        if (isDefined(filter)) {\n            treeTasks = treeFilter(treeTasks, filter);\n            filteredChildrenMap = getFilteredChildren(treeTasks);\n        }\n        for (let index = 0; index < treeTasks.length; index++) {\n            normalizeTreeItem(treeTasks[index], childrenMap, taskShape);\n        }\n        return {\n            treeTasks,\n            childrenMap,\n            usersMap,\n            filteredChildrenMap,\n            tags: [...tags],\n        };\n    }\n    _setTasksMap(tasks) {\n        const tasksMap = {};\n        for (const task of tasks)\n            tasksMap[task.id] = task;\n        this.setState({ tasksMap });\n    }\n    _setHandlers(handlersMap) {\n        Object.keys(handlersMap).forEach((key) => {\n            this.in.on(key, (ev) => handlersMap[key](this, ev));\n        });\n    }\n    _getNextId(id, flat = false, silent = false, filtered = false, hideCompleted = false) {\n        const task = this.getTask(id);\n        const hasChildren = this.hasChildren(id, filtered, hideCompleted);\n        if (!flat && hasChildren && !task.collapsed && !silent) {\n            return this.getChildren({ id, filtered, hideCompleted })[0]?.id;\n        }\n        else {\n            const parentId = this.getTask(task?.parent)?.id;\n            const children = this.getChildren({\n                id: parentId,\n                filtered,\n                hideCompleted,\n            });\n            const index = findIndex(children, child => isSameId(child.id, id));\n            const length = children.length;\n            if (index + 1 < length) {\n                return children[index + 1]?.id;\n            }\n            else {\n                if (!isDefined(parentId)) {\n                    return null;\n                }\n                return this._getNextId(parentId, flat, true, filtered, hideCompleted);\n            }\n        }\n    }\n    _getPrevId(id, flat = false, filtered = false, hideCompleted = false) {\n        const index = this.getTreeIndex(id, filtered, hideCompleted);\n        const parentId = this.getTask(id)?.parent;\n        if (index > 0) {\n            const children = this.getChildren({\n                id: parentId,\n                filtered,\n                hideCompleted,\n            });\n            let current = children[index - 1];\n            if (!this.hasChildren(current.id, filtered, hideCompleted) ||\n                current.collapsed) {\n                return current.id;\n            }\n            while (!flat &&\n                this.hasChildren(current.id, filtered, hideCompleted) &&\n                !current.collapsed) {\n                const allChilds = this.getChildren({\n                    id: current.id,\n                    filtered,\n                    hideCompleted,\n                });\n                current = allChilds[allChilds.length - 1];\n            }\n            return current.id;\n        }\n        else {\n            if (!isDefined(parentId)) {\n                return null;\n            }\n            return parentId;\n        }\n    }\n}\n//# sourceMappingURL=DataStore.js.map","export default class Store {\n    constructor(writable) {\n        this._writable = writable;\n        this._values = {};\n        this._state = {};\n    }\n    setState(data) {\n        const state = this._state;\n        for (const key in data) {\n            if (state[key]) {\n                state[key].set(data[key]);\n            }\n            else {\n                this._state[key] = this._wrapWritable(key, data[key]);\n            }\n        }\n    }\n    getState() {\n        return this._values;\n    }\n    getReactive() {\n        return this._state;\n    }\n    _wrapWritable(key, val) {\n        const wr = this._writable(val);\n        wr.subscribe(v => {\n            this._values[key] = v;\n        });\n        return wr;\n    }\n}\n//# sourceMappingURL=Store.js.map","import { getRandomInt } from \"../helpers\";\nimport { message } from \"./message\";\nexport function checkIntegrity() {\n    const M = 60000;\n    if ((process.env.TRIALPACKAGE || process.env.SITEPACKAGE) && isValid())\n        return;\n    setTimeout(() => {\n        if (process.env.TRIALPACKAGE) {\n            setInterval(() => {\n                if (typeof window !== \"undefined\" &&\n                    new Date() > process.env.TRIALDATE) {\n                    //\"Your trial has expired. Please purchase the commercial license for the ToDo List widget at https://dhtmlx.com\"\n                    const str = window.atob(\"WW91ciB0cmlhbCBoYXMgZXhwaXJlZC4gUGxlYXNlIHB1cmNoYXNlIHRoZSBjb21tZXJjaWFsIGxpY2Vuc2UgZm9yIHRoZSBUb0RvIExpc3Qgd2lkZ2V0IGF0IGh0dHBzOi8vZGh0bWx4LmNvbQ==\");\n                    message(str);\n                }\n            }, getRandomInt(M, M * 3));\n        }\n        if (process.env.SITEPACKAGE) {\n            setInterval(() => {\n                //\"This version of ToDo List is intended for demonstration only. Download an official evaluation version to try widget in your project at https://dhtmlx.com\"\n                const str = window.atob(\"VGhpcyB2ZXJzaW9uIG9mIFRvRG8gTGlzdCBpcyBpbnRlbmRlZCBmb3IgZGVtb25zdHJhdGlvbiBvbmx5LiBEb3dubG9hZCBhbiBvZmZpY2lhbCBldmFsdWF0aW9uIHZlcnNpb24gdG8gdHJ5IHdpZGdldCBpbiB5b3VyIHByb2plY3QgYXQgaHR0cHM6Ly9kaHRtbHguY29t\");\n                message(str);\n            }, getRandomInt(M, M * 3));\n        }\n    });\n}\nfunction isValid() {\n    if (typeof window === \"undefined\")\n        return true;\n    const l = location.hostname;\n    const t = [\n        // dhtmlx.com\n        \"ZGh0bWx4LmNvbQ==\",\n        // dhtmlxcode.com\n        \"ZGh0bWx4Y29kZS5jb20=\",\n        // webixcode.com\n        \"d2ViaXhjb2RlLmNvbQ==\",\n        // webix.io\n        \"d2ViaXguaW8=\",\n        // repl.co\n        \"cmVwbC5jbw==\",\n    ];\n    for (let i = 0; i < t.length; i++) {\n        const x = window.atob(t[i]);\n        if (x === l || l.endsWith(\".\" + x))\n            return true;\n    }\n    return false;\n}\n//# sourceMappingURL=package.js.map","import { priorityColors } from \"../data/constants\";\nexport function setPriorityMap(store, priorities) {\n    const priorityMap = {};\n    for (let index = 0; index < priorities.length; index++) {\n        const item = priorities[index];\n        priorityMap[item.id] = {\n            ...item,\n            color: item.color || priorityColors[index % priorityColors.length],\n        };\n    }\n    store.setState({ priorityMap });\n}\n//# sourceMappingURL=priority.js.map","export function getTagsOptions(array, string) {\n    return array\n        .filter(tag => tag.includes(string))\n        .map(tag => ({ label: tag, id: tag }));\n}\n//# sourceMappingURL=tag.js.map","export const changeLabelLocale = (data = [], locale) => data.map(item => {\n    if (item?.label)\n        item.label = locale(item.label);\n    if (item?.data)\n        changeLabelLocale(item.data, locale);\n    return item;\n});\nexport const getDateLocales = (locale) => {\n    const l = {};\n    const key = [\"monthShort\", \"monthFull\", \"dayShort\", \"dayFull\"];\n    for (const k of key) {\n        l[k] = locale(k);\n    }\n    return l;\n};\n//# sourceMappingURL=locale.js.map","import { locateID } from \"@xbs/lib-dom\";\nimport { isDefined, isSameId, treeToFlatten } from \"../helpers\";\nexport function selection(node, config) {\n    let pressedElem;\n    const api = config.api;\n    const readonly = config.readonly;\n    const handleDown = (event) => {\n        pressedElem = event.target;\n    };\n    const handleUp = (event) => {\n        const id = locateID(pressedElem, \"data-list-id\");\n        const element = pressedElem === event.target;\n        const { stateEditableItem } = api.getState();\n        if (isSameId(stateEditableItem?.id, id)) {\n            return;\n        }\n        if (element) {\n            const menuId = locateID(pressedElem, \"data-menu-id\");\n            const isContextMenu = event.button === 2;\n            const selected = api.getSelection();\n            let ctrlMode = event.ctrlKey || event.metaKey;\n            let shiftMode = event.shiftKey;\n            if (readonly) {\n                ctrlMode = shiftMode = false;\n            }\n            if ((isContextMenu && selected.some(i => isSameId(i, id))) ||\n                (menuId && selected.some(i => isSameId(i, menuId)))) {\n                return;\n            }\n            handleSelectAction({\n                id,\n                api,\n                ctrlMode,\n                shiftMode,\n            });\n            event.stopPropagation();\n            document.getSelection().removeAllRanges();\n        }\n    };\n    node.addEventListener(\"mousedown\", handleDown);\n    node.addEventListener(\"mouseup\", handleUp);\n    return {\n        destroy() {\n            node.removeEventListener(\"mousedown\", handleDown);\n            node.removeEventListener(\"mouseup\", handleUp);\n        },\n    };\n}\nfunction handleSelectAction({ id, api, ctrlMode, shiftMode, }) {\n    const { selected, treeTasks, taskShape } = api.getState();\n    if (!isDefined(id)) {\n        api.eachSelected(id => {\n            api.exec(\"unselect-task\", { id });\n        });\n        return;\n    }\n    const task = api.getTask({ id });\n    if (ctrlMode && task?.selected) {\n        api.exec(\"unselect-task\", { id });\n        const parents = api.getParentIds({ id });\n        for (const parentId of parents) {\n            const parent = api.getTask({ id: parentId });\n            if (parent?.selected) {\n                api.exec(\"unselect-task\", { id: parentId });\n            }\n        }\n        return;\n    }\n    if (task?.selected) {\n        if (!(ctrlMode || shiftMode)) {\n            api.eachSelected(i => {\n                if (!isSameId(i, id))\n                    api.exec(\"unselect-task\", { id: i });\n            });\n        }\n        return;\n    }\n    api.exec(\"select-task\", {\n        id,\n        join: ctrlMode || shiftMode,\n    });\n    if (ctrlMode || shiftMode) {\n        setChildrenSelection(api, id);\n    }\n    if (!ctrlMode && shiftMode && selected.length > 1) {\n        const hideCompleted = taskShape?.completed?.taskHide;\n        const filtredTask = hideCompleted\n            ? treeToFlatten(treeTasks).filter(t => !t.checked)\n            : treeToFlatten(treeTasks);\n        const firstSelection = selected[0];\n        const firstIndex = filtredTask.findIndex(task => isSameId(task.id, firstSelection));\n        const targetIndex = filtredTask.findIndex(task => isSameId(task.id, id));\n        if (firstIndex < 0 || targetIndex < 0)\n            return;\n        if (firstIndex < targetIndex) {\n            for (let index = firstIndex + 1; index < targetIndex; index++) {\n                const task = filtredTask[index];\n                if (!task?.selected) {\n                    api.exec(\"select-task\", {\n                        id: task.id,\n                        join: true,\n                    });\n                    setChildrenSelection(api, task.id);\n                }\n            }\n        }\n        else if (firstIndex > targetIndex) {\n            for (let index = firstIndex - 1; index > targetIndex; index--) {\n                const task = filtredTask[index];\n                if (!task?.selected) {\n                    api.exec(\"select-task\", {\n                        id: task.id,\n                        join: true,\n                    });\n                    setChildrenSelection(api, task.id);\n                }\n            }\n        }\n    }\n}\nfunction setChildrenSelection(api, id) {\n    const children = api.getChildrenIds({ id });\n    for (const childId of children) {\n        const child = api.getTask({ id: childId });\n        !child?.selected &&\n            api.exec(\"select-task\", {\n                id: childId,\n                join: true,\n            });\n    }\n}\n//# sourceMappingURL=selection.js.map","import { locate, locateID } from \"@xbs/lib-dom\";\nimport { isDefined } from \"../helpers\";\nexport function dragManager(node, config) {\n    if (config?.readonly) {\n        return;\n    }\n    const api = config.api;\n    let portal = null;\n    let wrapper = null;\n    let captured = null;\n    let clone = null;\n    let target = null;\n    let line = null;\n    let dragCoords;\n    let draggableIds = [];\n    let capturedId = null;\n    let targetId = null;\n    let dropPosition = null;\n    let scrollTimer;\n    let pointerDown = {};\n    let handlers;\n    let mode = null;\n    let filtered = false;\n    let hideCompleted = false;\n    const touch = {\n        duration: 500,\n        timer: null,\n        callback: null,\n    };\n    const touchStart = () => {\n        touch.timer = setTimeout(touch.callback, touch.duration);\n    };\n    const touchEnd = () => {\n        touch.timer && clearTimeout(touch.timer);\n    };\n    const checkScroll = (event) => {\n        if (scrollTimer) {\n            clearTimeout(scrollTimer);\n        }\n        if (wrapper) {\n            const shift = 50;\n            const contentRect = wrapper.getBoundingClientRect();\n            const scrollState = {\n                x: wrapper.scrollLeft,\n                y: wrapper.scrollTop,\n            };\n            const { x, y } = getClientCoords(event);\n            if (x > contentRect.width + contentRect.left - shift) {\n                wrapper.scrollTo(scrollState.x + shift, scrollState.y);\n            }\n            if (x < contentRect.left + shift) {\n                wrapper.scrollTo(scrollState.x - shift, scrollState.y);\n            }\n            if (y > contentRect.height + contentRect.top - shift) {\n                wrapper.scrollTo(scrollState.x, scrollState.y + shift);\n            }\n            if (y < contentRect.top + shift) {\n                wrapper.scrollTo(scrollState.x, scrollState.y - shift);\n            }\n            scrollTimer = setTimeout(() => {\n                checkScroll(event);\n            }, 100);\n        }\n    };\n    const startDrag = (event) => {\n        const { x, y } = getClientCoords(event);\n        if (pointerDown?.x === x && pointerDown?.y === y) {\n            return;\n        }\n        if (isDefined(capturedId)) {\n            mode = event.altKey ? \"copy\" : \"move\";\n            api.exec(\"start-drag\", {\n                start: capturedId,\n                mode,\n            });\n            draggableIds = api.getState().draggableIds;\n            setClone(event);\n            document.body.classList.add(\"wx-ondrag\");\n            if (\"touches\" in event) {\n                document.body.classList.add(\"wx-ondrag--touch\");\n            }\n        }\n    };\n    const setTarget = (event) => {\n        const { x, y } = getClientCoords(event);\n        const underElement = document.elementFromPoint(x, y);\n        const isSeparator = underElement && underElement.dataset.separator;\n        if (!isSeparator) {\n            target = underElement\n                ? locate(underElement, \"data-drag-list-id\")\n                : null;\n            targetId = target ? locateID(target, \"data-drag-list-id\") : null;\n            if (mode === \"move\" && api.getTask({ id: targetId })?.draggable) {\n                targetId = null;\n            }\n        }\n    };\n    const moveDragItem = (event) => {\n        dragCoords = getCurrentCoords(event);\n        moveClone(dragCoords);\n        setTarget(event);\n        dropPosition = isDefined(targetId)\n            ? getVerticalPositionType(event, target)\n            : null;\n        if (targetId) {\n            setDroppedLine(dropPosition);\n        }\n        else {\n            removeDroppedLine();\n        }\n        api.exec(\"drag\", {\n            start: capturedId,\n            source: draggableIds,\n            target: targetId,\n            dropPosition,\n        });\n    };\n    const setDroppedLine = (position) => {\n        if (!portal.contains(line)) {\n            line = document.createElement(\"div\");\n            line.classList.add(\"wx-todo_dropped-line\");\n            portal.appendChild(line);\n        }\n        const tRect = target.getBoundingClientRect();\n        const left = tRect.left + window.pageXOffset;\n        const top = tRect.top + window.pageYOffset;\n        if (position === \"in\") {\n            line.style.opacity = \"0.5\";\n            line.style.width = tRect.width + \"px\";\n            line.style.height = tRect.height + \"px\";\n            line.style.left = left + \"px\";\n            line.style.top = top + \"px\";\n            return;\n        }\n        const styles = getComputedStyle(target);\n        const hasChildren = api.hasChildren({\n            id: targetId,\n            filtered,\n            hideCompleted,\n        });\n        const paddingLeft = hasChildren ? 16 : 40;\n        const level = parseInt(target.dataset.listLevel);\n        const levelOffset = level === 1 ? (position === \"top\" ? -6.5 : 6.5) : 0;\n        const heightOffset = position === \"top\" ? 0 : parseFloat(styles.height);\n        const widthOffset = parseFloat(styles.paddingLeft) - (level === 1 ? paddingLeft : 0);\n        const width = tRect.width - widthOffset;\n        const SEP_HEIGHT = 4;\n        const SEP_OFFSET = 2;\n        line.style.opacity = \"1\";\n        line.style.width = width + \"px\";\n        line.style.height = SEP_HEIGHT + \"px\";\n        let parenOffset = 0;\n        if (position === \"bottom\" && hasChildren) {\n            const pRect = target.parentElement.getBoundingClientRect();\n            if (level === 1) {\n                parenOffset =\n                    pRect.height -\n                        heightOffset -\n                        levelOffset -\n                        SEP_HEIGHT -\n                        SEP_OFFSET * 2;\n            }\n            else {\n                parenOffset = pRect.height - heightOffset;\n            }\n        }\n        line.style.top =\n            top + heightOffset + levelOffset + parenOffset - SEP_OFFSET + \"px\";\n        line.style.left = left + widthOffset + \"px\";\n    };\n    const removeDroppedLine = () => {\n        if (portal.contains(line)) {\n            portal.removeChild(line);\n        }\n    };\n    const moveClone = ({ x, y }) => {\n        clone.style.left = x + \"px\";\n        clone.style.top = y + \"px\";\n    };\n    const setClone = (event) => {\n        const hasChildren = api.hasChildren({\n            id: targetId,\n            filtered,\n            hideCompleted,\n        });\n        const paddingLeft = hasChildren ? 16 : 40;\n        if (draggableIds.length > 1) {\n            portal.style.setProperty(\"--wx-todo-dragged-tasks-count\", JSON.stringify(draggableIds.length < 99 ? `${draggableIds.length}` : \"+99\"));\n        }\n        dragCoords = getCurrentCoords(event);\n        portal.appendChild(clone);\n        clone.classList.add(\"wx-todo__dragged-task\");\n        clone.style.paddingLeft = paddingLeft + \"px\";\n        clone.style.left = dragCoords.x + \"px\";\n        clone.style.top = dragCoords.y + \"px\";\n    };\n    const removeClone = () => {\n        if (portal.contains(clone)) {\n            portal.removeChild(clone);\n            portal.style.removeProperty(\"--wx-todo-dragged-tasks-count\");\n        }\n    };\n    const downHandler = (event) => {\n        const { stateEditableItem, menu, stateDueDate } = api.getState();\n        const isCtrlMode = event.ctrlKey || event.metaKey;\n        const isShiftMode = event.shiftKey;\n        const isOpenEditor = isDefined(stateEditableItem);\n        if (isCtrlMode ||\n            isShiftMode ||\n            isOpenEditor ||\n            stateDueDate?.open ||\n            menu ||\n            (event.touches &&\n                event.touches.length > 1) ||\n            (\"button\" in event && event.button !== 0)) {\n            return;\n        }\n        portal = document.querySelector(\".wx-portal\");\n        wrapper = document.querySelector(`[data-todo-wrapper-id=\"${config.id}\"]`);\n        captured = locate(event.target, \"data-drag-list-id\");\n        capturedId = locateID(event.target, \"data-drag-list-id\");\n        handlers =\n            \"touches\" in event\n                ? { up: \"touchend\", move: \"touchmove\" }\n                : { up: \"pointerup\", move: \"mousemove\" };\n        if (captured && wrapper) {\n            filtered = !!api.getState().filter?.match;\n            hideCompleted = api.getState().taskShape?.completed?.taskHide;\n            const rect = captured.getBoundingClientRect();\n            const styles = getComputedStyle(captured);\n            const hasChildren = api.hasChildren({\n                id: capturedId,\n                filtered,\n                hideCompleted,\n            });\n            const paddingLeft = hasChildren ? 16 : 40;\n            const leftOffset = parseInt(styles.paddingLeft) - paddingLeft;\n            clone = captured.cloneNode(true);\n            clone.style.width = rect.width - leftOffset + \"px\";\n            clone.style.height = rect.height + \"px\";\n            const { x, y } = (pointerDown = getClientCoords(event));\n            pointerDown.shiftX = x - rect.x - leftOffset;\n            pointerDown.shiftY = y - rect.y;\n            if (\"touches\" in event) {\n                touch.callback = () => {\n                    document.addEventListener(handlers.move, moveHandler);\n                };\n                touchStart();\n            }\n            else {\n                document.addEventListener(handlers.move, moveHandler);\n            }\n        }\n        document.addEventListener(handlers.up, upHandler);\n    };\n    const moveHandler = (event) => {\n        if (!pointerDown) {\n            return;\n        }\n        if (!(\"touches\" in event)) {\n            event.preventDefault();\n        }\n        event.stopPropagation();\n        checkScroll(event);\n        if (!draggableIds?.length) {\n            startDrag(event);\n        }\n        else {\n            moveDragItem(event);\n        }\n    };\n    const upHandler = () => {\n        document.removeEventListener(handlers.move, moveHandler);\n        document.removeEventListener(handlers.up, upHandler);\n        touchEnd();\n        removeClone();\n        removeDroppedLine();\n        if (scrollTimer) {\n            clearTimeout(scrollTimer);\n        }\n        if (draggableIds.length) {\n            draggableIds = [];\n            api.exec(\"end-drag\", {\n                target: targetId,\n                dropPosition,\n                mode,\n            });\n        }\n        document.body.classList.remove(\"wx-ondrag\");\n        document.body.classList.remove(\"wx-ondrag--touch\");\n        portal =\n            captured =\n                clone =\n                    line =\n                        target =\n                            wrapper =\n                                dragCoords =\n                                    targetId =\n                                        capturedId =\n                                            pointerDown =\n                                                null;\n    };\n    const getCurrentCoords = (event) => {\n        const { x, y } = getClientCoords(event);\n        return {\n            x: x - pointerDown.shiftX,\n            y: y - pointerDown.shiftY,\n        };\n    };\n    node.addEventListener(\"mousedown\", downHandler);\n    node.addEventListener(\"touchstart\", downHandler);\n    return {\n        destroy() {\n            node.removeEventListener(\"mousedown\", downHandler);\n            node.removeEventListener(\"touchstart\", downHandler);\n        },\n    };\n}\nfunction getVerticalPositionType(event, target) {\n    if (!target)\n        return null;\n    const { top, height } = target.getBoundingClientRect();\n    const offset = (getClientCoords(event).y - top) / height;\n    if (offset <= 0.25)\n        return \"top\";\n    if (offset >= 0.75)\n        return \"bottom\";\n    return \"in\";\n}\nfunction getClientCoords(event) {\n    const coords = { x: 0, y: 0 };\n    if (\"touches\" in event) {\n        coords.x = event.touches[0].clientX;\n        coords.y = event.touches[0].clientY;\n    }\n    else {\n        coords.x = event.clientX;\n        coords.y = event.clientY;\n    }\n    return coords;\n}\n//# sourceMappingURL=dnd.js.map","import { locateID } from \"@xbs/lib-dom\";\nimport { isDefined } from \"../../helpers\";\nexport function taskMenu(node, config) {\n    if (config.readonly)\n        return;\n    const click = (event) => {\n        const element = event.target;\n        const isContextMenu = event.button === 2;\n        if (element || isContextMenu) {\n            const id = locateID(element, \"data-list-id\");\n            const menuId = locateID(element, \"data-menu-id\");\n            handleMenuAction({\n                id,\n                menuId,\n                api: config.api,\n                context: isContextMenu,\n            });\n        }\n    };\n    node.addEventListener(\"click\", click);\n    node.addEventListener(\"contextmenu\", click);\n    return {\n        destroy() {\n            node.removeEventListener(\"click\", click);\n            node.removeEventListener(\"contextmenu\", click);\n        },\n    };\n}\nfunction handleMenuAction({ api, id, menuId, context }) {\n    const { menu } = api.getState();\n    const source = api.getSelection({ sorted: true });\n    if (menu && menu.type === \"task\") {\n        api.exec(\"close-menu\", {\n            ...menu,\n        });\n    }\n    if (context || isDefined(menuId)) {\n        api.exec(\"open-menu\", {\n            id,\n            type: \"task\",\n            source,\n        });\n    }\n}\n//# sourceMappingURL=taskMenu.js.map","import { locateID, locate } from \"@xbs/lib-dom\";\nimport { isSameId } from \"../../helpers\";\nexport function userMenu(node, config) {\n    const handleUp = (event) => {\n        const node = locate(event, \"data-user-menu-id\");\n        const { menu, draggableIds } = config.api.getState();\n        if (node && !draggableIds.length) {\n            const userMenuId = locateID(event, \"data-user-menu-id\");\n            if (!menu || (menu && !isSameId(menu.id, userMenuId))) {\n                const rect = node.getBoundingClientRect();\n                menu && config.api.exec(\"close-menu\", { ...menu });\n                config.api.exec(\"open-menu\", {\n                    id: userMenuId,\n                    type: \"user\",\n                    coords: {\n                        x: rect.left,\n                        y: rect.bottom,\n                    },\n                });\n            }\n            event.stopPropagation();\n        }\n        else if (menu && menu.type === \"user\") {\n            config.api.exec(\"close-menu\", { ...menu });\n        }\n    };\n    node.addEventListener(\"pointerover\", handleUp);\n    return {\n        destroy() {\n            node.removeEventListener(\"pointerover\", handleUp);\n        },\n    };\n}\n//# sourceMappingURL=userMenu.js.map","import { locateID } from \"@xbs/lib-dom\";\nexport function tagFilter(node, config) {\n    const handleClick = (event) => {\n        const tag = locateID(event.target, \"data-tag\");\n        if (tag) {\n            config.api.exec(\"set-filter\", {\n                match: tag,\n                highlight: true,\n                strict: true,\n            });\n            config.api.exec(\"set-state-search\", {\n                value: tag,\n                open: true,\n                focus: false,\n                dropdown: {\n                    open: false,\n                },\n            });\n            event.stopPropagation();\n        }\n    };\n    node.addEventListener(\"click\", handleClick);\n    return {\n        destroy() {\n            node.removeEventListener(\"click\", handleClick);\n        },\n    };\n}\n//# sourceMappingURL=tagFilter.js.map","import { locateID } from \"@xbs/lib-dom\";\nimport { isDefined, isSameId } from \"../helpers\";\nexport function listEditor(node, config) {\n    if (config.readonly)\n        return;\n    const store = config.api;\n    const handleClick = (event) => {\n        const id = locateID(event.target, \"data-list-editor-id\");\n        const date = locateID(event.target, \"data-date\");\n        const { stateEditableItem } = store.getState();\n        if (date && !isDefined(stateEditableItem)) {\n            store.exec(\"open-inline-editor\", {\n                id,\n                type: \"task\",\n                targetDate: date,\n            });\n        }\n        if (stateEditableItem?.type === \"task\" &&\n            !isSameId(stateEditableItem?.id, id) &&\n            !stateEditableItem?.dropdown) {\n            store.exec(\"close-inline-editor\", {\n                id: stateEditableItem.id,\n                save: true,\n            });\n        }\n    };\n    const handleDblClick = (event) => {\n        const id = locateID(event.target, \"data-list-editor-id\");\n        const { stateEditableItem: stateEditableItem } = store.getState();\n        if (!isSameId(stateEditableItem?.id, id)) {\n            store.exec(\"open-inline-editor\", {\n                id,\n                type: \"task\",\n            });\n        }\n    };\n    node.addEventListener(\"click\", handleClick);\n    node.addEventListener(\"dblclick\", handleDblClick);\n    return {\n        destroy() {\n            node.removeEventListener(\"click\", handleClick);\n            node.removeEventListener(\"dblclick\", handleDblClick);\n        },\n    };\n}\n//# sourceMappingURL=listEditor.js.map","import { locateID } from \"@xbs/lib-dom\";\nimport { isSameId } from \"../helpers\";\nexport function keyNavigation(node, config) {\n    let activeWidgetId;\n    const handleFocus = (event) => {\n        activeWidgetId = locateID(event, \"data-todo-id\");\n    };\n    const handleKeyDown = (event) => {\n        if (isSameId(config.widgetId, activeWidgetId)) {\n            config.api.exec(\"keypress-on-todo\", {\n                code: getKeyCode(event),\n                event,\n            });\n        }\n    };\n    node.addEventListener(\"mousedown\", handleFocus);\n    node.addEventListener(\"focusin\", handleFocus);\n    node.addEventListener(\"keydown\", handleKeyDown);\n    return {\n        destroy() {\n            node.removeEventListener(\"mousedown\", handleFocus);\n            node.removeEventListener(\"focusin\", handleFocus);\n            node.removeEventListener(\"keydown\", handleKeyDown);\n        },\n    };\n}\nfunction getKeyCode(event) {\n    const keyCode = [];\n    let code = event?.code.toLowerCase();\n    const key = event?.key.toLowerCase();\n    const isKey = code.startsWith(\"key\");\n    const isDigit = code.startsWith(\"digit\");\n    const isNumpad = code.startsWith(\"numpad\");\n    const modKeys = [\"control\", \"alt\", \"shift\"];\n    if (event.ctrlKey || event.metaKey)\n        keyCode.push(\"ctrl\");\n    if (event.shiftKey)\n        keyCode.push(\"shift\");\n    if (event.altKey)\n        keyCode.push(\"alt\");\n    if (isKey)\n        code = code.replace(\"key\", \"\");\n    if (isDigit)\n        code = code.replace(\"digit\", \"\");\n    if (isNumpad)\n        code = code.replace(\"numpad\", \"\");\n    if (!modKeys.includes(key)) {\n        keyCode.push(code);\n    }\n    return keyCode.join(\"+\");\n}\n//# sourceMappingURL=keyNavigation.js.map","export function walkData(data, cb) {\n\tdata.forEach(a => {\n\t\tcb(a);\n\t\tif (a.data && a.data.length)\n\t\t\twalkData(a.data, cb)\n\t});\n}\n\nexport function filterMenu(data, cb) {\n\tconst out = [];\n\tdata.forEach(a => {\n\t\tif (a.data) {\n\t\t\tconst sub = filterMenu(a.data, cb);\n\t\t\tif (sub.length)\n\t\t\t\tout.push({ ...a, data: sub });\n\t\t} else {\n\t\t\tif (cb(a)) out.push(a);\n\t\t}\n\t});\n\n\treturn out;\n}\n\nlet uid = 1;\nexport function prepareMenuData(data) {\n\twalkData(data, a => {\n\t\ta.id = a.id || (uid++);\n\t})\n\n\treturn data;\n}\n\nconst handlers = {};\nexport function getItemHandler(type){\n\treturn handlers[type];\n}\nexport function registerMenuItem(type, handler){\n\thandlers[type] = handler\t\n}","<script>\n\timport { getItemHandler } from \"../helpers\";\n\n\texport let item;\n\texport let showSub = false;\n\texport let activeItem = null;\n\n\tfunction onHover() {\n\t\tshowSub = item.data ? item.id : false;\n\t\tactiveItem = this;\n\t}\n</script>\n\n<div\n\tclass=\"item {item.css || ''}\"\n\tdata-id={item.id}\n\ton:mouseenter={onHover}\n\ton:click>\n\t{#if item.icon}<i class=\"icon {item.icon}\" />{/if}\n\t{#if item.type}\n\t\t<svelte:component this={getItemHandler(item.type)} {item} />\n\t{:else}\n\t\t<span class=\"value\"> {item.text} </span>\n\t{/if}\n\t{#if item.subtext}\n\t\t<span class=\"subtext\">{item.subtext}</span>\n\t{/if}\n\t{#if item.data}<i class=\"sub-icon wxi-angle-right\" />{/if}\n</div>\n\n<style>\n\t.item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tbox-sizing: border-box;\n\t\theight: 36px;\n\t\tline-height: 36px;\n\t\tpadding: 2px 12px;\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-weight: var(--wx-font-weight);\n\t\tfont-size: var(--wx-font-size);\n\t\tbackground-color: var(--wx-background);\n\t\tcursor: pointer;\n\t}\n\n\t.item:hover {\n\t\tbackground: var(--wx-background-alt);\n\t}\n\n\t.item:first-child {\n\t\tborder-top-left-radius: inherit;\n\t\tborder-top-right-radius: inherit;\n\t}\n\n\t.item:last-child {\n\t\tborder-bottom-left-radius: inherit;\n\t\tborder-bottom-right-radius: inherit;\n\t}\n\n\t.value {\n\t\tflex-grow: 1;\n\t\tcolor: var(--wx-color-font);\n\t}\n\t.icon,\n\t.sub-icon {\n\t\tvertical-align: middle;\n\t\theight: inherit;\n\t\tline-height: inherit;\n\t\tfont-size: var(--wx-icon-size);\n\t\tcolor: var(--wx-icon-color);\n\t}\n\n\t.icon {\n\t\tmargin-right: 5px;\n\t}\n\n\t.subtext{\n\t\tcolor: var(--wx-color-font-disabled);\n\t\tmargin-left: 20px;\n\t}\n</style>\n","<script>\n\timport { clickOutside } from \"@xbs/lib-core-dom\";\n\timport { afterUpdate, createEventDispatcher } from \"svelte\";\n\n\timport MenuItem from \"./MenuItem.svelte\";\n\timport { prepareMenuData } from \"../helpers\";\n\n\tconst dispatch = createEventDispatcher();\n\n\texport let options;\n\t$: prepareMenuData(options);\n\n\texport let level = 1;\n\n\texport let left = 0;\n\texport let top = 0;\n\texport let at = \"bottom\";\n\texport let parent = null;\n\texport let relativeTo = document.body;\n\n\tlet width, pos;\n\tlet atBottom, atLeft, atFit;\n\t$: atBottom = at.indexOf(\"bottom\") !== -1;\n\t$: atLeft = at.indexOf(\"left\") !== -1;\n\t$: atFit = at.indexOf(\"fit\") !== -1;\n\n\tfunction positionToParent(parent) {\n\t\tif (!parent || at === \"point\") return;\n\n\t\tpos = parent.getBoundingClientRect();\n\t\tconst off = relativeTo.getBoundingClientRect();\n\t\t\n\t\tleft = (at === \"right\" ? (pos.right+(level?0:1)) : pos.left) - off.left;\n\t\ttop = (atBottom ? (pos.bottom+1) : pos.top) - off.top;\n\t\twidth = atFit ? (pos.width+\"px\") : \"auto\";\n\n\t\tleft += relativeTo.scrollLeft;\n\t\ttop += relativeTo.scrollTop;\n\t}\n\t$: positionToParent(parent)\n\n\n\tlet showSub;\n\tlet activeItem;\n\tlet self;\n\tfunction fitToBody() {\n\t\t// [CYPRESS] [SVELTE]\n\t\t// https://tracker.webix.io/issue/SVAR-727#focus=streamItem-4-7728.0-0\n\t\t// https://github.com/sveltejs/svelte/issues/7476\n\t\tif (!self) return;\n\n\t\tconst bodyRect = document.body.getBoundingClientRect();\n\t\tconst menuRect = self.getBoundingClientRect();\n\n\t\tlet fixLeft = atLeft;\n\t/*\n      [FIXME]\n      we can use a bit more clever logic here\n      when \"bottom\" strategy fails, use \"top\"\n      and only when both fails, then \"fit over\" the action area\n\n      similar to right/left\n      it must be appliend only for \"at\" axis\n      second axis, will always use \"fit over\" \n    */\n\t\tconst dy = menuRect.bottom - bodyRect.bottom;\n\t\tif (dy > 0) top -= dy;\n\n\t\tconst dxR = menuRect.right - bodyRect.right;\n\t\tif (dxR > 0) {\n\t\t\tif (at !== \"right\") {\n\t\t\t\tleft -= dxR;\n\t\t\t} else {\n\t\t\t\tfixLeft = true;\n\t\t\t}\n\t\t}\n\n\t\t// correct left position\n\t\t// can't do it earlier, because width of menu is unknown\n\t\tif (fixLeft)\n\t\t\tleft = (level > 1 ? 0 : (atBottom ? pos.right : pos.left)) - menuRect.width;\n\t\t\n\t\tconst dxL = left - bodyRect.left;\n\t\tif (dxL < 0 && level < 2){ // [FIXME] left submenu is impossible\n\t\t\tif (at !== \"left\") {\n\t\t\t\tleft -= dxL;\n\t\t\t} else {\n\t\t\t\tleft = level > 1 ? pos.width : pos.right;\n\t\t\t}\n\t\t}\n\t}\n\n\tafterUpdate(fitToBody);\n\n\tfunction onLeave() {\n\t\tshowSub = false;\n\t}\n\tfunction cancel() {\n\t\tdispatch(\"click\", { action: null });\n\t}\n\n</script>\n\n<div\n\tuse:clickOutside={cancel}\n\tbind:this={self}\n\tclass=\"menu {level > 1 ? 'sub' : ''}\"\n\tstyle=\"top:{top}px;left:{left}px;width:{width}\"\n\tdata-level={level}\n\ton:mouseleave={onLeave}>\n\t{#each options as item (item.id)}\n\t\t{#if item.type === \"separator\"}\n\t\t\t<div class=\"separator\" />\n\t\t{:else}\n\t\t\t<MenuItem\n\t\t\t\t{item}\n\t\t\t\tbind:showSub\n\t\t\t\tbind:activeItem\n\t\t\t\ton:click={ev => {\n\t\t\t\t\tif (!item.data && !ev.defaultPrevented) dispatch('click', { action:item });\n\t\t\t\t}} />\n\t\t{/if}\n\t\t{#if item.data && showSub === item.id}\n\t\t\t<svelte:self\n\t\t\t\trelativeTo={self}\n\t\t\t\toptions={item.data}\n\t\t\t\tlevel={level + 1}\n\t\t\t\tat=\"right\"\n\t\t\t\tparent={activeItem}\n\t\t\t\ton:click />\n\t\t{/if}\n\t{/each}\n</div>\n\n<style>\n\t.menu {\n\t\tmin-width: 125px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tposition: absolute;\n\t\tz-index: 20;\n\t\toutline: var(--wx-border-medium);\n\t\tborder-radius: var(--wx-border-radius);\n\t\tbackground-color: var(--wx-background);\n\t\tbox-shadow: var(--wx-shadow-light);\n\t}\n\t.sub {\n\t\tz-index: 30;\n\t}\n\t.separator {\n\t\twidth: 100%;\n\t\tborder-top: var(--wx-border-medium);\n\t}\n\n</style>","<script>\n\texport let name;\n\texport let size = 20;\n\texport let clickable = false;\n\texport let disabled = false;\n\texport let css = \"\";\n\n</script>\n\n<i\n\ton:click\n\tclass=\"wx-todo_icon wxi wxi-{name} {css ? css : 'wx-todo_icon--default'}\"\n\tclass:wx-todo_icon--clickable={clickable}\n\tclass:wx-todo_icon--disabled={disabled}\n\tstyle=\"font-size:{size}px; height:{size}px; width:{size}px\" />\n\n<style>\n\t.wx-todo_icon {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t.wx-todo_icon--default {\n\t\tcolor: var(--wx-icon-color);\n\t}\n\t.wx-todo_icon--clickable {\n\t\tcursor: pointer;\n\t}\n\t.wx-todo_icon--disabled {\n\t\tcursor: default;\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\n</style>\n","<script>\n\timport Icon from \"../../../library/Icon.svelte\";\n\n\texport let item;\n\n\t$: label = item.label;\n\t$: hotkey = item.hotkey;\n\t$: icon = item.icon;\n\t$: data = item.data;\n\n</script>\n\n<div class=\"wx-todo_item\">\n\t{#if icon}\n\t\t<Icon name={icon} />\n\t{/if}\n\t<div class=\"wx-todo_item__label\">{label}</div>\n\t{#if hotkey}\n\t\t<div class=\"wx-todo_item__hotkey\">{hotkey}</div>\n\t{/if}\n\t{#if data?.length}\n\t\t<div class=\"wx-todo_item__sub-icon\">\n\t\t\t<Icon name={'menu-right'} />\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.wx-todo_item {\n\t\tmin-width: 200px;\n\t\tmax-width: 100%;\n\t\twidth: 100%;\n\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\n\t\tpadding: 8px;\n\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tline-height: var(--wx-line-height);\n\n\t\tcolor: var(--wx-color-font);\n\t}\n\t.wx-todo_item:hover {\n\t\tbackground: var(--wx-background-selected);\n\t}\n\t.wx-todo_item__label {\n\t\tpadding: 0 8px;\n\t}\n\t.wx-todo_item__hotkey {\n\t\tmargin-left: auto;\n\t\tcolor: var(--wx-color-secondary-light);\n\t}\n\t.wx-todo_item__sub-icon {\n\t\tmargin-left: auto;\n\t}\n\n</style>\n","<script>\n\texport let value = \"\";\n\texport let avatar = \"\";\n\texport let color = \"#0AB169\";\n\n\tconst getStyle = (color, avatar) => {\n\t\tlet style = `background-color: ${color};`;\n\t\tif (avatar) style += `background-image: url(${avatar});`;\n\t\treturn style;\n\t};\n\n</script>\n\n<div class=\"wx-todo_avatar\" style={getStyle(color, avatar)}>{value}</div>\n\n<style>\n\t.wx-todo_avatar {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\n\t\theight: calc(var(--wx-base-size) + 8px);\n\t\twidth: calc(var(--wx-base-size) + 8px);\n\t\tborder: calc(var(--wx-border-width) * 2) solid var(--wx-background);\n\t\tborder-radius: 50%;\n\n\t\tcolor: var(--wx-color-secondary-font);\n\t\tfont-size: var(--wx-font-size-s);\n\t\tline-height: var(--wx-line-height);\n\t\tfont-weight: var(--wx-font-weight-medium);\n\t\tfont-style: normal;\n\n\t\tbackground-position: center;\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-size: cover;\n\t}\n\n</style>\n","<script>\n\timport Avatar from \"../../../library/Avatar.svelte\";\n\timport Icon from \"../../../library/Icon.svelte\";\n\n\texport let item;\n\n\t$: label = item.label;\n\t$: icon = item.icon;\n\t$: color = item.color;\n\t$: avatar = item.avatar;\n\t$: checked = item.checked;\n\t$: clickable = item.clickable;\n\n</script>\n\n<div\n\tclass=\"wx-todo_user-item\"\n\tclass:wx-todo_user-item--checked={checked}\n\tclass:wx-todo_user-item--clicable={clickable}>\n\t{#if icon}\n\t\t<Icon name={icon} />\n\t{/if}\n\t<div class=\"wx-todo_user-item__avatar\">\n\t\t<Avatar {avatar} {color} />\n\t</div>\n\t<div class=\"wx-todo_user-item__label\">{label}</div>\n</div>\n\n<style>\n\t.wx-todo_user-item {\n\t\tcursor: default;\n\n\t\twidth: 100%;\n\t\tmin-width: 200px;\n\t\tmax-height: 36px;\n\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\n\t\tpadding: 8px;\n\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tline-height: var(--wx-line-height);\n\n\t\tcolor: var(--wx-color-font);\n\t}\n\t.wx-todo_user-item:hover,\n\t.wx-todo_user-item--checked {\n\t\tcursor: pointer;\n\t\tbackground: var(--wx-background-selected);\n\t}\n\t.wx-todo_user-item__label {\n\t\tpadding: 0 8px;\n\t}\n\t.wx-todo_user-item__avatar {\n\t\tpadding-left: 6px;\n\t}\n\n</style>\n","<script>\n\timport { Calendar } from \"@xbs/svelte-wx\";\n\n\tconst prevent = event => event.preventDefault();\n\n\texport let item;\n\n\t$: store = item.store;\n\t$: value = item.value;\n\n\tconst cancel = () => {\n\t\tconst { menu } = store.getState();\n\n\t\tconst selected = store.getSelection().map(id => ({\n\t\t\t...store.getTask(id),\n\t\t\tdue_date: value || null,\n\t\t}));\n\n\t\tstore.eachSelected((id, index) => {\n\t\t\tconst task = store.getTask(id);\n\t\t\tstore.in.exec(\"update-task\", {\n\t\t\t\tid,\n\t\t\t\ttask: {\n\t\t\t\t\t...task,\n\t\t\t\t\tdue_date: value || null,\n\t\t\t\t},\n\t\t\t\tskipProvider: !!index,\n\t\t\t\tbatch: !index ? selected.slice(1) : [],\n\t\t\t});\n\t\t});\n\n\t\tstore.in.exec(\"close-menu\", { ...menu });\n\t};\n\n</script>\n\n<div class=\"wx-todo_date-item\" on:click={prevent}>\n\t<Calendar bind:value {cancel} />\n</div>\n\n<style>\n\t.wx-todo_date-item {\n\t\tmin-width: 200px;\n\t\tmax-width: 100%;\n\t\twidth: 100%;\n\t}\n\n</style>\n","<script>\n\timport Icon from \"../../../library/Icon.svelte\";\n\n\texport let item;\n\n\t$: label = item.label;\n\t$: color = item.color;\n\t$: icon = item.icon;\n\t$: hotkey = item.hotkey;\n\n</script>\n\n<div class=\"wx-todo_item\">\n\t{#if icon}\n\t\t<Icon name={icon} />\n\t{/if}\n\t<div\n\t\tclass=\"wx-todo_item__priority-icon\"\n\t\tstyle=\"background-color:{color};\" />\n\t<div class=\"wx-todo_item__label\">{label}</div>\n\t{#if hotkey}\n\t\t<div class=\"wx-todo_item__hotkey\">{hotkey}</div>\n\t{/if}\n</div>\n\n<style>\n\t.wx-todo_item {\n\t\tmin-width: 200px;\n\t\tmax-width: 100%;\n\t\twidth: 100%;\n\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\n\t\tpadding: 8px;\n\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tline-height: var(--wx-line-height);\n\n\t\tcolor: var(--wx-color-font);\n\t}\n\t.wx-todo_item:hover {\n\t\tbackground: var(--wx-background-selected);\n\t}\n\t.wx-todo_item__label {\n\t\tpadding: 0 8px;\n\t}\n\t.wx-todo_item__hotkey {\n\t\tmargin-left: auto;\n\t\tcolor: var(--wx-color-secondary-light);\n\t}\n\t.wx-todo_item__priority-icon {\n\t\theight: 12px;\n\t\twidth: 12px;\n\t\tborder-radius: 50%;\n\t\tmargin-left: 6px;\n\t}\n\n</style>\n","<script>\n\timport { afterUpdate } from \"svelte\";\n\timport { Menu, registerMenuItem } from \"@xbs/svelte-menu\";\n\timport { Portal } from \"@xbs/svelte-wx\";\n\n\timport Item from \"./Items/Item.svelte\";\n\timport UserItem from \"./Items/UserItem.svelte\";\n\timport DatePicker from \"./Items/DatePicker.svelte\";\n\timport PriorityItem from \"./Items/PriorityItem.svelte\";\n\n\tregisterMenuItem(\"item\", Item);\n\tregisterMenuItem(\"user\", UserItem);\n\tregisterMenuItem(\"datepicker\", DatePicker);\n\tregisterMenuItem(\"priority\", PriorityItem);\n\n\texport let options;\n\texport let parent;\n\texport let left = 0;\n\texport let top = 0;\n\texport let offsetTop = 5;\n\texport let offsetLeft = 5;\n\n\tlet self = null;\n\n\tfunction positionToParent() {\n\t\tif (!parent) return;\n\n\t\tconst menu = self.children[0];\n\n\t\tconst parentRect = parent.getBoundingClientRect();\n\t\tconst menuRect = menu.getBoundingClientRect();\n\n\t\tconst scrollOffsetY = window.pageYOffset;\n\t\tconst scrollOffsetX = window.pageXOffset;\n\n\t\t// always position left-bottom\n\t\tleft = parentRect.right - menuRect.width - offsetLeft + scrollOffsetX;\n\t\ttop = parentRect.bottom + offsetTop + scrollOffsetY;\n\t}\n\n\tafterUpdate(positionToParent);\n\n</script>\n\n<Portal theme=\"material\">\n\t<div class=\"wx-menu\" bind:this={self}>\n\t\t<Menu {options} {left} {top} on:click />\n\t</div>\n</Portal>\n\n<style>\n\t:global(.wx-portal .menu) {\n\t\tbackground: var(--wx-background);\n\t\tbox-shadow: var(--wx-box-shadow);\n\t\tborder-radius: var(--wx-border-radius);\n\t}\n\t:global(.wx-portal .menu .separator) {\n\t\tborder-top: var(--wx-border);\n\t}\n\t:global(.wx-portal .menu .item) {\n\t\theight: max-content;\n\t\twidth: max-content;\n\t\tmin-width: 100%;\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t}\n\t:global(.wx-portal .menu .item):hover {\n\t\tbackground: inherit;\n\t}\n\t:global(.wx-portal .menu .icon),\n\t:global(.wx-portal .menu .sub-icon) {\n\t\tdisplay: none;\n\t}\n\n</style>\n","<script>\n\timport Icon from \"./Icon.svelte\";\n\timport { uid } from \"@xbs/lib-todo\";\n\n\texport let disabled = false;\n\texport let checked = false;\n\texport let id = uid().toString();\n\n</script>\n\n<label\n\tfor={id}\n\tclass=\"wx-todo_checkbox wx-todo_checkbox__label\"\n\tclass:wx-todo_checkbox--disabled={disabled}>\n\t<input\n\t\ton:change|stopPropagation\n\t\t{id}\n\t\t{disabled}\n\t\ttype=\"checkbox\"\n\t\tclass=\"wx-todo_checkbox__input\"\n\t\tbind:checked />\n\t<span\n\t\tclass=\"wx-todo_checkbox__icon\"\n\t\tclass:wx-todo_checkbox--checked={checked}>\n\t\t{#if checked}\n\t\t\t<Icon name=\"check\" size={16} />\n\t\t{/if}\n\t</span>\n</label>\n\n<style>\n\t.wx-todo_checkbox__label {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\n\t\tcursor: pointer;\n\t\tposition: relative;\n\n\t\twidth: var(--wx-checkbox-size);\n\t\theight: var(--wx-checkbox-size);\n\t}\n\t.wx-todo_checkbox__icon {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\n\t\twidth: var(--wx-checkbox-size);\n\t\theight: var(--wx-checkbox-size);\n\n\t\tborder-radius: 50%;\n\t\tborder: var(--wx-checkbox-border-size) solid\n\t\t\tvar(--wx-checkbox-color-unchecked);\n\t}\n\t.wx-todo_checkbox__input {\n\t\tappearance: none;\n\t\tposition: absolute;\n\t\twidth: 0;\n\t\theight: 0;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\topacity: 0;\n\t}\n\t.wx-todo_checkbox--checked {\n\t\tborder: var(--wx-checkbox-border-size) solid\n\t\t\tvar(--wx-checkbox-color-checked);\n\t\tbackground: var(--wx-checkbox-color-checked);\n\t}\n\t.wx-todo_checkbox--checked :global(.wxi) {\n\t\tcolor: var(--wx-background);\n\t}\n\t.wx-todo_checkbox--disabled {\n\t\tcursor: default;\n\t\topacity: 0.7;\n\t}\n\n</style>\n","<script>\n\texport let width = 20;\n\texport let height = 20;\n\texport let circle = false;\n\n</script>\n\n<button\n\ton:click\n\tclass=\"wx-todo_button\"\n\tclass:wx-todo_button--circle={circle}\n\tstyle=\"width:{typeof width === 'number' ? `${width}px` : width};\n\t\theight:{typeof height === 'number' ? `${height}px` : height}\">\n\t<slot />\n</button>\n\n<style>\n\t.wx-todo_button {\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\n\t\tbackground: inherit;\n\t\toutline: none;\n\t\tborder: none;\n\t\tpadding: 0;\n\t}\n\t.wx-todo_button--circle {\n\t\tborder-radius: 50%;\n\t}\n\n</style>\n","<script>\n\timport { getTransformValue } from \"@xbs/lib-todo\";\n\n\texport let value = \"\";\n\texport let filter;\n\texport let completed = false;\n\n</script>\n\n<div\n\tclass=\"wx-todo_text\"\n\tclass:wx-todo_text--completed={completed}\n\ttabindex=\"0\">\n\t{@html getTransformValue(value, filter)}\n</div>\n\n<style>\n\t.wx-todo_text {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\toutline: none;\n\n\t\tword-wrap: normal;\n\t\tword-break: break-word;\n\t\twhite-space: pre-wrap;\n\t}\n\t.wx-todo_text--completed {\n\t\tcolor: var(--wx-color-font-disabled);\n\t\ttext-decoration: line-through var(--wx-color-font-disabled);\n\t}\n\t:global(.wx-todo_date),\n\t.wx-todo_text--completed :global(.wx-todo_date--current),\n\t.wx-todo_text--completed :global(.wx-todo_date--expired) {\n\t\tcolor: var(--wx-todo-date-color-regular);\n\t}\n\n</style>\n","<script>\n\timport { createEventDispatcher, afterUpdate } from \"svelte\";\n\timport { Portal } from \"@xbs/svelte-wx\";\n\n\texport let coords = { x: 0, y: 0 };\n\texport let wrapper = document.body;\n\n\tlet self = null;\n\n\tconst dispatch = createEventDispatcher();\n\n\tfunction fitToBody() {\n\t\tif (!self) return;\n\n\t\tconst wrapperRect = wrapper.getBoundingClientRect();\n\t\tconst popupRect = self.getBoundingClientRect();\n\n\t\tconst dy = popupRect.bottom - wrapperRect.bottom;\n\t\tif (dy > 0) coords.y -= dy;\n\n\t\tconst dx = popupRect.right - wrapperRect.right;\n\t\tif (dx > 0) coords.x -= dx;\n\t}\n\n\tfunction pointerDown(event) {\n\t\tif (!self.contains(event.target)) {\n\t\t\tdispatch(\"cancel\", {\n\t\t\t\tevent,\n\t\t\t});\n\t\t}\n\t}\n\n\tafterUpdate(fitToBody);\n\n</script>\n\n<svelte:window on:mousedown={pointerDown} />\n\n<Portal theme=\"material\">\n\t<div\n\t\tclass=\"wx-todo_popup\"\n\t\tstyle=\"left:{coords.x}px; top:{coords.y}px;\"\n\t\tbind:this={self}>\n\t\t<slot />\n\t</div>\n</Portal>\n\n<style>\n\t.wx-todo_popup {\n\t\tposition: absolute;\n\t\tz-index: 9999;\n\n\t\tbackground: var(--wx-background);\n\t\tbox-shadow: var(--wx-box-shadow);\n\t\tborder-radius: var(--wx-border-radius);\n\t}\n\n</style>\n","<script>\n\timport { createEventDispatcher, getContext } from \"svelte\";\n\timport { dateToString, getDateLocales, stringToDate } from \"@xbs/lib-todo\";\n\timport { Calendar } from \"@xbs/svelte-wx\";\n\timport Popup from \"./Popup.svelte\";\n\n\texport let coords;\n\texport let cancel = null;\n\texport let value = null;\n\texport let convert = true;\n\texport let dateFormat = \"%d %M %Y\";\n\n\tconst dispatch = createEventDispatcher();\n\tconst _ = getContext(\"wx-i18n\").getGroup(\"calendar\");\n\n\tvalue =\n\t\ttypeof value === \"string\"\n\t\t\t? stringToDate(value, dateFormat, true, getDateLocales(_))\n\t\t\t: value || null;\n\n\tconst close = () => {\n\t\tif (value) {\n\t\t\tdispatch(\"change\", {\n\t\t\t\tvalue: convert\n\t\t\t\t\t? dateToString(value, dateFormat, getDateLocales(_))\n\t\t\t\t\t: value,\n\t\t\t});\n\t\t} else {\n\t\t\tcancel && cancel();\n\t\t}\n\t};\n\n</script>\n\n<Popup {coords} on:cancel={close}>\n\t<Calendar cancel={close} bind:value />\n</Popup>\n","<script>\n\timport { createEventDispatcher } from \"svelte\";\n\timport { locateID } from \"@xbs/lib-dom\";\n\timport { isDefined, isSameId } from \"@xbs/lib-todo\";\n\n\texport let options = [];\n\n\tlet selected = null;\n\n\tconst dispatch = createEventDispatcher();\n\n\tconst click = event => {\n\t\tselected = locateID(event, \"data-list-id\");\n\t\tdispatch(\"click\", {\n\t\t\tid: selected,\n\t\t});\n\t};\n\n\tconst selection = event => {\n\t\tconst index = options.findIndex(i => isSameId(i.id, selected));\n\t\tswitch (event.code) {\n\t\t\tcase \"ArrowUp\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tselected = isDefined(selected)\n\t\t\t\t\t? options[index - 1]?.id\n\t\t\t\t\t: options.at(-1).id;\n\t\t\t\tbreak;\n\t\t\tcase \"ArrowDown\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tselected = isDefined(selected)\n\t\t\t\t\t? options[index + 1]?.id\n\t\t\t\t\t: options[0].id;\n\t\t\t\tbreak;\n\t\t\tcase \"Enter\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tdispatch(\"click\", { id: selected });\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n</script>\n\n<svelte:window on:keydown={selection} />\n\n<ul class=\"wx-todo_list\" on:click={click}>\n\t{#each options as item (item.id)}\n\t\t<li\n\t\t\tclass=\"wx-todo_list__item\"\n\t\t\tclass:wx-todo_list__item--selected={isSameId(item.id, selected)}\n\t\t\tdata-list-id={item.id}>\n\t\t\t<slot {item} />\n\t\t</li>\n\t{/each}\n</ul>\n\n<style>\n\t.wx-todo_list {\n\t\toverflow: auto;\n\t}\n\t.wx-todo_list,\n\t.wx-todo_list__item {\n\t\tlist-style: none;\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\t.wx-todo_list__item:hover,\n\t.wx-todo_list__item--selected {\n\t\tbackground: var(--wx-background-selected);\n\t}\n\n</style>\n","<script>\n\timport {\n\t\tsetCaretPosition,\n\t\tgetCaretPosition,\n\t\tgetCaretCoords,\n\t} from \"@xbs/lib-dom\";\n\timport {\n\t\tgetMatchChar,\n\t\tgetTagsOptions,\n\t\thasWhiteSpace,\n\t\thtmlEscapes,\n\t\tisDefined,\n\t} from \"@xbs/lib-todo\";\n\timport DatePicker from \"../../../library/DatePicker.svelte\";\n\timport Popup from \"../../../library/Popup.svelte\";\n\timport List from \"../../../library/List.svelte\";\n\timport Item from \"../../Menu/Items/Item.svelte\";\n\timport { createEventDispatcher, onMount } from \"svelte\";\n\n\texport let value = \"\";\n\texport let placeholder = \"\";\n\texport let tags = [];\n\texport let shape;\n\texport let editor;\n\n\t$: dropdown = editor?.dropdown;\n\n\tlet self = null;\n\tlet editableValue = null;\n\tlet openCarretPosition = null;\n\n\tconst dispatch = createEventDispatcher();\n\n\tonMount(openEditor);\n\n\tfunction openEditor() {\n\t\teditableValue = value;\n\n\t\tif (editor.targetDate) {\n\t\t\topenCarretPosition = editableValue.indexOf(editor.targetDate) - 2;\n\t\t\tsetCaretPosition(self, openCarretPosition);\n\t\t\topenDropdown(\"datepicker\");\n\t\t} else {\n\t\t\tsetCaretPosition(self);\n\t\t}\n\t}\n\n\tfunction openDropdown(type) {\n\t\tconst LINE_HEIGHT = 20;\n\t\tconst { x, y } = getCaretCoords();\n\n\t\tdispatch(\"editing\", {\n\t\t\tvalue: editableValue,\n\t\t\tdropdown: {\n\t\t\t\ttype,\n\t\t\t\tcoords: {\n\t\t\t\t\tx: x + window.scrollX,\n\t\t\t\t\ty: y + window.scrollY + LINE_HEIGHT,\n\t\t\t\t},\n\t\t\t\toptions: type === \"menu\" ? getTagsOptions(tags, \"\") : [],\n\t\t\t},\n\t\t\ttargetDate: editor.targetDate,\n\t\t});\n\t}\n\n\tfunction closeDropdown() {\n\t\tdispatch(\"editing\", {\n\t\t\tdropdown: null,\n\t\t\tvalue: editableValue,\n\t\t});\n\t}\n\n\tfunction closeDatePicker() {\n\t\tinnerValue(editableValue, \"\", \"!\");\n\t\tcloseDropdown();\n\t}\n\n\tfunction handleEditorEdit() {\n\t\teditableValue = self?.textContent || \"\";\n\n\t\tdispatch(\"editing\", {\n\t\t\tvalue: editableValue,\n\t\t\tdropdown: editor.dropdown,\n\t\t});\n\t}\n\n\tfunction handleKeyUp(event) {\n\t\tif (event.code === \"Enter\") return;\n\n\t\tconst code = { sharp: \"#\", note: \"!\" };\n\t\tconst caretPosition = getCaretPosition(self) - 1;\n\t\tconst char = editableValue[caretPosition];\n\t\tconst prevChar = editableValue[caretPosition - 1];\n\t\tconst space = isDefined(prevChar) ? hasWhiteSpace(prevChar) : true;\n\n\t\tconst isTag =\n\t\t\t(char === code[\"sharp\"] || event.key === code[\"sharp\"]) && space;\n\t\tconst isDatePicker =\n\t\t\t(char === code[\"note\"] || event.key === code[\"note\"]) && space;\n\n\t\tif (isTag) {\n\t\t\topenDropdown(\"menu\");\n\t\t\topenCarretPosition = caretPosition;\n\t\t} else if (isDatePicker) {\n\t\t\topenDropdown(\"datepicker\");\n\t\t\topenCarretPosition = caretPosition;\n\t\t} else if (editor.dropdown) {\n\t\t\tconst match = [];\n\t\t\tconst space = new RegExp(/^\\s*$/gm);\n\n\t\t\tfor (let index = caretPosition; index > 0; index--) {\n\t\t\t\tconst char = editableValue[index];\n\n\t\t\t\tif (char === code[\"sharp\"]) {\n\t\t\t\t\tconst string = match.reverse().join(\"\");\n\t\t\t\t\tconst options = getTagsOptions(tags, string);\n\n\t\t\t\t\tif (!options.length) break;\n\n\t\t\t\t\tdispatch(\"editing\", {\n\t\t\t\t\t\tdropdown: { ...editor.dropdown, options },\n\t\t\t\t\t\tvalue: editableValue,\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tmatch.push(char);\n\t\t\t\t}\n\t\t\t\tif (space.test(char)) break;\n\t\t\t}\n\t\t\tcloseDropdown();\n\t\t}\n\t}\n\n\tfunction innerValue(string, substring, char) {\n\t\tconst nextChar = string[openCarretPosition + 1];\n\t\tconst compareString = string;\n\n\t\tsubstring = char + substring;\n\n\t\tif (!nextChar) {\n\t\t\tstring += substring.substring(1);\n\t\t} else if (hasWhiteSpace(nextChar)) {\n\t\t\tconst matchChar = new RegExp(String.raw`${char}\\s`, \"gm\");\n\t\t\tstring = string.replace(matchChar, (match, offset) => {\n\t\t\t\tif (offset === openCarretPosition) {\n\t\t\t\t\treturn `${substring} `;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\t\t} else {\n\t\t\tif (char === \"!\") {\n\t\t\t\tconst matchChar = new RegExp(/!\\((.+?)\\)/gm);\n\t\t\t\tstring = string.replace(matchChar, (match, _, offset) => {\n\t\t\t\t\tif (offset === openCarretPosition) {\n\t\t\t\t\t\treturn substring;\n\t\t\t\t\t}\n\t\t\t\t\treturn match;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tstring = string.replace(getMatchChar(char), (match, offset) => {\n\t\t\t\t\tif (offset === openCarretPosition) {\n\t\t\t\t\t\treturn substring;\n\t\t\t\t\t}\n\t\t\t\t\treturn match;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\teditableValue = string;\n\t\tself.innerHTML = htmlEscapes(string);\n\n\t\tsetCaretPosition(\n\t\t\tself,\n\t\t\topenCarretPosition +\n\t\t\t\t(compareString !== editableValue ? substring.length : 1)\n\t\t);\n\t\tcloseDropdown();\n\t}\n\n\tfunction menuItemClick(event) {\n\t\tconst tag = event.detail.id;\n\t\tif (!isDefined(tag)) {\n\t\t\tcloseDropdown();\n\t\t\treturn;\n\t\t}\n\t\tinnerValue(editableValue, tag.substring(1), \"#\");\n\t}\n\n\tfunction changeDate(event) {\n\t\tconst date = event.detail.value;\n\t\tinnerValue(editableValue, `(${date})`, \"!\");\n\t}\n\n</script>\n\n<div\n\ton:input={handleEditorEdit}\n\ton:keyup={handleKeyUp}\n\tclass=\"wx-todo_editor\"\n\tcontenteditable=\"true\"\n\tdata-placeholder={placeholder}\n\ttabindex=\"0\"\n\tbind:this={self}>\n\t{value}\n</div>\n\n{#if dropdown}\n\t{#if dropdown.type === 'menu'}\n\t\t<Popup coords={dropdown.coords} on:cancel={closeDropdown}>\n\t\t\t<List options={dropdown.options} on:click={menuItemClick} let:item>\n\t\t\t\t<Item {item} />\n\t\t\t</List>\n\t\t</Popup>\n\t{/if}\n\t{#if dropdown.type === 'datepicker'}\n\t\t<DatePicker\n\t\t\tdateFormat={shape.date.format}\n\t\t\tcoords={dropdown.coords}\n\t\t\tcancel={closeDatePicker}\n\t\t\tvalue={editor.targetDate}\n\t\t\ton:change={changeDate} />\n\t{/if}\n{/if}\n\n<style>\n\t.wx-todo_editor {\n\t\tcursor: text;\n\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\toutline: none;\n\n\t\tword-wrap: normal;\n\t\tword-break: break-word;\n\t\twhite-space: pre-wrap;\n\t}\n\t[data-placeholder]:empty:before {\n\t\tcontent: attr(data-placeholder);\n\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tline-height: var(--wx-line-height);\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\n</style>\n","<script>\n\timport {\n\t\tdateToString,\n\t\tgetDateLocales,\n\t\tstringToDate,\n\t\tisLastDate,\n\t} from \"@xbs/lib-todo\";\n\timport { getContext, createEventDispatcher } from \"svelte\";\n\timport { Calendar, Dropdown } from \"@xbs/svelte-wx\";\n\timport Icon from \"../../../library/Icon.svelte\";\n\n\texport let id;\n\texport let format = \"%d %M %Y\";\n\texport let value = null;\n\texport let validate = true;\n\texport let completed = false;\n\texport let open = false;\n\texport let readonly = false;\n\n\tconst _ = getContext(\"wx-i18n\").getGroup(\"todo\");\n\tconst _c = getContext(\"wx-i18n\").getGroup(\"calendar\");\n\n\tconst dispatch = createEventDispatcher();\n\n\tlet css = \"wx-todo_date\";\n\n\t$: if (value) {\n\t\tif (typeof value === \"string\") {\n\t\t\tvalue = stringToDate(value, format, false, getDateLocales(_c));\n\t\t}\n\t\tif (!value?.getTime()) value = null;\n\n\t\tif (validate && value instanceof Date) {\n\t\t\tcss = isLastDate(value)\n\t\t\t\t? \"wx-todo_date--current\"\n\t\t\t\t: \"wx-todo_date--expired\";\n\t\t}\n\t}\n\n\tconst dropdownOpen = () => {\n\t\tif (readonly) return;\n\n\t\topen = true;\n\t\tdispatch(\"action\", {\n\t\t\taction: \"set-state-due-date\",\n\t\t\tdata: { open: true, id },\n\t\t});\n\t};\n\n\tconst dropdownClose = () => {\n\t\topen = false;\n\t\tdispatch(\"action\", {\n\t\t\taction: \"set-state-due-date\",\n\t\t\tdata: { open: false, id },\n\t\t});\n\t};\n\n\tconst cancel = () => {\n\t\tdispatch(\"action\", {\n\t\t\taction: \"update-task\",\n\t\t\tdata: {\n\t\t\t\tid,\n\t\t\t\ttask: {\n\t\t\t\t\tdue_date: value || null,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tdropdownClose();\n\t};\n\n</script>\n\n{#if value}\n\t<div class=\"wx-todo_due-date\" class:completed on:click={dropdownOpen}>\n\t\t<Icon name=\"calendar\" {css} size={14} />\n\t\t<span class={css}>\n\t\t\t{#if value instanceof Date}\n\t\t\t\t{dateToString(value, format, getDateLocales(_c))}\n\t\t\t{:else}{_('Set due date')}{/if}\n\t\t</span>\n\t\t{#if open}\n\t\t\t<Dropdown width={'fit-content'} cancel={dropdownClose}>\n\t\t\t\t<Calendar {cancel} bind:value />\n\t\t\t</Dropdown>\n\t\t{/if}\n\t</div>\n{/if}\n\n<style>\n\t.wx-todo_due-date {\n\t\tposition: relative;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\n\t\twidth: fit-content;\n\t\tmargin-top: 4px;\n\n\t\theight: var(--wx-font-size-s);\n\t\tfont-size: calc(var(--wx-font-size-s) - 1px);\n\t\tfont-weight: var(--wx-font-weight-medium);\n\t\tline-height: var(--wx-font-size-s);\n\n\t\tz-index: 9999;\n\t}\n\t.wx-todo_due-date span {\n\t\tmargin-left: 2px;\n\t}\n\t:global(.wx-todo_date),\n\t.completed :global(.wx-todo_date--current),\n\t.completed :global(.wx-todo_date--expired) {\n\t\tcursor: pointer;\n\t\tcolor: var(--wx-todo-date-color-regular);\n\t}\n\n</style>\n","<script>\n\texport let priority;\n\texport let task;\n\texport let config;\n\n</script>\n\n<div class=\"wx-todo_list__priority\">\n\t{#if config?.label}\n\t\t<div\n\t\t\tclass=\"wx-todo_list__priority-label\"\n\t\t\tstyle=\"background:{priority[task.priority]?.color};\" />\n\t{/if}\n\t{#if config?.cover}\n\t\t<div\n\t\t\tclass=\"wx-todo_list__priority-cover\"\n\t\t\tstyle=\"background:{priority[task.priority]?.color};\" />\n\t{/if}\n</div>\n\n<style>\n\t.wx-todo_list__priority {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\n\t\twidth: 100%;\n\t\theight: 100%;\n\n\t\tz-index: 0;\n\t}\n\t.wx-todo_list__priority-label {\n\t\theight: 100%;\n\t\twidth: 4px;\n\t}\n\t.wx-todo_list__priority-cover {\n\t\twidth: 100%;\n\t\theight: 100%;\n\n\t\topacity: 0.1;\n\t}\n\n</style>\n","<script>\n\timport { changeLabelLocale, checkTask, isSameId } from \"@xbs/lib-todo\";\n\timport { createEventDispatcher, onMount, getContext } from \"svelte\";\n\n\timport Menu from \"../Menu/Menu.svelte\";\n\n\timport Checkbox from \"../../library/Checkbox.svelte\";\n\timport Icon from \"../../library/Icon.svelte\";\n\timport Button from \"../../library/Button.svelte\";\n\timport Avatar from \"../../library/Avatar.svelte\";\n\n\timport Text from \"./components/Text.svelte\";\n\timport Editor from \"./components/Editor.svelte\";\n\timport DueDate from \"./components/DueDate.svelte\";\n\timport Priority from \"./components/Priority.svelte\";\n\n\tconst dispatch = createEventDispatcher();\n\n\tconst _ = getContext(\"wx-i18n\").getGroup(\"todo\");\n\n\texport let store;\n\texport let api;\n\texport let task;\n\texport let level = 0;\n\n\tlet listNode = null;\n\tlet userMenuNode = null;\n\tlet taskMenuNode = null;\n\n\tconst {\n\t\tstateDueDate: rDueDate,\n\t\tstateEditableItem: rEditor,\n\t\tmenu: rMenu,\n\t\tfilter: rFilter,\n\t\ttags: rTags,\n\t\ttaskShape: rShape,\n\t\treadonly: rReadonly,\n\t\tpriorityMap: rPriority,\n\t} = store;\n\n\t$: editor = $rEditor;\n\t$: menu = $rMenu;\n\t$: filter = $rFilter;\n\t$: tags = $rTags;\n\t$: shape = $rShape;\n\t$: readonly = $rReadonly;\n\t$: dueDate = $rDueDate;\n\t$: priority = $rPriority;\n\n\t$: options = changeLabelLocale(menu?.options || [], _);\n\t$: availableUsers = changeLabelLocale(task?.availableUsers, _);\n\n\t$: hasChildren = task?.children?.length;\n\t$: initialPadding = hasChildren ? 16 : 40;\n\t$: paddingLeft = initialPadding + (level > 1 ? 24 * (level - 1) : 0);\n\n\t$: editorOpen = editor?.type === \"task\" && isSameId(editor?.id, task.id);\n\n\ttask.selected && onMount(() => listNode?.focus());\n\n\tfunction triggerChecked() {\n\t\tif (task?.checked) {\n\t\t\tapi.in.exec(\"uncheck-task\", { id: task.id });\n\t\t} else {\n\t\t\tcheckTask({ store: api, id: task.id });\n\t\t}\n\t}\n\n\tfunction triggerToggle() {\n\t\tdispatch(\"action\", {\n\t\t\taction: task.collapsed ? \"expand-task\" : \"collapse-task\",\n\t\t\tdata: { id: task.id },\n\t\t});\n\t}\n\n\tfunction handleEditor(event) {\n\t\tconst { value, dropdown, targetDate } = event.detail;\n\t\tdispatch(\"action\", {\n\t\t\taction: \"edit-item\",\n\t\t\tdata: {\n\t\t\t\tid: task.id,\n\t\t\t\tcurrentValue: value,\n\t\t\t\tdropdown,\n\t\t\t\ttargetDate,\n\t\t\t},\n\t\t});\n\t}\n\n\tfunction handleTaskMenuClick(event) {\n\t\tconst action = event.detail.action?.id ?? event.detail.action;\n\n\t\tdispatch(\"action\", {\n\t\t\taction: \"click-menu-item\",\n\t\t\tdata: {\n\t\t\t\tid: menu.id,\n\t\t\t\taction,\n\t\t\t\ttype: \"task\",\n\t\t\t},\n\t\t});\n\t}\n\n</script>\n\n<div\n\ttabindex=\"0\"\n\tdata-list-level={level}\n\tdata-list-id={task.id}\n\tdata-drag-list-id={task.id}\n\tclass=\"wx-todo_list\"\n\tclass:wx-todo_list--selected={task.selected && !editorOpen}\n\tclass:wx-todo_list--draggable={task.draggable && !editorOpen}\n\tstyle=\"padding-left:{paddingLeft}px;\"\n\tbind:this={listNode}>\n\t<div class=\"wx-todo_list__controls wx-todo_list__controls-manual\">\n\t\t{#if hasChildren}\n\t\t\t<div class=\"wx-todo_list-toggle-button\">\n\t\t\t\t<Button circle={true} on:click={triggerToggle}>\n\t\t\t\t\t<Icon name={task.collapsed ? 'menu-right' : 'menu-down'} />\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t{/if}\n\t\t<Checkbox checked={task.checked} on:change={triggerChecked} />\n\t</div>\n\t<div class=\"wx-todo_list__content\" data-list-editor-id={task.id}>\n\t\t{#if task?.priority}\n\t\t\t<Priority {priority} {task} config={shape?.priority} />\n\t\t{/if}\n\t\t<div class=\"wx-todo_list__text\">\n\t\t\t{#if editorOpen && !readonly}\n\t\t\t\t<Editor\n\t\t\t\t\tvalue={task.text || ''}\n\t\t\t\t\tplaceholder={_('Type what you want')}\n\t\t\t\t\t{shape}\n\t\t\t\t\t{editor}\n\t\t\t\t\t{tags}\n\t\t\t\t\ton:editing={handleEditor} />\n\t\t\t{:else}\n\t\t\t\t<Text\n\t\t\t\t\tvalue={task.text || ''}\n\t\t\t\t\tcompleted={task.checked}\n\t\t\t\t\t{filter} />\n\t\t\t{/if}\n\t\t</div>\n\t\t<DueDate\n\t\t\tid={task.id}\n\t\t\topen={dueDate?.open && isSameId(task.id, dueDate?.id)}\n\t\t\tformat={shape?.date?.format}\n\t\t\tvalidate={shape?.date?.validate}\n\t\t\tcompleted={task.checked}\n\t\t\tvalue={task.due_date}\n\t\t\t{readonly}\n\t\t\ton:action />\n\t</div>\n\t<div class=\"wx-todo_list__controls\">\n\t\t{#if hasChildren}\n\t\t\t<div class=\"wx-todo_list__counter\">\n\t\t\t\t{#if task.counter.type === 'number'}\n\t\t\t\t\t{task.counter.done}/{task.counter.total}\n\t\t\t\t{:else if task.counter.type === 'percentage'}\n\t\t\t\t\t{Math.round((task.counter.done / task.counter.total) * 100)}%\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\t\t{#if availableUsers?.length}\n\t\t\t<div\n\t\t\t\tclass=\"wx-todo_user-menu\"\n\t\t\t\tstyle=\"width:{availableUsers.length >= 3 ? 60 : 16 * availableUsers.length + 14}px;\"\n\t\t\t\tdata-user-menu-id={task.id}\n\t\t\t\tbind:this={userMenuNode}>\n\t\t\t\t{#each availableUsers as user, index}\n\t\t\t\t\t{#if (availableUsers.length === 3 && index < 3) || index < 2}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"wx-todo_user-menu__avatar\"\n\t\t\t\t\t\t\tstyle=\"left:{index * 16}px\">\n\t\t\t\t\t\t\t<Avatar color={user.color} avatar={user.avatar} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/each}\n\t\t\t\t{#if availableUsers.length > 3}\n\t\t\t\t\t<div class=\"wx-todo_user-menu__avatar\" style=\"left: 32px;\">\n\t\t\t\t\t\t<Avatar value={`+${availableUsers.length - 2}`} />\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\t\t{#if !readonly}\n\t\t\t<button\n\t\t\t\tbind:this={taskMenuNode}\n\t\t\t\tdata-menu-id={task.id}\n\t\t\t\tclass=\"wx-todo_list-menu-button\">\n\t\t\t\t<Icon name=\"dots-v\" />\n\t\t\t</button>\n\t\t{/if}\n\t</div>\n</div>\n\n{#if menu && isSameId(menu.id, task.id)}\n\t{#if menu.type === 'user'}\n\t\t<Menu options={availableUsers} parent={userMenuNode} />\n\t{/if}\n\t{#if menu.type === 'task'}\n\t\t<Menu {options} parent={taskMenuNode} on:click={handleTaskMenuClick} />\n\t{/if}\n{/if}\n\n<style>\n\t.wx-todo_list {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\n\t\toutline: none;\n\t\tpadding: 0 16px;\n\n\t\tcursor: pointer;\n\t}\n\t.wx-todo_list--selected {\n\t\tbackground: var(--wx-background-selected);\n\t}\n\t.wx-todo_list--draggable {\n\t\topacity: 0.4;\n\t\tbackground: var(--wx-background-selected);\n\t}\n\t.wx-todo_list__content {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tflex-direction: column;\n\n\t\twidth: 100%;\n\t\tpadding: 8px 6px;\n\t}\n\t.wx-todo_list__controls {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tjustify-content: space-between;\n\n\t\tz-index: 1;\n\t}\n\t.wx-todo_list__controls-manual {\n\t\tpadding: 8px 0;\n\t}\n\t.wx-todo_list__text {\n\t\theight: 100%;\n\t\twidth: 100%;\n\n\t\tmin-height: var(--wx-line-height);\n\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tline-height: var(--wx-line-height);\n\n\t\tcolor: var(--wx-color-font);\n\t\tuser-select: none;\n\n\t\tz-index: 1;\n\t}\n\t.wx-todo_list__counter {\n\t\tcolor: var(--wx-color-secondary-light);\n\n\t\tmargin: 8px 0 8px 6px;\n\t\tfont-size: var(--wx-font-size-s);\n\t\tfont-weight: var(--wx-font-weight-medium);\n\t}\n\t.wx-todo_list-menu-button {\n\t\tcursor: pointer;\n\t\tbackground: inherit;\n\n\t\theight: var(--wx-base-size);\n\t\twidth: var(--wx-base-size);\n\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\n\t\toutline: none;\n\t\tborder: none;\n\t\tborder-radius: 50%;\n\n\t\tmargin: 8px 0 8px 6px;\n\t}\n\t.wx-todo_list-menu-button:hover {\n\t\tbackground: var(--wx-icon-background-hover);\n\t}\n\t.wx-todo_list-toggle-button {\n\t\tdisplay: flex;\n\t\tmargin-right: 4px;\n\t}\n\t.wx-todo_user-menu {\n\t\tposition: relative;\n\t\theight: 24px;\n\n\t\tdisplay: flex;\n\t\tcursor: pointer;\n\n\t\tmargin: 4px 0;\n\t\tmargin-left: 6px;\n\t}\n\t.wx-todo_user-menu__avatar {\n\t\tposition: absolute;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t:global(.wx-ondrag) .wx-todo_list,\n\t:global(.wx-ondrag) .wx-todo_user-menu {\n\t\tcursor: grabbing;\n\t}\n\n</style>\n","<script>\n\texport let padding = \"6px 16px\";\n\n</script>\n\n<div\n\tclass=\"wx-todo_separator\"\n\tstyle=\"padding: {padding};\"\n\tdata-separator={true}>\n\t<div class=\"wx-todo_separator__line\" />\n</div>\n\n<style>\n\t.wx-todo_separator {\n\t\tcursor: default;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t}\n\t:global(.wx-ondrag) .wx-todo_separator {\n\t\tcursor: grabbing;\n\t}\n\t.wx-todo_separator__line {\n\t\tborder-bottom: var(--wx-border);\n\t\tflex: 1 1 auto;\n\n\t\ttouch-action: none;\n\t\tuser-select: none;\n\t\tpointer-events: none;\n\t}\n\n</style>\n","<script>\n\timport List from \"../List/List.svelte\";\n\timport Separator from \"../../library/Separator.svelte\";\n\n\texport let store;\n\texport let api;\n\texport let data;\n\texport let level = 0;\n\texport let id;\n\n\tconst rShape = store.taskShape;\n\t$: isHideCompleted = $rShape?.completed?.taskHide;\n\n</script>\n\n<ul\n\tclass=\"wx-todo_tree\"\n\tclass:wx-todo_tree--root={!level}\n\tdata-todo-wrapper-id={id}>\n\t{#each data as task (task.id)}\n\t\t{#if !(isHideCompleted && task.checked)}\n\t\t\t<li class=\"wx-todo_tree__row\">\n\t\t\t\t<List on:action {store} {api} {task} level={level + 1} />\n\t\t\t\t<slot />\n\t\t\t\t{#if task.children.length && !task.collapsed}\n\t\t\t\t\t<svelte:self\n\t\t\t\t\t\ton:action\n\t\t\t\t\t\t{store}\n\t\t\t\t\t\t{api}\n\t\t\t\t\t\tlevel={level + 1}\n\t\t\t\t\t\tdata={task.children} />\n\t\t\t\t{/if}\n\t\t\t\t{#if level === 0}\n\t\t\t\t\t<Separator />\n\t\t\t\t{/if}\n\t\t\t</li>\n\t\t{/if}\n\t{/each}\n</ul>\n\n<style>\n\t.wx-todo_tree {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\t.wx-todo_tree--root {\n\t\toverflow-y: auto;\n\t}\n\t:global(.wx-ondrag--touch) .wx-todo_tree {\n\t\toverflow-y: hidden;\n\t\tuser-select: none;\n\t}\n\t.wx-todo_tree__row {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n</style>\n","<script>\n\timport TreeView from \"./TreeView.svelte\";\n\n\texport let store;\n\texport let api;\n\n\tconst rTreeTasks = store.treeTasks;\n\tconst rComponentId = store.id;\n\n</script>\n\n<TreeView on:action data={$rTreeTasks} id={$rComponentId} {store} {api} />\n","<script>\n\timport { getContext } from \"svelte\";\n\timport Button from \"../library/Button.svelte\";\n\timport Icon from \"../library/Icon.svelte\";\n\timport Separator from \"../library/Separator.svelte\";\n\n\tconst _ = getContext(\"wx-i18n\").getGroup(\"todo\");\n\n\tlet isValid;\n\tif (process.env.TRIALPACKAGE) {\n\t\tisValid = () => {\n\t\t\tif (typeof window === \"undefined\") return true;\n\n\t\t\tconst l = location.hostname;\n\t\t\tconst t = [\n\t\t\t\t// dhtmlx.com\n\t\t\t\t\"ZGh0bWx4LmNvbQ==\",\n\t\t\t\t// dhtmlxcode.com\n\t\t\t\t\"ZGh0bWx4Y29kZS5jb20=\",\n\t\t\t\t// webixcode.com\n\t\t\t\t\"d2ViaXhjb2RlLmNvbQ==\",\n\t\t\t\t// webix.io\n\t\t\t\t\"d2ViaXguaW8=\",\n\t\t\t\t// repl.co\n\t\t\t\t\"cmVwbC5jbw==\",\n\t\t\t];\n\n\t\t\tfor (let i = 0; i < t.length; i++) {\n\t\t\t\tconst x = window.atob(t[i]);\n\t\t\t\tif (x === l || l.endsWith(\".\" + x)) return true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\t}\n\n</script>\n\n<div class=\"wx-todo_button-add\">\n\t<Button on:click height={36} width={'100%'}>\n\t\t<div class=\"wx-todo_button-add__content\">\n\t\t\t<div class=\"wx-todo_button-add__icon\">\n\t\t\t\t<Icon name={'plus'} size={16} />\n\t\t\t</div>\n\t\t\t<span class=\"wx-todo_button-add__text\">{_('Add task')}</span>\n\t\t</div>\n\t</Button>\n\t<Separator />\n\t{#if process.env.TRIALPACKAGE && !isValid()}\n\t\t<mark\n\t\t\tclass=\"wx-todo_mark\"\n\t\t\tclass:wx-todo_mark--error={process.env.TRIALDATE < new Date()}>\n\t\t\t{window.atob('VHJpYWw=')}\n\t\t</mark>\n\t{/if}\n</div>\n\n<style>\n\t.wx-todo_button-add {\n\t\tmargin-top: 6px;\n\t\twidth: 100%;\n\t}\n\t.wx-todo_button-add__content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\t\twidth: 100%;\n\t\theight: 100%;\n\n\t\tpadding: 0 20px 0 40px;\n\n\t\tcolor: var(--wx-color-primary);\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tline-height: var(--wx-line-height);\n\t}\n\t.wx-todo_button-add__icon :global(.wxi) {\n\t\tcolor: var(--wx-color-primary);\n\t}\n\t.wx-todo_button-add__text {\n\t\tmargin-left: 8px;\n\t}\n\n\t.wx-todo_mark {\n\t\tposition: absolute;\n\t\tright: 34px;\n\t\ttop: 12px;\n\t\ttransform: rotate(30deg);\n\t\tcolor: #ccc;\n\t\tfont-weight: 500;\n\t\ttext-transform: uppercase;\n\t\tbackground: inherit;\n\t}\n\t.wx-todo_mark.wx-todo_mark--error {\n\t\tcolor: red;\n\t}\n\n</style>\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","<script>\n\timport { Locale, Portal } from \"@xbs/svelte-wx\";\n\timport { en as cEN } from \"@xbs/wx-core-locales\";\n\timport en from \"../locales/en\";\n\timport { EventBusRouter } from \"@xbs/lib-state\";\n\timport {\n\t\tDataStore,\n\t\tselection,\n\t\ttaskMenu,\n\t\tuserMenu,\n\t\tuid,\n\t\tkeyNavigation,\n\t\tdefaultTaskShape,\n\t\taddTask,\n\t\ttagFilter,\n\t\tlistEditor,\n\t\tgetApi,\n\t\tisDefined,\n\t\tdragManager,\n\t\tdefaultDragConfig,\n\t\tdefaultPriorities,\n\t} from \"@xbs/lib-todo\";\n\n\timport Material from \"../themes/Material.svelte\";\n\timport Tree from \"./Tree/Tree.svelte\";\n\timport AddButton from \"./AddButton.svelte\";\n\n\timport { writable } from \"svelte/store\";\n\timport { createEventDispatcher } from \"svelte\";\n\n\texport let id = uid();\n\texport let tasks = [];\n\texport let projects = [];\n\texport let users = [];\n\texport let tags = [];\n\texport let selected = [];\n\texport let activeProject = undefined;\n\texport let readonly = false;\n\texport let taskShape = defaultTaskShape;\n\texport let drag = defaultDragConfig;\n\texport let priorities = defaultPriorities;\n\n\tconst dispatch = createEventDispatcher();\n\tconst dataStore = new DataStore(writable);\n\n\t$: dataStore.init({\n\t\ttasks,\n\t\tusers,\n\t\ttags,\n\t\tselected,\n\t\ttaskShape: {\n\t\t\t...defaultTaskShape,\n\t\t\t...taskShape,\n\t\t},\n\t\tdrag: drag ? { ...defaultDragConfig, ...drag } : drag,\n\t\tpriorities:\n\t\t\ttypeof priorities === \"boolean\"\n\t\t\t\t? priorities && defaultPriorities\n\t\t\t\t: Array.isArray(priorities) && priorities,\n\t\tprojects,\n\t\tactiveProject,\n\t\treadonly,\n\t\tid,\n\t});\n\n\tconst rStore = dataStore.getReactive();\n\t// define event route\n\tlet lastInRoute = new EventBusRouter(dispatch);\n\t// public API\n\texport const api = getApi(dataStore, lastInRoute);\n\n\tdataStore.out.setNext(lastInRoute.exec);\n\n\tfunction triggerAction(event) {\n\t\tconst { action, data } = event.detail;\n\t\tdataStore.in.exec(action, data);\n\t}\n\n\tfunction handleAddTask(event) {\n\t\tif (isDefined(dataStore.getState().filter)) return;\n\n\t\tevent.stopPropagation();\n\t\taddTask({\n\t\t\tstore: dataStore,\n\t\t\treverse: true,\n\t\t});\n\t}\n\n</script>\n\n<svelte:window\n\tuse:keyNavigation={{ api, widgetId: id }}\n\tuse:listEditor={{ api, readonly }} />\n\n<Locale words={{ ...en, ...cEN }} optional={true}>\n\t<Material>\n\t\t<div class=\"wx-todo\" data-todo-id={id}>\n\t\t\t{#if !readonly}\n\t\t\t\t<AddButton on:click={handleAddTask} />\n\t\t\t{/if}\n\t\t\t<div\n\t\t\t\tclass=\"wx-todo__wrapper\"\n\t\t\t\ton:contextmenu={event => event.preventDefault()}\n\t\t\t\tuse:tagFilter={{ api }}\n\t\t\t\tuse:selection={{ api, readonly }}\n\t\t\t\tuse:taskMenu={{ api, readonly }}\n\t\t\t\tuse:dragManager={{ api, readonly: !drag || readonly, id }}\n\t\t\t\tuse:userMenu={{ api }}>\n\t\t\t\t<Tree\n\t\t\t\t\ton:action={triggerAction}\n\t\t\t\t\tstore={rStore}\n\t\t\t\t\tapi={dataStore} />\n\t\t\t</div>\n\t\t</div>\n\t</Material>\n</Locale>\n\n{#if !document.querySelector('.wx-portal')}\n\t<Portal theme=\"material\" />\n{/if}\n\n<style>\n\t.wx-todo {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\tbackground: var(--wx-background);\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tline-height: var(--wx-line-height);\n\t\tcolor: var(--wx-color-font);\n\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tmax-width: 100%;\n\t\tmax-height: 100%;\n\t\tz-index: 1;\n\n\t\toverflow: hidden;\n\t}\n\t.wx-todo__wrapper {\n\t\tdisplay: flex;\n\t\toverflow-y: auto;\n\t\theight: 100%;\n\t\twidth: 100%;\n\t}\n\t:global(.wx-todo_filter) {\n\t\tbackground: var(--wx-todo-mark-background);\n\t}\n\t:global(.wx-todo_filter--strict) {\n\t\tbackground: var(--wx-todo-mark-background-strict);\n\t}\n\t:global(.wx-todo_tag) {\n\t\tcursor: pointer;\n\t\tcolor: var(--wx-color-primary);\n\t}\n\t:global(.wx-todo_date--current) {\n\t\tcolor: var(--wx-todo-date-color-current);\n\t}\n\t:global(.wx-todo_date--expired) {\n\t\tcolor: var(--wx-todo-date-color-expired);\n\t}\n\t:global(.wx-ondrag--touch) {\n\t\toverflow: hidden;\n\t}\n\t:global(.wx-portal .wx-todo__dragged-task) {\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tline-height: var(--wx-line-height);\n\t\tcolor: var(--wx-color-font);\n\t\tbackground: var(--wx-background);\n\n\t\tposition: fixed;\n\t\tz-index: 3;\n\n\t\ttouch-action: none;\n\t\tuser-select: none;\n\t\tpointer-events: none;\n\n\t\tbox-shadow: 0 4px 8px rgba(116, 116, 116, 0.3);\n\t}\n\t:global(.wx-portal .wx-todo__dragged-task:after) {\n\t\tcontent: var(--wx-todo-dragged-tasks-count);\n\n\t\tposition: absolute;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\n\t\tbackground: var(--wx-color-success);\n\t\tcolor: var(--wx-color-secondary-font);\n\n\t\twidth: 30px;\n\t\theight: 30px;\n\t\tborder-radius: 50%;\n\t\ttop: -10px;\n\t\tright: -10px;\n\t\tz-index: 4;\n\t}\n\t:global(.wx-portal .wx-todo_dropped-line) {\n\t\tposition: absolute;\n\n\t\tborder-radius: 2px;\n\t\tbackground-color: var(--wx-color-secondary-light);\n\n\t\ttouch-action: none;\n\t\tuser-select: none;\n\t\tpointer-events: none;\n\n\t\tz-index: 2;\n\t}\n\n</style>\n","export function getApi(dataStore, lastInRoute) {\n    let lastRoute = lastInRoute;\n    return {\n        exec: dataStore.in.exec,\n        getState: dataStore.getState.bind(dataStore),\n        getReactiveState: dataStore.getReactive.bind(dataStore),\n        setNext: (ev) => {\n            lastRoute.setNext(ev.exec);\n            lastRoute = ev;\n        },\n        getStores: () => ({ state: dataStore }),\n        intercept: dataStore.in.on.bind(dataStore.in),\n        on: dataStore.out.on.bind(dataStore.out),\n        getSelection: (obj) => dataStore.getSelection(obj),\n        eachSelected: (callback, sorted, reversed) => dataStore.eachSelected(callback, sorted, reversed),\n        serialize: () => dataStore.serialize(),\n        parse: (obj) => dataStore.parse(obj),\n        existsTask: ({ id }) => dataStore.existsTask(id),\n        existsProject: ({ id }) => dataStore.existsProject(id),\n        getTask: ({ id }) => dataStore.getTask(id),\n        getProject: ({ id }) => dataStore.getProject(id),\n        hasChildren: ({ id, filtered, hideCompleted }) => dataStore.hasChildren(id, filtered, hideCompleted),\n        getChildrenIds: (obj) => dataStore.getChildrenIds(obj),\n        getParentIds: ({ id }) => dataStore.getParentIds(id),\n    };\n}\n//# sourceMappingURL=api.js.map","<script>\n\timport { Locale } from \"@xbs/svelte-wx\";\n\timport en from \"../locales/en\";\n\timport { en as cEN } from \"@xbs/wx-core-locales\";\n\n\texport let api;\n\n</script>\n\n<Locale words={{ ...en, ...cEN }} optional={true}>\n\t<div class=\"wx-todo_toolbar\">\n\t\t{#if api}\n\t\t\t<slot />\n\t\t{/if}\n\t</div>\n</Locale>\n\n<style>\n\t.wx-todo_toolbar {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: var(--wx-todo-toolbar-align);\n\t\tjustify-content: var(--wx-todo-toolbar-justify);\n\n\t\twidth: 100%;\n\t\theight: var(--wx-todo-toolbar-height);\n\t\tmin-height: var(--wx-todo-toolbar-height);\n\t\tmax-height: var(--wx-todo-toolbar-height);\n\t\tpadding: 16px;\n\n\t\tbackground: var(--wx-todo-toolbar-background);\n\t\tcolor: var(--wx-font-color);\n\n\t\tborder-bottom: var(--wx-border);\n\t}\n\n</style>\n","<script>\n\timport Menu from \"../Menu/Menu.svelte\";\n\timport Icon from \"../../library/Icon.svelte\";\n\n\timport { changeLabelLocale } from \"@xbs/lib-todo\";\n\timport { getContext } from \"svelte\";\n\n\texport let api;\n\n\t$: state = api.getReactiveState();\n\n\t$: componentId = state.id;\n\t$: menu = state.menu;\n\t$: activeProject = state.activeProject;\n\n\tconst locate = getContext(\"wx-i18n\").getGroup(\"todo\");\n\t$: options = changeLabelLocale($menu?.options || [], locate);\n\n\tlet self = null;\n\n\tfunction itemClick(event) {\n\t\tconst action = event.detail.action?.id ?? event.detail.action;\n\n\t\tapi.exec(\"click-menu-item\", {\n\t\t\tid: $activeProject,\n\t\t\ttype: \"toolbar\",\n\t\t\taction,\n\t\t\tparams: { locate },\n\t\t});\n\t}\n\n\tfunction toggleButtonClick() {\n\t\tconst { menu, activeProject } = api.getState();\n\n\t\tif (menu?.open && menu.type === \"toolbar\") {\n\t\t\tapi.exec(\"close-menu\", {\n\t\t\t\t...menu,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tapi.exec(\"open-menu\", { id: activeProject, type: \"toolbar\" });\n\t}\n\n</script>\n\n<button\n\tbind:this={self}\n\tclass=\"wx-todo_toolbar-menu-button\"\n\ttabindex=\"0\"\n\tdata-toolbar-icon={true}\n\tdata-todo-id={$componentId}>\n\t<Icon name=\"dots-v\" on:click={toggleButtonClick} />\n</button>\n\n{#if $menu?.type === 'toolbar'}\n\t<Menu {options} parent={self} on:click={itemClick} />\n{/if}\n\n<style>\n\t.wx-todo_toolbar-menu-button {\n\t\tcursor: pointer;\n\t\theight: var(--wx-base-size);\n\t\twidth: var(--wx-base-size);\n\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\n\t\toutline: none;\n\t\tborder: none;\n\t\tborder-radius: 50%;\n\n\t\tbackground: inherit;\n\t}\n\t.wx-todo_toolbar-menu-button:hover {\n\t\tbackground: var(--wx-icon-background-hover);\n\t}\n\n</style>\n","<script>\n\timport { setCaretPosition } from \"@xbs/lib-dom\";\n\timport { createEventDispatcher } from \"svelte\";\n\timport Icon from \"../library/Icon.svelte\";\n\n\texport let placeholder = \"\";\n\texport let value = \"\";\n\n\tlet node = null;\n\n\t$: if (node || value) setTimeout(() => setCaretPosition(node));\n\n\tconst dispatch = createEventDispatcher();\n\n\tfunction handleClear() {\n\t\tvalue = \"\";\n\t\tdispatch(\"clear\");\n\t\tnode?.focus();\n\t}\n\n</script>\n\n<div class=\"wx-todo_input\">\n\t<input\n\t\tbind:this={node}\n\t\tbind:value\n\t\ton:keypress\n\t\ton:focus\n\t\ton:blur\n\t\tclass=\"wx-todo_input__value\"\n\t\t{placeholder} />\n\t{#if value}\n\t\t<Icon name=\"close\" clickable on:click={handleClear} />\n\t{/if}\n</div>\n\n<style>\n\t.wx-todo_input {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\n\t\twidth: 100%;\n\t}\n\t.wx-todo_input__value {\n\t\tborder: none;\n\t\toutline: none;\n\n\t\tcolor: var(--wx-color-font);\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tbackground: inherit;\n\n\t\theight: 100%;\n\t\twidth: 100%;\n\t}\n\n</style>\n","<script>\n\timport { getTagsOptions, isDefined } from \"@xbs/lib-todo\";\n\timport { getContext } from \"svelte\";\n\n\timport { Dropdown } from \"@xbs/svelte-wx\";\n\timport List from \"../../library/List.svelte\";\n\timport Icon from \"../../library/Icon.svelte\";\n\timport Input from \"../../library/Input.svelte\";\n\timport Item from \"../Menu/Items/Item.svelte\";\n\n\texport let api;\n\n\t$: state = api.getReactiveState();\n\t$: componentId = state.id;\n\t$: filter = state.filter;\n\t$: tags = state.tags;\n\n\t$: search = state.stateSearch;\n\t$: dropdown = $search?.dropdown;\n\n\tlet self = null;\n\tlet value = null;\n\n\tconst _ = getContext(\"wx-i18n\").getGroup(\"todo\");\n\n\t$: if (\n\t\tisDefined($search?.value) &&\n\t\t$search.value !== ($filter?.match || \"\") &&\n\t\t$search.focus\n\t) {\n\t\tif (!$search.value?.length) {\n\t\t\tapi.exec(\"set-filter\", { match: null });\n\t\t} else {\n\t\t\tapi.exec(\"set-filter\", {\n\t\t\t\tmatch: $search.value,\n\t\t\t\thighlight: true,\n\t\t\t\tstrict:\n\t\t\t\t\t$search.value?.startsWith(\"#\") &&\n\t\t\t\t\t$tags.includes($search.value),\n\t\t\t});\n\t\t}\n\t\tif (\n\t\t\tself &&\n\t\t\t$search.value?.startsWith(\"#\") &&\n\t\t\tvalue !== $search?.value\n\t\t) {\n\t\t\topenDropdown();\n\t\t} else {\n\t\t\tcloseDropdown();\n\t\t}\n\t}\n\n\tfunction searchToggle() {\n\t\tapi.exec(\"set-state-search\", {\n\t\t\t...$search,\n\t\t\topen: !$search?.open,\n\t\t});\n\t}\n\n\tfunction searchFocus() {\n\t\tapi.exec(\"set-state-search\", {\n\t\t\t...$search,\n\t\t\tfocus: true,\n\t\t});\n\t}\n\n\tfunction searchBlur() {\n\t\tapi.exec(\"set-state-search\", {\n\t\t\t...$search,\n\t\t\tfocus: false,\n\t\t\topen: !!$search.value?.length,\n\t\t});\n\t}\n\n\tfunction dropdownItemClick(event) {\n\t\tvalue = event.detail.id;\n\n\t\tapi.exec(\"set-state-search\", {\n\t\t\t...$search,\n\t\t\tvalue: value?.length ? value : $search?.value,\n\t\t\tdropdown: { open: false },\n\t\t});\n\t}\n\n\tfunction openDropdown() {\n\t\tconst options = getTagsOptions($tags, $search.value);\n\n\t\tsetTimeout(\n\t\t\t() => {\n\t\t\t\tapi.exec(\"set-state-search\", {\n\t\t\t\t\t...$search,\n\t\t\t\t\topen: true,\n\t\t\t\t\tdropdown: {\n\t\t\t\t\t\topen: true,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t\t$search?.open ? 0 : 250\n\t\t);\n\t}\n\n\tfunction closeDropdown() {\n\t\tapi?.exec(\"set-state-search\", {\n\t\t\t...$search,\n\t\t\tdropdown: {\n\t\t\t\topen: false,\n\t\t\t},\n\t\t});\n\t\tvalue = null;\n\t}\n\n</script>\n\n<div\n\tbind:this={self}\n\tdata-todo-id={$componentId}\n\tclass=\"wx-todo_search\"\n\tclass:wx-todo_search--opened={$search?.open}>\n\t<Icon name=\"search\" clickable on:click={searchToggle} />\n\t{#if $search?.open}\n\t\t<div class=\"wx-todo_search__input\">\n\t\t\t<Input\n\t\t\t\tplaceholder={_('Search')}\n\t\t\t\tbind:value={$search.value}\n\t\t\t\ton:focus={searchFocus}\n\t\t\t\ton:blur={searchBlur} />\n\t\t\t{#if self && dropdown?.open && $search.value}\n\t\t\t\t<Dropdown width={'fit-content'} cancel={closeDropdown}>\n\t\t\t\t\t<List\n\t\t\t\t\t\toptions={dropdown.options}\n\t\t\t\t\t\ton:click={dropdownItemClick}\n\t\t\t\t\t\tlet:item>\n\t\t\t\t\t\t<Item {item} />\n\t\t\t\t\t</List>\n\t\t\t\t</Dropdown>\n\t\t\t{/if}\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.wx-todo_search {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\n\t\theight: 100%;\n\t\tmargin-right: 12px;\n\t\twidth: 20px;\n\n\t\ttransition: var(--wx-all-transition);\n\t}\n\t.wx-todo_search--opened {\n\t\twidth: 100%;\n\t\ttransition: var(--wx-all-transition);\n\t}\n\t.wx-todo_search__input {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tmargin: 0 6px;\n\t}\n\n</style>\n","<script>\n\timport { setCaretPosition, setNodeRange } from \"@xbs/lib-dom\";\n\timport { createEventDispatcher } from \"svelte\";\n\n\texport let placeholder = \"\";\n\texport let value = \"\";\n\texport let editable = true;\n\texport let editing = false;\n\texport let enableRange = false;\n\n\tlet node = null;\n\n\t$: if (node) {\n\t\tif (enableRange) {\n\t\t\tsetNodeRange(node);\n\t\t} else {\n\t\t\tsetCaretPosition(node);\n\t\t}\n\t}\n\n\tconst dispatch = createEventDispatcher();\n\n\tfunction handleEditorEdit() {\n\t\tdispatch(\"editing\", { value: node?.textContent || \"\" });\n\t}\n\n\tfunction handleOpenEditor() {\n\t\tif (!editable || editing) return;\n\n\t\tediting = true;\n\t\tdispatch(\"open\", { value });\n\t}\n\n\tfunction handleCloseEditor() {\n\t\tif (!editing) return;\n\n\t\tediting = false;\n\t\tdispatch(\"close\", { value });\n\t}\n\n</script>\n\n<div class=\"wx-todo_text\" on:dblclick|stopPropagation={handleOpenEditor}>\n\t{#if editing && editable}\n\t\t<div\n\t\t\ton:blur={handleCloseEditor}\n\t\t\ton:input={handleEditorEdit}\n\t\t\tclass=\"wx-todo_text__value\"\n\t\t\tclass:wx-todo_text__value--editing={editing}\n\t\t\tcontentEditable={true}\n\t\t\tdata-placeholder={placeholder}\n\t\t\ttabindex=\"0\"\n\t\t\tbind:this={node}>\n\t\t\t{value}\n\t\t</div>\n\t{:else}\n\t\t<div class=\"wx-todo_text__value\" tabindex=\"0\">{value}</div>\n\t{/if}\n</div>\n\n<style>\n\t.wx-todo_text {\n\t\tdisplay: flex;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tmin-height: var(--wx-line-height);\n\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tline-height: var(--wx-line-height);\n\n\t\tcolor: var(--wx-color-font);\n\t}\n\t.wx-todo_text__value {\n\t\tcursor: pointer;\n\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\toutline: none;\n\n\t\tword-wrap: normal;\n\t\tword-break: break-word;\n\t\twhite-space: pre-wrap;\n\t}\n\t.wx-todo_text__value--editing {\n\t\tcursor: text;\n\t}\n\t[data-placeholder]:empty:before {\n\t\tcontent: attr(data-placeholder);\n\n\t\tfont-family: var(--wx-font-family);\n\t\tfont-size: var(--wx-font-size);\n\t\tline-height: var(--wx-line-height);\n\t\tcolor: var(--wx-color-font-disabled);\n\t}\n\n</style>\n","<script>\n\timport { getCountLabel, isDefined, isSameId } from \"@xbs/lib-todo\";\n\timport { getContext } from \"svelte\";\n\n\timport { Dropdown } from \"@xbs/svelte-wx\";\n\timport Separator from \"../../library/Separator.svelte\";\n\timport Icon from \"../../library/Icon.svelte\";\n\timport Input from \"../../library/Input.svelte\";\n\timport Text from \"../../library/Text.svelte\";\n\timport List from \"../../library/List.svelte\";\n\timport Item from \"../Menu/Items/Item.svelte\";\n\n\texport let api;\n\n\tconst _ = getContext(\"wx-i18n\").getGroup(\"todo\");\n\n\tlet self = null;\n\n\t$: state = api.getReactiveState();\n\n\t$: editor = state.stateEditableItem;\n\t$: activeProject = state.activeProject;\n\t$: projects = state.projects;\n\t$: tasks = state.tasks;\n\t$: componentId = state.id;\n\t$: readonly = state.readonly;\n\t$: dropdown = state.stateCombo;\n\n\t$: editing =\n\t\tisSameId($editor?.id, $activeProject) && $editor?.type === \"project\";\n\n\t$: visibleProjects =\n\t\t$projects.every(p => isDefined(p.id)) &&\n\t\t$tasks.some(t => !isDefined(t.project) && !isDefined(t.parent))\n\t\t\t? [{ id: null, label: _(\"No project\") }, ...$projects]\n\t\t\t: [...$projects];\n\t$: projectLabel = (\n\t\tvisibleProjects.find(p => isSameId($activeProject, p?.id))?.label ||\n\t\t_(\"No project\")\n\t).trim();\n\n\tlet search = null;\n\tlet searchResult = [];\n\n\t$: {\n\t\tif (isDefined(search)) {\n\t\t\tsearchResult = visibleProjects.filter(({ label }) =>\n\t\t\t\tlabel.toLowerCase().includes(search.toLowerCase())\n\t\t\t);\n\t\t} else {\n\t\t\tsearchResult = visibleProjects;\n\t\t}\n\t\tsearchResult = searchResult.map(i => {\n\t\t\tconst icon = isSameId(i.id, $activeProject) ? \"check\" : \"empty\";\n\t\t\treturn { ...i, icon };\n\t\t});\n\t}\n\n\tfunction toggleDropdown(event) {\n\t\tsearch = null;\n\t\tif (self.contains(event?.target)) {\n\t\t\tapi.exec(\"set-state-combo\", { open: !$dropdown?.open });\n\t\t}\n\t}\n\n\tfunction closeDropdown(event) {\n\t\tsearch = null;\n\t\tif ($dropdown.open && !self.contains(event?.target)) {\n\t\t\tapi.exec(\"set-state-combo\", { open: false });\n\t\t}\n\t}\n\n\tfunction dropdownItemClick(event) {\n\t\tapi.exec(\"set-project\", { id: event.detail.id });\n\t\tcloseDropdown(event);\n\t}\n\n\tfunction openEditor() {\n\t\tapi.exec(\"open-inline-editor\", {\n\t\t\tid: $activeProject,\n\t\t\ttype: \"project\",\n\t\t});\n\t}\n\n\tfunction closeEditor() {\n\t\tisDefined($editor?.id) &&\n\t\t\tapi.exec(\"close-inline-editor\", {\n\t\t\t\tid: $editor.id,\n\t\t\t});\n\t}\n\n\tfunction editingItem(event) {\n\t\tconst value = event.detail.value.trim();\n\t\tconst otherProjects = $projects.filter(\n\t\t\t({ label }) => label !== projectLabel\n\t\t);\n\n\t\tapi.exec(\"edit-item\", {\n\t\t\tid: $editor.id,\n\t\t\tcurrentValue: value.length\n\t\t\t\t? value\n\t\t\t\t: getCountLabel(\"Untilted\", otherProjects, _),\n\t\t});\n\t}\n\n</script>\n\n<div data-todo-id={$componentId} class=\"wx-todo_combo\">\n\t<div\n\t\tbind:this={self}\n\t\tclass=\"wx-todo_combo__wrapper\"\n\t\ton:click={toggleDropdown}>\n\t\t<Text\n\t\t\t{editing}\n\t\t\tvalue={projectLabel}\n\t\t\tenableRange={true}\n\t\t\tplaceholder={_('Type what you want')}\n\t\t\teditable={isDefined($activeProject) && !$readonly}\n\t\t\ton:close={closeEditor}\n\t\t\ton:open={openEditor}\n\t\t\ton:editing={editingItem} />\n\t\t<div class=\"wx-todo_combo__icon\">\n\t\t\t<Icon name={'menu-down'} clickable />\n\t\t</div>\n\t</div>\n\t{#if $dropdown?.open && !editing}\n\t\t<Dropdown width={'fit-content'} cancel={closeDropdown}>\n\t\t\t<div class=\"wx-todo_combo-dropdown\">\n\t\t\t\t<div class=\"wx-todo_combo-search\">\n\t\t\t\t\t<div class=\"wx-todo_combo-search__icon\">\n\t\t\t\t\t\t<Icon name=\"search\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tplaceholder={_('Search project')}\n\t\t\t\t\t\tbind:value={search} />\n\t\t\t\t</div>\n\t\t\t\t<Separator padding={'0'} />\n\t\t\t\t<List\n\t\t\t\t\toptions={searchResult}\n\t\t\t\t\ton:click={dropdownItemClick}\n\t\t\t\t\tlet:item>\n\t\t\t\t\t<Item {item} />\n\t\t\t\t</List>\n\t\t\t</div>\n\t\t</Dropdown>\n\t{/if}\n</div>\n\n<style>\n\t.wx-todo_combo {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tmargin-right: 12px;\n\t\tmargin-left: 22px;\n\t}\n\t.wx-todo_combo__wrapper {\n\t\tdisplay: flex;\n\t}\n\t.wx-todo_combo-search {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\n\t\tpadding: 8px;\n\t}\n\t.wx-todo_combo-search .wx-todo_combo-search__icon {\n\t\tmargin-right: 8px;\n\t}\n\n</style>\n",null,"<script lang=\"ts\">\n\texport let template: string | ((config: Record<string, any>) => void);\n\n\t$: htmlString =\n\t\ttypeof template === \"function\"\n\t\t\t? template({ ...$$restProps })\n\t\t\t: template;\n\n</script>\n\n{#if htmlString}\n\t{@html htmlString}\n{/if}\n","<script lang=\"ts\">\n\timport {\n\t\tToolbar,\n\t\tToolbarMenu,\n\t\tToolbarCombo,\n\t\tToolbarSearch,\n\t\tMaterial,\n\t} from \"@xbs/svelte-todo\";\n\timport Template from \"./Template.svelte\";\n\n\timport type { IApi, IToolbarItem } from \"@xbs/lib-todo\";\n\n\texport let api: IApi;\n\texport let items: IToolbarItem[];\n\n</script>\n\n<Material>\n\t<Toolbar {api}>\n\t\t{#each items as item}\n\t\t\t{#if item.type === 'search'}\n\t\t\t\t<ToolbarSearch {api} />\n\t\t\t{:else if item.type === 'menu'}\n\t\t\t\t<ToolbarMenu {api} />\n\t\t\t{:else if item.type === 'combo'}\n\t\t\t\t<ToolbarCombo {api} />\n\t\t\t{:else if item.template}\n\t\t\t\t<Template template={item.template} />\n\t\t\t{:else if item.type}\n\t\t\t\t<Template template={item.type} />\n\t\t\t{/if}\n\t\t{/each}\n\t</Toolbar>\n</Material>\n","export const TaskID = 1;\nexport const ProjID = 2;\n//# sourceMappingURL=constants.js.map","const cantSendYet = Symbol();\nexport default class ActionQueue {\n    constructor() {\n        this._awaitAddingQueue = [];\n        this._queue = {};\n        this._idPool = {};\n        this._batchPull = {};\n        this._backId = [];\n        this.add = this.add.bind(this);\n    }\n    resolve(id, type) {\n        const col = this._backId[type];\n        if (typeof col === \"undefined\")\n            return id;\n        const tID = col[id];\n        return typeof tID === \"undefined\" ? id : tID;\n    }\n    add(action, data, proc) {\n        if (proc.debounce) {\n            const bid = data.batchID;\n            delete data.batchID;\n            const qid = `${action}\"/\"${bid || data.id}`;\n            if (bid) {\n                if (!this._batchPull[bid]) {\n                    this._batchPull[bid] = [];\n                }\n                this._batchPull[bid].push(data);\n            }\n            const item = this._queue[qid];\n            if (item) {\n                clearTimeout(item);\n            }\n            this._queue[qid] = setTimeout(() => {\n                const opbatch = this._batchPull[bid];\n                if (opbatch && opbatch.length > 1) {\n                    data = { opbatch };\n                }\n                this.add(action, data, { ...proc, debounce: false });\n            }, proc.debounce);\n            return;\n        }\n        const ready = this.tryExec(action, data, proc);\n        if (ready === null) {\n            //can't send data yet\n            this._awaitAddingQueue.push({ action, data, proc });\n        }\n        else {\n            ready.then((res) => {\n                if (res &&\n                    res.id &&\n                    res.id != data.id &&\n                    this.isTempID(data.id)) {\n                    this._idPool[data.id] = res.id;\n                    this.execQueue();\n                }\n            });\n        }\n    }\n    tryExec(action, data, proc) {\n        const ready = this.exec(action, data, proc);\n        if (ready === null) {\n            this._awaitAddingQueue.push({ action, data, proc });\n        }\n        else {\n            ready.then((res) => {\n                if (res &&\n                    res.id &&\n                    res.id != data.id &&\n                    this.isTempID(data.id)) {\n                    this._idPool[data.id] = res.id;\n                    if (proc.kind) {\n                        let t = this._backId[proc.kind];\n                        if (!t)\n                            t = this._backId[proc.kind] = {};\n                        t[res.id] = data.id;\n                    }\n                    this.execQueue();\n                }\n            });\n        }\n        return ready;\n    }\n    exec(action, data, proc) {\n        const correctData = this.correctID(data, proc.ignoreID ? data.id : null, proc.skipCorrect);\n        if (correctData === cantSendYet) {\n            return null;\n        }\n        return proc.handler(correctData, action, data);\n    }\n    isTempID(v) {\n        return (typeof v === \"string\" &&\n            v.length === 20 &&\n            parseInt(v.substr(7)) > 1e12); // new Date(2000,0)\n    }\n    correctID(obj, ignore, skipCorrect) {\n        let copy = null;\n        for (const key in obj) {\n            if (skipCorrect && skipCorrect.includes(key))\n                continue;\n            const test = obj[key];\n            if (typeof test === \"object\") {\n                const after = this.correctID(test, ignore, skipCorrect);\n                if (after !== test) {\n                    if (after === cantSendYet) {\n                        return cantSendYet;\n                    }\n                    if (copy === null) {\n                        copy = { ...obj };\n                    }\n                    copy[key] = after;\n                }\n            }\n            else if (test !== ignore && this.isTempID(test)) {\n                const hasRealID = this._idPool[test];\n                if (!hasRealID) {\n                    return cantSendYet;\n                }\n                if (copy === null) {\n                    copy = { ...obj };\n                }\n                copy[key] = hasRealID;\n            }\n        }\n        return copy || obj;\n    }\n    execQueue() {\n        this._awaitAddingQueue = this._awaitAddingQueue\n            .map(a => {\n            return this.tryExec(a.action, a.data, a.proc) ? null : a;\n        })\n            .filter(a => a !== null);\n    }\n    setID(tid, id, kind) {\n        this._idPool[tid] = id;\n        if (kind) {\n            let t = this._backId[kind];\n            if (!t)\n                t = this._backId[kind] = {};\n            t[id] = tid;\n        }\n    }\n}\n//# sourceMappingURL=ActionQueue.js.map","class t{constructor(t){const{url:e,token:s}=t;this._url=e,this._token=s,this._mode=1,this._seed=1,this._queue=[],this.data={},this.api={},this._events={}}headers(){return{Accept:\"application/json\",\"Content-Type\":\"application/json\",\"Remote-Token\":this._token}}fetch(t,e){const s={credentials:\"include\",headers:this.headers()};return e&&(s.method=\"POST\",s.body=e),fetch(t,s).then(t=>t.json())}load(t){return t&&(this._url=t),this.fetch(this._url).then(t=>this.parse(t))}parse(t){const{key:e,websocket:s}=t;e&&(this._token=t.key);for(const e in t.data)this.data[e]=t.data[e];for(const e in t.api){const s=this.api[e]={},i=t.api[e];for(const t in i)s[t]=this._wrapper(e+\".\"+t)}return s&&this.connect(),this}connect(){const t=this._socket;t&&(this._socket=null,t.onclose=function(){},t.close()),this._mode=2,this._socket=function(t,e,s,i){let n=e;\"/\"===n[0]&&(n=document.location.protocol+\"//\"+document.location.host+e);n=n.replace(/^http(s|):/,\"ws$1:\");const o=-1!=n.indexOf(\"?\")?\"&\":\"?\";n=`${n}${o}token=${s}&ws=1`;const r=new WebSocket(n);return r.onclose=()=>setTimeout(()=>t.connect(),2e3),r.onmessage=e=>{const s=JSON.parse(e.data);switch(s.action){case\"result\":t.result(s.body,[]);break;case\"event\":t.fire(s.body.name,s.body.value);break;case\"start\":i();break;default:t.onError(s.data)}},r}(this,this._url,this._token,()=>(this._mode=3,this._send(),this._resubscribe(),this))}_wrapper(t){return function(){const e=[].slice.call(arguments);let s=null;const i=new Promise((i,n)=>{s={data:{id:this._uid(),name:t,args:e},status:1,resolve:i,reject:n},this._queue.push(s)});return this.onCall(s,i),3===this._mode?this._send(s):setTimeout(()=>this._send(),1),i}.bind(this)}_uid(){return(this._seed++).toString()}_send(t){if(2==this._mode)return void setTimeout(()=>this._send(),100);const e=t?[t]:this._queue.filter(t=>1===t.status);if(!e.length)return;const s=e.map(t=>(t.status=2,t.data));3!==this._mode?this.fetch(this._url,JSON.stringify(s)).catch(t=>this.onError(t)).then(t=>this.result(t,s)):this._socket.send(JSON.stringify({action:\"call\",body:s}))}result(t,e){const s={};if(t)for(let e=0;e<t.length;e++)s[t[e].id]=t[e];else for(let t=0;t<e.length;t++)s[e[t].id]={id:e[t].id,error:\"Network Error\",data:null};for(let t=this._queue.length-1;t>=0;t--){const e=this._queue[t],i=s[e.data.id];i&&(this.onResponse(e,i),i.error?e.reject(i.error):e.resolve(i.data),this._queue.splice(t,1))}}on(t,e){const s=this._uid();let i=this._events[t];const n=!!i;return n||(i=this._events[t]=[]),i.push({id:s,handler:e}),n||3!=this._mode||this._socket.send(JSON.stringify({action:\"subscribe\",name:t})),{name:t,id:s}}_resubscribe(){if(3==this._mode)for(const t in this._events)this._socket.send(JSON.stringify({action:\"subscribe\",name:t}))}detach(t){if(!t){if(3==this._mode)for(const t in this._events)this._socket.send(JSON.stringify({action:\"unsubscribe\",key:t}));return void(this._events={})}const{id:e,name:s}=t,i=this._events[s];if(i){const t=i.filter(t=>t.id!=e);t.length?this._events[s]=t:(delete this._events[s],3==this._mode&&this._socket.send(JSON.stringify({action:\"unsubscribe\",name:s})))}}fire(t,e){const s=this._events[t];if(s)for(let t=0;t<s.length;t++)s[t].handler(e)}onError(t){return null}onCall(t,e){}onResponse(t,e){}}export{t as Client};\n//# sourceMappingURL=remote.es6.js.map\n","import { Client } from \"remote-client\";\nexport default class RemoteEvents {\n    constructor(url, token) {\n        const remote = new Client({\n            url,\n            token,\n        });\n        // temporary patch, as we do not want credentials\n        remote.fetch = function (url, body) {\n            const req = {\n                headers: this.headers(),\n            };\n            if (body) {\n                req.method = \"POST\";\n                req.body = body;\n            }\n            return fetch(url, req).then(res => res.json());\n        };\n        this._ready = remote.load().then(back => (this._remote = back));\n    }\n    ready() {\n        return this._ready;\n    }\n    on(name, handler) {\n        this.ready().then(back => {\n            if (typeof name === \"string\")\n                back.on(name, handler);\n            else {\n                for (const key in name) {\n                    back.on(key, name[key]);\n                }\n            }\n        });\n    }\n}\n//# sourceMappingURL=RemoteEvents.js.map","import { TaskID, ProjID } from \"./constants\";\nimport { EventBus } from \"@xbs/lib-state\";\nimport ActionQueue from \"./ActionQueue\";\nexport default class RestDataProvider extends EventBus {\n    constructor(url, api) {\n        super();\n        this._url = url;\n        this._api = api;\n        this._queue = new ActionQueue();\n        const defaultHandlers = {\n            \"add-task\": {\n                ignoreID: true,\n                kind: TaskID,\n                handler: (ev) => this.send(\"tasks\", \"POST\", ev),\n            },\n            \"update-task\": {\n                handler: (ev) => {\n                    ev.task.batch = this.toArray(ev?.batch);\n                    return this.send(`tasks/${ev.id}`, \"PUT\", ev.task);\n                },\n            },\n            \"delete-task\": {\n                handler: (ev) => this.send(`tasks/${ev.id}`, \"DELETE\"),\n            },\n            \"add-project\": {\n                kind: ProjID,\n                ignoreID: true,\n                handler: (ev) => this.send(`projects`, \"POST\", ev.project),\n            },\n            \"update-project\": {\n                handler: (ev) => this.send(`projects/${ev.id}`, \"PUT\", ev.project),\n            },\n            \"delete-project\": {\n                handler: (ev) => this.send(`projects/${ev.id}`, \"DELETE\"),\n            },\n            \"set-project\": {\n                handler: (ev) => this.send(`tasks/projects/${ev.id}`, \"GET\").then(data => {\n                    this._api.parse({\n                        tasks: data,\n                    });\n                    return Promise.resolve();\n                }),\n            },\n            \"move-task\": {\n                debounce: 300,\n                handler: (ev) => {\n                    if (ev.batch)\n                        ev.id = 0;\n                    return this.send(`move/${ev.id}`, \"PUT\", ev);\n                },\n            },\n            \"clone-task\": {\n                skipCorrect: [\"batch\"],\n                handler: (ev) => {\n                    return this.send(`clone`, \"POST\", ev).then(data => {\n                        const ids = data;\n                        for (let i = 0; i < ev.batch.length; i++) {\n                            const clientId = ev.batch[i].id;\n                            const serverId = ids[i];\n                            this._queue.setID(clientId, serverId, TaskID);\n                        }\n                    });\n                },\n            },\n            \"set-sort\": {\n                handler: (ev) => {\n                    const project = this._api.getState().activeProject;\n                    return this.send(`sort/${project}`, \"PUT\", ev);\n                },\n            },\n        };\n        const handlers = this.getHandlers(defaultHandlers);\n        for (const x in handlers) {\n            this.on(x, (ev) => {\n                if (!ev.skipProvider) {\n                    this._queue.add(x, ev, handlers[x]);\n                }\n            });\n        }\n    }\n    getTasks() {\n        return this.send(\"tasks\", \"GET\");\n    }\n    getProjectTasks(id) {\n        return this.send(\"tasks/projects/\" + id, \"GET\");\n    }\n    getUsers() {\n        return this.send(\"users\", \"GET\");\n    }\n    getProjects() {\n        return this.send(\"projects\", \"GET\");\n    }\n    getTags() {\n        return this.send(\"tags\", \"GET\");\n    }\n    setAPI(api) {\n        this._api = api;\n    }\n    setHeaders(headers) {\n        this._customHeaders = headers;\n    }\n    getIDResolver() {\n        return this._queue.resolve.bind(this._queue);\n    }\n    getHandlers(handlers) {\n        return handlers;\n    }\n    send(url, method, data, customHeaders = {}) {\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            ...customHeaders,\n            ...this._customHeaders,\n        };\n        const req = {\n            method,\n            headers,\n        };\n        if (data) {\n            req.body = typeof data === \"object\" ? JSON.stringify(data) : data;\n        }\n        return fetch(`${this._url}/${url}`, req).then(async (res) => {\n            if (res.status == 500) {\n                const text = await res.text();\n                return Promise.reject(text);\n            }\n            return await res.json();\n        });\n    }\n    toArray(data) {\n        if (!data)\n            return [];\n        if (Array.isArray(data)) {\n            return data;\n        }\n        return Object.values(data);\n    }\n}\n//# sourceMappingURL=RestDataProvider.js.map",null,null,"import { TaskID, ProjID } from \"./constants\";\nexport default function todoUpdates(api, resolver) {\n    function resolveTaskData(obj) {\n        if (!obj) {\n            return null;\n        }\n        for (const key in obj) {\n            if (typeof obj[key] == \"object\") {\n                resolveTaskData(obj[key]);\n                continue;\n            }\n            switch (key) {\n                case \"id\":\n                case \"targetId\":\n                case \"parent\":\n                    obj[key] = resolver(obj[key], TaskID) || null;\n                    break;\n                case \"project\":\n                    obj[key] = resolver(obj[key], ProjID) || null;\n                    break;\n            }\n        }\n        return obj;\n    }\n    function tasksUpdate(obj) {\n        resolveTaskData(obj);\n        const { id } = obj;\n        const { reverse, parent, project, targetId } = obj.data || {};\n        switch (obj.type) {\n            case \"add-task\":\n                api.exec(\"add-task\", {\n                    id,\n                    project,\n                    parent,\n                    targetId,\n                    reverse,\n                    task: { ...obj.data },\n                    skipProvider: true,\n                });\n                break;\n            case \"update-task\":\n                api.exec(\"update-task\", {\n                    id,\n                    task: { ...obj.data },\n                    skipProvider: true,\n                });\n                obj?.data?.batch?.forEach((task) => {\n                    api.exec(\"update-task\", {\n                        id: task.id,\n                        task,\n                        skipProvider: true,\n                    });\n                });\n                break;\n            case \"delete-task\":\n                api.exec(\"delete-task\", {\n                    id,\n                    skipProvider: true,\n                });\n                break;\n            case \"move-task\":\n                if (obj.data?.opbatch?.length) {\n                    obj.data.opbatch?.forEach((op) => {\n                        api.exec(\"move-task\", {\n                            ...op,\n                            skipProvider: true,\n                        });\n                    });\n                }\n                else if (obj?.data?.batch?.length) {\n                    obj.data.batch?.forEach((id) => {\n                        id = resolver(id, TaskID);\n                        api.exec(\"move-task\", {\n                            id,\n                            project,\n                            parent,\n                            targetId,\n                            reverse,\n                            skipProvider: true,\n                        });\n                    });\n                }\n                else {\n                    const { id } = obj.data;\n                    api.exec(\"move-task\", {\n                        id,\n                        project,\n                        parent,\n                        targetId,\n                        reverse,\n                        skipProvider: true,\n                    });\n                }\n                break;\n            case \"clone-task\":\n                for (let i = 0; i < obj?.data?.batch?.length; i++) {\n                    const task = obj.data.batch[i];\n                    if (i === 0) {\n                        api.exec(\"add-task\", {\n                            id: task.id,\n                            project,\n                            parent,\n                            targetId,\n                            task,\n                            reverse,\n                            skipProvider: true,\n                        });\n                    }\n                    else {\n                        api.exec(\"add-task\", {\n                            id: task.id,\n                            project,\n                            parent: task.parent,\n                            targetId: obj.data.batch[i - 1]?.id,\n                            task,\n                            skipProvider: true,\n                        });\n                    }\n                }\n                break;\n        }\n    }\n    function projectsUpdate(obj) {\n        const id = resolver(obj.data.id, ProjID);\n        switch (obj.type) {\n            case \"add-project\":\n                api.exec(\"add-project\", {\n                    id,\n                    project: {\n                        label: obj.data.label,\n                    },\n                    skipProvider: true,\n                });\n                break;\n            case \"update-project\":\n                api.exec(\"update-project\", {\n                    id,\n                    project: {\n                        label: obj.data.label,\n                    },\n                    skipProvider: true,\n                });\n                break;\n            case \"delete-project\":\n                api.exec(\"delete-project\", {\n                    id,\n                    skipProvider: true,\n                });\n                break;\n            case \"set-sort\":\n                obj.data.project = resolver(obj.data.project, ProjID);\n                if (api.getState().activeProject === obj.data.project) {\n                    // update order in case if active project is open\n                    const { by, dir } = obj.data;\n                    api.exec(\"set-sort\", {\n                        by,\n                        dir,\n                        tree: true,\n                        skipProvider: true,\n                    });\n                }\n                break;\n        }\n    }\n    return {\n        tasks: tasksUpdate,\n        projects: projectsUpdate,\n    };\n}\n//# sourceMappingURL=TodoUpdates.js.map"],"names":["locate","el","attr","node","tagName","target","getAttribute","parentNode","locateID","value","t","isNaN","id","delegateClick","handlers","lastClick","addEventListener","ev","parseInt","dataset","action","test","Date","valueOf","click","dblclick","clickOutside","callback","events","handleClick","event","contains","defaultPrevented","forEach","e","document","destroy","removeEventListener","isObject","a","Array","isArray","extend","b","key","from","locale","words","getGroup","group","block","getRaw","values","optional","this","data","noop","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","is_function","thing","safe_not_equal","subscribe","store","callbacks","unsub","unsubscribe","component_subscribe","component","$$","on_destroy","push","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","slice","get_slot_changes","dirty","lets","undefined","merged","len","Math","max","length","i","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","p","get_all_dirty_from_scope","exclude_internal_props","props","result","compute_rest_props","keys","rest","Set","has","null_to_empty","action_destroyer","action_result","append","appendChild","insert","anchor","insertBefore","detach","removeChild","destroy_each","iterations","detaching","d","element","name","createElement","text","createTextNode","space","empty","listen","handler","options","stop_propagation","stopPropagation","call","attribute","removeAttribute","setAttribute","set_data","wholeText","set_input_value","input","set_style","important","style","setProperty","toggle_class","toggle","classList","HtmlTag","constructor","n","c","html","h","m","nodeName","innerHTML","childNodes","current_component","set_current_component","get_current_component","Error","onMount","on_mount","afterUpdate","after_update","createEventDispatcher","type","detail","bubbles","createEvent","initCustomEvent","custom_event","setContext","context","set","getContext","get","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","add_flush_callback","flushing","seen_callbacks","flush","update","pop","add","clear","fragment","before_update","outroing","outros","group_outros","r","check_outros","transition_in","local","delete","transition_out","o","globals","window","globalThis","global","destroy_block","lookup","outro_and_destroy_block","update_keyed_each","old_blocks","get_key","dynamic","list","create_each_block","next","get_context","old_indexes","new_blocks","new_lookup","Map","deltas","child_ctx","abs","will_move","did_move","first","new_block","old_block","new_key","old_key","bind","index","bound","create_component","mount_component","customElement","new_on_destroy","map","filter","destroy_component","make_dirty","then","fill","init","instance","create_fragment","not_equal","append_styles","parent_component","on_disconnect","skip_bound","root","ready","ret","hydrate","nodes","children","l","intro","SvelteComponent","$destroy","$on","indexOf","splice","$set","$$props","obj","$$set","position","align","autoFit","cancel","width","nodeCoords","getBoundingClientRect","bodyCoords","body","right","bottom","monthNames","calendar","monthFull","month","year","label","date","prev","part","getMonth","getFullYear","start","day","css","in","isWeekEnd","getDay","current","markers","weekStart","weekdays","dayShort","concat","days","dv","dm","dd","getDate","ranges","selectDates","end","setDate","getStart","getEnd","curMonth","s","mark","done","months","monthShort","monthNum","selectMonths","setMonth","_","years","selectYears","setFullYear","y","buttons","types","Month","newCurrent","cancelMonth","Year","duodecade","Duodecade","selectDate","portal","theme","default","fonts","SLOTS","$$slots","ok","dayFull","hours","minutes","today","am","pm","timeFormat","en","core","todo","Show","Hide","Indent","Unindent","Duplicate","Copy","Paste","Delete","Enter","Tab","Search","High","Medium","Low","iid","uid","DataRouter","_setter","_routes","_parsers","_prev","_triggers","_sources","arr","out","_calckSize","cfg","parser","setState","updates","needExec","trgs","_execNext","sort","exec","sources","sizes","EventBus","_nextHandler","_handlers","on","resolvePromise","setNext","res","EventBusRouter","dispatch","_dispatch","isSameId","firstId","secondId","isDefined","some","isNull","findIndex","predicate","hasWhiteSpace","string","isMacintosh","navigator","userAgent","getCloneObject","clone","treeToFlatten","array","flatMap","userColors","priorityColors","defaultTaskShape","counter","format","validate","completed","behavior","taskHide","priority","cover","defaultDragConfig","expand","defaultPriorities","color","hotkey","getMatchStringRegExp","RegExp","String","raw","getMatchChar","char","compare","source","strict","regexp","match","toLowerCase","includes","treeFilter","object","item","by","checkItem","normalizeStructure","tasks","tree","task","parent","flattenToTree","normalizeTreeItem","taskShape","total","checked","getAvailableUsers","users","availableUsers","assigned","user","closeAllElements","menu","stateEditableItem","stateDueDate","stateCombo","getState","save","open","project","targetId","reverse","existsTask","state","activeProject","tasksMap","toString","creation_date","treeTasks","childrenMap","filteredChildrenMap","usersMap","tags","getInnerState","moveTask","silent","skipStateCalc","updateTask","join","copiedTasksId","copied","parents","getParentIds","getChildrenIds","pasteTask","selected","removeIds","removed","getTask","collapsed","skipProvider","manual","batch","hasChildren","getChildren","parentId","needMarkParent","every","completion_date","child","batchID","filtered","hideCompleted","getTreeIndex","operation","deselected","selectedId","existsProject","projects","locales","formatters","setFormatters","Number","check","v","TokenType","tokenizeFormat","tokens","currentSeparator","separator","datePart","dateToString","reduce","token","stringToDate","dateParts","dateFormat","formatter","sepratorIndex","isDate","unshift","priorities","firstSelected","at","dueDate","due_date","icon","getPriorityItems","getAvailableProjects","getTaskOptions","readonly","isHide","getToolbarOptions","extra","clicable","priorityItems","getMenuOptions","getNextTaskId","parentChildren","nextId","getNearId","flat","dir","moveToProject","projectId","taskId","addTask","newId","deleteSelectedTasks","nextSelect","eachSelected","pasteCopiedTasks","duplicateSelectedTasks","copySelectedTasks","indentSelectedTasks","unindentSelectedTasks","setPrioritySelectedTasks","actions","split","rootAction","menuAction","userId","getSelection","sorted","t1","task1","t2","moveSelectedToProject","htmlEscapes","code","replace","getTransformValue","transformValue","highlight","subString","toMarkValue","toTagValue","matchString","substring","toDateValue","getCountLabel","matchProjects","number","level","sortActionHandler","completedActionHandler","createProject","params","taskHandler","toolbarHandler","targetDate","getProject","initValue","currentValue","edited_date","dropdown","changedTouches","clientX","clientY","elementFromPoint","numId","getID","setCaretPosition","range","createRange","selection","textNode","textLength","textContent","carretPosition","setStart","collapse","removeAllRanges","addRange","setTimeout","focus","checkTask","rootParent","rootTasks","rootTaskIndex","nextTaskId","lastTaskId","moveSelectedTasksDown","moveTaskDown","moveSelectedTasksUp","moveTaskUp","stateSearch","isEditorOpen","lastSelected","selectNearTask","preventDefault","setArrowHandlers","uncheckSelectedTasks","checkSelectedTasks","taskKeyHandlers","lastSelect","childId","config","trim","search","mode","draggableIds","draggable","dragInfo","dropPosition","targetTask","reversed","drag","getSortItem","sortTasks","second","localeCompare","numeric","sortBy","DataStore","writable","_writable","_values","_state","_wrapWritable","getReactive","val","wr","super","_router","copyTask","deleteTask","expandTask","collapseTask","uncheckTask","indentTask","unindentTask","addProject","updateProject","setProject","deleteProject","showCompleted","selectTask","unselectTask","openMenu","closeMenu","clickItemMenu","assignUser","unassignUser","openInlineEditor","closeInlineEditor","editingItem","keypressOn","setFilter","setSort","setStateSearch","setStateDueDate","setStateCombo","dragStart","dragEnd","_setHandlers","initialState","defaultTags","priorityMap","parse","setPriorityMap","pull","serialize","normalizeData","startsWith","find","_setTasksMap","newTask","isExistsParent","isExistsTargetId","moveChildren","moveChildrenLengths","parentIndex","moveTasks","TChildren","TChildId","copy","copiedTask","copiedTasks","treeChildren","ids","getTailId","childrenIds","_getNextId","_getPrevId","rawData","getUsersMap","matches","matchAll","firstTreeId","sortedTasks","filteredChildren","setFilteredChildren","getFilteredChildren","handlersMap","allChilds","getTagsOptions","tag","changeLabelLocale","getDateLocales","pressedElem","api","handleDown","handleUp","menuId","isContextMenu","button","ctrlMode","ctrlKey","metaKey","shiftMode","shiftKey","setChildrenSelection","filtredTask","firstSelection","firstIndex","targetIndex","handleSelectAction","dragManager","dragCoords","scrollTimer","wrapper","captured","line","capturedId","pointerDown","touch","duration","timer","checkScroll","clearTimeout","shift","contentRect","scrollState","x","scrollLeft","scrollTop","getClientCoords","left","scrollTo","height","top","moveDragItem","getCurrentCoords","moveClone","underElement","setTarget","offset","getVerticalPositionType","setDroppedLine","removeDroppedLine","tRect","pageXOffset","pageYOffset","opacity","styles","getComputedStyle","paddingLeft","listLevel","levelOffset","heightOffset","parseFloat","widthOffset","SEP_HEIGHT","parenOffset","pRect","parentElement","SEP_OFFSET","setClone","JSON","stringify","downHandler","isCtrlMode","isShiftMode","isOpenEditor","touches","querySelector","up","move","rect","leftOffset","cloneNode","shiftX","shiftY","moveHandler","upHandler","altKey","startDrag","removeProperty","remove","coords","taskMenu","handleMenuAction","userMenu","userMenuId","tagFilter","listEditor","handleDblClick","keyNavigation","activeWidgetId","handleFocus","handleKeyDown","widgetId","getKeyCode","keyCode","isKey","isDigit","isNumpad","walkData","cb","prepareMenuData","getItemHandler","registerMenuItem","subtext","showSub","activeItem","pos","atBottom","atLeft","atFit","self","relativeTo","bodyRect","menuRect","fixLeft","dy","dxR","dxL","off","positionToParent","size","clickable","disabled","avatar","Item","UserItem","DatePicker","PriorityItem","offsetTop","offsetLeft","parentRect","scrollOffsetY","scrollOffsetX","circle","wrapperRect","popupRect","dx","convert","placeholder","shape","editor","editableValue","openCarretPosition","openDropdown","getRangeAt","getCaretCoords","scrollX","scrollY","closeDropdown","innerValue","nextChar","compareString","matchChar","caretPosition","setEnd","anchorNode","anchorOffset","getCaretPosition","prevChar","isTag","isDatePicker","_c","dropdownClose","getTime","now","diffNow","diffValue","isLastDate","round","listNode","userMenuNode","taskMenuNode","rDueDate","rEditor","rMenu","rFilter","rTags","rShape","rReadonly","rPriority","$rEditor","$rMenu","$rFilter","$rTags","$rShape","$rReadonly","$rDueDate","$rPriority","initialPadding","editorOpen","padding","isHideCompleted","rTreeTasks","rComponentId","atob","isValid","subscriber_queue","stop","subscribers","new_value","run_queue","subscriber","invalidate","cEN","dataStore","rStore","lastInRoute","lastRoute","getReactiveState","getStores","intercept","getApi","componentId","$menu","$activeProject","$search","$filter","$tags","editable","editing","enableRange","setNodeRange","searchResult","$dropdown","$editor","visibleProjects","$projects","$tasks","projectLabel","otherProjects","Events","_api","template","htmlString","$$restProps","items","cantSendYet","Symbol","ActionQueue","_awaitAddingQueue","_queue","_idPool","_batchPull","_backId","col","tID","proc","debounce","bid","qid","opbatch","tryExec","isTempID","execQueue","kind","correctData","correctID","ignoreID","skipCorrect","substr","ignore","after","hasRealID","setID","tid","url","_url","_token","_mode","_seed","_events","headers","Accept","fetch","credentials","method","json","load","websocket","_wrapper","connect","_socket","onclose","close","location","protocol","host","WebSocket","onmessage","fire","onError","_send","_resubscribe","arguments","_uid","args","status","reject","onCall","catch","send","error","onResponse","remote","Client","req","_ready","back","_remote","defaultHandlers","toArray","clientId","serverId","getHandlers","getTasks","getProjectTasks","getUsers","getProjects","getTags","setAPI","setHeaders","_customHeaders","getIDResolver","customHeaders","async","container","_init","destructor","_widget","setConfig","setLocale","showCompletedTasks","hideCompletedTasks","externalContext","SvelteToDo","_toolbar","SvelteToolbar","_configToProps","_normalizeItems","resolver","resolveTaskData","op"],"mappings":"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"}