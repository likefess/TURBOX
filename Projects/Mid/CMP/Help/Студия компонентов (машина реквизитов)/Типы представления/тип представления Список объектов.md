#Тип представления "Список объектов"

Как и любое представление объекта, представление "Список объектов" имеет собственные параметрические настройки. 

####Настройки картотеки

1.1 Настройки полей:
* В настройке "Класс записи" указывается класс записи (кнопка Выбор ![](topic:Com.AddFiles.Btn_select.png)), поля которого будут определяться и редактироваться при настройке данного типа представления. Если у представления указан некоторый класс записи, то данное представление можно использовать и для других классов, но никакой проверки корректности полей не будет производиться. Поэтому, если у класса записи не существует указанного в представлении поля, то ошибка обнаружится уже в процессе работы.
* Так как в карточке объекта представление "Список объектов" отображено в виде картотеки, то отображение столбцов этой картотеки можно настроить при помощи таблицы, в которой необходимо указать следующие параметры: 
    * Реквизит, по которому будет формироваться список объектов. Каждый из указанных реквизитов будет являться столбцом в картотеке списка объектов. Необходимый реквизит выбирается при помощи кнопки Выбор ![](topic:Com.AddFiles.Btn_select.png).
    * Название столбца данного реквизита. Указанный текст, будет отображаться в шапке столбца картотеки. При вводе реквизита, поле Название автоматически заполняется его заголовком, изменить необходимое название столбца вручную. 
    * Ширина. Опция задает ширину столбца картотеки. Ширина автоматически заполняется значением ширины, которая задана в настройках указанного реквизита, ее можно изменить вручную. 
    * Флаг "Выкл" - отключить видимость данного реквизита. Тем самым при просмотре данного представления, в "табличной" части документа не будет виден столбец, где установлен флаг. 
    * Строки в таблицу  добавляются/удаляются с помощью опции Добавить кадр/Удалить кадр в меню вызываемом по щелчку правой кнопки мыши или с помощью клавиш Ins/Del.
    * У каждого реквизита можно перекрыть умолчания, настроенные в его основных настройках, а для каждой надписи в документе настроить отображение. С помощью кнопки  ![](topic:Com.AddFiles.Buttons.Btn_setting.png) открывается форма Настройки внешнего вида:
        * задать реквизит.
        * указать Наименование вручную.
        * Условие видимости и Формула вывода заполняется с помощью "Редактора формул".
        * Ширина поля указывает, какой ширины будет выводимый реквизит, если реквизит имеет формат отображения кнопки, то, какой ширины будет поле кнопки. 
        * Заполнить "Выравнивание" с помощью выпадающего списка. При указании реквизита, можно задать отображение его в столбце картотеки: по центру, по левому краю, по правому краю. В соответствии с выбранным вариантом значение реквизита в столбце картотеки выравнивается. 
        * Поле "Сортировать" предоставляет возможность открывать картотеку объектов с уже заданной сортировкой по одному из столбцов. Порядок сортировки задается с помощью выпадающего списка.
        * Флаг "Сортировка запрещена".   Установка флага в данной настройке запрещает сортировку указанного столбца. Если реквизит связан с дополнительным полем, то не зависимо от того, установлен данный флаг или нет, сортировка столбца все равно будет запрещена. 
        * Флаг "Искать по разыменованию" - в установленном состоянии поиск по разыменованию ссылочного поля, отображаемому в столбце, иначе стандартный режим поиска.

1.2 Дополнительные настройки:

* Поле цвета иконки - заполняется из справочника Выбор поля класса записи (кнопка Выбор ![](topic:Com.AddFiles.Btn_select.png)).
* Флаг "Сохранять пользовательскую сортировку". Установка данного флага показывает, что сортировка, которую выбрал пользователь непосредственно в картотеке, сохранится. Другими словами, при последующих открытиях представления, будет отсортирован тот столбец, сортировку которого выбрал пользователь, а не та, что задана в данной настройке. 
* Флаг "Показывать иерархию" позволяет отображать документы в иерархическом виде слева от картотеки. При установке данного флага, появляются настройки: "Текст для корня дерева", "Описание группы из поля", "Группы не в начале".
* Флаг "Показывать итоги". Установка флага позволяет просматривать итоги числовых колонок. Итоги отображены последней строкой в картотеке списка объектов в строке со знаком "суммы". 
* Флаг "Группы не в начале" отображается в шаблоне при установке флага "Показывать иерархию" и управляет отображением групп в картотеке. Если флаг установлен, то в иерархическом дереве картотеки группы с записями будут отображены в порядке их добавления. Иначе - в начале дерева. 
* "Текст для корня дерева". Данная настройка отображается в шаблоне, только если флаг "Показывать иерархию" установлен, и позволяет ввести текст, который будет отображен в корне иерархического дерева. Если данную настройку оставить незаполненной, то по умолчанию, надпись в корне дерева для списка объектов определяется названием объекта "верхнего уровня". Если соответствующее поле в типе объекта не заполнено, то значение приравнивается к наименованию типа объекта - "Вся деятельность". Для других списков, значение по умолчанию определяется типом отображаемой записи (Ресурсы, Субъекты и т.п.) 
* "Описание группы из поля" - указывается поле записи выбранного класса записи, значение которого будет отображаться в дереве.
* Флаг "Расширенная настройка". Для того, чтобы задать расширенные настройки в представлении необходимо установить флаг "Расширенные настройки". Данный флаг отвечает за использование альтернативной иерархии в представлении "Список объектов". Если он установлен, то в настройках фильтрации представления появляются поля "Класса записи дерева" и "Реквизит "Текущая группа"": 
    * Класс записи дерева - указывается класс записи, унаследованный от класса Запись. Записи, выбранного класса, будут отображены в "альтернативной" иерархии. Само дерево иерархии будет располагаться по левому краю списка объектов. Если же в стандартных настройках представления установлен флаг "Показывать иерархию", то при отображении представления в карточке объекта, с левого края будет отображена "альтернативная" иерархия, затем иерархия списка объектов, затем сам список. 
    * Параметр "Реквизит "Текущая группа"" служит для выбора реквизита, в который будет записываться значение выбранной группы/элемента в дереве класса записи (кнопка Выбор ![](topic:Com.AddFiles.Btn_select.png)). Данный реквизит в последствии можно использовать для настройки фильтрации. 



**Примечание:** Предполагается, что введенные настройки настраиваются при первом запуске. Если же, в самой картотеке было что-то изменено, то в настройках этого представления не будут отображаться изменения, внесенные в картотеку непосредственно. 

1.3 Доступность команд.

Для запрета использования команды в картотеке необходимо установить флаг напротив необходимой команды:

* Установка флага "Запрещено добавление" запрещает добавлять запись в картотеку. 
* Запрещено добавлять группу. При установке данного флага, на панели кнопок картотеки не будет отображена кнопка, добавляющая группу. 
* Запрещено редактирование. Установка флага запрещает редактирование выбранной записи. 
* При установке флага "Запрещено дублирование" запрещено дублировать записи. 
* Запрещено изменять признак группы. При установке данного флага запрещено изменять признак группы, т.е.
* Запрещено удаление. Проставляя данный флаг запрещено удалять записи. 
* Скрыть панель кнопок. После установки флага, панель кнопок не будет отображена в представлении карточки бизнес-процесса. 

1.4 Подсказки для кнопок

Для добавления хинта к кнопке в картотеке необходимо вручную ввести его название в поле, расположенном напротив данной кнопки.


####Ограничения

2.1 Основные

Данная настройка позволяет настроить дополнительные параметры фильтрации списка объектов:

* Флаг "Отображать на верхнем уровне документы без позиций". Если флаг не установлен, то на верхнем уровне, при отсутствии дополнительного фильтра (на тип объекта, на тип движения или произвольного фильтра), отображаются только документы с позициями ("Позиции.Count > 0"). 
Если же флаг установлен, то на верхнем уровне будут отображены документы без позиций. 
* Настройка "Отображать документ, если" работает в двух режимах: 
    * Отображать документ, если дата записи внутри периода. Представление данного типа имеет собственный период с датой начала и датой окончания. Выбранный режим означает, что в картотеке списка объектов будут отображены, только те документы, выбранная дата которых попадает в промежуток между датой начала периода представления и датой его окончания. Дату можно выбрать из раскрывающегося списка, в котором отображены все поля класса записи Процесс. Данный режим доступен только, если в поле "Класс записи" указан - Процесс, для всех других классов режим недоступен. 
    * Вариант "Отображать документ, если он действует внутри периода" означает, что в картотеке будут отображены документы, период которых хоть как-то пересекается с периодом представления. 
* "Период ограничивает" - выбрать ограничение с помощью выпадающего списка: Дерево и картотеку/Только картотеку/Ничего.
* Поля, по которым будет фильтроваться список. Фильтры можно задавать на поля класса записи, указанного в настройках представления, следующим образом: 
    * В строке "Поле" можно выбрать поле, по которому будет фильтроваться список объектов. В выпадающем списке представлены поля записей, унаследованных от класса записи БазоваяСРеквизитом. При выборе поля можно указать, как поле шапки записи, так и поле подтаблицы. После чего, список документов отфильтруется по выбранному полю. 
    * Флаг "Строго". Этот флаг указывает, какой оператор - "is" или "=" - будет использован при формировании фильтра.
* Фильтр на тип документа. Устанавливая данный фильтр, в картотеке списка объектов будет выбран и отображен только тот тип документа, которой был указан. При нажатии на кнопку Выбор ![](topic:Com.AddFiles.Btn_select.png) открывается картотека "Типы объектов".
* Фильтр на тип движения. Аналогично "Фильтру на тип документа" можно установить фильтр и на тип движения. При нажатии на кнопку Выбор ![](topic:Com.AddFiles.Btn_select.png) открывается картотека "Тип движения", где можно выбрать движение, по которому будет формироваться фильтр. Указав необходимый тип движения, в картотеке списка объектов будет отображен только тот тип, который задали в фильтре. 
* В настройке "Произвольный фильтр" указывается произвольный фильтр на столбцы настраиваемой картотеки. Если в представлении используются расширенные настройки, то данная настройка будет выполняться для фильтрации по альтернативной иерархии. Задавая произвольный фильтр, можно ввести формулу вручную, а можно воспользоваться редактором формул. При вводе вручную, строка, которую ввели, не должна содержать синтаксических ошибок. Правила составления формул описаны в специальном разделе. 
* "Список групп" - настройка, в которой указываются группы, отображаемые в иерархии. Выбрать необходимую группу можно в диалоге "Ввод группы записей", который открывается по нажатию кнопки Выбор ![](topic:Com.AddFiles.Btn_select.png) в данном поле. 
* "Фильтр на дерево" - задает фильтр на указанный список групп иерархического дерева. Задать фильтр можно при помощи специального диалога "Редактор формул". 

**Примечание**: Задаваемые фильтры должны возвращать строку. Предполагается, что введенные настройки настраиваются при первом запуске. Если же, в самой картотеке было что-то изменено, то в настройках этого представления не будут отображаться изменения, внесенные в картотеку непосредственно. 


2.2 Параметрический фильтр

В таблице, которая позволяет отфильтровать реквизиты по определенным полям, аналогично "Произвольному фильтру". Строки таблицы объединяются по "И". В каждой строке таблицы определяются параметры, которые составляют фильтр: 
* В столбце "Поле" указывается поле записи, относительно которого будет формироваться фильтр. Нажатием на кнопку Выбор ![](topic:Com.AddFiles.Btn_select.png), открывается список полей записей, унаследованных от класса записи БазоваяСРеквизитом. 
* В поле "Знак" указывается знак фильтра между выбранным полем и реквизитом. Возможные знаки условия выбираются из выпадающего списка. В зависимости от типа поля каждый раз в выпадающем списке представлены различные знаки. Например, для ссылочного поля записи доступны только следующие знаки: "<>", "=" и "is" 
* В поле "Реквизит" указывается реквизит, на который будет накладываться фильтр. Реквизит выбирается с тем же типом значения, что и у поля записи. 
* Установка флага "Авто" автоматически обновляет фильтр при смене реквизита. 
* Флаг "Выкл" позволяет отключать одну из строк в фильтре. 

2.3 Внешний вид

Настройка внешнего вида аналогична настройке в форме [Представления](topic:.Студия компонентов (машина реквизитов).Представления).
