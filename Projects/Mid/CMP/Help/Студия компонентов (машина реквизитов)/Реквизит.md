#Реквизит

Реквизит - минимальная неделимая часть информации об объекте. С точки зрения пользователя реквизит - это интерфейсный элемент на экранной форме (поле ввода, флаг или кнопка), позволяющий просматривать или изменять значение соответствующего атрибута объекта. Примеры реквизитов: 
* номер документа 
* дата документа 
* название товара 
* имя валюты расчетов для бизнес-процесса (например, договора закупки) 

Реквизиты могут быть связаны с полями хранящихся в базе записей или динамически вычисляться по формулам. В первом случае реквизит называется хранимым, во втором - вычисляемым. Кроме того, с изменением реквизита может быть связано одно или более действий, описываемых настройщиком параметрически, с помощью специальных диалогов, или путем программирования в ТБ.Студии. Таким образом, реквизиты являются универсальным инструментом описания логики работы экранной формы объекта. 

Реквизиты заносятся в общую картотеку реквизитов. Каждый из них настраивается с помощью бланка-редактора. Затем реквизиты используются в произвольном сочетании в бланках объектов. Подробнее о включении реквизитов в экранные формы и их интерактивной обработке в теме настройке [Типа объекта](topic:.Студия компонентов (машина реквизитов).Тип объекта). 

**Путь:** Студия компонентов/Структура/Реквизиты

####Настройка реквизита

Для создания новой записи в картотеке реквизитов воспользуйтесь кнопкой Добавить ![](topic:Com.AddFiles.Btn_Add.png).

Настройка реквизита производится с помощью формы Реквизит, который вызывается из картотеки реквизитов по команде редактирования ![](topic:Com.AddFiles.Btn_Edit.png). 


1.В верхней части карточки реквизита находятся элементы для описания основных свойств реквизита: 
* Код - уникальное строковое значение, обозначающее реквизит в системе;
* Наименование - произвольная строка, которая будет являться названием реквизита, и отображаться в общей картотеке реквизитов;
* Класс реализации. Определяет поведение реквизита, его функциональность и набор дополнительных настроек. Класс реализации выбирается из списка имеющихся классов, который формируется программно на основе подключенных проектов.

При выборе класса реализации предоставляется доступ к настройкам реквизита соответствующего класса. Каждая настройка класса реализации реквизита отображается на закладке с соответствующим названием.
 Подробнее о специфических настройках каждого из [Класса реализации](topic:.Студия компонентов (машина реквизитов).Классы реализации.Default).
* Флаг *Табличный Реквизит* определяет, будет ли реквизит использоваться в шапке документа или в его табличной части. 
* Раскрывающийся список "Тип значения" позволяет выбрать тип значения реквизита из стандартного перечня. Тип значения реквизита определяет содержание реквизита, его суть. На данном этапе разработки программы доступны следующие типы: 

    * Произвольный тип значения позволяет использовать реквизит в любом назначении, будь то поле ввода или кнопка, связанная с сервисной процедурой; 
    * Тип значения Строка может быть использован для ввода или вывода информации в переменные строкового типа; 
    * Тип Целый используется для ввода или вывода целых переменных; 
    * Реквизит с типом Число аналогичен типу Целый, и используется для ввода или вывода числовых переменных; 
    * Тип значения Дата позволяет вводить и выводить переменные, являющиеся датой; 
    * Логический тип значения реквизита может быть связан с переменной логического типа. Часто реквизит этого типа представлен в виде флага; 
    * Реквизит с типом Перечислимый дает возможность пользователю выбрать необходимое значение из представленных. Может быть связан с переменной целого, логического или строкового типа данных, а также с вариантом строк, обозначающих альтернативы; 
    * Ссылочный тип значения реквизита используется для отображения значения некоторого поля из другой записи, заданного ссылкой на последний. 

В зависимости от сделанного выбора в нижней части формы могут добавляться дополнительные элементы управления. 

* Опция "Класс записи" позволяет настроить класс записи для данного реквизита. Установка определенного класса записи определяет принадлежность настраиваемого реквизита к объекту. Если у реквизита был указан некоторый класс записи, то совершенно не запрещено использовать его и для других классов, но никакой проверки корректности реквизитов (полей) не будет производиться. Поэтому, если у класса записи не существует указанного в реквизите поля, то ошибка обнаружится уже в процессе работы.

* Выпадающий список с вариантами позволяет определить, связан ли реквизит с полем (и с каким конкретно), связан ли с дополнительным полем или с переменной, либо вычисляется по формуле (по какой). В зависимости от выбранного варианта реквизит является хранимым или вычисляемым. Значение реквизита будет записываться программой в выбранный вариант, будь то поле записи, дополнительное поле, переменная или, если он будет вычисляться по формуле. 
    * Если реквизит связан с полем, в соседнем выпадающем списке можно выбрать одно из полей, из числа имеющихся в записи, которая была указана в поле "Класс записи". Причем, в зависимости от флага "Табличный реквизит", список полей содержит либо поля основной части записи, либо поля подтаблиц. 
При выборе поля, с которым будет связан настраиваемый реквизит, появляется настройка "Сохранять историю", позволяющая сохранять историю значения выбранного поля для данного реквизита. 
    * Если реквизит связан с дополнительным полем, то в соседнем поле ввода необходимо указать название дополнительного поля, не забывая предварить его буквой соответствующего типа значения реквизита. Например, если тип значения реквизита - Строка, то связывая его с доп.полем необходимо приписать перед названием самого дополнительного поля букву "C" или "S" - сИмя. 
    * Если реквизит связан с переменной, то в соседнем поле предоставляется возможность выбрать глобальную переменную, зарегистрированную в системе. 
    * Если же реквизит вычисляется по формуле, в соседнем поле ввода необходимо указать выражение, задающее правило вычисления реквизита. Ввод формулы производится в диалоге, вызываемом по нажатию кнопки обзора. Правила составления формул описаны в специальном разделе. 
* Выпадающий список выбора групповой обработки реквизитов содержит варианты: Является общим для, Является суммой для и Является умолчанием для (в том случае, если реквизит - не табличный) или Общим для него является, Суммой для него является и Умолчанием для него является (если реквизит используется в табличной части). 
* "Общим" называется реквизит, расположенный в шапке документа, который автоматически поддерживает свое значение равным на основе значений других зависимых реквизитов табличной части. Если значения зависимых реквизитов равны во всех позициях табличной части, это общее значение выводится в общем реквизите. В противном случае значение общего реквизита равно нулю (неопределенно). Кроме того, значение общего реквизита проставляется в зависимые реквизиты при вставке новой позиции в табличную часть. Иными словами, механизм общих реквизитов позволяет узнать обобщенное значение какого-либо поля табличной части документа и инициализировать поля в добавляемых строках. Для выбора общего реквизита используется поле справа от выпадающего списка. По нажатию в нем кнопки обзора открывается справочник реквизитов. Связь между общим реквизитом и зависимым может быть установлена как из бланка общего реквизита, так и из бланка соответствующего зависимого реквизита - в любом случае реквизиты ссылаются друг на друга. Для каждого табличного реквизита может быть выбран только один общий реквизит. Обратное также верно. 
* Реквизит, работающий как "сумма", также должен располагаться в шапке документа. Значение такого реквизита автоматически рассчитывается как сумма зависимого реквизита табличной части. Суммовой реквизит указывается в поле ввода справа от выпадающего списка. Связь между суммовым реквизитом и реквизитом, подлежащим суммированию, может быть установлена из бланка любого из этих двух реквизитов - в любом случае реквизиты ссылаются друг на друга. Для каждого табличного реквизита может быть выбран только один суммовой реквизит. Обратное также верно. 
* Реквизит, являющийся "умолчанием", также должен располагаться в шапке документа. Значение указанного реквизита будет являться умолчанием, при добавлении новой позиции в табличную часть документа. Однако при смене реквизита-умолчания, пользователю будет предоставлен выбор смены значения зависимых реквизитов в табличной части документа. Если, при смене реквизита, который является "умолчанием", нет необходимости менять все значения в табличной части, то значение зависимых реквизитов останутся прежними, а новое значение реквизита-умолчания будет использоваться только для новых строк. Иначе - все значения зависимых реквизитов будут изменены в позициях таблицы. Если в разных позициях таблицы зависимый реквизит имеет различные значения, то реквизит, являющийся "умолчанием", не обнуляется. Для выбора реквизита-умолчания используется поле справа от выпадающего списка. По нажатию в нем кнопки обзора открывается справочник реквизитов. Связь между реквизитом-умолчанием и зависимым может быть установлена как из бланка реквизита-умолчания, так и из бланка соответствующего зависимого реквизита - в любом случае реквизиты ссылаются друг на друга. Для каждого табличного реквизита может быть выбран только один реквизит, который будет являться умолчанием для него. Обратное также верно. 


2.Настройка, представленная в нижней части формы-редактора, отображаемая в виде закладки "Основное", отвечает за умолчания и за отображение реквизита в документе. 

2.1 **Ввод/Вывод** 

В данном разделе настраивается ввод и вывод реквизита в документе. Так как реквизит может быть представлен в виде кнопки, поля ввода или флага, то соответственно для каждого из них настраивается либо ввод, либо вывод. Тип значения реквизита определяет параметры, которые необходимо настроить: 
* Настройка "Формат/Формула вывода" позволяет настроить отображение реквизита в документе. Ее можно перекрыть аналогичной настройкой в представлениях. Настройка представлена в виде выпадающего списка из двух вариантов: 
    * "Формат вывода" доступен для реквизитов типа Целое, Число или Дата и позволяет настроить их отображение в определенном виде. По умолчанию в настройке отображена надпись "Стандартный", что значит стандартный формат отображения.
    * "Формула вывода" позволяет при помощи определенной формулы настроить вид отображения для любого типа реквизита. Используя редактор формул и функции, доступные в реквизитах можно составить необходимую формулу. 
* Настройка "Ввод даты" отображается только, если тип значения реквизита Дата, и позволяет указать вариант ввода даты в поле документа. Возможны следующие варианты: 
    * Только дата. Выбирая данный вид настройки, при вводе даты в поле документа, доступно будет ввести только дату в настроенном формате. 
    * Только время - позволяет ввести в поле документа время без даты. 
    * Дата и время - позволяет вводить в поле документа дату с точностью до указанного времени. 
* Настройка "Варианты строк" отображается при Перечислимом типе реквизита, и позволяет ввести нужные перечисляемые значения. Настройка может содержать две строки, если поле связано с логической переменной, или произвольное число строк, если в данное поле выводится переменная целого или строкового типа. При этом с каждой строкой из этого списка автоматически связывается значение переменной: при использовании логической переменной - это ЛОЖЬ для первой строки в списке и ИСТИНА для второй; в случае связи перечисляемого поля с целой или строковой переменной при выборе первого значения из списка в нее записывается 0, при выборе второго - 1 и т.д. 
Перечисляемые значения необходимо вводить в виде списка.
* Если типом значения реквизита был выбран "Ссылочный" тип, то появляются настройки "Картотека" и "Фильтр". В первой из них необходимо указать картотеку записей, на которую ссылается реквизит. Тогда, при использовании настраиваемого реквизита в документе, по нажатию на кнопку обзора в его поле будет открываться указанная картотека, и из нее нужно будет выбрать запись. А во второй - фильтр на указанную картотеку. Фильтр задается при помощи редактора формул и добавляется к ограничениям в типе объекта, с которым будет связан данный реквизит. 
* Еще одна настройка, отображаемая при ссылочном типе реквизита и, имеющая смысл при указании картотеки, это "Разрешить ручной ввод". При установке флага становится возможным вводить необходимую запись в поле реквизита вручную. Таким образом, после ввода значения в поле реквизита в документе, сервис будет искать его (значение) в картотеке. Режим поиска можно задать в настройке "Формат маски поиска" с раскрывающимся списком, которая появляется при установке флага. Варианты поиска значения в картотеки: 
    * "Искать внутри". При выборе данного варианта, поиск, введенного вручную значения, будет происходить по подстроке. Другими словами на картотеку будет накладываться фильтр: Match(Имя, "*введенное значение*") (подробнее про функцию Match можно узнать здесь). После чего в картотеке будут отображены записи, удовлетворяющие заданному фильтру. 
    * "Искать по началу" аналогичен варианту "Искать внутри", но фильтр на картотеку будет выглядеть следующим образом: Match(Имя, "введенное значение*"). Другими словами, в картотеке будут найдены записи, начальные символы которых удовлетворяют введенному значению. 
    * "Искать по окончанию". Фильтр, задаваемый на картотеку, будет выглядеть следующим образом: Match(Имя, "*введенное значение"). В картотеки будут искаться записи, у которых окончание в наименовании удовлетворяет введенному значению. 
    * "Искать по точному совпадению" позволяет производить поиск в картотеке точно по введенному значению. 

Стоит заметить, что настройка "Формат маски поиска" имеет смысл только для ссылочных реквизитов со строковым разыменованием, а также используется только как умолчание при настройке представления. Поэтому недостаточно изменить значение опции в реквизите, так как в представлениях все равно останется значение по умолчанию. 
* Выпадающий список "Доступен при закрытом замке" позволяет установить вариант доступности реквизита в документе при установленном замке последнего. Возможные варианты: 
    * "По умолчанию" определяет доступность реквизита, в зависимости от замка документа. Если он установлен в документе, то и данный реквизит, как и все остальные элементы документа не доступны, иначе - наоборот. 
    * "Доступен" - реквизит всегда будет доступен пользователю в независимости от того, замок установлен на сам документ или нет. 
    * "Не доступен" определяет настраиваемый реквизит как не доступный, если даже замок на документ не установлен. 

2.2 **Умолчания**

Опции в разделе "Умолчания" позволяют настроить умолчания для данного реквизита, которые можно перекрыть при использовании реквизита в других формах-редакторах (например, в бланках-редакторах представлений, типа объекта). К умолчаниям относятся следующие настройки:

* В случае, когда реквизит связан с полем, доп. полем или переменной добавляется настройка "Формула", позволяющая настроить формулу, по которой будет вычисляться реквизит. Формула вводится при помощи редактора формул и используется в пересчетах значения реквизита по событию (например, при изменении другого реквизита, при создании объекта и пр.). 

Остальные опции умолчания в основном необходимы при настройке представления и, которые там же могут перекрываться. 

* "Заголовок" - заполняется текстом, который будет отображаться при установке данного реквизита в документе. 
* "Подсказка" - заполняется текстом, который позволяет выводить подсказку в документе при подводе курсора мыши к данному реквизиту. 
* Настройка "Ширина надписи" имеет смысл только в случае использования данного реквизита в "шапочной" части документа. Другими словами, когда флаг "Табличный реквизит" не установлен. Таким образом, ширина надписи это и есть ширина заголовка, которая будет стоять перед самим реквизитом, поясняя его назначение. 
* Настройка "Ширина столбца" позволяет указать ширину поля самого реквизита. 
* Настройка "Разыменование" отображается в случае ссылочного реквизита и позволяет разыменовывать запись, указанную в настройке связан с полем. К примеру, запись ПроцессОткуда имеет смысл разыменовывать по полю Имя. 
* В поле "Комментарий" можно ввести произвольный комментарий по текущему реквизиту. 
* При установке флага *Кнопка обзора*, в поле настраиваемого реквизита появится кнопка обзора или выбора. Данный флаг имеет смысл, в случае, когда тип значения реквизита ссылочный или перечислимый. 
* Флаг *Не печатать* отвечает за отображение реквизита при печати документа. Если флаг установлен, реквизит не будет выводиться на печать. 
* Установка флага *Сворачивать строки* позволяет делать перенос по словам в поле реквизита. 
* В зависимости от принадлежности реквизита к шапке документа или к его табличной части, настройка "Сортировка" или "Многострочность". 
    * флаг *Многострочность* отвечает за многострочность поля реквизита в документе. 
    * Установка флага *Сортировка* позволяет сортировать столбец табличного реквизита. В этом случае, заголовок реквизита, который будет отображен в виде названия столбца, становится кнопкой, по нажатию на которую столбец в таблице сортируется. 


3.Для сохранения введенной информации нажмите на кнопку **Дополнительно** ![](topic:Integration.AddFiles.Buttons.Btn_OK.png) - **Записать** .

Для сохранения и выхода из настройки нажмите кнопку **ОК** ![](topic:Integration.AddFiles.Buttons.Btn_Post.png) , для выхода без сохранения -  **Отмена**![](topic:Integration.AddFiles.Buttons.BtnCloseCancel.png).

Для получения помощи воспользуйтесь кнопкой **Дополнительно** ![](topic:Integration.AddFiles.Buttons.Btn_OK.png) - **Помощь** или клавишей  **F1**.

