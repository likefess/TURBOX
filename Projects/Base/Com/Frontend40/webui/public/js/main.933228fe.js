"use strict";(self.webpackChunkturbo_frontend=self.webpackChunkturbo_frontend||[]).push([[179],{73477:function(sa,Wc,xe){var ws={i8:"10.5.0-63"},r=xe(67294),lo=xe(73935),gh=xe(79655),Xt=xe(86706),so=xe(91033),eD=xe(27562),tD=xe(32377),hh=xe(9669),bh=xe.n(hh),Ch=xe(82701),yh=xe(14670),Gn=xe.n(yh),Uc=xe(97234),Kn=xe(25935),_h=xe(20640),wh=xe.n(_h),Eh=xe(49546),Sh=Object.defineProperty,Ga=Object.getOwnPropertySymbols,Gc=Object.prototype.hasOwnProperty,Kc=Object.prototype.propertyIsEnumerable,qc=(t,e,n)=>e in t?Sh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Es=(t,e)=>{for(var n in e||(e={}))Gc.call(e,n)&&qc(t,n,e[n]);if(Ga)for(var n of Ga(e))Kc.call(e,n)&&qc(t,n,e[n]);return t},Ss=(t,e)=>{var n={};for(var o in t)Gc.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Ga)for(var o of Ga(t))e.indexOf(o)<0&&Kc.call(t,o)&&(n[o]=t[o]);return n};const Zc="SystemBase.Cmd.RoleCenter",io={AUTHORIZED:"authorized",URL_PARAMS:"urlParams"};function Ka(t,e="GUID",n){if(t&&t instanceof Object){let o=t.name||Gn().generate();n!=null&&n.length&&(o=Za([...n,o])),t[e]=o}return t}function qa(t,e,n="GUID",o){return t&&Array.isArray(t)&&t.length&&t.forEach(a=>{if(Ka(a,n,o),e){const l=a.hasOwnProperty(e)&&a[e];Array.isArray(l)&&l.length&&qa(l,e,n,o)}}),t}function Za(t){let e="";return t!=null&&t.length&&(e=t.reduceRight((n,o)=>o?`${o.trim().replaceAll(" ","-")}${n?"_"+n:""}`:n,e)),e}function Yc(t="/icons/"){let e=window.location.href,n=e.split(":")[0]+"://",o="/"+e.split("/")[3];return(o==="/webui"||o==="/#")&&(o=""),n+window.location.host+o+t}function Ft(t){return t?Yc()+t:""}const Ps=t=>t?t.includes("http")?t:window.location.origin+t:"";function Ph(t){return t?Yc("/webui/")+t:""}function Xc(t="",e=80,n=`
`,o=!1,a=2){let l=e;if(l>>>=0,l===0||t.length<=l)return t;let i=t.split(`
`).map(s=>{if(s.length<=l)return s;let c=s.split(" ");if(o){let d=[];for(const f of c)if(f.length>l){let p=0;const g=f.length;for(;p<g;)d.push(f.slice(p,Math.min(p+l,g))),p+=l}else d.push(f);c=d}let u=c.shift(),m=l-u.length;for(const d of c)d.length+1>m?(u+=n+d,m=l-d.length):(u+=" "+d,m-=1+d.length);return u}).join(`
`).split(`
`);if(i.length>a){i.splice(a,i.length);let s=i.length-1;i[s].length>l-3&&(i[s]=i[s].slice(0,-3)),i.push("...")}return i=i.join(`
`),i}function Jc(t){let e=new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"),n=document.cookie.match(e);return n?decodeURIComponent(n[1]):void 0}function Qc(t,e,n){let o=n||{},a=o.expires,l=new Date,i,s,c;typeof a=="number"&&a&&(l.setTime(l.getTime()+a*1e3),a=o.expires=l),a&&a.toUTCString&&(o.expires=a.toUTCString()),c=t+"="+encodeURIComponent(e);for(i in o)o.hasOwnProperty(i)&&(c+="; "+i,s=o[i],s!==!0&&(c+="="+s));document.cookie=c}function nD(t){Qc(t,"",{path:"/",expires:-1})}const Is="authToken";function Os(){return sessionStorage.getItem(Is)||null}function eu(){sessionStorage.removeItem(Is)}function tu(t){sessionStorage.setItem(Is,t)}function Ih(){return window.navigator.language.substr(3).toLowerCase()||"ru"}function nu(){return Jc("language")||Ih()}function Oh(t,e){e&&typeof e=="string"&&(document.title=e)}function Ya(t=[]){if(!t.length)return!0;const e=(0,Ch.detect)();return t.indexOf(e.name)!==-1}function rD(t,e){const n=e.getBoundingClientRect(),o=t.getBoundingClientRect();return n.top>=o.top&&n.left>=o.left&&n.bottom<=o.bottom&&n.right<=o.right}function ru(){document.querySelectorAll("iframe").forEach(t=>{const e=t.style.pointerEvents;t.style.pointerEvents="none",window.addEventListener("mouseup",()=>{t.style.pointerEvents=e},{once:!0})})}function ou({rowId:t,rowControlId:e,tableControlId:n,controlId:o,formId:a}){return n?e?document.querySelector(`[id="${o}-${e}-${n}"]`):t?document.querySelector(`[id="${o}-${t}-${n}"]`):document.querySelector(`[id="${o}-serviceRow-${n}"]`):a?document.querySelector(`[id="${a}"] [data-name="${o}"]`):document.querySelector(`[data-name="${o}"]`)}function au(t){const e={state:{}};return Object.keys(t).forEach(n=>{n!=="formStack"&&(e[n]=t[n])}),e.action==="autoComplete"?(delete e.state,delete e.action,e):(e.hasOwnProperty("value")&&(e.state[e.controlId]=e.value),delete e.value,e)}const co=t=>Array.isArray(t)?t:[t];function uo({source:t,iterationKey:e,searchKey:n,searchValue:o}){var a;if(!t||!e||!n||!o)return null;if(Array.isArray(t))return t.map(l=>uo({source:l,iterationKey:e,searchKey:n,searchValue:o})).reduce((l,i)=>i||l,null);if(t[n]===o)return t;if((a=t[e])!=null&&a.length)return t[e].reduce(function(l,i){return l||uo({source:i,iterationKey:e,searchKey:n,searchValue:o})},null)}function pt(t){return Number.isFinite(t)?Math.ceil(parseFloat(t)*4):t||null}function sn(t){let e=pt(t);return Number.isFinite(e)&&(e+="px"),e}function oD(t,e){let n={minWidth:0,width:0,maxWidth:0};if(e){const o=e,{width:a,minWidth:l,maxWidth:i,height:s,flexGrow:c}=o,u=Ss(o,["width","minWidth","maxWidth","height","flexGrow"]),m=a||c;if(n=Es({},u),t){const d=sn(m);n.minWidth=d,n.width=d,n.maxWidth=d}else n.flexGrow=m,n.width=null,n.minWidth=sn(l),n.maxWidth=sn(i);e.hasOwnProperty("height")&&(n.height=Number.isFinite(s)?sn(s):s)}return n}function Pn({isFixSize:t,style:e,type:n}){const o=e||{},{minWidth:a,width:l,maxWidth:i}=o,s=Ss(o,["minWidth","width","maxWidth"]),c=1;if(a||l||i){let u="initial";if(t&&l){const m=l-c;!m&&["string","enum","date","number"].includes(n)&&(s.borderLeft="none",s.borderRight="none",s.paddingLeft=0,s.paddingRight=0),u=sn(m)}else t||(u="auto");!t&&l&&a&&l<=a?s.minWidth=u:s.minWidth=a?sn(a-c):u,s.width=u,s.maxWidth=i&&t?sn(i-c):u}return s}function kh(t){const{minWidth:e,width:n,maxWidth:o}=t,a={};return e&&(a.minWidth=pt(e)),n&&(a.width=pt(n)),a.maxWidth=o===0?"initial":pt(o),Es(Es({},t),a)}function Rh(t){if(!t)return[{},{}];const e=t,{width:n,minWidth:o,maxWidth:a,height:l,minHeight:i,maxHeight:s}=e,c=Ss(e,["width","minWidth","maxWidth","height","minHeight","maxHeight"]);return[{width:n,minWidth:o,maxWidth:a,height:l,minHeight:i,maxHeight:s},c]}function xh(t,e){const n={};return t.forEach(o=>{n[o[e]]=o}),n}function To(t,e,n,o){var a;const l=t.findIndex(u=>u[e]===n);if(l===-1)return null;const i=l===0,s=l===t.length-1;let c=l;return o===1&&!s?c+=1:o===-1&&!i&&(c-=1),((a=t[c])==null?void 0:a[e])||null}function Nh(t){var e;const n=((e=localStorage.getItem("enteredLogins"))==null?void 0:e.split(","))||[];n.includes(t)||(n.push(t),localStorage.setItem("enteredLogins",n.join(",")))}function lu(){var t;return(((t=localStorage.getItem("enteredLogins"))==null?void 0:t.split(","))||[]).map((e,n)=>({key:String(n),value:e}))}function aD(t){var e;const n=((e=localStorage.getItem("enteredExpressions"))==null?void 0:e.split(","))||[];n.includes(t)||(n.push(t),localStorage.setItem("enteredExpressions",n.join(",")))}function lD(){var t;return(((t=localStorage.getItem("enteredExpressions"))==null?void 0:t.split(","))||[]).map((e,n)=>({key:String(n),value:e}))}function Dh(){return Jc("debug")==="true"}function ks(t){const e=[];function n(o){o.forEach(a=>{var l,i;a.expandDirection==="prev"?((l=a.branches)!=null&&l.length&&a.isExpanded&&n(a.branches),a.nodes?n(a.nodes):e.push(a)):(a.nodes?n(a.nodes):e.push(a),(i=a.branches)!=null&&i.length&&a.isExpanded&&n(a.branches))})}return n(t),e}function su(t,e){const n=[];return n.push(t==null?void 0:t.nodeId),!(t!=null&&t.elements)||!e.includes(t.nodeId)||t.elements.forEach(o=>{n.push(...su(o,e))}),n}function Rs(t,e){if(t.nodeId===e)return t;if(t.elements){let n=null;for(let o=0;n===null&&o<t.elements.length;o++)n=Rs(t.elements[o],e);return n}return null}const Xa=t=>{const e=(0,Uc.Z)(t),n=e.getFormat();let o=null;const a={hsv:e.toHsv(),hsl:e.toHsl(),rgb:e.toRgb()};return n==="hex"&&(o=e.getOriginalInput().trim()),(n==="hsl"||n==="hsv")&&(a.hsl.h=t.h),o&&(o==null?void 0:o.length)===3?a.hex=o:a.hex=e.toHex(),a},Mh=t=>(0,Uc.Z)(t).toHex(),iu=t=>t&&(0,Kn.ZP)(t==null?void 0:t.replace(/(\r\n|\n|\r)/gm,"<br />")),Th=t=>{var e;if(t&&t.length<1)return"";const n=t.find(o=>{var a;return((a=o==null?void 0:o.props.children)==null?void 0:a.length)>0});return n?n==null?void 0:n.props.name:(e=t[0].props)==null?void 0:e.name},cu=({activeNodeOffsetTop:t,visibleRangeMin:e,visibleRangeMax:n,cellHeight:o,parentNodeScrollTop:a,step:l})=>{let i=Math.abs(a);return t>=e&&t+o<=n||(t<n&&t+o>=n?i=i+t+o-n+l:t<e&&t+o>=e?i=i-(e-t)-l:i=t),i},uu=t=>{wh()(t)},Ah=t=>{sessionStorage.setItem("clipboard",JSON.stringify(t))},Fh=()=>{const t=sessionStorage.getItem("clipboard")?sessionStorage.getItem("clipboard"):JSON.stringify({});return JSON.parse(t)},sD=t=>{const[,e]=t.split("%");return`*(${e}/100)`},du=t=>!!(t!=null&&t.find(e=>{var n;return((n=e==null?void 0:e.props)==null?void 0:n.type)==="img"})),Bh=(t,e={format:"dateAndTime"})=>{let n="dd.MM.yyyy";switch(e.format){case"dateAndTime":n="dd.MM.yyyy HH:mm:ss";break;case"timeOnly":n="HH:mm:ss";break;case"dateOnly":default:n="dd.MM.yyyy";break}const o=new Date(t);return o instanceof Date&&!isNaN(o)?(0,Eh.Z)(new Date(t),n):null},iD=(t,e,n)=>{const o=n;switch(t){case"down":return o+1>e?e:o+1;case"up":return o-1<0?0:o-1;default:return o}},Ar=t=>{const e=document.getElementById("favicon");e.type=t.slice(-3)==="svg"?"image/svg+xml":"image/x-icon",e.href=t},mo={deprecated:"deprecated",noType:"noType"},ia=(t,e)=>{let n="";e===mo.deprecated?n=`A deprecated element "${t.type}" is here!`:e===mo.noType&&(n="An element without type is here!"),console.warn(n,t)},fo=(t,e)=>{var n;return(n=t.actions)!=null&&n.includes(e)?e:null},zh=t=>t?t.reduce((e,n)=>{let{name:o,title:a,hint:l,hidden:i,iconName:s}=n;return i!==void 0&&(s=i?"":"Com/Attachment/Icons/CheckActive.svg"),o==="---"?e.push({type:"separator"}):e.push({name:o,hint:l,caption:a,iconName:s}),e},[]):[],mu=t=>{if(t.length<2)return t;t.sort((o,a)=>o[0]-a[0]);const e=[];let n=t[0];for(let o=1;o<t.length;o+=1)n[1]>=t[o][0]?n=[n[0],Math.max(n[1],t[o][1])]:(e.push(n),n=t[o]);return e.push(n),e},Lh=t=>JSON.parse(localStorage.getItem(t)),fu=(t,e)=>localStorage.setItem(t,JSON.stringify(e)),xs=()=>Lh(io.AUTHORIZED),Ns=t=>fu(io.AUTHORIZED,t),$h=()=>localStorage.removeItem(io.URL_PARAMS),Hh=t=>fu(io.URL_PARAMS,t);var Bt=(t,e,n)=>new Promise((o,a)=>{var l=c=>{try{s(n.next(c))}catch(u){a(u)}},i=c=>{try{s(n.throw(c))}catch(u){a(u)}},s=c=>c.done?o(c.value):Promise.resolve(c.value).then(l,i);s((n=n.apply(t,e)).next())});function jh(t){const e={Accept:"application/json",["Content-Type"]:"application/json"};return t&&(e.sessionID=Os()),e}function $t({restUrl:t,params:e,withSessionId:n}){const o=jh(n),a="../api/xcom";return bh().post(a+t,e,{headers:o})}function Vh(t){return Bt(this,null,function*(){return yield $t({restUrl:"/userauth/login",withSessionId:!1,params:t})})}function Wh(t){return Bt(this,null,function*(){return yield $t({restUrl:"/userauth/logout",withSessionId:!0,params:t})})}function Uh(t){return Bt(this,null,function*(){return yield $t({restUrl:"/view/getAppState",withSessionId:!0,params:t})})}function pu(t){return Bt(this,null,function*(){return yield $t({restUrl:"/view/setActiveStack",withSessionId:!0,params:t})})}function Gh(t){return Bt(this,null,function*(){return yield $t({restUrl:"/view/getForm",withSessionId:!0,params:t})})}function Kh(){return Bt(this,null,function*(){return yield $t({restUrl:"/view/ping",withSessionId:!0})})}function qh(t){return Bt(this,null,function*(){return yield $t({restUrl:"/iframe/click",withSessionId:!0,params:t})})}function Zh(t){return Bt(this,null,function*(){return yield $t({restUrl:"/iframe/message",withSessionId:!0,params:t})})}function Yh(t){return Bt(this,null,function*(){return yield $t({restUrl:"/view/sendAction",withSessionId:!0,params:t})})}function Xh(t){return Bt(this,null,function*(){return yield $t({restUrl:"/view/headerCtxMenu",withSessionId:!0,params:t})})}function Jh(t){return Bt(this,null,function*(){return yield $t({restUrl:"/view/autocomplete",withSessionId:!0,params:t})})}function Qh(t){return Bt(this,null,function*(){return yield $t({restUrl:"/view/getHint",withSessionId:!0,params:t})})}function eb(t){return Bt(this,null,function*(){return yield $t({restUrl:"/view/changeSpoiler",withSessionId:!0,params:t})})}function vu(){return Bt(this,null,function*(){return yield $t({restUrl:"/view/getUserRole",withSessionId:!0})})}function tb(t){return Bt(this,null,function*(){return yield $t({restUrl:"/view/setUserRole",withSessionId:!0,params:t})})}function nb(t){return Bt(this,null,function*(){return yield $t({restUrl:"/userauth/setPassword",withSessionId:!1,params:t})})}function rb(){return Bt(this,null,function*(){const t=yield $t({restUrl:"/view/getMenu",withSessionId:!0});return qa(t.data.elements,"elements"),t})}function ob(){return Bt(this,null,function*(){const t=yield $t({restUrl:"/view/getToolbar",withSessionId:!0});return qa(t.data.elements,"elements"),t})}function ab(t){return Bt(this,arguments,function*({commandName:e,controlId:n,advanced:o}){const a={commandName:e,controlId:n};return o&&(a.advanced=o),yield $t({restUrl:"/view/command",withSessionId:!0,params:a})})}function lb(){return Bt(this,null,function*(){return yield $t({restUrl:"/userauth/preLogin",withSessionId:!1})})}function sb(){return Bt(this,null,function*(){var t;const{data:{languages:e,app:n}}=yield lb();let o=nu();return e&&e.find(l=>l.code===o)||(o=(t=e[0])==null?void 0:t.code),{languages:{serverLanguages:e,webUiLanguage:o},app:n}})}function ib(t){return Bt(this,null,function*(){return yield $t({restUrl:"/view/chooseColor",withSessionId:!0,params:t})})}var xn=xe(97779),cb=Object.defineProperty,gu=Object.getOwnPropertySymbols,ub=Object.prototype.hasOwnProperty,db=Object.prototype.propertyIsEnumerable,hu=(t,e,n)=>e in t?cb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dr=(t,e)=>{for(var n in e||(e={}))ub.call(e,n)&&hu(t,n,e[n]);if(gu)for(var n of gu(e))db.call(e,n)&&hu(t,n,e[n]);return t};function mb(t){const e=dr({},t);return!e.type&&!e.nodeId&&(e.orientation==="tabs"?(ia(e,mo.noType),e.type="tabs"):(ia(e,mo.noType),e.type="frame"),e.orientation=e.orientation||"vertical"),e.type==="shortlist"&&(ia(e,mo.deprecated),e.type="enum"),(e.autocomplete||e.isAutocomplete)&&["string","number","integer"].includes(e.type)&&(e.type="enum",e.isSwitchedToEnum=!0),e.type==="hLayout"&&(ia(e,mo.deprecated),e.type="group",e.behavior="horizontal"),e.type==="vLayout"&&(ia(e,mo.deprecated),e.type="group",e.behavior="vertical"),e.showReferenceButton!==void 0&&(e.showButton=e.showReferenceButton,delete e.showReferenceButton),e.type==="html"&&e.html&&(e.type="simpleHtml",e.value=e.html,delete e.html),e}function Ut(t){var e;const n=dr({},t);return n.hasOwnProperty("action")&&(n.actions=[...n.action],delete n.action),n.hasOwnProperty("iconname")&&(n.iconName=n.iconname,delete n.iconname),n.hasOwnProperty("iconsize")&&(n.iconSize=n.iconsize,delete n.iconsize),n.hasOwnProperty("icon")&&(n.iconName=n.icon,delete n.icon),n.hasOwnProperty("autocomplete")&&(n.isAutocomplete=!!n.autocomplete,delete n.autocomplete),n.hasOwnProperty("spellcheck")&&(n.isSpellCheck=!!n.spellcheck,delete n.spellcheck),n.hasOwnProperty("required")&&(n.isRequired=!!n.required,delete n.required),n.hasOwnProperty("forceUpdate")&&(n.needForceUpdate=!!n.forceUpdate,delete n.forceUpdate),n.hasOwnProperty("expansible")&&(n.isExpansible=!!n.expansible,delete n.expansible),n.hasOwnProperty("collapsible")&&(n.isCollapsible=!!n.collapsible,delete n.collapsible),n.hasOwnProperty("wrap")&&(n.isWrapped=!!n.wrap,delete n.wrap),n.hasOwnProperty("multiline")&&(n.isMultiLine=!!n.multiline,delete n.multiline),n.hasOwnProperty("inplaceEditEnabled")&&(n.isInPlaceEdit=!!n.inplaceEditEnabled,delete n.inplaceEditEnabled),n.hasOwnProperty("isFixed")&&(n.isFixSize=!!n.isFixed,delete n.isFixed),n.hasOwnProperty("nodeId")&&((e=n.content)!=null&&e.hasOwnProperty("text")&&(n.caption=n.content.text),delete n.content),n.hasOwnProperty("isFlexible")&&(n.isAdaptive=!!n.isFlexible,delete n.isFlexible),n.hasOwnProperty("hidden")&&(n.isExcluded=!!n.hidden,delete n.hidden),n.hasOwnProperty("disabled")&&(n.isDisabled=!!n.disabled),delete n.disabled,n.hasOwnProperty("autoLock")&&(n.isAutoLock=!!n.autoLock,delete n.autoLock),n.style=n.style?dr({},n.style):{},n.hasOwnProperty("width")&&(n.style.width=n.width,delete n.width),n.hasOwnProperty("minWidth")&&(n.style.minWidth=n.minWidth,delete n.minWidth),n.hasOwnProperty("maxWidth")&&(n.style.maxWidth=n.maxWidth,delete n.maxWidth),n.hasOwnProperty("backgroundColor")&&(n.style.backgroundColor=n.backgroundColor,delete n.backgroundColor),n.hasOwnProperty("color")&&(n.style.color=n.color,delete n.color),n.hasOwnProperty("fontFamily")&&(n.style.fontFamily=n.fontFamily,delete n.fontFamily),n.hasOwnProperty("fontSize")&&(n.style.fontSize=n.fontSize,delete n.fontSize),n.hasOwnProperty("fontStyle")&&(n.style.fontStyle=n.fontStyle,delete n.fontStyle),n.hasOwnProperty("fontWeight")&&(n.style.fontWeight=n.fontWeight,delete n.fontWeight),n}function ca(t){const e=dr({},t),n=e.container||e.control||e.commands||e.children||e.nodes;return n&&(e.elements=n,delete e.container,delete e.control,delete e.commands,delete e.children,delete e.nodes),e}function fb(t){const e=dr({},t);return!e.hasOwnProperty("elements")&&e.hasOwnProperty("collapsible")&&(e.collapsible||(e.isSeparator=!0),delete e.collapsible),e.hasOwnProperty("name")&&(e.id=e.name,delete e.name),e}function Ds(t){const e=dr({},t);return e.hasOwnProperty("title")&&!e.hasOwnProperty("caption")&&(e.caption=e.title,delete e.title),e}function cD(t){function e(a){return compose(Ds,Ut,ca)(a)}const n=dr({},t);let o;return o=e(n),o.elements&&(o.elements=o.elements.map(a=>e(a))),o}function pb(t){var e,n;function o(i){const s=dr({},i);return s.hasOwnProperty("isIssueList")&&(s.isCardFile=!!s.isIssueList,delete s.isIssueList),s.hasOwnProperty("rowCount")&&(s.displayRowCount=Number.parseInt(s.rowCount,10),delete s.rowCount),s.hasOwnProperty("summary")&&(s.summaryRowCount=s.summary,delete s.summary),s.hasOwnProperty("showHierarchyNavigation")&&(s.showHierarchyButton=s.showHierarchyNavigation,delete s.showHierarchyNavigation),s.hasOwnProperty("isTopLevel")&&(s.showHierarchyButton=s.showHierarchyButton&&!s.isTopLevel,delete s.isTopLevel),s.hasOwnProperty("headers")&&(s.headersSchema=s.headers,delete s.headers),s.hasOwnProperty("headersData")&&(s.headersEntities=s.headersData,delete s.headersData),s.hasOwnProperty("selectedRows")&&(s.selectedRowIds=s.selectedRows,delete s.selectedRows),s}function a(i){return(0,xn.qC)(o,Ut,ca)(i)}const l=a(t);if((e=l.elements)!=null&&e.length){const i=s=>(s.type==="group"&&s.hasOwnProperty("elements")&&(s.elements=s.elements.map(c=>i(c))),(0,xn.qC)(Ds,Ut,ca)(s));l.contextMenuElements=l.elements.map(i),delete l.elements}return(n=l.rows)!=null&&n.length&&(l.rows=l.rows[0].map(i=>(i!=null&&i.elements&&(i.elements=Ut(i.elements)),Ut(i)))),l}function bu(t){function e(o){return(0,xn.qC)(Ut,ca)(o)}const n=e(t);return n.elements&&(n.elements=n.elements.map(bu)),n}function vb(t){return t.hasOwnProperty("isCollapsed")||(t.isCollapsed=!0),t}function gb(t){function e(o){var a;return(a=o==null?void 0:o.elements)!=null&&a.length?(o.type="listButton",o.elements=o.elements.map(l=>e(l))):o.type="button",(0,xn.qC)(Ut)(o)}const n=t.data.elements;return n&&(t.data.elements=n.map(e)),t}function hb(t){function e(o){var a;return(a=o==null?void 0:o.elements)!=null&&a.length&&(o.elements=o.elements.map(l=>e(l))),(0,xn.qC)(Ut,fb)(o)}const n=t.data.elements;return n&&(t.data.elements=n.map(e)),t}function bb(t){const e=dr({},t),n=a=>a&&Array.isArray(a)?a.some(l=>{var i;return l.type==="grid"&&((i=l.rows)==null?void 0:i.length)>60||l.type==="table"&&l.rowCount>60||n(l.elements)}):!1,o=a=>{a.autoSize=!1,a._autoSize=!0,a.elements.forEach(l=>{(l.type==="grid"||l.type==="table")&&(a.hasGrid=!0),l.autoSize=!0,n(l.elements)&&o(l)})};return e.autoSize&&n(e.elements)&&o(e),e}function Cu(t,e){const n=dr({},t);let o;return n.type==="tree"?o=bu(n):n.type==="button"?o=(0,xn.qC)(e,Ds)(n):n.type==="table"?o=pb(n):n.type==="menuBar"||n.type==="roleCenter"||n.type==="chart"?o=Ut(n):n.type==="box"?o=(0,xn.qC)(e,vb)(n):n.type==="frame"?o=(0,xn.qC)(e,bb)(n):o=e(n),o.elements&&(o.elements=o.elements.map(a=>Cu(a,e))),o}function ua(t){function e(o){return(0,xn.qC)(Ut,mb,ca)(o)}return co(t).map(o=>Cu(o,e))[0]}var qn=(t,e,n)=>new Promise((o,a)=>{var l=c=>{try{s(n.next(c))}catch(u){a(u)}},i=c=>{try{s(n.throw(c))}catch(u){a(u)}},s=c=>c.done?o(c.value):Promise.resolve(c.value).then(l,i);s((n=n.apply(t,e)).next())});function yu(t){return qn(this,null,function*(){var e;const n=yield Yh(t);return((e=n==null?void 0:n.data)==null?void 0:e.result)||console.warn("\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442 \u0432 renamings/sendAction"),n})}function uD(t){return qn(this,null,function*(){var e;const n=yield api.getCtxMenu(t);return((e=n==null?void 0:n.data)==null?void 0:e.result)||console.warn("\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442 \u0432 renamings/getHeaderCtxMenu"),n})}function Cb(t){return qn(this,null,function*(){var e;const n=yield ab(t);return((e=n==null?void 0:n.data)==null?void 0:e.result)||console.warn("\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442 \u0432 renamings/sendCommand"),n})}function yb(t){return qn(this,null,function*(){var e;const n=yield Uh(t);return((e=n==null?void 0:n.data)==null?void 0:e.result)||console.warn("\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442 \u0432 renamings/getAppState"),n})}function _u(t){return qn(this,null,function*(){const e=yield ob(t);return gb(e)})}function _b(t){return qn(this,null,function*(){return yield vu(t)})}function dD(t){return qn(this,null,function*(){return yield api.setUserRole(t)})}function wu(t){return qn(this,null,function*(){const e=yield rb(t);return hb(e)})}function Eu(){return qn(this,null,function*(){const[t,e]=yield Promise.all([wu(),_u()]);return{menuData:t.data,toolbarData:e.data}})}function wb(t){return qn(this,null,function*(){return yield eb(t)})}function Eb(t){return qn(this,null,function*(){return yield Gh(t)})}const Ja=[400,401,402,403,404,405,406],Sb=[500,501,502,503,504];function da(t){return t instanceof Error||t instanceof Object?!!t.response:!1}const Ao=t=>da(t)?Ja.includes(t.response.status):!1,Qa=t=>da(t)?Sb.includes(t.response.status):!1;function Pb(t){return da(t)?t.response.data:null}function Fr(t){const e=Pb(t);if(e){let n=e.errorMessage||"";return!n&&typeof e===String.name.toLowerCase()&&(n=e),n}return""}function Ms(t){return da(t)?Number.parseInt(t.response.status,10):NaN}const Su="isMainMenuOpened",Pu="isMainMenuPinned";function Iu(t,e){if(typeof t!==e)throw new TypeError(`\u041E\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044F \u0430\u0440\u0433\u0443\u043C\u0435\u043D\u0442 \u0442\u0438\u043F: ${e}`);return!0}function Ou(t,e){sessionStorage.setItem(t,e)}function ku(t){return sessionStorage.getItem(t)}function Ru(t){Iu(t,"boolean"),Ou(Su,t)}function xu(t){Iu(t,"boolean"),Ou(Pu,t)}function Ts(){return JSON.parse(ku(Su))}function As(){return JSON.parse(ku(Pu))}function Ib(){const t=!!As();Ru(t&&!!Ts()),xu(t)}function Ob(){return{isOpened:Ts(),isPinned:As()}}var ma={initState:Ib,getState:Ob,setOpened:Ru,setPinned:xu,isOpened:Ts,isPinned:As},kb=xe(94184),me=xe.n(kb),el=xe(99768),Rb=xe(45697),v=xe.n(Rb),xb=xe(75980),wt=xe.n(xb),Pe=xe(24268);const Fs=(0,Pe.PH)("PRE_LOGIN_DATA/set"),fa=(0,Pe.PH)("MENU_DATA/set"),Fo=(0,Pe.PH)("APP_STATE/reset"),Bs=(0,Pe.PH)("APP_STATE/init"),tl=(0,Pe.PH)("SET_SELECTED_MENU_ITEM_ID"),nl=(0,Pe.PH)("SET_PRINT_STATUS"),Nu=(0,Pe.PH)("VERSION/set"),po=(0,Pe.PH)("ADD_FORM_STACK_TO_QUEUE"),zs=(0,Pe.PH)("PROCESS_INDICATOR/show"),Ls=(0,Pe.PH)("PROCESS_INDICATOR/hide"),$s=(0,Pe.PH)("LOGIN/success"),vo=(0,Pe.PH)("LOGIN/failed"),Hs=(0,Pe.PH)("LOGOUT/success"),Nb=(0,Pe.PH)("LOGOUT/failed"),js=(0,Pe.PH)("PING_PONG/start_request"),Du=(0,Pe.PH)("PING_PONG/stop_request"),rl=(0,Pe.PH)("SET_TOOLBAR_DATA"),Mu=(0,Pe.PH)("PROCESS/add"),Tu=(0,Pe.PH)("PROCESS/remove"),Vs=(0,Pe.PH)("AUTOCOMPLETE/request"),Ws=(0,Pe.PH)("AUTOCOMPLETE/immediately"),Us=(0,Pe.PH)("AUTOCOMPLETE/reset"),Au=(0,Pe.PH)("FORM/get"),go=(0,Pe.PH)("FORM/update"),Gs=(0,Pe.PH)("FORM/delete"),Zn=(0,Pe.PH)("FORM/element_event"),Fu=(0,Pe.PH)("FORM/resize"),Bu=(0,Pe.PH)("TABLE_HEADER/resize"),zu=(0,Pe.PH)("UPLOAD_FORM/open"),Lu=(0,Pe.PH)("UPLOAD_FORM/close"),$u=(0,Pe.PH)("COLOR_PICKER_FORM/open"),Hu=(0,Pe.PH)("COLOR_PICKER_FORM/close"),ju=(0,Pe.PH)("MODAL_POP_UP/remove"),pa=(0,Pe.PH)("SERVER_ERROR/add"),ol=(0,Pe.PH)("CLIENT_ERROR/add"),Vu=(0,Pe.PH)("ERROR/add"),Wu=(0,Pe.PH)("SERVER_NOTIFICATION/add"),al=(0,Pe.PH)("CLIENT_DIALOG/add"),ll=(0,Pe.PH)("CLIENT_DIALOG/submit"),Uu=(0,Pe.PH)("IMAGE_PREVIEW/add"),sl=(0,Pe.PH)("TEMPORARY_FORM_ID/add"),Gu=(0,Pe.PH)("LAST_FOCUSED_ELEMENT/set"),Ks=(0,Pe.PH)("LAST_FOCUSED_ELEMENT/update"),Ku=(0,Pe.PH)("IFRAME/click"),qu=(0,Pe.PH)("IFRAME/message"),qs=(0,Pe.PH)("SCRIPTED"),Zu=(0,Pe.PH)("SAVE_DATA/frame"),Yu=(0,Pe.PH)("SAVE_DATA/report"),Zs=(0,Pe.PH)("ON_HINT"),Xu=(0,Pe.PH)("REMINDERS/set"),va=(0,Pe.PH)("WORKERS/set"),Ju=(0,Pe.PH)("WORKSPACE/set_first_render"),Qu=(0,Pe.PH)("PAGE_ZOOM/set"),ed=(0,Pe.PH)("HEADER_CTX_MENU/show"),td=(0,Pe.PH)("HEADER_CTX_MENU/close"),nd=(0,Pe.PH)("MAIN_MENU/pin"),Ys=(0,Pe.PH)("MAIN_MENU/open"),rd=(0,Pe.PH)("MAIN_MENU/choose_item"),Xs=(0,Pe.PH)("CHOOSE_TOOLBAR_ITEM"),od=(0,Pe.PH)("CHOOSE_ROLE_CENTER_ITEM"),Js=(0,Pe.PH)("FORM/close"),ad=(0,Pe.PH)("FORMS/close_all"),ld=(0,Pe.PH)("FORMS/close_others"),sd=(0,Pe.PH)("MODAL_FORM/close"),id=(0,Pe.PH)("FORM/toggle"),cd=(0,Pe.PH)("FORM_STACK/toggle"),ud=(0,Pe.PH)("FORM_WIDE_SCREEN_MODE/toggle"),dd=(0,Pe.PH)("LOGIN/request"),ga=(0,Pe.PH)("LOGOUT/request"),Qs=(0,Pe.PH)("CHANGE_LANGUAGE"),md=(0,Pe.PH)("UPLOAD/approve"),fd=(0,Pe.PH)("UPLOAD/abort"),pd=(0,Pe.PH)("COLOR_PICKER/choose_color"),vd=(0,Pe.PH)("COLOR_PICKER/cancel"),gd=(0,Pe.PH)("FORM/raise");var Db=Object.defineProperty,Mb=Object.defineProperties,Tb=Object.getOwnPropertyDescriptors,hd=Object.getOwnPropertySymbols,Ab=Object.prototype.hasOwnProperty,Fb=Object.prototype.propertyIsEnumerable,bd=(t,e,n)=>e in t?Db(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vt=(t,e)=>{for(var n in e||(e={}))Ab.call(e,n)&&bd(t,n,e[n]);if(hd)for(var n of hd(e))Fb.call(e,n)&&bd(t,n,e[n]);return t},kt=(t,e)=>Mb(t,Tb(e));const Cd="Turbo X.WEB:",ha={version:Cd,languages:{serverLanguages:null,webUiLanguage:null},app:{},menu:{isOpened:!1,isPinned:!1,selectedItemId:null},toolbar:{},processCounter:0,showProcessIndicator:!1,lastFocusedElement:null,workspace:{isFirstRender:!0}};var Bb=(0,Pe.Lq)(ha,t=>{t.addCase(sl,(e,n)=>kt(vt({},e),{temporaryFormId:n.payload})).addCase(Nu,(e,n)=>kt(vt({},e),{version:`${Cd}  ${n.payload}`})).addCase(Fs,(e,n)=>n.payload.app&&Object.keys(n.payload).length===1?kt(vt({},e),{app:vt(vt({},e.app),n.payload.app)}):vt(vt({},e),n.payload)).addCase(Qs,(e,n)=>kt(vt({},e),{languages:kt(vt({},e.languages),{webUiLanguage:n.payload.webUiLanguage})})).addCase(fa,(e,n)=>kt(vt({},e),{menu:vt(vt({},e.menu),n.payload.menu)})).addCase(rl,(e,n)=>kt(vt({},e),{toolbar:n.payload})).addCase(Xu,(e,n)=>{e.reminders=n.payload}).addCase(va,(e,n)=>kt(vt({},e),{workers:n.payload})).addCase(nd,(e,n)=>kt(vt({},e),{menu:kt(vt({},e.menu),{isPinned:n.payload})})).addCase(Ys,(e,n)=>kt(vt({},e),{menu:kt(vt({},e.menu),{isOpened:n.payload})})).addCase(Fo,e=>kt(vt({},e),{menu:kt(vt({},e.menu),{leftBarHide:ha.menu.leftBarHide,elements:ha.menu.elements}),workspace:ha.workspace,userDropdownMenu:ha.userDropdownMenu})).addCase(tl,(e,n)=>kt(vt({},e),{menu:kt(vt({},e.menu),{selectedItemId:n.payload})})).addCase(Mu,e=>kt(vt({},e),{processCounter:e.processCounter+1})).addCase(Tu,e=>kt(vt({},e),{processCounter:e.processCounter===0?0:e.processCounter-1})).addCase(zs,e=>kt(vt({},e),{showProcessIndicator:!0})).addCase(Ls,e=>kt(vt({},e),{showProcessIndicator:!1})).addCase(Gu,(e,n)=>kt(vt({},e),{lastFocusedElement:n.payload})).addCase(Ks,(e,n)=>kt(vt({},e),{lastFocusedElement:n.payload})).addCase(Ju,(e,n)=>kt(vt({},e),{workspace:{isFirstRender:n.payload}})).addCase(Qu,(e,n)=>kt(vt({},e),{pageZoom:n.payload}))}),zb=Object.defineProperty,Lb=Object.defineProperties,$b=Object.getOwnPropertyDescriptors,yd=Object.getOwnPropertySymbols,Hb=Object.prototype.hasOwnProperty,jb=Object.prototype.propertyIsEnumerable,_d=(t,e,n)=>e in t?zb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ei=(t,e)=>{for(var n in e||(e={}))Hb.call(e,n)&&_d(t,n,e[n]);if(yd)for(var n of yd(e))jb.call(e,n)&&_d(t,n,e[n]);return t},Vb=(t,e)=>Lb(t,$b(e));const wd={isUserIntoTab:!1,isSessionExist:!1,isError:!1,errorMessage:"",roleName:null,userName:null};var Wb=(0,Pe.Lq)(wd,t=>{t.addCase($s,(e,n)=>Vb(ei({},e),{isUserIntoTab:n.payload.isUserIntoTab,userName:n.payload.userName,roleName:n.payload.roleName})).addCase(vo,(e,n)=>ei(ei({},e),n.payload)).addCase(Hs,()=>wd)});const Ed=[];var Ub=(0,Pe.Lq)(Ed,t=>{t.addCase(po,(e,n)=>[n.payload,...e]).addCase(Gs,(e,n)=>e.filter(o=>o!==n.payload)).addCase(Fo,()=>Ed)}),Fn=xe(12902),Gb=Object.defineProperty,Kb=Object.defineProperties,qb=Object.getOwnPropertyDescriptors,Sd=Object.getOwnPropertySymbols,Zb=Object.prototype.hasOwnProperty,Yb=Object.prototype.propertyIsEnumerable,Pd=(t,e,n)=>e in t?Gb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ho=(t,e)=>{for(var n in e||(e={}))Zb.call(e,n)&&Pd(t,n,e[n]);if(Sd)for(var n of Sd(e))Yb.call(e,n)&&Pd(t,n,e[n]);return t},Id=(t,e)=>Kb(t,qb(e));const Od={0:{commandName:Zc,formId:"0",formStackId:"0",formName:"",openMode:"new"}};var Xb=(0,Pe.Lq)(Od,t=>{t.addCase(qs,(e,n)=>{const{formId:o,controlId:a,value:l,content:i}=n.payload;return e[o]?(0,Fn.ZP)(e,s=>{var c,u;const m=(u=(c=s[o])==null?void 0:c.entities)==null?void 0:u.html;l&&(m!=null&&m[a])&&!(m!=null&&m[a].initialScripts)&&(m[a].initialScripts=l),m!=null&&m[a]?s[o].entities.html[a]=Id(ho({},m[a]),{scriptValues:l,content:i}):m?s[o].entities.html[a]={name:a,scriptValues:l,content:i}:s[o].entities.html={[a]:{name:a,scriptValues:l,content:i}}}):e}).addCase(Zu,(e,n)=>{const{formId:o,controlId:a,data:l}=n.payload;return e[o]?(0,Fn.ZP)(e,i=>{i[o].entities.frame[a]=ho(ho({},i[o].entities.frame[a]),l)}):e}).addCase(Yu,(e,n)=>{const{formId:o,controlId:a,data:l}=n.payload;return e[o]?(0,Fn.ZP)(e,i=>{i[o].entities.report[a]=ho(ho({},i[o].entities.report[a]),l)}):e}).addCase(go,(e,n)=>{const{formId:o}=n.payload;return Id(ho({},e),{[o]:n.payload})}).addCase(Gs,(e,n)=>{const o=n.payload,a=ho({},e);return delete a[o],a}).addCase(Fo,()=>Od)});const ti=null;var Jb=(0,Pe.Lq)(ti,t=>{t.addCase(zu,(e,n)=>n.payload).addCase(Lu,()=>ti).addCase(Fo,()=>ti)}),Qb=Object.defineProperty,kd=Object.getOwnPropertySymbols,eC=Object.prototype.hasOwnProperty,tC=Object.prototype.propertyIsEnumerable,Rd=(t,e,n)=>e in t?Qb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xd=(t,e)=>{for(var n in e||(e={}))eC.call(e,n)&&Rd(t,n,e[n]);if(kd)for(var n of kd(e))tC.call(e,n)&&Rd(t,n,e[n]);return t};const nC={needToPrint:!1,serviceURL:null};var rC=(0,Pe.Lq)(nC,t=>{t.addCase(nl,(e,n)=>xd(xd({},e),n.payload))}),oC=xe.p+"images/Help.svg",aC=xe.p+"images/System.svg",lC=xe.p+"images/Error.svg",sC=xe.p+"images/Warning.svg",iC=xe.p+"images/Information.svg",cC=xe(54483),Nd=xe.n(cC),uC=Object.defineProperty,dC=Object.defineProperties,mC=Object.getOwnPropertyDescriptors,il=Object.getOwnPropertySymbols,Dd=Object.prototype.hasOwnProperty,Md=Object.prototype.propertyIsEnumerable,Td=(t,e,n)=>e in t?uC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mr=(t,e)=>{for(var n in e||(e={}))Dd.call(e,n)&&Td(t,n,e[n]);if(il)for(var n of il(e))Md.call(e,n)&&Td(t,n,e[n]);return t},bo=(t,e)=>dC(t,mC(e)),ni=(t,e)=>{var n={};for(var o in t)Dd.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&il)for(var o of il(t))e.indexOf(o)<0&&Md.call(t,o)&&(n[o]=t[o]);return n},ba=(t,e,n)=>new Promise((o,a)=>{var l=c=>{try{s(n.next(c))}catch(u){a(u)}},i=c=>{try{s(n.throw(c))}catch(u){a(u)}},s=c=>c.done?o(c.value):Promise.resolve(c.value).then(l,i);s((n=n.apply(t,e)).next())}),le={onAutoComplete:t=>ba(void 0,null,function*(){const{value:e,args:n,listValues:o}=t;return yield ze.dispatch(Vs(bo(mr({},n),{listValues:o,value:e}))),!0}),onImmediatelyAutoComplete:t=>ba(void 0,null,function*(){const{value:e,args:n,metaSet:o}=t;return o!=null&&o.isOpenList||(yield ze.dispatch(Ws(bo(mr({},n),{value:e})))),!0}),onResetAutocompleteValues:t=>(ze.dispatch(Us(t)),!0),onFormControlEvent:t=>{const{args:e,value:n,notValidValue:o,href:a}=t,l=mr({},e);return n!==void 0&&(l.value=n),o&&(l.notValidValue=o),a&&(l.href=a),ze.dispatch(Zn(l)),!0},checkEditableValidation:t=>{const{args:e}=t,n=bo(mr({},e),{action:"onEdit"});return ze.dispatch(Zn(n)),!0},onTableCellControlAction:t=>ba(void 0,null,function*(){var e,n,o;const{args:a,value:l}=t,{formId:i,formName:s,controlId:c,type:u,action:m}=a,d=l,{targetRowId:f,targetColumnId:p}=d,g=ni(d,["targetRowId","targetColumnId"]),w={formId:i,formName:s,type:u,controlId:c,value:mr({},g)},h=((o=(e=w.value)==null?void 0:e.controlEvents)==null?void 0:o[(n=w.value)==null?void 0:n.eventType])||m;return h==="onResetAutocompleteValues"?yield ze.dispatch(Us(w)):h==="onImmediatelyAutoComplete"?yield ze.dispatch(Ws(w)):h==="autoComplete"?yield ze.dispatch(Vs(w)):h==="onHint"?ze.dispatch(Zs(w)):yield ze.dispatch(Zn(w)),!0}),onGridCellEvent:t=>ba(void 0,null,function*(){const{args:e,value:n}=t,{formId:o,formName:a,controlId:l,type:i}=e,s=n,{rowId:c,columnId:u}=s,m=ni(s,["rowId","columnId"]),d={formId:o,formName:a,type:i,controlId:l,value:mr({},m)};return c!==void 0&&(d.value.rowId=c),u!==void 0&&(d.value.columnId=u),yield ze.dispatch(Zn(d)),!0}),onCanvasGridCellEvent:t=>ba(void 0,null,function*(){const{args:e,value:n}=t,o=e,{formId:a,formName:l,controlId:i,type:s,action:c,isModal:u}=o,m=ni(o,["formId","formName","controlId","type","action","isModal"]),d={formId:a,formName:l,type:s,action:c,controlId:i,value:n};return yield ze.dispatch(Zn(d)),!0}),onReportHierarchyClick:t=>{const{args:e,value:n}=t;ze.dispatch(Zn(bo(mr({},e),{value:{cellInfo:n}})))},onReportCellSelect:t=>{const{args:e,value:n}=t;ze.dispatch(Zn(bo(mr({},e),{value:{selectedCellId:n}})))},onDataPointSelect:t=>{const{args:e,value:n}=t;ze.dispatch(Zn(bo(mr({},e),{value:n})))},onFormResize:t=>{ze.dispatch(Fu(t))},onTableHeaderResize:t=>{ze.dispatch(Bu(t))},onSaveContentIframe:t=>{const{content:e,args:n,value:o}=t;ze.dispatch(qs({content:e,value:o,formId:n.formId,controlId:n.controlId}))},onSaveDataFrame:({args:t,data:e})=>{const{formId:n,controlId:o}=t;ze.dispatch(Zu({formId:n,controlId:o,data:e}))},onSaveDataReport:({args:t,data:e})=>{const{formId:n,controlId:o}=t;ze.dispatch(Yu({formId:n,controlId:o,data:e}))},onHintControl:({args:t})=>{ze.dispatch(Zs(t))},onAutolock:({args:t})=>{ze.dispatch(Zn(t))},onHeaderCtxMenu:({event:t,args:e,value:n})=>{ze.dispatch(ed(bo(mr({},e),{event:t,value:n})))},onCloseHeaderCtxMenu:({args:t})=>{ze.dispatch(td(t))}};const zt={default:"default",active:"active",editable:"editable"};function yD(t){return t===zt.default}function _D(t){return t===zt.active}function wD(t){return t===zt.editable}function Bo(t=zt.default,e){const n=(0,r.useRef)(null),o=e||n,[a,l]=(0,r.useState)(t||zt.default),i=(0,r.useRef)({setDefaultMode:()=>{},setActiveMode:()=>{},setEditableMode:()=>{},checkDefaultMode:()=>{},checkActiveMode:()=>{},checkEditableMode:()=>{}});(0,r.useImperativeHandle)(o,()=>i.current);const s=(0,r.useCallback)(()=>{l(zt.default)},[]),c=(0,r.useCallback)(()=>{l(zt.active)},[]),u=(0,r.useCallback)(()=>{l(zt.editable)},[]),m=(0,r.useCallback)(()=>a===zt.default,[a]),d=(0,r.useCallback)(()=>a===zt.active,[a]),f=(0,r.useCallback)(()=>a===zt.editable,[a]);return i.current={setDefaultMode:s,setActiveMode:c,setEditableMode:u,setMode:l,checkDefaultMode:m,checkActiveMode:d,checkEditableMode:f},[a,i.current]}const fC=t=>{const e=t==null?void 0:t.current;if(e){const n=e.clientWidth;return e.scrollWidth>=n}};var Sr=(t,e=null,n,o=!1,a=!1)=>{const l=(0,r.useCallback)(()=>{t!=null&&t.current&&(e?t.current.title=e:fC(t)?t.current.title=a?t.current.value:t.current.innerText:t.current.title="")},[n,e,a]);(0,r.useEffect)(()=>{o||l()},[n,e,o]),(0,r.useEffect)(()=>{if(t!=null&&t.current){const i=new so.Z(l);return i.observe(t==null?void 0:t.current),()=>{t!=null&&t.current&&i.unobserve(t==null?void 0:t.current)}}},[l])};function Br(t,e){let n=-1;if(t){const o=parseInt(e,10);n=isNaN(o)?0:o}return n}const pC=8,vC=9,gC=13,hC=16,bC=17,CC=27,yC=32,_C=33,wC=34,EC=35,SC=36,Ad=37,Fd=38,Bd=39,zd=40,PC=46,IC=65,OC=t=>t===bC,SD=t=>t===hC,kC=t=>t,zo=t=>t===vC,Bn=t=>t===gC,zr=t=>t===CC,PD=t=>t===_C,ID=t=>t===wC,OD=t=>t===EC,kD=t=>t===SC,ri=t=>t===PC,Ld=t=>t===Ad,Yn=t=>t===Fd,$d=t=>t===Bd,Pr=t=>t===zd,oi=t=>{switch(t){case Fd:case zd:case Ad:case Bd:return!0;default:return!1}},RD=t=>t===IC,RC=t=>t===pC,ai=t=>t===yC,cl=t=>t.altKey,xC=t=>t.ctrlKey,ul=t=>t.shiftKey,Co=t=>t.altKey||t.ctrlKey||t.shiftKey,Hd=t=>[67,45].includes(t.keyCode)&&t.ctrlKey,li=t=>t.shiftKey&&t.keyCode===45||t.ctrlKey&&t.keyCode===86,jd=t=>t.keyCode===82,dl=t=>{switch(t){case 32:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 186:case 187:case 188:case 189:case 190:case 191:case 192:case 219:case 220:case 221:case 222:return!0;default:return!1}};var xD={popperIconSize:"18px"},NC=Object.defineProperty,DC=Object.defineProperties,MC=Object.getOwnPropertyDescriptors,ml=Object.getOwnPropertySymbols,Vd=Object.prototype.hasOwnProperty,Wd=Object.prototype.propertyIsEnumerable,Ud=(t,e,n)=>e in t?NC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yo=(t,e)=>{for(var n in e||(e={}))Vd.call(e,n)&&Ud(t,n,e[n]);if(ml)for(var n of ml(e))Wd.call(e,n)&&Ud(t,n,e[n]);return t},Lo=(t,e)=>DC(t,MC(e)),TC=(t,e)=>{var n={};for(var o in t)Vd.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&ml)for(var o of ml(t))e.indexOf(o)<0&&Wd.call(t,o)&&(n[o]=t[o]);return n};const Qt="button",AC="button";function si(t){var e;const{_ref:n,focusedElement:o,className:a,style:l,id:i,tabIndex:s,isDisabled:c,isPressed:u,hasError:m,dataAttrs:d,metaSet:f,events:p,hint:g,testId:w,iconName:h,iconSize:_,caption:I,hasActiveMode:S,mode:E,modeSwitch:P,onModeChange:b,onKeyDown:C,onEnter:M,onTab:O,onEsc:T,onFocus:D,onBlur:L,onBlurCapture:$,onMouseDown:x,onClick:Z,name:A,isFixSize:F,isWrapped:z,isMultiLine:H,onHint:K,isParentTable:G,cellColor:ee}=t,j=iu(I),U=w||AC,Y=(0,r.useMemo)(()=>Pn({isFixSize:F,style:l}),[F,l]);let W=Y.backgroundColor,oe=(0,r.useRef)(null);(o||n)&&(oe=o||n);const[R,N]=Bo(E,P),X=!j,ne=j&&!h,ae=me()(a,Qt,{[`${Qt}_error`]:m,[`${Qt}_disabled`]:c,[`${Qt}_pressed`]:u,[`${Qt}_round`]:X,[`${Qt}_active`]:!c&&N.checkActiveMode(),[`${Qt}_editable`]:!c&&N.checkEditableMode(),[`${Qt}_with-caption`]:ne,[`${Qt}_with-icon-and-caption`]:j&&h,[`${Qt}_without-icon-and-caption`]:!j&!h,[`${Qt}_with-background`]:W,[`${Qt}__cell`]:G&&!X}),ce=me()(`${Qt}__caption`,{[`${Qt}__caption_wrapped`]:z,[`${Qt}__caption_multiline`]:H,[`${Qt}__caption_not-multiline`]:!H}),_e=(()=>{const fe=yo({},Y);return X&&(fe!=null&&fe.width)?fe.height=fe.width:!X&&!(fe!=null&&fe.height)&&!G&&(fe.height="auto"),fe!=null&&fe.backgroundColor||(fe.borderRadius="50px"),fe})(),{backgroundColor:Ce}=_e,ie=TC(_e,["backgroundColor"]),he=(0,r.useCallback)(fe=>{if(c)return;let Oe=!0;if(x&&(Oe=x({event:fe,metaSet:f})),Oe&&(p!=null&&p.onMouseDown)){const{alias:Ee,args:ue}=p.onMouseDown;le[Ee]({event:fe,metaSet:f,args:ue})}},[c,f,p,x]),Ie=(0,r.useCallback)(fe=>{if(c||fe.detail===0||fe.detail>1)return;let Oe=!0;if(Z&&(Oe=Z({event:fe,metaSet:f})),Oe&&(p!=null&&p.onClick)){const{alias:Ee,args:ue}=p.onClick;le[Ee]({event:fe,metaSet:f,args:ue})}u&&N.setActiveMode()},[c,f,p,Z]),Ae=(0,r.useCallback)(fe=>{if(c)return;let Oe=!0;if(D&&(Oe=D({event:fe,metaSet:f})),Oe&&(p!=null&&p.onFocus)){const{alias:Ee,args:ue}=p.onFocus;le[Ee]({event:fe,metaSet:f,args:ue})}Oe&&(S?N.setActiveMode():N.setEditableMode())},[c,f,p,D,S]),ke=(0,r.useCallback)(fe=>{if(c)return;let Oe=!0;if(L&&(Oe=L({event:fe,metaSet:f})),Oe&&(p!=null&&p.onBlur)){const{alias:Ee,args:ue}=p.onBlur;le[Ee]({event:fe,metaSet:f,args:ue})}Oe&&N.setDefaultMode()},[c,f,p,L,S]),Re=(0,r.useCallback)(fe=>{if(c)return;let Oe=!0;if($&&(Oe=$({event:fe,metaSet:f})),Oe&&(p!=null&&p.onBlurCapture)){const{alias:Ee,args:ue}=p.onBlurCapture;le[Ee]({event:fe,metaSet:f,args:ue})}return!1},[c,f,p,$]),Fe=(0,r.useCallback)(fe=>{if(c)return;let Oe=!0;if(Bn(fe.keyCode)&&!fe.repeat){if(M&&(Oe=M({event:fe,metaSet:f})),Oe&&(p!=null&&p.onEnter)){const{alias:Ee,args:ue}=p.onEnter;Oe=le[Ee]({event:fe,metaSet:f,args:ue})}Oe&&he(fe)}else if(zo(fe.keyCode)){if(O&&(Oe=O({event:fe,metaSet:f})),Oe&&(p!=null&&p.onTab)){const{alias:Ee,args:ue}=p.onTab;Oe=le[Ee]({event:fe,metaSet:f,args:ue})}Oe&&N.setDefaultMode()}else if(zr(fe.keyCode)){if(T&&(Oe=T({event:fe,metaSet:f})),Oe&&(p!=null&&p.onEsc)){const{alias:Ee,args:ue}=p.onEsc;Oe=le[Ee]({event:fe,metaSet:f,args:ue})}Oe&&(S?N.setActiveMode():N.setDefaultMode())}else if(Co(fe))fe.preventDefault();else{if(Bn(fe.keyCode)&&fe.repeat)return;if(C&&(Oe=C({event:fe,metaSet:f})),Oe&&(p!=null&&p.onKeyDown)){const{alias:Ee,args:ue}=p.onKeyDown;le[Ee]({event:fe,metaSet:f,args:ue})}}},[c,p,f,C,O,M,T,he]),Ue=(0,r.useCallback)(fe=>{let Oe=!0;if(K&&(Oe=K({event:fe,metaSet:f})),Oe&&(p!=null&&p.onHint)){const{alias:Ee,args:ue}=p.onHint;Oe=le[Ee]({event:fe,args:ue,metaSet:f})}},[K,p,f]);(0,r.useEffect)(()=>{if(!c)return;let fe=!0;if(b&&(fe=b({metaSet:f,value:R})),fe&&(p!=null&&p.onModeChange)){const{alias:Oe,args:Ee}=p.onModeChange;le[Oe]({args:Ee,metaSet:f,value:R})}},[c,f,p,b,R]),(0,r.useEffect)(()=>{c&&N.setDefaultMode()},[c]),Sr(oe,g,(e=oe==null?void 0:oe.current)==null?void 0:e.innerText);let Qe=null;if(h){const fe=`${U}_icon`,Oe={width:_,height:_};h!=null&&h.includes("/")?Qe=r.createElement("img",Lo(yo({className:`${Qt}__img img`,alt:h,style:Oe,src:Ft(h)},d),{"data-testid":fe})):Qe=r.createElement(wt(),Lo(yo({className:`${Qt}__font-awesome`,style:Oe,name:h},d),{"data-testid":fe}))}return r.createElement("div",{style:{backgroundColor:G&&ee?"transparent":ee}},r.createElement("div",{className:"wrapper_button",style:{backgroundColor:Ce}},r.createElement("div",Lo(yo({ref:oe,id:i,name:A,className:ae,style:ie,disabled:c,tabIndex:Br(!c,s),onKeyDown:Fe,onFocus:Ae,onBlur:ke,onBlurCapture:Re,onMouseDown:he,onClick:Ie,onMouseEnter:Ue},d),{"data-testid":U}),Qe,W?j&&r.createElement("div",null,r.createElement("span",Lo(yo({className:ce},d),{"data-testid":`${U}_caption`}),j)):r.createElement(r.Fragment,null,j&&r.createElement("span",Lo(yo({className:ce},d),{"data-testid":`${U}_caption`}),j)))))}si.propTypes={_ref:v().object,id:v().string,className:v().string,style:v().object,isExcluded:v().bool,isDisabled:v().bool,isStatic:v().bool,metaSet:v().oneOfType([v().object,v().string]),dataAttrs:v().object,hasError:v().bool,iconName:v().string,caption:v().string,hint:v().string,events:v().object,tabIndex:v().oneOfType([v().number,v().string]),testId:v().string,hasActiveMode:v().bool,mode:v().string,onModeChange:v().func,onFocus:v().func,onBlur:v().func,onClick:v().func},si.defaultProps={_ref:null,id:null,className:null,style:null,isExcluded:!1,isDisabled:!1,isStatic:!1,metaSet:null,dataAttrs:null,hasError:!1,iconName:null,caption:null,hint:null,events:null,tabIndex:0,testId:null,hasActiveMode:!1,mode:null,onModeChange:null,onFocus:null,onBlur:null,onClick:null};var Lr=(0,r.memo)((0,r.forwardRef)((t,e)=>r.createElement(si,Lo(yo({},t),{_ref:e})))),Lt=Lr;const FC={alignSelf:"flex-end",height:30,width:30,margin:10};function BC(t){const{onClose:e,value:n}=t;return r.createElement("div",{className:"mm-popup__box__image-container"},r.createElement("div",{style:FC},r.createElement(Lt,{name:"closeButton",iconName:"times",onClick:e})),r.createElement("img",{src:n}))}var zC=BC,Gd=xe(32832),LC=xe(58847),$C=JSON.parse('{"login_username":"User name","login_password":"Password","login_enter":"Enter","login_disable":"Disable user and continue","login_session_exist":"User session already exists","old_password":"Old password","new_password":"New password","choose_role_form":"Choose user role","change_password_dialog":"Change password","confirm":"Confirmation","empty_message":"There are no details","error":"Error","error_invalid_username_password":"The username or password you entered is incorrect","error_lost_session":"Lost session","error_unknown_server":"Unknown server error","error_incorrect_input":"Incorrect input","error_server":"Server error","error_client":"Client error","error_no_focused_element":"There is no focused element","error_no_result_value":"Result value empty or not correct","error_application":"Abnormal situation in the application","contact_to_dev":"Contact the developer","server_notification":"Server notification","color_selection":"Color selection","file_upload":"File upload","info_time":"Time is up","workspace_exit":"Exit","main_menu":"Menu","name":"Name","description":"Description","browser_support_message_1":"You are using an incompatible browser.","browser_support_message_2":"In order to use the site features,","browser_support_message_3":"download and install one of the following browsers:","table_filter_name":"Filter","table_filter_button_clear":"Clear all","table_filter_button_apply":"Apply","context_menu":"Context menu","list_button_hint":"Open dropdown list","confirm_stub":"Confirm action","upload_stub":"Upload File","confirm_cancel_upload":"No files have been uploaded. Are you sure you want to cancel upload?","yes":"Yes","no":"No","ok":"Ok","cancel":"Cancel","apply":"Apply","close":"Close","close_all":"Close all","others_close":"Close others","roll_up":"Roll Up","expand":"Expand","raise_form":"Raise form","image":"Image","dialog":"Dialog window","invalid_color":"Invalid HEX format"}'),HC=JSON.parse('{"login_username":"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F","login_password":"\u041F\u0430\u0440\u043E\u043B\u044C","old_password":"\u0421\u0442\u0430\u0440\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C","new_password":"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C","confirm":"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435","choose_role_form":"\u0412\u044B\u0431\u043E\u0440 \u0440\u043E\u043B\u0438","change_password_dialog":"\u0421\u043C\u0435\u043D\u0430 \u043F\u0430\u0440\u043E\u043B\u044F","login_enter":"\u0412\u0445\u043E\u0434","login_disable":"\u041E\u0442\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u0438 \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C","login_session_exist":"\u0421\u0435\u0441\u0441\u0438\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442","empty_message":"\u0414\u0435\u0442\u0430\u043B\u0438 \u043D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B","error":"\u041E\u0448\u0438\u0431\u043A\u0430","error_invalid_username_password":"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0435 \u0438\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u0438\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C","error_lost_session":"\u0421\u0435\u0441\u0441\u0438\u044F \u043F\u043E\u0442\u0435\u0440\u044F\u043D\u0430","error_unknown_server":"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430","error_incorrect_input":"\u041D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \u0432\u044B\u0447\u0438\u0441\u043B\u0435\u043D\u0438\u044F, \u0432\u0432\u0435\u0434\u0435\u043D\u044B \u043D\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F","error_server":"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430","error_client":"\u041E\u0448\u0438\u0431\u043A\u0430 \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430","error_no_focused_element":"\u041F\u043E\u043B\u0435 \u0432\u0432\u043E\u0434\u0430 \u0434\u043B\u044F \u0432\u0441\u0442\u0430\u0432\u043A\u0438 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u0430 \u0432\u044B\u0447\u0438\u0441\u043B\u0435\u043D\u0438\u0439 \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u043E","error_no_result_value":"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442 \u0432\u044B\u0447\u0438\u0441\u043B\u0435\u043D\u0438\u044F \u043F\u0443\u0441\u0442\u043E\u0439 \u0438\u043B\u0438 \u043D\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439","error_application":"\u041D\u0435\u0448\u0442\u0430\u0442\u043D\u0430\u044F \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044F \u0432 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438","contact_to_dev":"\u041E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u043A \u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0443","server_notification":"\u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430","color_selection":"\u0412\u044B\u0431\u043E\u0440 \u0446\u0432\u0435\u0442\u0430","file_upload":"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0444\u0430\u0439\u043B\u043E\u0432","info_time":"\u0412\u0440\u0435\u043C\u044F \u0438\u0441\u0442\u0435\u043A\u043B\u043E","workspace_exit":"\u0412\u044B\u0445\u043E\u0434","main_menu":"\u041C\u0435\u043D\u044E","name":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435","description":"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435","browser_support_message_1":"\u0412\u044B \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442\u0435 \u043D\u0435\u0441\u043E\u0432\u043C\u0435\u0441\u0442\u0438\u043C\u044B\u0439 \u0431\u0440\u0430\u0443\u0437\u0435\u0440.","browser_support_message_2":"\u0414\u043B\u044F \u0442\u043E\u0433\u043E, \u0447\u0442\u043E\u0431\u044B \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u0438 \u0441\u0430\u0439\u0442\u0430,","browser_support_message_3":"\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438 \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u043E\u0434\u0438\u043D \u0438\u0437 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0445 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043E\u0432:","table_filter_name":"\u0424\u0438\u043B\u044C\u0442\u0440","table_filter_button_clear":"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0432\u0441\u0435","table_filter_button_apply":"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C","context_menu":"\u041A\u043E\u043D\u0442\u0435\u043A\u0441\u0442\u043D\u043E\u0435 \u043C\u0435\u043D\u044E","list_button_hint":"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0432\u044B\u043F\u0430\u0434\u0430\u044E\u0449\u0438\u0439 \u0441\u043F\u0438\u0441\u043E\u043A","confirm_stub":"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435","upload_stub":"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0444\u0430\u0439\u043B\u0430","confirm_cancel_upload":"\u0424\u0430\u0439\u043B\u044B \u043D\u0435 \u0431\u044B\u043B\u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B. \u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0443?","yes":"\u0414\u0430","no":"\u041D\u0435\u0442","ok":"\u0413\u043E\u0442\u043E\u0432\u043E","cancel":"\u041E\u0442\u043C\u0435\u043D\u0430","apply":"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C","close":"\u0417\u0430\u043A\u0440\u044B\u0442\u044C","close_all":"\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u0432\u0441\u0435","others_close":"\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u0434\u0440\u0443\u0433\u0438\u0435","roll_up":"\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C","expand":"\u0420\u0430\u0437\u0432\u0435\u0440\u043D\u0443\u0442\u044C","raise_form":"\u041F\u043E\u0434\u043D\u044F\u0442\u044C \u043E\u043A\u043D\u043E","image":"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435","invalid_color":"\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0446\u0432\u0435\u0442\u0430","dialog":"\u0414\u0438\u0430\u043B\u043E\u0433\u043E\u0432\u043E\u0435 \u043E\u043A\u043D\u043E"}'),jC=JSON.parse(`{"login_username":"Nom d'utilisateur","login_password":"Mot de passe","login_enter":"Entr\xE9e","login_disable":"D\xE9sactiver l'utilisateur et continuer","login_session_exist":"La session utilisateur existe d\xE9j\xE0","error_invalid_username_password":"Nom d'utilisateur ou mot de passe invalide","error_lost_session":"Session perdue","error_unknown_server":"Erreur de serveur inconnue","error_server":"Erreur de serveur","error_application":"Situation anormale dans l'application","contact_to_dev":"Contacter le d\xE9veloppeur","info_time":"Le temps est \xE9coul\xE9","workspace_exit":"Sortie","close":"Fermer","close_all":"Ferme tout","others_close":"Fermer les autres"}`),VC=JSON.parse('{"login_username":"\u7528\u6237\u540D","login_password":"\u5BC6\u7801","login_enter":"\u767B\u5F55","login_disable":"\u7981\u7528\u7528\u6237\u5E76\u7EE7\u7EED","login_session_exist":"\u7528\u6237\u4F1A\u8BDD\u5DF2\u5B58\u5728","error_invalid_username_password":"\u7528\u6237\u540D\u6216\u5BC6\u7801\u65E0\u6548","error_lost_session":"\u5931\u53BB\u4E86\u4F1A\u8BDD","error_unknown_server":"\u672A\u77E5\u7684\u670D\u52A1\u5668\u9519\u8BEF","error_server":"\u670D\u52A1\u5668\u9519\u8BEF","error_application":"\u61C9\u7528\u4E2D\u7684\u7570\u5E38\u60C5\u6CC1","contact_to_dev":"\u806F\u7E6B\u958B\u767C\u5546","info_time":"\u65F6\u95F4\u5230\u4E86","workspace_exit":"\u51FA\u53E3","close":"\u95DC\u9589","close_all":"\u95DC\u9589\u6240\u6709","others_close":"\u95DC\u9589\u4ED6\u4EBA"}');const WC={en:{translation:$C},ru:{translation:HC},fr:{translation:jC},zh:{translation:VC}};Gd.ZP.use(LC.rW).init({resources:WC,fallbackLng:["ru","en"],keySeparator:">",nsSeparator:"|",interpolation:{escapeValue:!1}});var Ke=Gd.ZP,ND={popperIconSize:"18px"},en=xe(96486);const fr={default:"default",selected:"selected"};function Kd(t){const{targetElement:e,needSelection:n=!0,textSelectionSwitch:o,editableMode:a}=t,l=(0,r.useRef)(null),i=o||l,[s,c]=(0,r.useState)(fr.default),u=(0,r.useCallback)(()=>{c(fr.selected)},[]),m=(0,r.useCallback)(()=>{c(fr.default)},[]),d=(0,r.useRef)({setSelectedMode:u,setDefaultMode:m});return(0,r.useImperativeHandle)(i,()=>d.current),(0,r.useEffect)(()=>{if(e&&a){const f=n&&a&&s===fr.selected;if(e!=null&&e.setSelectionRange){const{value:p}=e;let g=p.length;const w=p.length;f&&(g=0),e.setSelectionRange(g,w)}else{let p=new Range,g=window.getSelection();p.selectNodeContents(e),f||p.collapse(!1),g.removeAllRanges(),g.addRange(p)}}},[n,s,a]),[s,d.current]}var UC=Object.defineProperty,fl=Object.getOwnPropertySymbols,qd=Object.prototype.hasOwnProperty,Zd=Object.prototype.propertyIsEnumerable,Yd=(t,e,n)=>e in t?UC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ii=(t,e)=>{for(var n in e||(e={}))qd.call(e,n)&&Yd(t,n,e[n]);if(fl)for(var n of fl(e))Zd.call(e,n)&&Yd(t,n,e[n]);return t},Xd=(t,e)=>{var n={};for(var o in t)qd.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&fl)for(var o of fl(t))e.indexOf(o)<0&&Zd.call(t,o)&&(n[o]=t[o]);return n};const Ze=t=>{var e=t,{events:n,specificEvent:o,nativeEvent:a,value:l}=e,i=Xd(e,["events","specificEvent","nativeEvent","value"]);let s=l===void 0?null:l,c=!0;if(o&&(c=o(ii({value:s},i))),c&&a&&(n!=null&&n[a])){const{alias:u,args:m}=n[a];c=le[u](ii({args:m,value:s},i))}return c},DD=({event:t,metaSet:e,events:n,value:o,eventChain:a})=>{const l=a.map(i=>{const s=i,{specificEvent:c,nativeEvent:u}=s,m=Xd(s,["specificEvent","nativeEvent"]);Ze(ii({event:t,metaSet:e,events:n,specificEvent:c,nativeEvent:u,value:o},m))});return l[l.length-1]};var GC=Object.defineProperty,KC=Object.defineProperties,qC=Object.getOwnPropertyDescriptors,Jd=Object.getOwnPropertySymbols,ZC=Object.prototype.hasOwnProperty,YC=Object.prototype.propertyIsEnumerable,Qd=(t,e,n)=>e in t?GC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,XC=(t,e)=>{for(var n in e||(e={}))ZC.call(e,n)&&Qd(t,n,e[n]);if(Jd)for(var n of Jd(e))YC.call(e,n)&&Qd(t,n,e[n]);return t},JC=(t,e)=>KC(t,qC(e));function QC(t){return function(n){const{listValues:o}=n,[a,l]=(0,r.useState)(-1),i=(0,r.useRef)(null),s=(0,r.useRef)(null),c=(0,r.useMemo)(()=>{if(!i.current||!s.current||a===-1)return null;const{clientHeight:m,scrollTop:d}=s.current.scrollValues,f=i.current.clientHeight,p=a*f,g=p>=m+d;return{scrollTop:p<d&&p,scrollBottom:g&&p+f-m}},[i,s,a]);(0,r.useEffect)(()=>{if(!c||!s.current)return;const{scrollTop:m,scrollBottom:d}=c;m!==!1?s.current.scrollTo(0,m):d&&s.current.scrollTo(0,d)},[c]);const u=(0,r.useCallback)(m=>{if(!(o!=null&&o.length))return!1;let d=null;return Yn(m.keyCode)?d=a<=0?o.length-1:a-1:Pr(m.keyCode)&&(d=a>=o.length-1?0:a+1),d!==null?(m.preventDefault(),m.stopPropagation(),l(d),!1):!0},[a,o]);return r.createElement(t,JC(XC({},n),{keyBoardNavigation:u,selected:a,setSelected:l,elementNode:i,containerNode:s}))}}var ey=Object.defineProperty,ty=Object.defineProperties,ny=Object.getOwnPropertyDescriptors,pl=Object.getOwnPropertySymbols,em=Object.prototype.hasOwnProperty,tm=Object.prototype.propertyIsEnumerable,nm=(t,e,n)=>e in t?ey(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ry=(t,e)=>{for(var n in e||(e={}))em.call(e,n)&&nm(t,n,e[n]);if(pl)for(var n of pl(e))tm.call(e,n)&&nm(t,n,e[n]);return t},oy=(t,e)=>ty(t,ny(e)),ay=(t,e)=>{var n={};for(var o in t)em.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&pl)for(var o of pl(t))e.indexOf(o)<0&&tm.call(t,o)&&(n[o]=t[o]);return n};function ly(t){return function(n,o){const a=n,{onResize:l,events:i,metaSet:s}=a,c=ay(a,["onResize","events","metaSet"]);let u=(0,r.useRef)(null);u=o||u;const m=(0,r.useCallback)(d=>{const f=d[0],p={target:f.target};p.borderBoxSize=Array.isArray(f.borderBoxSize)?f.borderBoxSize[0]:f.borderBoxSize,p.contentBoxSize=Array.isArray(f.contentBoxSize)?f.contentBoxSize[0]:f.contentBoxSize,p.contentRect=Array.isArray(f.contentRect)?f.contentRect[0]:f.contentRect,p.borderBoxSize||(p.borderBoxSize={blockSize:p.contentRect.height});let g=!0;if(l&&(g=l({metaSet:s,value:p})),g&&(i!=null&&i.onResize)){const{alias:w,args:h}=i.onResize;le[w]({args:h,metaSet:s,value:p})}},[s,l,i]);return(0,r.useEffect)(()=>{if(u.current){const d=new so.Z(m);return d.observe(u.current),()=>{u.current&&d.unobserve(u.current)}}},[u,m]),r.createElement(t,oy(ry({},c),{_ref:u,events:i,metaSet:s}))}}function sy(t){let e=0;const n=window.getSelection();if(!n||n.rangeCount==0)return e;const o=n.getRangeAt(0),a=o.cloneRange();return a.selectNodeContents(t),a.setEnd(o.endContainer,o.endOffset),e=a.toString().length,e}function iy(t,e){const n=window.getSelection();if(!n)return;const o=document.createRange();o.setStart(t.childNodes[0],e),o.collapse(!0),n.removeAllRanges(),n.addRange(o)}function cy(t,e,n){const o=t.split("");return o.splice(n,0,e),o.join("")}var MD={popperIconSize:"18px"};const ci=({initialValue:t,value:e,formattedValue:n,dataAttrs:o,resetValue:a})=>{const l=(0,Xt.v9)(i=>i.modalPopUp);(0,r.useEffect)(()=>{if((n===void 0||n!==e)&&l[0]&&o&&e!==t&&t!==void 0&&!(e===""&&(0,en.isNull)(t))){const{formId:i,controlId:s,rowId:c,tableControlId:u,rowControlId:m}=l[0];let d;u&&c?d=o["data-table-id"]===String(s)&&o["data-row-id"]===String(c)&&o["data-column-id"]===String(u):u&&m?d=o["data-grid-id"]===String(s)&&o["data-row-id"]===String(m)&&o["data-column-id"]===String(u):d=o["data-form-id"]===String(i)&&o["data-name"]===String(s),d||a()}},[l])};var uy=Object.defineProperty,dy=Object.defineProperties,my=Object.getOwnPropertyDescriptors,vl=Object.getOwnPropertySymbols,rm=Object.prototype.hasOwnProperty,om=Object.prototype.propertyIsEnumerable,am=(t,e,n)=>e in t?uy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Et=(t,e)=>{for(var n in e||(e={}))rm.call(e,n)&&am(t,n,e[n]);if(vl)for(var n of vl(e))om.call(e,n)&&am(t,n,e[n]);return t},tn=(t,e)=>dy(t,my(e)),fy=(t,e)=>{var n={};for(var o in t)rm.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&vl)for(var o of vl(t))e.indexOf(o)<0&&om.call(t,o)&&(n[o]=t[o]);return n};const cn="string",py=160,$o={input:"input",button:"button"},lm={show:"eye",hide:"eye-slash"},Ho=(t,e)=>e==null?void 0:e.test(t),sm=({value:t,caretPosition:e=null,inputRef:n})=>{const o=t+"",a=document.getSelection();a.removeAllRanges();const l=new Range,i=e===null?o.length:Math.min(e,o.length),s=o?n.firstChild:n;l.setStart(s,i),l.collapse(!1),a.addRange(l)},im=t=>{t&&(t.scrollLeft=0)};function ui(t){var e,n,o;const{_ref:a,focusedElement:l,id:i,className:s,style:c,isWrapped:u,isMultiLine:m,isExcluded:d,isDisabled:f,isDisabledByAutolock:p,isStatic:g,hasActiveMode:w,mode:h,modeSwitch:_,needTextSelection:I,textSelectionSwitch:S,name:E,isControlledValue:P,value:b,formattedValue:C,lastValue:M,initialValue:O,initialFormattedValue:T,testId:D,hasError:L,hint:$,dataAttrs:x,buttonIconName:Z,metaSet:A,events:F,tabIndex:z,onAutolock:H,onModeChange:K,onChange:G,onKeyDown:ee,onKeyUp:j,onEnter:U,onBlur:Y,onBlurCapture:W,onImplicitChange:oe,onFocus:R,onTab:N,onEsc:X,onDelete:ne,onMouseDown:ae,onMouseUp:ce,onClick:be,onDoubleMouseDown:_e,onDoubleMouseUp:Ce,onDoubleClick:ie,controlRegExp:he,isNumeric:Ie,isFixSize:Ae,isPassword:ke,currentFieldName:Re,browserAutoComplete:Fe,isSwitchedToEnum:Ue,isEnum:Qe,type:fe,onLookup:Oe,showButton:Ee,isRequired:ue,disableOnEdit:Te,onEdit:We,isParentTable:Ye,onHint:Xe,cellColor:mt,isSpellCheck:ot,isAutoLock:Je,isAutocomplete:ct}=t,nt=f||p,pe=Je&&p===void 0,te=(0,r.useRef)(null),ge=!!(F!=null&&F.onEdit||We),re=(0,Xt.v9)(J=>J.modalPopUp),we=Re===D;(0,r.useEffect)(()=>{we&&it&&qt()},[re]);const[Se,$e]=(0,r.useState)(""),[je,at]=(0,r.useState)(ke);let Ct=Z;ke&&(Ct=je?lm.hide:lm.show);const it=s==="login-layout__input",ft=(0,r.useRef)(null),It=(0,r.useRef)(!1),rn=!nt&&!g&&(ke||Ee),qe=(0,r.useRef)({value:b,formattedValue:C}),on=(0,r.useRef)(b),Ln=M||on,Mo=(0,r.useRef)(!1),sr=S||Mo;let Ge=(0,r.useRef)(null);Ge=l||Ge;const Kt=(0,r.useRef)(null),[Vt,Be]=Bo(h,_),{textAlign:$n}=c,an=me()(s,cn,{[`${cn}_multiline`]:m,[`${cn}_wrapped`]:u,[`${cn}_with-icon`]:rn,[`${cn}_without-text-offset`]:rn&&(c==null?void 0:c.width)&&Ae&&c.width<10,[`${cn}_disabled`]:nt,[`${cn}_error`]:L,[`${cn}_active`]:Be.checkActiveMode(),[`${cn}_editable`]:Be.checkEditableMode(),[`${cn}_static`]:g,[`${cn}_right-text-align`]:$n==="right",[`${cn}_password`]:je,[`${cn}_required`]:ue&&!b&&!Be.checkEditableMode(),[`${cn}_colored`]:c.backgroundColor,[`${cn}__cell`]:Ye}),ut=g||nt,ir=(0,r.useCallback)(()=>{var J,ye;if(document.getSelection&&!it){const Le=document.getSelection().getRangeAt(0);Kt.current=(Le==null?void 0:Le.startOffset)||((ye=(J=Ge.current)==null?void 0:J.textContent)==null?void 0:ye.length)}},[(e=Ge.current)==null?void 0:e.textContent,it]);(0,r.useLayoutEffect)(()=>{b&&P&&Kt.current&&Ge.current&&document.getSelection&&!it&&sm({caretPosition:Kt.current,value:b,inputRef:Ge.current})},[Ge.current,b,P,it,Kt]);const[,Nt]=Kd({targetElement:Ge.current,needSelection:typeof I=="boolean"?I:!0,textSelectionSwitch:sr,editableMode:Be.checkEditableMode()}),Dt=(0,r.useCallback)(()=>{ut||(Nt.setDefaultMode(),Be.checkDefaultMode()||Be.setDefaultMode(),im(Ge.current))},[Be,ut,Nt]),mn=(0,r.useCallback)(()=>{ut||!w||(Nt.setDefaultMode(),Be.checkActiveMode()||Be.setActiveMode(),im(Ge.current))},[Be,ut,Nt,w]),qt=(0,r.useCallback)((J=!1)=>{ut||Te||(Nt[J?"setSelectedMode":"setDefaultMode"](),Be.checkEditableMode()||Be.setEditableMode())},[Be,ut,Te,Nt]),Rn=(0,r.useCallback)(()=>{const J=Ge.current;let ye=Ie&&J.textContent.replace(/,/,".")||J.textContent;return it&&(J.children.length>0&&(J.innerHTML=""),ye=ye.slice(-1,0)),ye===C?b:ye.split("").map(Ne=>Ne.charCodeAt()===py?" ":Ne).join("")},[b,C,it]),En=(0,r.useCallback)(({event:J,onlyEvent:ye=!1})=>{ut||(Ze({specificEvent:Oe,nativeEvent:"onLookup",event:J,metaSet:A,events:F}),!ye&&(Ge.current.focus(),Ge.current.textContent=qe.current.value,qt()))},[ut,F,A,Oe,Ge,qt,qe]),br=(0,r.useCallback)(J=>{const ye={event:J,metaSet:A,events:F};if(Hd(J)&&Qr(),nt||pe||ge&&Te){J.preventDefault();return}let Ne=Rn(),Le=!0;const ht=A==null?void 0:A.stayOnEditableMode;if(ul(J)&&jd(J)&&Be.checkEditableMode()&&J.stopPropagation(),!Be.checkEditableMode()&&li(J))return!1;if(Bn(J.keyCode)&&!g){if(Be.checkEditableMode()){if(m)if(m){const At=sy(J.target),Yt=Ge.current;return Yt&&(Yt.textContent.length!==At&&J.preventDefault(),Yt.textContent=cy(Yt.textContent,`
`,At),iy(Ge.current,At+1)),!1}else{if(xC(J))return!1;if(cl(J)&&fe!=="date")return!1}else if(J.preventDefault(),ul(J))return!1}else if(J.preventDefault(),ul(J))return!1;if(Co(J)&&cl(J)){En({event:J});return}Le=Ze(Et({specificEvent:U,nativeEvent:"onEnter",value:Ne},ye)),Le&&ht&&qt(),Le&&(w&&Be.checkActiveMode()?qt(!0):w&&Be.checkEditableMode()?mn():(Be.checkActiveMode()||Be.checkEditableMode()&&!it)&&Dt())}else if(ri(J.keyCode)&&!g){let dt=!1;if(Qe&&!ct&&(J.preventDefault(),dt=!0),w&&Be.checkActiveMode()||dt){const At=Number.parseInt(Ge.current.textContent,10);if(Ge.current.textContent===""||At===0&&Ie)return null;Ne=null,Ge.current.textContent=Ne,Ze(Et({specificEvent:ne,nativeEvent:"onDelete",value:Ne},ye))}}else if(zo(J.keyCode))Ze(Et({specificEvent:N,nativeEvent:"onTab",value:Ne},ye));else if(zr(J.keyCode)&&!g)Be.checkActiveMode()?Ne=T===qe.current.formattedValue||T===void 0?qe.current.formattedValue:T:Ne=O===qe.current.value||O===void 0?qe.current.value:O,Ge.current.textContent=Ne,Ze(tn(Et({specificEvent:oe,nativeEvent:"onImplicitChange"},ye),{value:Ne,notValidValue:!0})),Le=Ze(tn(Et({specificEvent:X,nativeEvent:"onEsc"},ye),{value:Ne})),Le&&(w?mn():Dt());else if(!(ul(J)&&dl(J.keyCode))&&Co(J)&&!Be.checkEditableMode())J.preventDefault();else{!g&&(!he||he&&Ho(Ne,he))&&(Ln.current=Ne),Le=Ze(tn(Et({},ye),{specificEvent:ee,nativeEvent:"onKeyDown",value:Ne}));let dt=!1;!g&&Le&&(Be.checkEditableMode()?(Nt.setDefaultMode(),!li(J)&&dl(J.keyCode)&&he&&!(Ho!=null&&Ho(J.keyCode,he))&&(It.current=!0,ft.current=Ne!==""?Ne:null,J.preventDefault())):(dl(J.keyCode)?he?(Ho!=null&&Ho(J.key,he)?(Ln.current=J.key,ft.current=J.key,dt=!1):(It.current=!0,dt=!0),J.preventDefault()):qe.current.formattedValue!==qe.current.value?(ft.current=J.key,J.preventDefault()):Ge.current.value="":oi(J.keyCode),J.preventDefault(),dt||qt(!1))),dt&&Nt.setSelectedMode()}},[nt,F,A,ee,N,U,X,Be,Dt,mn,qt,pe,w,Ge,u,g,En,ct,Te]),Rr=(0,r.useCallback)(J=>{if(ut)return;P&&ir(J);let ye=Rn();Ze({specificEvent:G,nativeEvent:"onChange",event:J,metaSet:A,events:F,value:ye})},[ut,g,A,F,G]),Hn=(0,r.useCallback)(J=>{if(ut)return;let ye=Rn();It.current?(It.current=!1,Kt.current=ye.length,Nt.setSelectedMode()):he&&!Ho(ye,he)&&(ye=Ln.current,Ge.current.textContent=ye,ft.current=ye,Be.checkEditableMode()&&!it&&sm({value:ye,inputRef:Ge.current})),ft.current&&(ft.current=null,Nt.setDefaultMode()),Ze({specificEvent:j,nativeEvent:"onKeyUp",event:J,metaSet:A,events:F,value:ye})},[ft.current,ut,it,F,A,j,Ge,P,ir,Rr,Be]),Sn=(0,r.useCallback)(J=>{var ye;const{formId:Ne,formName:Le,name:ht,type:dt,subElement:At}=((ye=J.target)==null?void 0:ye.dataset)||{},Yt={event:J,metaSet:A,events:F};let oo=!0;const Er=At===$o.button;if(Er&&Qe&&J.target===J.currentTarget){Ge.current.focus();return}if(oo=Ze(tn(Et({specificEvent:R,nativeEvent:"onFocus"},Yt),{value:b})),Je&&!f&&!g&&!Er&&!ge&&Ze(tn(Et({specificEvent:H,nativeEvent:"onAutolock"},Yt),{value:b})),!nt)return oo&&(w&&Be.checkDefaultMode()?(mn(),ge&&Ze(tn(Et({specificEvent:We,nativeEvent:"onEdit"},Yt),{value:b}))):!g&&!ge&&!Be.checkEditableMode()&&qt()),Ne&&Ve.onLastFocusedElementUpdate({formId:Ne,formName:Le,controlId:ht,type:dt}),!1},[nt,Qe,g,We,H,F,A,R,mn,qt,w,Ge,ke,Je,b]),jn=(0,r.useCallback)(J=>{if(ut||a.current.contains(J.relatedTarget))return;const ye={event:J,metaSet:A,events:F},Ne=Rn();let Le=!0;Vt===zt.editable&&Ze(tn(Et({specificEvent:oe,nativeEvent:"onImplicitChange"},ye),{value:Ne})),Le=Ze(tn(Et({specificEvent:Y,nativeEvent:"onBlur"},ye),{value:Ne})),Le&&Dt()},[ut,w,F,A,Y,oe,Dt,Vt]),Yr=(0,r.useCallback)(J=>{if(ut)return;const{value:ye}=J.currentTarget;Ze({specificEvent:W,nativeEvent:"onBlurCapture",event:J,metaSet:A,events:F,value:ye})},[A,F,W,ut]),cr=(0,r.useCallback)(J=>{const{target:{dataset:{subElement:ye}},detail:Ne}=J,Le=ye===$o.button,ht={event:J,events:F,metaSet:tn(Et({},A),{subElement:ye})},dt=Rn();if(nt||ge&&Te)return;let At=!0;return Ne===1?(Be.checkActiveMode()&&!ke&&(qt(!0),J.preventDefault()),At=Ze(tn(Et({specificEvent:ae,nativeEvent:"onMouseDown"},ht),{value:dt})),ke&&Le&&(at(!je),Ze(tn(Et({specificEvent:null,nativeEvent:"onImplicitChange"},ht),{value:dt})))):Ne===2&&(At=Ze(tn(Et({specificEvent:_e,nativeEvent:"onDoubleMouseDown"},ht),{value:dt})),(At||ke)&&Vt!==zt.editable&&qt(!0)),At},[nt,w,F,A,ae,_e,qt,ke,je,Te]),Xr=(0,r.useCallback)(J=>{if(ut)return;const{target:{dataset:{subElement:ye}},detail:Ne}=J,{value:Le}=Ge.current,ht={event:J,events:F,metaSet:tn(Et({},A),{subElement:ye})};let dt=!0;return Ne===1?dt=Ze(tn(Et({specificEvent:ce,nativeEvent:"onMouseUp"},ht),{value:Le})):Ne===2&&(dt=Ze(tn(Et({specificEvent:Ce,nativeEvent:"onDoubleMouseUp"},ht),{value:Le}))),dt},[ut,F,A,b,ce,Ce]),Jr=(0,r.useCallback)(J=>{if(ke||ut)return;const{target:{dataset:{subElement:ye}},detail:Ne}=J,{value:Le}=Ge.current;let ht=!0;const dt=ye===$o.button;if(dt&&(!Qe||Ue)){En({event:J,onlyEvent:!0});return}return document.activeElement===Ge.current&&!g&&!nt&&!ge&&!dt&&!w&&!Be.checkEditableMode()&&qt(),Ne===1&&(Qe&&!ct&&!Ue&&En({event:J,onlyEvent:!0}),ht=Ze({specificEvent:be,nativeEvent:"onClick",event:J,metaSet:A,value:Le,isButtonClick:dt})),ht},[ut,Qe,ct,Ue,En,ge,F,A,b,be,ke,En,w,ge,g,nt,Be]),Mn=(0,r.useCallback)(J=>{if(ut&&!Ye)return;const ye=J.target.dataset.subElement===$o.button,Ne=Ge.current.textContent;let Le=!0;return Le=Ze({specificEvent:ie,nativeEvent:"onDoubleClick",event:J,metaSet:A,value:Ne,isButtonClick:ye}),ke&&Ge.current&&Be.checkEditableMode()&&(Ge.current.textContent=""),Le},[A,ie,Ye,ut,ke,Be,Ge]),Qr=(0,r.useCallback)(()=>{const J=Ge.current.textContent;J&&uu(J)},[]),xr=(0,r.useCallback)(J=>{var ye;if(nt||!Be.checkEditableMode()){J.preventDefault();return}if((ye=J==null?void 0:J.clipboardData)!=null&&ye.types.includes("Files")&&J.preventDefault(),Be.checkEditableMode())return;const Ne=J.clipboardData.getData("text/plain");if(!Ne)return!0;J.preventDefault(),Ge.current.textContent=Ne,Ze({specificEvent:oe,nativeEvent:"onImplicitChange",event:J,metaSet:A,value:Ne})},[Ge,Be,oe,A,F,nt]),Tn=(0,r.useCallback)(J=>{Ze({specificEvent:Xe,nativeEvent:"onHint",event:J,metaSet:A})},[Xe,F,A]),eo=(0,r.useMemo)(()=>tn(Et({},x),{"data-sub-element":$o.input}),[x]),to=(0,r.useMemo)(()=>tn(Et({},x),{"data-sub-element":ge&&Te?"":$o.button,"data-testid":`${D}_button`}),[Te,x]),Nr=(0,r.useMemo)(()=>({textAlign:$n||"left"}),[$n]),Cr=(0,r.useMemo)(()=>Pn({isFixSize:Ae,style:c,type:fe}),[Ae,c,fe]),{backgroundColor:Dr,color:yr}=Cr,no=fy(Cr,["backgroundColor","color"]),Zt=!nt&&!g&&Be.checkEditableMode(),_r=Et({id:i,ref:Ge,"data-testid":D,autoComplete:t.name==="username"?"on":t.isAutocomplete?"off":Fe,spellCheck:!!ot,className:`${cn}__input`,style:Nr,tabIndex:Br(!nt,z),disabled:nt,contentEditable:Zt,suppressContentEditableWarning:Zt,onKeyDown:br,onInput:Rr,onKeyUp:Hn,onFocus:Sn},eo);(0,r.useEffect)(()=>{!nt&&w&&Ze({specificEvent:K,nativeEvent:"onModeChange",metaSet:A,value:Vt})},[nt,A,F,K,Vt]),(0,r.useEffect)(()=>{qe.current={value:b,formattedValue:C}},[b,C]),(0,r.useEffect)(()=>{nt&&Be.setDefaultMode()},[nt,Be]),(0,r.useLayoutEffect)(()=>{O!==void 0&&b!==O&&(Ge.current.textContent=O,Ze({specificEvent:null,nativeEvent:"onImplicitChange",metaSet:A,value:O,notValidValue:!0}))},[]);const An=(0,r.useCallback)(()=>{let J=T||C||O;Ge.current.textContent=J,Ze({specificEvent:oe,nativeEvent:"onImplicitChange",metaSet:A,events:F,notValidValue:!0})},[oe,F,ke,O,Ge,A]);if(ci({dataAttrs:x,initialValue:O,value:(n=Ge.current)==null?void 0:n.textContent,formattedValue:C,resetValue:An}),Sr(a,$,(o=Ge==null?void 0:Ge.current)==null?void 0:o.textContent),d)return null;let Vn=Be.checkEditableMode()?b:C||b;ft.current!==null&&(Vn=ft.current);const ro=J=>{$e(J.target.value)},wr=()=>r.createElement("input",Et({name:E,type:je?"password":"text",value:Se,onChange:ro},_r)),V=/^#[0-9A-F]{6}$/i.test(b),ve=()=>{if((0,en.isObject)(Vn)&&!Array.isArray(Vn))throw new Error("\u041A\u043E\u043C\u043F\u043E\u043D\u0435\u043D\u0442\u0443 String \u043F\u0435\u0440\u0435\u0434\u0430\u043D\u044B \u043D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435, currentValue \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0438\u043C\u0435\u0442\u044C \u0442\u0438\u043F [object Object]");return b&&V?r.createElement("div",{className:"string_colored_wrapper"},r.createElement("div",{className:"string_colored_square",style:{backgroundColor:b}}),r.createElement("div",Et({},_r),Vn)):r.createElement("div",tn(Et({},_r),{style:{color:yr}}),Vn)},De=()=>it?wr():ve();return r.createElement("div",{style:{backgroundColor:Ye&&mt?"transparent":mt},className:"string_wrapper"},r.createElement("div",{ref:a,className:an,style:Et({backgroundColor:Dr},no),onMouseDown:g?null:cr,onMouseUp:g?null:Xr,onClick:Jr,onBlur:jn,onBlurCapture:Yr,onPaste:xr,onDoubleClick:Mn,onMouseEnter:Tn},De(),rn&&r.createElement(wt(),Et({className:`${cn}__button`,ref:te,name:Ct,tabIndex:-1,onFocus:Sn,style:{backgroundColor:Dr}},to))))}ui.propTypes={_ref:v().object,focusedElement:v().object,id:v().string,className:v().string,style:v().object,value:v().string,isWrapped:v().bool,isMultiLine:v().bool,isExcluded:v().bool,isDisabled:v().bool,isStatic:v().bool,hasActiveMode:v().bool,metaSet:v().object,dataAttrs:v().object,hasError:v().bool,hint:v().string,events:v().object,tabIndex:v().oneOfType([v().number,v().string]),testId:v().string,isReadOnly:v().bool,mode:v().string,modeSwitch:v().object,onModeChange:v().func,onFocus:v().func,onBlur:v().func,onClick:v().func,onChange:v().func,onKeyDown:v().func,onKeyUp:v().func,onEnter:v().func,onEsc:v().func,onDelete:v().func,onTab:v().func,onDoubleClick:v().func,isControlledValue:v().bool,isNumeric:v().bool,isPassword:v().bool,browserAutoComplete:v().oneOf(["on","off"]),isParentTable:v().bool,isAutoLock:v().bool,disableOnEdit:v().bool},ui.defaultProps={_ref:null,focusedElement:null,id:null,className:null,style:{},value:null,isWrapped:!1,isMultiLine:!1,isExcluded:!1,isDisabled:!1,isStatic:!1,metaSet:null,dataAttrs:null,hasError:!1,hint:null,events:null,tabIndex:0,testId:null,isReadOnly:!1,hasActiveMode:!1,mode:null,modeSwitch:null,onModeChange:null,onFocus:null,onBlur:null,onClick:null,onChange:null,onKeyDown:null,onKeyUp:null,onEnter:null,onEsc:null,onDelete:null,onTab:null,onDoubleClick:null,isControlledValue:!1,isNumeric:!1,isPassword:!1,browserAutoComplete:"off",showButton:!1,buttonIconName:"ellipsis-h",isParentTable:!1,isAutoLock:!1,disableOnEdit:!1};var bn=(0,r.memo)((0,r.forwardRef)(ly(ui))),vy=xe(52300);const gy=t=>[...t].map(e=>e.charCodeAt(0)),hy=t=>(t+1)%4===0?1:(t+1)%3===0?2:(t+1)%2===0?3:4,gl=t=>{const n=gy((0,vy.cv)(t)).map((o,a)=>o+=hy(a));return String.fromCharCode(...n)},In="prelogin-form";var by=({onClose:t})=>{const[e,n]=(0,r.useState)(""),[o,a]=(0,r.useState)(""),[l,i]=(0,r.useState)(""),[s,c]=(0,r.useState)(!0),u=({event:p,value:g})=>{var w;if(!(p.target instanceof HTMLDivElement))return;const h=(w=p.target.dataset)==null?void 0:w.testid;h==="oldPassword"&&a(g),h==="newPassword"&&(n(g),c(l===g)),h==="confirmPassword"&&(i(g),c(e===g))},m=()=>{const p={oldPassword:gl(o.trim()),newPassword:gl(e.trim()),obf:!0};t(),Ve.onClientDialogSubmit&&Ve.onClientDialogSubmit(p)},d=()=>{t(),Ve.onClientDialogSubmit&&Ve.onClientDialogSubmit(null)},f=(0,r.useCallback)(p=>{p.key==="Enter"&&s?m():p.key==="Escape"&&d()},[s]);return(0,r.useEffect)(()=>(document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f)}),[f]),r.createElement("div",null,r.createElement("div",{className:`${In}__input-container`},r.createElement("label",{className:`${In}__label`},Ke.t("old_password").toString()),r.createElement(bn,{className:`${In}__input`,isPassword:!0,testId:"oldPassword",onEnter:m,isControlledValue:!0,hasActiveMode:!1,onChange:u,value:o})),r.createElement("div",{className:`${In}__input-container`},r.createElement("label",{className:`${In}__label`},Ke.t("new_password").toString()),r.createElement(bn,{className:`${In}__input`,isPassword:!0,testId:"newPassword",onEnter:m,isControlledValue:!0,hasActiveMode:!1,onChange:u,value:e})),r.createElement("div",{className:`${In}__input-container`},r.createElement("label",{className:`${In}__label`},Ke.t("confirm").toString()),r.createElement(bn,{className:`${In}__input`,isPassword:!0,testId:"confirmPassword",onEnter:m,isControlledValue:!0,hasActiveMode:!1,onChange:u,value:l})),r.createElement("div",{className:`${In}__button-row`},r.createElement(Lt,{key:`${In}confirmButton`,isDisabled:!s,style:{minWidth:"30"},onClick:m,className:`${In}__button`,caption:Ke.t("apply")}),r.createElement(Lt,{key:`${In}cancelButton`,isDisabled:!1,style:{minWidth:"30"},onClick:d,className:`${In}__button`,caption:Ke.t("cancel")})))};const $r="prelogin-form";var Cy=({roles:t,onClose:e})=>{const[n,o]=(0,r.useState)("");(0,r.useEffect)(()=>{t&&o(t[0].name)},[]);const a=d=>{var f;d.persist(),d.stopPropagation();const p=d.target;o(((f=p==null?void 0:p.parentElement)==null?void 0:f.dataset.name)||(p==null?void 0:p.dataset.name)||"")},l=()=>{e(),Ve.onClientDialogSubmit&&Ve.onClientDialogSubmit(n)},i=()=>{e(),Ve.onClientDialogSubmit&&Ve.onClientDialogSubmit(null)},s=(0,r.useCallback)(d=>{const f=t.findIndex(p=>n===p.name);d.key==="ArrowDown"?t[f+1]&&o(t[f+1].name):d.key==="ArrowUp"?t[f-1]&&o(t[f-1].name):d.key==="Enter"?l():d.key==="Escape"&&i()},[n]);(0,r.useEffect)(()=>(document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}),[s]);const c=r.createElement("div",{className:`${$r}__row table-header`,key:"preloginFormHeader"},r.createElement("span",{key:"roleNameHeader"},(0,Kn.ZP)(Ke.t("name"))),r.createElement("span",{key:"roleDescriptionHeader"},(0,Kn.ZP)(Ke.t("description")))),u=r.createElement("ul",{key:"preloginFormList"},t.map((d,f)=>r.createElement("li",{className:`${$r}__row`+(d.name===n?" chosen":""),key:d.name,id:"role"+f,"data-name":d.name,onClick:a},r.createElement("span",{key:d.name+d.description},d.name),r.createElement("span",{key:d.description+d.name},d.description)))),m=r.createElement("div",{key:"prelogin-form__button-row",className:`${$r}__button-row`},r.createElement(Lt,{key:`${$r}okButton`,name:"okButton",style:{minWidth:"30"},caption:(0,Kn.ZP)(Ke.t("ok")),className:`${$r}__button`,onClick:l}),r.createElement(Lt,{key:`${$r}closeButton`,name:"closeButton",style:{minWidth:"30"},caption:(0,Kn.ZP)(Ke.t("cancel")),className:`${$r}__button`,onClick:i}));return t?r.createElement("div",{className:$r},c,u,m):null},yy={PasswordChangeForm:by,ChooseRoleForm:Cy,ImgModal:zC},_y=xe(58949);class cm extends r.Component{constructor(){super(...arguments),this.handleClickOutside=e=>{this.props.onClickOutside(e)}}render(){const{className:e,children:n,style:o}=this.props,a=me()("outside-wrapper",e);return r.createElement("div",{className:a,style:o},n)}}cm.defaultProps={onClickOutside:()=>{}};var Ca=(0,_y.Z)(cm),FD={popperIconSize:"18px"},wy=Object.defineProperty,um=Object.getOwnPropertySymbols,Ey=Object.prototype.hasOwnProperty,Sy=Object.prototype.propertyIsEnumerable,dm=(t,e,n)=>e in t?wy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Py=(t,e)=>{for(var n in e||(e={}))Ey.call(e,n)&&dm(t,n,e[n]);if(um)for(var n of um(e))Sy.call(e,n)&&dm(t,n,e[n]);return t};const Nn="pop-up",Iy=(t,e,n)=>{let o="exclamation";switch(t){case Xn.notification:{o="exclamation-triangle";break}case Xn.error:{e?o="times-circle":o="exclamation-circle";break}case Xn.dialog:{n==="ChooseRoleForm"?o="users":n==="PasswordChangeForm"?o="lock":o="question-circle";break}default:break}return o},Oy={0:lC,1:oC,2:sC,3:iC,4:aC},Xn={error:"error",notification:"notification",dialog:"dialog",preview:"preview"};var ky=t=>{const{className:e,message:n,caption:o,style:a,onClose:l,messageId:i,type:s,isLastMessage:c,component:u,componentProps:m,context:d,iconID:f}=t,p=(0,r.useRef)(null),g=u?yy[u]:"",w=["ChooseRoleForm","PasswordChangeForm"].includes(u),h={padding:"6px"},_=me()(e,Nn,{[`${Nn}__error`]:s===Xn.error,[`${Nn}__notification`]:s===Xn.notification}),I=Iy(s,d,u),S=f!==void 0,E=(0,r.useCallback)(()=>{l(i)},[i]),P=(0,r.useCallback)(M=>{zr(M.keyCode)&&!w&&E()},[]),b=(M,O)=>O?r.createElement("img",{className:`${Nn}__context-icon`,src:Oy[f],alt:"Message icon",height:"24px"}):M?r.createElement(wt(),{className:`${Nn}__context-icon fa-2x`,name:I}):r.createElement(wt(),{className:`${Nn}__icon`,name:I}),C=()=>g?r.createElement(g,Py({onClose:E},m)):d&&!u?r.createElement(Ca,{onClickOutside:E},r.createElement("div",{style:a,className:`${Nn}__button-container`},r.createElement("button",{className:`${Nn}__context-button`,onClick:E},b(d,S),n))):r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement("div",{className:`${Nn}__message`},(0,Kn.ZP)(n?Ke.t(n):Ke.t("empty_message")))),r.createElement("div",{className:`${Nn}__button-container`},r.createElement(Lr,{name:"OKButton",hint:"",caption:"Ok",iconName:"",isExcluded:!1,isDisabled:!1,isFixSize:!0,className:`${Nn}__button`,onClick:E,ref:p})));return(0,r.useEffect)(()=>{var M;(M=p.current)==null||M.focus()},[c]),r.createElement(Nd(),{focusTrapOptions:{setReturnFocus:M=>M.isContentEditable?M:document.body}},d?r.createElement("div",{tabIndex:-1,onKeyDown:P},r.createElement(C,null)):r.createElement("div",{tabIndex:-1,onKeyDown:P,className:_,style:a},!o&&!f?null:r.createElement("div",{className:`${Nn}__title`+(w?" align-left":"")},b(d,S),Ke.t(o)),r.createElement("div",{className:`${Nn}__content`,style:w?h:{}},r.createElement(C,null))))},Ry=Object.defineProperty,mm=Object.getOwnPropertySymbols,xy=Object.prototype.hasOwnProperty,Ny=Object.prototype.propertyIsEnumerable,fm=(t,e,n)=>e in t?Ry(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dy=(t,e)=>{for(var n in e||(e={}))xy.call(e,n)&&fm(t,n,e[n]);if(mm)for(var n of mm(e))Ny.call(e,n)&&fm(t,n,e[n]);return t};const My=[];var Ty=(0,Pe.Lq)(My,t=>{t.addCase(Wu,(e,n)=>{const{message:o}=n.payload,a="server_notification",l=Xn.notification;return[{message:o,caption:a,type:l},...e]}).addCase(ol,(e,n)=>{const{message:o,formId:a,controlId:l}=n.payload,i="error_client",s=Xn.error;return[{message:o,caption:i,type:s,formId:a,controlId:l},...e]}).addCase(pa,(e,n)=>{const{message:o}=n.payload,a="error_server",l=Xn.error;return[{message:o,caption:a,type:l},...e]}).addCase(Vu,(e,n)=>{const o="error",a=Xn.error;return[Dy({caption:o,type:a},n.payload),...e]}).addCase(ju,(e,n)=>{var o;const a=(o=n.payload)==null?void 0:o.id;return a!==void 0?e.filter((l,i)=>i!==a):e}).addCase(al,(e,n)=>{const{component:o,caption:a="dialog",componentProps:l}=n.payload,i=Xn.dialog;return[{caption:a,type:i,component:o,componentProps:l},...e]}).addCase(ll,e=>e).addCase(Uu,(e,n)=>{const{component:o,componentProps:a,caption:l}=n.payload,i=Xn.preview;return[{caption:l,type:i,component:o,componentProps:a},...e]})});const pm=null;var Ay=(0,Pe.Lq)(pm,t=>{t.addCase($u,(e,n)=>n.payload).addCase(Hu,()=>pm)});const Fy=(0,xn.UY)({mainAppParams:Bb,authorize:Wb,formStackQueue:Ub,forms:Xb,uploadForm:Jb,colorPickerForm:Ay,print:rC,modalPopUp:Ty});var By=xe(30797);const vm=(0,By.ZP)();var ze=(0,Pe.xC)({reducer:Fy,middleware:[vm]}),Ve={onMainMenuPin:t=>{ma.setPinned(t),ze.dispatch(nd(t))},onMainMenuOpen:t=>{ma.setOpened(t),ze.dispatch(Ys(t))},saveSelectedMainMenuItemId:t=>{ze.dispatch(tl(t))},saveSelectedRoleCenterItemId:t=>{ze.dispatch(tl(t))},onMainMenuCommandSend:t=>{ze.dispatch(rd(t))},onToolbarCommandSend:t=>{ze.dispatch(Xs(t))},onRoleCenterCommandSend:t=>{ze.dispatch(od(t))},onFormStackClose:t=>{ze.dispatch(Js(t))},onFormStackActive:t=>{ze.dispatch(cd(t))},onFormClose:t=>{ze.dispatch(Js(t))},onAllFormClose:()=>{ze.dispatch(ad())},onOthersFormClose:t=>{ze.dispatch(ld(t))},onModalFormClose:t=>{ze.dispatch(sd(t))},onFormActive:t=>{ze.dispatch(id(t))},onFormRaise:t=>{ze.dispatch(gd(t))},onWideScreenModeToggle:t=>{ze.dispatch(ud(t))},onLogOut:()=>{ze.dispatch(ga())},onUploadApprove:t=>{ze.dispatch(md(t))},onUploadAbort:t=>{ze.dispatch(fd(t))},onChooseColorApprove:t=>{ze.dispatch(pd(t))},onChooseColorAbort:t=>{ze.dispatch(vd(t))},onClientError:t=>{ze.dispatch(ol(t))},onClientDialog:t=>{ze.dispatch(al(t))},onClientDialogSubmit:t=>{ze.dispatch(ll(t))},onImagePreview:t=>{ze.dispatch(Uu(t))},onLastFocusedElementUpdate:(t={})=>{ze.dispatch(Ks(t))},onIFrameClick:(t={})=>{ze.dispatch(Ku(t))},onIFrameMessage:(t={})=>{ze.dispatch(qu(t))},onShowProcessIndicator:()=>{ze.dispatch(zs())},onHideProcessIndicator:()=>{ze.dispatch(Ls())}},zy=Object.defineProperty,Ly=Object.defineProperties,$y=Object.getOwnPropertyDescriptors,gm=Object.getOwnPropertySymbols,Hy=Object.prototype.hasOwnProperty,jy=Object.prototype.propertyIsEnumerable,hm=(t,e,n)=>e in t?zy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vy=(t,e)=>{for(var n in e||(e={}))Hy.call(e,n)&&hm(t,n,e[n]);if(gm)for(var n of gm(e))jy.call(e,n)&&hm(t,n,e[n]);return t},Wy=(t,e)=>Ly(t,$y(e));function di(t){const{_ref:e,schema:n,renderElement:o,className:a,testId:l}=t,i=me()("hierarchy-list",a);function s(c,u=0){return co(c).map(m=>{let d;return m!=null&&m.elements&&(d=s(m.elements,u+1)),o({schema:m,children:d,depth:u})})}return r.createElement("div",{ref:e,className:i,"data-testid":l},s(n))}di.propTypes={depthOffsetSize:v().number,className:v().string,testId:v().string,schema:v().oneOfType([v().object,v().array]).isRequired,renderElement:v().func.isRequired,_ref:v().object,dataAttrs:v().shape({})},di.defaultProps={_ref:null,className:"",depthOffsetSize:5,dataAttrs:{},testId:""};var bm=(0,r.memo)((0,r.forwardRef)((t,e)=>r.createElement(di,Wy(Vy({},t),{_ref:e})))),Uy=xe(84355),HD={popperIconSize:"18px"},Gy=Object.defineProperty,Ky=Object.defineProperties,qy=Object.getOwnPropertyDescriptors,Cm=Object.getOwnPropertySymbols,Zy=Object.prototype.hasOwnProperty,Yy=Object.prototype.propertyIsEnumerable,ym=(t,e,n)=>e in t?Gy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jo=(t,e)=>{for(var n in e||(e={}))Zy.call(e,n)&&ym(t,n,e[n]);if(Cm)for(var n of Cm(e))Yy.call(e,n)&&ym(t,n,e[n]);return t},hl=(t,e)=>Ky(t,qy(e));const _o="drop-down",Xy="drop-down";function mi(t){var e,n,o,a;const{_ref:l,isDisabled:i,isExcluded:s,onScroll:c,maxHeight:u,minWidth:m,sameWidth:d,Component:f,TargetComponent:p,data:g,className:w,children:h,componentListId:_,withArrow:I,elementNode:S,selected:E,needToRender:P,metaSet:b,events:C,testId:M,hasMenuOffset:O,onFocus:T,onBlur:D,onKeyDown:L,onEnter:$,onEsc:x,onTab:Z,popMaxWIdth:A,isListButton:F,isContextMenu:z,style:H,isIncludedList:K,setActiveMode:G,setEditableMode:ee}=t,j=M||Xy,[U,Y]=(0,r.useState)(null),[W,oe]=(0,r.useState)(null),[R,N]=(0,r.useState)(null),[X,ne]=(0,r.useState)(null),{pageZoom:ae}=(0,Xt.v9)(pe=>pe.mainAppParams),ce=(0,r.useMemo)(()=>({name:"custom-size",enabled:!0,phase:"write",fn:({state:pe})=>{const{elements:{popper:te,reference:ge}}=pe,re=jo({},pe.styles),we=500,Se=te.firstChild;return ge.clientWidth>=Se.clientWidth?re.popper.width=A||ge.clientWidth:re.popper.maxWidth=we,m&&(re.popper.minWidth=m),u&&(re.popper.maxHeight=u),d&&(re.popper.width=ge.clientWidth,re.popper.maxWidth=ge.clientWidth),ne({width:d?ge.clientWidth:re.popper.width}),z&&(re.popper.boxShadow="3px 3px 2px gray"),pe.styles=re,pe}}),[d,m,u,I,z]),be=(0,r.useMemo)(()=>({name:"custom-fix-overflow",enabled:!0,phase:"write",fn:({state:pe})=>{var te,ge,re;const{elements:{popper:we}}=pe,Se=jo({},pe.styles);if((ae||1)<1&&((te=pe==null?void 0:pe.modifiersData)!=null&&te.preventOverflow)){const{x:je,y:at}=((ge=pe==null?void 0:pe.modifiersData)==null?void 0:ge.preventOverflow)||{},Ct=new window.WebKitCSSMatrix((re=Se.popper)==null?void 0:re.transform),{m41:it,m42:ft}=Ct,It={height:document.body.offsetWidth,width:document.body.offsetWidth},rn={left:it,top:ft,right:It.width-it-we.offsetWidth,bottom:It.height-ft-we.offsetHeight},qe=je>0&&rn.left>je,on=je<0&&rn.right>-je;(qe||on)&&(je||at)&&it&&ft&&(Se.popper.transform=`translate(${it-je}px, ${ft-at}px)`,pe.modifiersData.preventOverflow={x:0,y:0})}return pe.styles=Se,pe}}),[ae]),_e=K?"right-start":O?"bottom-start":"bottom",Ce=K?[0,0]:I?[0,14]:[0,2],{styles:ie,attributes:he,state:Ie,update:Ae}=(0,Uy.D)(U,W,{placement:_e,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"offset",enabled:!0,options:{offset:Ce}},{name:"arrow",enabled:I,options:{element:R}},{name:"flip",options:{allowedAutoPlacements:["bottom","top"]}},ce,be]}),ke=me()(w,`${_o}__target-element-container`),Re=me()(w,`${_o}__popper-element-container`,{[`${_o}__list-button`]:F}),Fe=`${_o}__popper-element-arrow`,Ue=me()(`${_o}__scroll-area`,{[`${_o}__list-button`]:F}),Qe=`${_o}__list`,fe={borderRadius:"10px"},Oe=f&&(g!=null&&g.length)?g.map((pe,te)=>r.createElement(f,hl(jo({key:pe.keyValue},pe),{index:te,selected:E,ref:S}))):[],Ee=f&&g?r.createElement("ul",{id:_,className:Qe},Oe):h,ue=(0,r.useCallback)(pe=>{if(i)return;let te=!0;if(c&&(te=c({event:pe,metaSet:b})),te&&(C!=null&&C.onScroll)){const{alias:ge,args:re}=C.onScroll;le[ge]({event:pe,metaSet:b,args:re})}},[i,b,C,c]),Te=(0,r.useCallback)(pe=>{if(i)return;let te=!0;if(T&&(te=T({event:pe,metaSet:b})),te&&(C!=null&&C.onFocus)){const{alias:ge,args:re}=C.onFocus;le[ge]({event:pe,metaSet:b,args:re})}},[i,b,C,T]),We=(0,r.useCallback)(pe=>{if(i)return;let te=!0;if(D&&(te=D({event:pe,metaSet:b})),te&&(C!=null&&C.onBlur)){const{alias:ge,args:re}=C.onBlur;le[ge]({event:pe,metaSet:b,args:re})}},[i,b,C,D]),Ye=(0,r.useCallback)(pe=>{if(!i)if(Bn(pe.keyCode)){let te=!0;if($&&(te=$({event:pe,metaSet:b})),te&&(C!=null&&C.onEnter)){const{alias:ge,args:re}=C.onEnter;le[ge]({event:pe,metaSet:b,args:re})}}else if(zo(pe.keyCode)){let te=!0;if(Z&&(te=Z({event:pe,metaSet:b})),te&&(C!=null&&C.onTab)){const{alias:ge,args:re}=C.onTab;le[ge]({event:pe,metaSet:b,args:re})}}else if(zr(pe.keyCode)){let te=!0;if(x&&(te=x({event:pe,metaSet:b})),te&&(C!=null&&C.onEsc)){const{alias:ge,args:re}=C.onEsc;le[ge]({event:pe,metaSet:b,args:re})}}else if(Co(pe))pe.preventDefault();else{let te=!0;if(L&&(te=L({event:pe,metaSet:b})),te&&(C!=null&&C.onKeyDown)){const{alias:ge,args:re}=C.onKeyDown;le[ge]({event:pe,metaSet:b,args:re})}}},[i,b,C,$,Z,x,L]),Xe=(0,r.useCallback)(()=>{K&&ee&&ee()},[K,ee]),mt=(0,r.useCallback)(()=>{K&&G&&G()},[K,G]),ot=(0,r.useCallback)(pe=>{const{button:te}=pe;te!==0&&We(pe)},[We]),Je=(n=(e=Ie==null?void 0:Ie.rects)==null?void 0:e.reference)==null?void 0:n.x;(0,r.useEffect)(()=>{if(U&&Ae){const pe=new so.Z(Ae);return pe.observe(U),()=>{pe.unobserve(U)}}},[U,Ae,Je]);let ct=null;if((a=(o=l==null?void 0:l.current)==null?void 0:o.content)!=null&&a.nextSibling&&(ct=l.current.content.nextSibling),(0,r.useEffect)(()=>{ct&&(ct.onclick=pe=>{pe.stopPropagation()})},[ct]),s)return null;const nt=w==="login-layout__input-drop-down autocomplete__drop-down";return r.createElement(r.Fragment,null,r.createElement("div",{ref:Y,className:ke,style:H},p),P?(0,lo.createPortal)(r.createElement(Ca,{onClickOutside:ot},r.createElement("div",hl(jo({onMouseDown:ot,ref:oe,className:Re,style:hl(jo({},ie.popper),{display:nt?"none":"relative"})},he.popper),{onFocus:Te,onBlur:We,onKeyDown:Ye,onMouseEnter:Xe,onMouseLeave:mt,tabIndex:0,"data-testid":`${j}`}),r.createElement(el.ZP,{noDefaultStyles:!0,className:Ue,ref:l,onScroll:ue,minimalThumbSize:40,tabIndex:-1,translateContentSizesToHolder:!0,noScrollX:!0,style:X,contentProps:{style:X},thumbYProps:{style:fe}},Ee),I&&r.createElement("div",{ref:N,className:Fe,style:ie.arrow}))),document.getElementById("drop-down-list")):"")}mi.propTypes={_ref:v().object,onScroll:v().func,maxHeight:v().number,componentId:v().string,data:v().array,Component:v().elementType,TargetComponent:v().element,className:v().string,componentListId:v().string,children:v().element,withArrow:v().bool,style:v().object,minWidth:v().string,elementNode:v().object,selected:v().oneOfType([v().number,v().string]),needToRender:v().bool,hasMenuOffset:v().bool,scrollSpeed:v().number},mi.defaultProps={_ref:null,maxHeight:null,componentId:"",data:null,className:"",Component:null,componentListId:"",children:null,withArrow:!1,selected:null,popperClassName:"",hasMenuOffset:!1,scrollSpeed:1};var ya=(0,r.memo)((0,r.forwardRef)((t,e)=>r.createElement(mi,hl(jo({},t),{_ref:e})))),jD={popperIconSize:"18px"};function _m(t,e,n){return t-e/n}function Jy(t,e){let n=t;return n>e.realHeight-e.containerHeight&&(n=e.realHeight-e.containerHeight),n<0&&(n=0),n}function fi(t){t.focus()}const pi="search",Qy="search";function vi(t){const{className:e,items:n,hasSearchValue:o,onChange:a,onResultListItemSelect:l,children:i,isExcluded:s,testId:c,isSearchResultsOpened:u}=t,m=c||Qy,d=200,f=40,p=1,g=(0,r.useRef)(null),w=(0,r.useRef)(null),h=(0,r.useRef)(null),_=me()(e,pi),[I,S]=(0,r.useState)(!0),[E,P]=(0,r.useState)(-1),[b,C]=(0,r.useState)(-1),M=(0,r.useCallback)(()=>{g!=null&&g.current&&fi(g.current)},[g]),O=(0,r.useCallback)(()=>{g!=null&&g.current&&fi(g.current)},[g]);function T(F,z){const H=parseInt(d/f,10);let K;for(let G=0;G<=H;G++){const ee=f*G,j=G+1<=H&&f*(G+1),U=G===0;let Y;b>ee&&b<=j?(Y=!U&&d/(f*G),K=U?F:_m(F,z,Y)):(Y=d/(f*p),K=_m(F,z,Y))}return K}function D(F,z){if(h!=null&&h.current&&(w!=null&&w.current)){const H={realHeight:h.current.clientHeight,containerHeight:w.current.wrapperElement.clientHeight},K=T(F,H.containerHeight),G=Jy(K,H);z.current.scrollTo(null,G)}}function L(F,z,H){let K=F*f;P(F),D(K,w),l({index:F,itemUrl:null,event:H})}const $=(0,r.useCallback)(F=>{var z,H,K,G,ee,j;const U=E>=0,Y=E<n.length-1,W=F.event||F,oe=parseInt((H=(z=W.currentTarget)==null?void 0:z.dataset)==null?void 0:H.index,10),R=W.clientY;switch(!W.keyCode&&(g!=null&&g.current)&&fi(g.current),(Yn(W.keyCode)||Pr(W.keyCode))&&W.preventDefault(),!0){case(Yn(W.keyCode)&&U):{const N=E-1,X=((K=n[N])==null?void 0:K.item.caption)||"";S(!1),L(N,X,W);break}case(Pr(W.keyCode)&&Y):{let N=E+1,X=((G=n[N])==null?void 0:G.item.caption)||"";S(!1),L(N,X,W);break}case Bn(W.keyCode):{const N=((j=(ee=n[E])==null?void 0:ee.item)==null?void 0:j.id)||"";l({index:E,itemUrl:N,event:W});break}case zr(W.keyCode):{a(""),P(-1);break}case(!Yn(W.keyCode)&&!Pr(W.keyCode)&&I):{oe!==void 0&&!isNaN(oe)&&(P(oe),C(R));break}default:break}},[E,n,g,I,a,l,L]),x=(0,r.useCallback)(({event:F})=>{F.stopPropagation(),o&&(a({value:""}),g.current.firstChild.innerText="",P(-1))},[a,o]);function Z(){I||S(!0)}const A=u?i.map((F,z)=>{const H=E===F.props.index,K=me()("search__item",{search__item_active:H});return r.createElement("li",{className:K,"data-index":z,key:z,onMouseMove:I?null:Z,onMouseEnter:$},F)}):[];return(0,r.useEffect)(()=>{n.length||P(-1)},[n]),(0,r.useEffect)(()=>{!o&&g.current&&(g.current.firstChild.innerText="")},[o,g]),s?null:r.createElement("div",{className:_,id:"search","data-testid":m},r.createElement(ya,{TargetComponent:r.createElement(bn,{ref:g,className:`${pi}__input`,onChange:a,onKeyDown:$,onEnter:$,testId:`${m}_input`}),popperPlacement:"bottom-start",needToRender:o,className:"search",popperClassName:"search__items-wrapper",ref:w,onScroll:O,onHover:M,maxHeight:d,sameWidth:!0},r.createElement("ul",{ref:h},A)),r.createElement(Lt,{className:`${pi}__button`,iconName:o?"times":"search",onClick:x,testId:`${m}_button`}))}vi.propTypes={onChange:v().func.isRequired,hasSearchValue:v().bool.isRequired,items:v().array.isRequired,onResultListItemSelect:v().func.isRequired,className:v().string,children:v().array,isSearchResultsOpened:v().bool},vi.defaultProps={className:""};var e_=(0,r.memo)(vi),VD={popperIconSize:"18px"};function gi(t){const{index:e,element:n,onMouseEnter:o,onClick:a}=t,{item:{caption:l,id:i},path:s}=n;function c(u){const m=u.target.dataset.openUrl;a({caption:l,index:e,itemUrl:m?i:null,needCloseResultList:!m,event:u})}return r.createElement("div",{className:"search__result-item",onClick:c,onMouseEnter:o,tabIndex:e,"data-index":e,"data-id":i,"data-name":l},r.createElement("span",{"data-open-url":i,className:"search__result-item-name","data-name":l,"data-id":i,title:l},l),r.createElement("span",{className:"search__result-item-path",title:s},s))}gi.propTypes={index:v().number.isRequired,element:v().object.isRequired,onMouseEnter:v().func,onClick:v().func.isRequired},gi.defaultProps={onMouseEnter:()=>{}};var t_=(0,r.memo)(gi),WD={popperIconSize:"18px"},n_=Object.defineProperty,r_=Object.defineProperties,o_=Object.getOwnPropertyDescriptors,wm=Object.getOwnPropertySymbols,a_=Object.prototype.hasOwnProperty,l_=Object.prototype.propertyIsEnumerable,Em=(t,e,n)=>e in t?n_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cn=(t,e)=>{for(var n in e||(e={}))a_.call(e,n)&&Em(t,n,e[n]);if(wm)for(var n of wm(e))l_.call(e,n)&&Em(t,n,e[n]);return t},wo=(t,e)=>r_(t,o_(e));function Sm(t){return t.filter(e=>!e.hidden)}function s_(t,e){const n=[];function o(a){a.forEach(l=>{var i;(i=l[e])!=null&&i.length&&(n.push(l.GUID||null),o(Sm(l[e])))})}return o(Sm(t)),n}function Pm(t,e=null){var n;let o=null;return e&&(o=(n=t.find(a=>a.GUID===e))==null?void 0:n.elements),o||t}function Im(t,e,n,o){const a=e==null?void 0:e.clientHeight,l=n==null?void 0:n.clientHeight,i=n.querySelector(`[data-id="${o}"]`),s=i&&i.parentNode.offsetTop,c=l-a;let u=s-a/2;u>c&&(u=c),u<0&&(u=0),t.setState({topPosition:u})}function Om(t,e=!1){var n;const o={activeSubMenuId:null,openedSubMenusId:[],searchValue:"",schema:t};if(t!=null&&t.length&&e){const a=Pm(t);o.activeSubMenuId=((n=a[0])==null?void 0:n.GUID)||null,o.openedSubMenusId=s_(a,"elements")}return o}function km(t,e,n,o="",a=""){return t.reduce((l,i)=>{const{elements:s,GUID:c}=i,{caption:u}=e[c];let m=Cn(Cn({},i),e[c]);if(e[c].isSeparator)return l;if(s!=null&&s.length){let d=o+" > "+u,f=a+" > "+c;l=l.concat(km(m.elements,e,n,d,f))}else m.caption&&m.caption.toLowerCase().indexOf(n.trim().toLowerCase())!==-1&&!(m!=null&&m.isDisabled)&&l.push({item:m,path:o.substr(3),arrayIds:a.substr(3).split(" > ")});return l},[])}const i_="main-menu";function hi(t){const{className:e,leftBarHide:n,isPinned:o,testId:a,schema:l,entities:i,selectedItemId:s,isMainMenuOpened:c}=t,u=a||i_,m=10,d=(0,r.useRef)(null),f=(0,r.useRef)(null),p=(0,r.useRef)(null),g=(0,r.useRef)(null),w=(0,r.useRef)(null),h=(0,r.useRef)(!1),[_,I]=(0,r.useState)(()=>Om(l,!n)),S=(0,r.useRef)([]),E={"data-is-active":o};l!==_.schema&&I(Om(l,!n));function P(N){Ve.onMainMenuCommandSend&&Ve.onMainMenuCommandSend(wo(Cn({},N),{controlId:"mainMenu"}))}const b=(0,r.useCallback)(N=>{N.stopPropagation();const{dataset:{itemGuid:X}}=N.currentTarget;I(ne=>wo(Cn({},ne),{activeSubMenuId:X}))},[]),C=(0,r.useCallback)(N=>{N==null||N.stopPropagation();const{currentTarget:X,target:ne}=N,{dataset:{subCommand:ae}}=ne,{dataset:{itemId:ce,isDisabled:be}}=X;if(be==="true")return;Ve.saveSelectedMainMenuItemId&&Ve.saveSelectedMainMenuItemId(ce);const _e={id:ce,advanced:!!ae,isCtrlClick:OC(N.ctrlKey,N.keyCode)||kC(N.metaKey)};P(_e)},[]),M=(0,r.useCallback)(N=>N.stopPropagation(),[]),O=(0,r.useCallback)(N=>{if(N.stopPropagation(),h.current)return;const{dataset:{itemGuid:X}}=N.currentTarget,{openedSubMenusId:ne}=_;let ae=[];ne.includes(X)?ae=ne.filter(ce=>ce!==X):ae=[...ne,X],I(ce=>wo(Cn({},ce),{openedSubMenusId:ae}))},[_.openedSubMenusId]);function T(N){var X,ne;const ae={activeSubMenuId:!n&&((X=N.sectionItemsId)!=null&&X.length)?N.sectionItemsId[0]:null};let ce;n&&((ne=N.sectionItemsId)!=null&&ne.length)?ce=N.sectionItemsId:ce=N.sectionItemsId.reduce((be,_e)=>(be.includes(_e)||be.push(_e),be),[..._.openedSubMenusId]),ae.openedSubMenusId=ce,I(be=>Cn(Cn({},be),ae)),Ve.saveSelectedMainMenuItemId(N.selectedItemId)}const D=(0,r.useCallback)(N=>{I(X=>wo(Cn({},X),{searchValue:N}))},[]),L=(0,r.useCallback)(({value:N})=>{const X=N.replace(`
`,"");S.current=km(l,i,X),(X===""||!S.current.length)&&Ve.saveSelectedMainMenuItemId(null),D(X)},[l,i]),$=(0,r.useCallback)(({event:N})=>{N.stopPropagation(),Ve.onMainMenuPin&&Ve.onMainMenuPin(!o)},[o]),x=(0,r.useCallback)(N=>{var X;const{index:ne,itemUrl:ae,event:ce,needCloseResultList:be}=N;(X=ce==null?void 0:ce.stopPropagation)==null||X.call(ce);const _e=S.current[ne];_e!=null&&_e.path&&T({sectionItemsId:_e.arrayIds,selectedItemId:_e.item.id}),be&&D(""),ae&&P({id:ae})},[]);function Z(){var N;return(N=S.current)==null?void 0:N.map((X,ne)=>r.createElement(t_,{key:`${X.item.GUID}`,index:ne,element:X,onClick:x}))}function A(){return l.map(N=>{const{GUID:X,elements:ne,id:ae}=N,{caption:ce,isExcluded:be,iconName:_e,hint:Ce}=i[X];if(ne&&!be){const ie=Xc(ce,9,`
`,!0,2),he=me()("main-menu__left-bar-menu-item",{"main-menu__left-bar-menu-item_active":X===_.activeSubMenuId});return r.createElement("li",{key:X,className:he,"data-item-guid":X,title:Ce||ce,onClick:b,"data-testid":`${u}_left-bar-menu-item_${ae}`},r.createElement("div",{className:"main-menu__left-bar-menu-item-content"},r.createElement("img",{src:Ft(_e),alt:_e,className:"main-menu__left-bar-menu-item-icon"}),r.createElement("span",{className:"main-menu__left-bar-menu-item-text"},ie)))}})}(0,r.useEffect)(()=>{var N;s&&d.current&&Im(d.current,d.current.wrapper,f.current,s),!n&&_.activeSubMenuId&&Im(p.current,(N=p.current)==null?void 0:N.wrapper,g.current,_.activeSubMenuId)},[s,_.activeSubMenuId,n,c]);const F=me()(e,"main-menu"),z=me()("main-menu__pin",{"main-menu__pin_not-active":!o}),H=Z(),K=(0,r.useCallback)((N,X)=>{let ne="";return N&&X?ne="main-menu__command-item-link-collect":(X||N)&&(ne="main-menu__command-item-link-indent"),ne}),G=(0,r.useCallback)(N=>{const{caption:X,GUID:ne,depth:ae,id:ce,renderStyle:be,isExcluded:_e,isDisabled:Ce,hint:ie,iconName:he,depthOffsetSize:Ie}=N,Ae=be==null?void 0:be.isNewAvailable,ke=be==null?void 0:be.isHelp,Re=me()("main-menu__command-item",{"main-menu__command-item_hidden":_e,"main-menu__command-item_disabled":Ce,"main-menu__command-item_marked":s!==void 0&&s===ce}),Fe=me()("main-menu__command-span",{"main-menu__command-item_disabled":Ce}),Ue=K(Ae,ke);let Qe={className:"main-menu__item-icon"};he&&(Qe.src=Ft(he));const fe={"data-id":ce,"data-sub-command":Ae?"new":"help","data-testid":`${u}_item_${ce}_sub-command`};return r.createElement("li",{key:ne,"data-item-id":ce,"data-item-guid":ne,"data-name":ce,"data-is-disabled":Ce,onClick:C,className:Re},r.createElement("span",{className:me()(`main-menu__command-item-link ${Ue}`,{"main-menu__command-item-link_marked":s!==void 0&&s===ce}),"data-name":X,style:{paddingLeft:`${ae*Ie}px`},title:ie||Ke.t(X),"data-caption":Ke.t(X),"data-id":ce,"data-testid":`${u}_item_${ce}`},he?r.createElement("img",wo(Cn({},Qe),{"data-testid":`${u}_item_${ce}_icon`})):r.createElement("span",wo(Cn({},Qe),{"data-testid":`${u}_item_${ce}_icon`})),r.createElement("span",{className:Fe},Ke.t(X))),Ae||ke?r.createElement("button",Cn({className:"main-menu__command-add"},fe),r.createElement(wt(),wo(Cn({},fe),{name:Ae?"plus":"question-circle"}))):null)},[s,C,u]),ee=(0,r.useCallback)(({GUID:N,hint:X,caption:ne,id:ae})=>{function ce(be){be.stopPropagation()}return r.createElement("li",{key:N,className:"main-menu__separator",onClick:ce},r.createElement("span",{title:X||ne,"data-id":ae,"data-testid":`${u}_item_${ae}_separator`},ne))},[u]),j=(0,r.useCallback)(N=>{var X,ne;const{GUID:ae,id:ce,depth:be,caption:_e,children:Ce,hint:ie,iconName:he,schema:Ie,isExcluded:Ae,isDisabled:ke}=N,{openedSubMenusId:Re=[]}=_,Fe=me()("main-menu__category-wrapper"),Ue=me()("main-menu__category-name",{"main-menu__category-name_hidden":Ae,"main-menu__category-name_disabled":ke,"main-menu__category-name-title":!((ne=(X=Ie==null?void 0:Ie.elements)==null?void 0:X[0])!=null&&ne.elements)}),fe=(Re==null?void 0:Re.includes(ae))?"angle-down":"angle-right";return r.createElement("li",{key:ae,id:ae,className:Fe,"data-item-id":ce,"data-item-guid":ae,onClick:ke?M:O},r.createElement("span",{className:Ue,style:{paddingLeft:`${be*m}px`},title:ie||_e,"data-testid":`${u}_item_${ce}`},r.createElement(wt(),{name:fe,className:"main-menu__category-icon","data-testid":`${u}_item_${ce}_icon`}),he&&r.createElement("img",{className:"main-menu__command-icon",src:Ft(he)}),_e),Re.includes(ae)&&Ce)},[_.openedSubMenusId,O,m,u]),U=(0,r.useCallback)(({schema:N,children:X,depth:ne})=>{var ae;const{GUID:ce}=N,{id:be,caption:_e,iconName:Ce,hint:ie,isExcluded:he,isDisabled:Ie,renderStyle:Ae,isSeparator:ke}=i[ce];let Re;const Fe={GUID:ce,hint:ie,caption:_e,id:be};if((ae=N==null?void 0:N.elements)!=null&&ae.length)Re=j(Cn({depth:ne,children:X,iconName:Ce,schema:N,isExcluded:he,isDisabled:Ie},Fe));else if(ke)Re=ee(Cn({},Fe));else{const Ue=Cn({depth:ne,schema:N,renderStyle:Ae,isExcluded:he,isDisabled:Ie,iconName:Ce,depthOffsetSize:6},Fe);Re=G(Ue)}return r.createElement("ul",{key:ce,className:"main-menu__category"},Re)}),Y=(0,r.useCallback)(()=>{document.body.style["overflow-y"]="auto"},[]),W=(0,r.useCallback)(()=>{document.body.style["overflow-y"]="hidden"},[]),oe=(0,r.useCallback)(N=>{h.current=!1,w.current=N.target},[]),R=(0,r.useCallback)(N=>{h.current=w.current!==N.target},[]);return l!=null&&l.length?r.createElement("div",{className:F,"data-testid":a},r.createElement("div",{className:"main-menu__top-bar-area"},r.createElement(e_,{className:"main-menu__search",items:S.current,hasSearchValue:!!_.searchValue,onChange:L,onResultListItemSelect:x,testId:"main-menu_search",isSearchResultsOpened:c},H),r.createElement(Lt,{dataAttrs:E,testId:"main-menu_pin",className:z,onClick:$,iconName:"thumb-tack"})),r.createElement("div",{onMouseOut:Y,onMouseOver:W,onMouseDown:oe,onMouseUp:R,className:"main-menu__list-area"},n?null:r.createElement(el.ZP,{noDefaultStyles:!0,ref:p,className:"main-menu__left-bar",minimalThumbSize:40,noScrollX:!0,translateContentSizeXToHolder:!0,thumbYProps:{style:{borderRadius:"10px"}}},r.createElement("ul",{ref:g,className:"main-menu__left-bar-menu","data-testid":"main-menu__left-bar-menu"},A())),r.createElement(el.ZP,{noDefaultStyles:!0,ref:d,className:"main-menu__right-bar",thumbYProps:{style:{borderRadius:"10px"}}},r.createElement(bm,{schema:Pm(_.schema,_.activeSubMenuId),renderElement:U,ref:f,testId:"main-menu__right-bar-menu"})))):null}hi.propTypes={elements:v().arrayOf(v().object).isRequired,leftBarHide:v().bool,isPinned:v().bool},hi.defaultProps={leftBarHide:!0,isPinned:!1,elements:[]};function c_({mainAppParams:{menu:t}}){const{isPinned:e,leftBarHide:n,schema:o,entities:a,selectedItemId:l,isOpened:i}=t;return{isMainMenuOpened:i,isPinned:e,leftBarHide:n,schema:o,entities:a,selectedItemId:l}}var u_=(0,xn.qC)((0,Xt.$j)(c_),r.memo)(hi);function bi(t,e){e||(document.title=t==="ru"?"\u0422\u0423\u0420\u0411\u041E":"TURBO"),Oh(t,e),Qc("language",t,{path:"/"})}function d_(t){Ke.init({lng:t}).then(bi.bind(this,t))}function m_(t){Ke.changeLanguage(t).then(bi.bind(this,t))}var Rm={init:d_,change:m_},Rt=xe(89250),f_=xe(80447),xm=xe(12599),p_=Object.defineProperty,v_=Object.defineProperties,g_=Object.getOwnPropertyDescriptors,bl=Object.getOwnPropertySymbols,Nm=Object.prototype.hasOwnProperty,Dm=Object.prototype.propertyIsEnumerable,Mm=(t,e,n)=>e in t?p_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h_=(t,e)=>{for(var n in e||(e={}))Nm.call(e,n)&&Mm(t,n,e[n]);if(bl)for(var n of bl(e))Dm.call(e,n)&&Mm(t,n,e[n]);return t},b_=(t,e)=>v_(t,g_(e)),C_=(t,e)=>{var n={};for(var o in t)Nm.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&bl)for(var o of bl(t))e.indexOf(o)<0&&Dm.call(t,o)&&(n[o]=t[o]);return n},Hr=t=>{var e=t,{to:n}=e,o=C_(e,["to"]);const a=(0,Rt.UO)(),l=typeof n=="string"?n:(0,xm.Ep)(n),i=(0,xm.Gn)(l,a);return r.createElement(Rt.Fg,b_(h_({},o),{to:i}))},GD={popperIconSize:"18px"};const un="un-supported-browser";function y_(t){const{webUiLanguage:e}=t;return r.createElement("div",{className:un},r.createElement("div",{className:`${un}__container`},r.createElement("div",{className:`${un}__head`},r.createElement("div",{className:`${un}__head-image ${un}__head-image_${e}`})),r.createElement("div",{className:`${un}__content`},r.createElement("div",{className:`${un}__content-message`},r.createElement("div",null,Ke.t("browser_support_message_1")),r.createElement("div",null,Ke.t("browser_support_message_2")),r.createElement("div",null,Ke.t("browser_support_message_3"))),r.createElement("div",{className:`${un}__browsers`},r.createElement("div",null,r.createElement("div",{className:`${un}__browsers ${un}__browsers_chrome`}),r.createElement("a",{className:`${un}__browser-link`,href:"https://www.google.com/chrome/",target:"_blank"},"Chrome")),r.createElement("div",null,r.createElement("div",{className:`${un}__browsers ${un}__browsers_fire-fox`}),r.createElement("a",{className:`${un}__browser-link`,href:"https://www.mozilla.org",target:"_blank"},"Firefox")),r.createElement("div",null,r.createElement("div",{className:`${un}__browsers ${un}__browsers_edge`}),r.createElement("a",{className:`${un}__browser-link`,href:"https://www.microsoft.com/en-us/windows/microsoft-edge",target:"_blank"},"Edge"))))))}function __({mainAppParams:t}){return{webUiLanguage:t.webUiLanguage}}var w_=(0,Xt.$j)(__)(y_),KD={popperIconSize:"18px"};const E_="indicator";function S_({show:t=!1}){const[n,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>(t?l(setTimeout(()=>{o(!0)},700)):(o(!1),clearTimeout(a)),()=>{clearTimeout(a),o(!1)}),[t]),(0,lo.createPortal)(r.createElement("div",{className:n?"indicator":"indicator indicator_hidden"},r.createElement("div",{className:`${E_}__loader`})),document.getElementById("indicator"))}var P_=(0,Xt.$j)(({mainAppParams:t})=>({show:t.showProcessIndicator}))(S_),I_=xe(68607),O_=xe.n(I_);function k_({needToPrint:t,serviceURL:e,setPrintStatus:n}){const o=(0,r.useRef)(null),a=(0,r.useRef)(null),l=me()("print print__container"),i=(0,r.useCallback)(()=>{console.warn("Something went wrong while printing!")},[]),s=(0,r.useCallback)(()=>{n({needToPrint:!1,serviceURL:null})},[n]),c=(0,r.useCallback)(m=>{const d=document.createElement("iframe");return d.classList.add("print__frame"),d.src=m,d},[]),u=(0,r.useCallback)(m=>{o.current.innerHTML="",a.current=c(m),o.current.appendChild(a.current),(a.current.contentWindow||a.current[0]).print()},[]);return(0,r.useEffect)(()=>{if(!o.current||!t||!e)return;const m=Ph(e);Ya(["chrome","opera","safari"])?O_()({printable:m,type:"pdf",onPrintDialogClose:s,onError:i}):u(m)},[e,t,s]),t?r.createElement("div",{ref:o,className:l}):null}function R_(t){const{print:{needToPrint:e,serviceURL:n}}=t;return{needToPrint:e,serviceURL:n}}var x_=(0,Xt.$j)(R_,{setPrintStatus:nl})(k_),qD={popperIconSize:"18px"};const Ci="system-messages",N_=document.getElementById("system-messages");var D_=t=>{const{modalPopUp:e,onPopUpClose:n}=t,o=(0,r.useCallback)(l=>{n({id:l})},[n]);let a=!1;return e.length>0&&e.every(l=>(l==null?void 0:l.context)===!0)&&(a=!0),r.createElement(r.Fragment,null,e.length>0&&(0,lo.createPortal)(r.createElement("div",{className:Ci},e.map((l,i)=>{const{type:s,caption:c,message:u,component:m,context:d,iconID:f,componentProps:p}=l,g=i===e.length-1;let w={};if(d){const{controlId:h,rowId:_,rowControlId:I,tableControlId:S,formId:E}=l,P=ou({rowId:_,rowControlId:I,tableControlId:S,controlId:h,formId:E});if(P){const{height:b,top:C,left:M}=P.getBoundingClientRect();w={position:"absolute",top:C+b,left:M,width:"fit-content",border:"none"}}}return m==="ImgModal"&&(w={position:"absolute",width:"fit-content",maxWidth:"90vw",maxHeight:"90vh",border:"none"}),r.createElement("div",{key:i,className:`${Ci}__item`},r.createElement(ky,{context:d,style:w,iconID:f,caption:c,message:u,messageId:i,onClose:o,type:s,isLastMessage:g,component:m,componentProps:p}))}),r.createElement("div",{style:a&&{background:"none"}||{},className:`${Ci}__overlay`})),N_))},YD={popperIconSize:"18px"};function Tm(t){return new RegExp(`(<table.*?data-tab="${t}"[\\s\\S]*?>)([\\s\\S]*?)(<\\/([\\s\\S]*?)table>)`,"gi")}function yi(t){const e=t.match(new RegExp("(<table[\\s\\S]*?>)([\\s\\S]*?)(<\\/([\\s\\S]*?)table>)","gi"));return e!=null&&e.length&&e.length===1?e:!1}function M_(){return{currentReportTable:null,currentReportRow:null,currentReportSerialNumber:null,uniqueCell:0}}function _i(t){var e,n,o,a,l;return{"data-tab":t.target.dataset.tab||((e=t.target.parentNode)==null?void 0:e.dataset.tab)||((a=(o=(n=t.target.parentNode)==null?void 0:n.parentNode)==null?void 0:o.parentNode)==null?void 0:a.dataset.tab),"data-row":t.target.dataset.row||((l=t.target.parentNode)==null?void 0:l.dataset.row),"data-col":t.target.dataset.col,"data-lvl":t.target.dataset.lvl,"data-grp":t.target.dataset.grp,"data-ind":t.target.dataset.ind,"data-ser":t.target.dataset.ser,"data-event":t.target.dataset.event}}function wi(t){const e=t==null?void 0:t.split(";");let n=null;return e&&e[0]==="h"&&(n=+e[1]?"onExpand":"onCollapse"),n}function Ei(t){let e=parseInt(t,10),n="";for(;e;)n+=""+e--+"|";return n&&(n=n.slice(0,-1)),n||0}function T_({dataTab:t,dataRow:e,dataLvl:n}){return n?t?new RegExp(`(<tr.*?data-tab="${t}".*?data-row="${e}".*?data-lvl="${n}"[\\s\\S]*?>)([\\s\\S]*?)(<\\/([\\s\\S]*?)tr>)`,"gi"):new RegExp(`(<tr.*?data-row="${e}".*?data-lvl="${n}"[\\s\\S]*?>)([\\s\\S]*?)(<\\/([\\s\\S]*?)tr>)`,"gi"):t?new RegExp(`(<tr.*?data-tab="${t}".*?data-row="${e}".*?data-lvl="\\d+"[\\s\\S]*?>)([\\s\\S]*?)(<\\/([\\s\\S]*?)tr>)`,"gi"):new RegExp(`(<tr.*?data-row="${e}".*?data-lvl="\\d+"[\\s\\S]*?>)([\\s\\S]*?)(<\\/([\\s\\S]*?)tr>)`,"gi")}function Am(t){const e=t==null?void 0:t.match(/data-tab=\"(.*?)\"/),n=t==null?void 0:t.match(/data-row=\"(.*?)\"/),o=t==null?void 0:t.match(/data-lvl=\"(.*?)\"/);return!n||!o?!1:{dataRow:n[1],dataLvl:parseInt(o[1],10),dataTab:e}}function A_(t,e){let n,o;return e?(n=Tm(e[1]),o=t.match(n)):o=yi(t),o?o.join(""):t}function F_(t,e,n){const a=t.search(new RegExp(`<tr.*?data-row="${e}".*?data-lvl="${n}"`,"gm")),i=t.slice(a).search(/<\/tr>/gm);return t.slice(a,a+i+5)}function B_({whereReplace:t,whatToReplace:e,reservedRow:n}){const o=Am(e),a=Am(n),l=o||a,i=o?e:n;if(!l)return t;const{dataTab:s,dataLvl:c,dataRow:u}=l,m=A_(t,s),d=F_(m,u,c),f=m.replace(d,i);return t.replace(m,f)}const z_=t=>{const e={style:"",link:[],script:[],body:"",thead:"",table:"",tbody:[]},n=document.createElement("html");n.innerHTML=t;const o=l=>{var i,s,c;const u=n.getElementsByTagName(`${l}`),m=d=>d==="undefined"?"":d;for(let d=0;d<u.length;d++)switch(l){case"link":e[`${l}`][d]={attributes:Array.from((i=u[d])==null?void 0:i.attributes)};break;case"script":e[`${l}`][d]={src:(c=Array.from((s=u[d])==null?void 0:s.attributes).find(f=>(f==null?void 0:f.name)==="src"))==null?void 0:c.value,text:m(u[d].innerHTML)};break;case"table":e[`${l}`]+=l==="table"?u[d].className:"";break;case"thead":e[`${l}`]+=m(l==="thead"?u[d].outerHTML:u[d].innerHTML);break;case"tbody":e[`${l}`][d]=[...u[d].children];break;default:e[`${l}`]+=m(l==="body"?u[d].innerHTML:u[d].outerHTML);break}};return["style","link","body","script","thead","table","tbody"].forEach(l=>o(l)),e},L_=t=>{const e=t.getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight,a=(l,i)=>document.elementFromPoint(l,i);return e.right<0||e.bottom<0||e.left>n||e.top>o?!1:t.contains(a(e.left,e.top))||t.contains(a(e.right,e.top))||t.contains(a(e.right,e.bottom))||t.contains(a(e.left,e.bottom))},$_=t=>{const e=document.querySelectorAll(`.${t}`);let n=[];for(let o=0;o<e.length;o++)L_(e[o])&&n.push(e[o]);if(n.length){const o=document.createElement("IFRAME");document.body.appendChild(o);const a=o.contentWindow.document;n.forEach(l=>{a.write('<div style="-webkit-print-color-adjust: exact; color-adjust: exact">'+(l==null?void 0:l.outerHTML)+"</div>")}),a.close(),o.contentWindow.focus(),o.contentWindow.print(),setTimeout(()=>{document.body.removeChild(o)},500)}};var H_=Object.defineProperty,j_=Object.defineProperties,V_=Object.getOwnPropertyDescriptors,Fm=Object.getOwnPropertySymbols,W_=Object.prototype.hasOwnProperty,U_=Object.prototype.propertyIsEnumerable,Bm=(t,e,n)=>e in t?H_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Si=(t,e)=>{for(var n in e||(e={}))W_.call(e,n)&&Bm(t,n,e[n]);if(Fm)for(var n of Fm(e))U_.call(e,n)&&Bm(t,n,e[n]);return t},zm=(t,e)=>j_(t,V_(e));const Cl="list-button",G_="list-button";let Vo=null;const K_=({child:t,withIcon:e,index:n,currentActiveIndex:o,setActiveMode:a,setEditableMode:l,isIncludedList:i,setActiveModePrev:s,targetItemTestId:c})=>{var u;const m=(0,r.useRef)(null),{caption:d,GUID:f,name:p,hint:g,iconName:w,isDisabled:h,isPressed:_,className:I,metaSet:S,testId:E,onClick:P,events:b,commandName:C}=t,M=E||c,O=`${Cl}__item`,T=me()(I,O,{[`${O}_disabled`]:h,[`${O}_active`]:n===o}),D=`${Cl}__item-content`,L=me()(D,{[`${D}_pressed`]:_});let $=null;if(e){let z={className:`${Cl}__item-icon`,"data-testid":`${G_}__item-icon`};const H=w||(_?"check":""),K=`${M}_icon`;$=H?H!=null&&H.includes("/")?r.createElement("img",zm(Si({},z),{src:Ft(H),alt:"","data-testid":K})):r.createElement(wt(),zm(Si({},z),{name:H,"data-testid":K})):r.createElement("span",Si({},z))}const x=(0,r.useCallback)(z=>{if(z.preventDefault(),Vo&&clearTimeout(Vo),i&&l)return l()},[i,Vo,l]),Z=(0,r.useCallback)(z=>{if(h||i){z.stopPropagation();return}if(C==="@Cmd:Print=\u041F\u0435\u0447\u0430\u0442\u044C")$_("report");else{let H=!0;const K=p;if(P&&(H=P({event:z,metaSet:S,value:K})),H&&(b!=null&&b.onClick)){const{alias:G,args:ee}=b.onClick;le[G]({event:z,args:ee,metaSet:S,value:K})}}s?s():a()},[s,a,h,C,P,i]),A=(0,r.useCallback)(()=>{l&&i&&(Vo=setTimeout(l,500))},[l,i]),F=(0,r.useCallback)(()=>{a&&i&&(Vo&&clearTimeout(Vo),a())},[a,i]);return Sr(m,g,(u=m==null?void 0:m.current)==null?void 0:u.innerText),r.createElement("li",{key:f||p,"data-item-id":p,"data-item-guid":f,"data-name":p,onClick:Z,onMouseEnter:A,onMouseLeave:F,onMouseDown:x,className:T},r.createElement("div",{className:L,"data-id":p,"data-name":p,"data-testid":M,ref:m},$,r.createElement("span",{className:`${Cl}__item-caption`,"data-testid":`${M}_caption`},Ke.t(d))))};var Lm=(0,r.memo)(K_),q_=Object.defineProperty,Z_=Object.defineProperties,Y_=Object.getOwnPropertyDescriptors,$m=Object.getOwnPropertySymbols,X_=Object.prototype.hasOwnProperty,J_=Object.prototype.propertyIsEnumerable,Hm=(t,e,n)=>e in t?q_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_a=(t,e)=>{for(var n in e||(e={}))X_.call(e,n)&&Hm(t,n,e[n]);if($m)for(var n of $m(e))J_.call(e,n)&&Hm(t,n,e[n]);return t},jm=(t,e)=>Z_(t,Y_(e));const Vm="list-button",Wm="list-button";function Q_(t){return t.some(e=>!!e.iconName)}function ew(t){return t.some(e=>!!e.isPressed)}const Um=(t,e,n)=>{let o=e;const a=e;if(n==="up"?o=e-1<0?0:e-1:n==="down"&&(o=e+1>t.length-1?t.length-1:e+1),t[o].isDisabled){let i;switch(n){case"down":{i=t.slice(o).find(s=>s.isDisabled===!1),i||(i=t[a]);break}case"up":{i=t.slice(0,o).reverse().find(s=>s.isDisabled===!1),i||(i=t[a]);break}default:return o}return o=t.findIndex(s=>s===i),o}return o};function Gm(t){var e;const{_ref:n,focusedElement:o,className:a,style:l,id:i,name:s,isDisabled:c,isFixSize:u,hasActiveMode:m,mode:d,modeSwitch:f,children:p=[],caption:g,iconName:w,iconSize:h,dataAttrs:_,hint:I,tabIndex:S,events:E,metaSet:P,testId:b,onTab:C,onFocus:M,onBlur:O,onBlurCapture:T,onEnter:D,onEsc:L,onClick:$,onModeChange:x,onMouseDown:Z,dropDownClassName:A,elements:F,onHint:z,isIncludedList:H,sameWidth:K,index:G,setActiveModePrev:ee}=t,j=30,U=b||Wm,Y=`${U}_item`,W=Ke.t("list_button_hint"),oe=te=>["button","listButton"].includes(te==null?void 0:te.type),R=(e=r.Children.map(p,te=>(te==null?void 0:te.props)||te))==null?void 0:e.filter(oe),N=R&&(Q_(R)||ew(R));let X=(0,r.useRef)(null);X=o||n||X;let ne=(0,r.useRef)(null);const ae=(0,r.useRef)(null),ce=(0,r.useRef)(null);ne=f||ne;const[be,_e]=(0,r.useState)(null),[Ce,ie]=(0,r.useState)(!1),[he,Ie]=(0,r.useState)(-1),Ae=me()(Vm,Wm,`list-button-${i}`),ke=me()(a),Re=(0,r.useCallback)(()=>{var te,ge;(te=ne.current)==null||te.setDefaultMode(),ie(!1),(ge=X.current)==null||ge.focus()},[]),Fe=(0,r.useCallback)(()=>{var te,ge;(te=ne.current)==null||te.setActiveMode(),ie(!1),(ge=X.current)==null||ge.focus()},[]),Ue=(0,r.useCallback)(()=>{var te;(te=ne.current)==null||te.setEditableMode(),ie(!0)},[]),Qe=(0,r.useCallback)(({event:te,value:ge})=>{var re;if(c)return;const we=Co(te),Se=cl(te);if(we&&Se){let $e=!0;if(D&&($e=D({event:te,metaSet:P,value:ge})),$e&&(E!=null&&E.onEnter)){const{alias:je,args:at}=E.onEnter;le[je]({event:te,metaSet:P,args:at,value:ge})}(re=ne.current)!=null&&re.checkEditableMode()?m?Fe():Re():Ue()}return!1},[c,P,E,D,m,Fe,Re,Ue]),fe=(0,r.useCallback)(({event:te,value:ge})=>{if(c)return;let re=!0;if(M&&(re=M({event:te,metaSet:P,value:ge})),re&&(E!=null&&E.onFocus)){const{alias:we,args:Se}=E.onFocus;le[we]({event:te,metaSet:P,args:Se,value:ge})}return!0},[c,P,E,M]),Oe=(0,r.useCallback)(({event:te})=>{if(c)return;let ge=!0;if(O&&(ge=O({event:te,metaSet:P})),ge&&(E!=null&&E.onBlur)){const{alias:re,args:we}=E.onBlur;le[re]({event:te,metaSet:P,args:we})}return Dh()||ie(!1),!0},[c,P,E,O,ie]),Ee=(0,r.useCallback)(({event:te,value:ge})=>{var re;if(c)return;let we=!0;if(T&&(we=T({event:te,metaSet:P,value:ge})),we&&(E!=null&&E.onBlurCapture)){const{alias:Se,args:$e}=E.onBlurCapture;le[Se]({event:te,metaSet:P,args:$e,value:ge})}return(re=te==null?void 0:te.relatedTarget)!=null&&re.classList.contains("scrollarea-content")&&te.stopPropagation(),!1},[c,P,E,T]),ue=(0,r.useCallback)(({event:te})=>{te.relatedTarget!==X.current&&Re()},[Re]),Te=(0,r.useCallback)(({event:te})=>{if(!c){if(Z&&Z({event:te,metaSet:P}),E!=null&&E.onMouseDown){const{alias:ge,args:re}=E.onMouseDown;le[ge](_a({event:te,metaSet:P},re))}return Ce||(m?Fe():Re()),!1}},[c,P,E,Z]),We=(0,r.useCallback)(({event:te})=>{if(!(c||!(R!=null&&R.length)&&!(F!=null&&F.length))){if($&&$({event:te,metaSet:P}),E!=null&&E.onClick){const{alias:ge,args:re}=E.onClick;le[ge](_a({event:te,metaSet:P},re))}return Ce||Ue(),!1}},[c,R,P,E,$,Ce,m,Re,Fe,Ue]),Ye=(0,r.useCallback)(({event:te})=>{if(c)return;let ge=!0;if(C&&(ge=C({event:te,metaSet:P})),ge&&(E!=null&&E.onTab)){const{alias:re,args:we}=E.onTab;le[re]({event:te,metaSet:P,args:we})}return m?Fe():Re(),!1},[c,P,E,C,m,Fe,Re]),Xe=(0,r.useCallback)(({event:te})=>{if(c)return;let ge=!0;if(L&&(ge=L({event:te,metaSet:P})),ge&&(E!=null&&E.onEsc)){const{alias:re,args:we}=E.onEsc;le[re]({event:te,metaSet:P,args:we})}return m?Fe():Re(),!1},[c,P,E,L,m,Fe,Re]),mt=(0,r.useCallback)(({value:te})=>{if(c)return;let ge=!0;if(x&&(ge=x({metaSet:P,value:te})),ge&&(E!=null&&E.onModeChange)){const{alias:re,args:we}=E.onModeChange;le[re](jm(_a({},we),{metaSet:P,value:te}))}},[c,P,E,x]),ot=(0,r.useCallback)(te=>{var ge;const{keyCode:re}=te;if((ge=ae.current)!=null&&ge.contentElement&&R.length>0&&(Yn(re)||Pr(re))){let we;const Se=ae.current.contentElement,$e=ae.current.wrapperElement,je=Se.offsetHeight,at=Array.from(ce.current.children),Ct=parseInt(ae.scrollTop,10),it=Math.abs(Ct),ft=it+$e.offsetHeight;let It=null;Yn(re)?(we=Um(R,he,"up"),It=at[we]):(we=Um(R,he,"down"),It=at[we]);const rn=It.offsetTop;let qe=cu({parentNodeScrollTop:Ct,step:10,activeNodeOffsetTop:rn,visibleRangeMin:it,visibleRangeMax:ft,cellHeight:j});be&&(je-qe<be?(qe=je-be,ae.current.state.topPosition=qe,ae.current.scrollArea.scrollYTo(qe)):we===0?(ae.current.state.topPosition=0,ae.current.scrollArea.scrollYTo(0)):(ae.current.state.topPosition=qe,ae.current.scrollArea.scrollYTo(qe))),Ie(we)}else if(Bn(re)){if(c)return;const we=R.filter((Se,$e)=>he===$e).shift();if(we!==void 0){const{name:Se,metaSet:$e,events:je,onClick:at}=we;let Ct=!0;if(at&&(Ct=at({event:te,metaSet:$e,value:Se})),Ct&&(je!=null&&je.onClick)){const{alias:it,args:ft}=je.onClick;le[it]({event:te,args:ft,metaSet:$e,value:Se})}}}},[he,R,$,ae,j,be,ce]),Je=(0,r.useCallback)(()=>{let te=!0;if(z&&(te=z({event,metaSet:P})),te&&(E!=null&&E.onHint)){const{alias:ge,args:re}=E.onHint;te=le[ge]({event,args:re,metaSet:P})}},[z,E,P]);(0,r.useEffect)(()=>{var te;if(Ce||Ie(-1),Ce&&((te=ae==null?void 0:ae.current)!=null&&te.content)&&(X!=null&&X.current)){const{top:ge,height:re}=X.current.getBoundingClientRect(),we=ae.current.content.clientHeight,Se=ge+re,$e=document.documentElement.clientHeight-Se;we>$e&&_e(205),ae.current.content.onkeydown=je=>{je.stopPropagation(),ot(je)}}},[Ce,ot]);const ct=(0,r.useCallback)(()=>{ee?ee():Fe()},[Fe,ee]),nt=H?r.createElement(Lm,{child:{caption:g,name:s,hint:I,iconName:w,isDisabled:c,className:a,metaSet:P,testId:b,onClick:$,events:E},index:G,withIcon:!!w,currentActiveIndex:he,setActiveMode:Fe,targetItemTestId:Y,setEditableMode:Ue,isIncludedList:H,setActiveModePrev:ct}):r.createElement(Lr,{ref:X,focusedElement:o,className:ke,style:l,id:i,name:s,isDisabled:c,isFixSize:u,hasActiveMode:m,mode:d,modeSwitch:ne,metaSet:P,iconName:w,iconSize:h,caption:Ke.t(g),dataAttrs:_,hint:I?`${I}`:W,tabIndex:S,testId:`${U}`,onTab:Ye,onFocus:fe,onBlur:Oe,onBlurCapture:Ee,onModeChange:mt,onMouseDown:Te,onClick:We,onEnter:Qe,onEsc:Xe,onHint:Je}),pe=(te,ge)=>te.type!=="listButton"?r.createElement(Lm,{key:ge,child:te,index:ge,withIcon:N,currentActiveIndex:he,setActiveMode:Fe,targetItemTestId:Y,setActiveModePrev:ct}):r.createElement(Gm,{_ref:null,key:ge,index:ge,className:a,style:l,name:te.name,elements:te.elements,caption:te.caption,isDisabled:!1,hint:te.caption,iconSize:te.iconSize,iconName:te.iconName,isIncludedList:!0,setActiveModePrev:ct},te.children||[]);return r.createElement("div",_a({tabIndex:-1,onKeyDown:ot,className:Ae},_),R!=null&&R.length||F!=null&&F.length?r.createElement(ya,{withArrow:!0,isListButton:!0,sameWidth:K,className:A,TargetComponent:nt,needToRender:Ce,onTab:Ye,onBlur:ue,onEnter:Qe,onEsc:Xe,testId:`${U}_drop-down-box`,maxHeight:be,ref:ae,isIncludedList:H,setActiveMode:Fe,setEditableMode:Ue},r.createElement("ul",{className:`${Vm}__list`,ref:ce},(R==null?void 0:R.map(pe))||(F==null?void 0:F.map(pe)))):nt)}var Km=(0,r.memo)((0,r.forwardRef)((t,e)=>r.createElement(Gm,jm(_a({},t),{_ref:e})))),wa=Km,yl=xe.p+"images/TurboXIcon.svg",XD={popperIconSize:"18px"},tw=Object.defineProperty,nw=Object.defineProperties,rw=Object.getOwnPropertyDescriptors,qm=Object.getOwnPropertySymbols,ow=Object.prototype.hasOwnProperty,aw=Object.prototype.propertyIsEnumerable,Zm=(t,e,n)=>e in t?tw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pi=(t,e)=>{for(var n in e||(e={}))ow.call(e,n)&&Zm(t,n,e[n]);if(qm)for(var n of qm(e))aw.call(e,n)&&Zm(t,n,e[n]);return t},Ii=(t,e)=>nw(t,rw(e));const pr="header",lw=document.getElementById("favicon");let _l;function Ym(t){const{isMainMenuOpen:e,isMainMenuExcluded:n,userName:o,roleName:a,toolbarData:l={},version:i="Version: 0.0.0"}=t,s=(0,Xt.v9)(h=>h.mainAppParams.reminders,Xt.wU),c=(0,Xt.v9)(h=>{var _;return(_=h.mainAppParams.app)==null?void 0:_.appIcon}),u=(0,r.useCallback)(h=>{const _=h==null?void 0:h.isExist;if(_l&&clearTimeout(_l),!_)Ar(c?Ft(c):yl);else{const{iconname:I}=h;I!==lw.href.slice(-I.length)?Ar(Ft(I)):Ar(c?Ft(c):yl),_l=setTimeout(u,1e3,h)}},[s]);(0,r.useEffect)(()=>(u(s),()=>{s&&(Ar(Ft(c)||yl),clearTimeout(_l))}),[s]);const{schema:m,entities:d}=l,f=(0,r.useCallback)(({metaSet:h={}})=>{var _;const{name:I}=h;I&&((_=Ve)!=null&&_.onToolbarCommandSend)&&Ve.onToolbarCommandSend({id:I,mode:"toolbarClick",controlId:"toolBar"})},[]),p=(0,r.useCallback)(()=>{Ve.onMainMenuOpen&&Ve.onMainMenuOpen(!e)},[e,Ve]),g=(0,r.useCallback)(()=>{Ve.onLogOut&&Ve.onLogOut()},[Ve]);let w=null;return m&&d&&(w=m.map(h=>{var _;const{type:I,name:S,elements:E}=h,P=(_=d==null?void 0:d[I])==null?void 0:_[S];if(P){if(h.type==="button")return r.createElement(Lt,Ii(Pi({key:S},P),{className:`${pr}__button ${pr}__toolbar-button`,caption:"",hint:Ke.t(P.hint)||Ke.t(P.caption),metaSet:{name:S},testId:S,onClick:f}));if(h.type==="listButton"){let b=null;return E!=null&&E.length&&(b=E.map(C=>{var M;const{type:O,name:T}=C,D=(M=d==null?void 0:d[O])==null?void 0:M[T];return D?r.createElement(Lt,Ii(Pi({key:T},D),{metaSet:{name:T},testId:T,onClick:f})):null})),r.createElement(wa,Ii(Pi({key:S},P),{className:`${pr}__button ${pr}__toolbar-button`,testId:S,caption:"",hint:Ke.t(P.hint)||Ke.t(P.caption)}),b)}return null}return null})),r.createElement("header",{className:pr},r.createElement("div",{className:`${pr}__container`},!n&&r.createElement(Lt,{name:"mainMenuButton",iconName:"bars",hint:Ke.t("main_menu"),onClick:p,className:`${pr}__main-menu-button`,testId:"main-menu-button",isPressed:e}),w),r.createElement(wa,{name:"user-button",caption:o?`${o} (${a})`:"user",iconName:"user",testId:"user-button",className:`${pr}__user-button`},r.createElement(Lt,{name:"exit-button",type:"button",className:`${pr}__exit-button`,caption:Ke.t("workspace_exit"),testId:"exit-button",onClick:g}),r.createElement(Lt,{name:"version",type:"button",className:`${pr}__version-button`,isDisabled:!0,caption:i,testId:"app-version"})))}Ym.propTypes={isMainMenuExcluded:v().bool,isMainMenuOpen:v().bool.isRequired,userName:v().string,toolbarData:v().object};var sw=(0,r.memo)(Ym),JD={popperIconSize:"18px"},QD={popperIconSize:"18px"};const Xm=t=>t?"0":"180";var Jm=t=>{const{orientation:e,index:n,splitterAtRight:o,canHideBySplit:a,canResizeBySplit:l,hideFrame:i,onMouseDown:s,WIDTH_SPLITTER:c,isHideElement:u,autoSize:m}=t,[d,f]=(0,r.useState)(o?!u:u),[p,g]=(0,r.useState)(null),w=()=>e==="horizontal"?"wrapper-hide-frame wrapper-hide-frame__vertical":"wrapper-hide-frame",h=()=>e==="horizontal"?"splitter splitter__vertical":"splitter splitter__horizontal",_=()=>e==="horizontal"?{width:c+"px",cursor:l?"col-resize":"auto"}:{height:c+"px",cursor:l?"row-resize":"auto"},I=e==="horizontal"?"caret-left":"caret-up",S=e==="horizontal"?"ellipsis__vertical":"ellipsis";(0,r.useEffect)(()=>{f(o?!u:u)},[u]);const E=b=>{if(p!==null&&(e==="vertical"&&b.clientY!==p.y||e==="horizontal"&&b.clientX!==p.x))return!0;b.preventDefault(),i(n),f(!d)},P=b=>{ru(),b.detail===1?(g({x:b.clientX,y:b.clientY}),s(n,o)(b)):b.detail===2&&m(n)};return r.createElement("div",{key:n,className:h(),onMouseDown:l?P:null,style:_()},a&&r.createElement("div",{onMouseUp:E,className:w()},r.createElement(wt(),{className:I,style:{transform:"rotate("+Xm(d)+"deg)"},name:I}),r.createElement("div",{className:S}),r.createElement(wt(),{className:I,style:{transform:"rotate("+Xm(d)+"deg)"},name:I})))},iw=Object.defineProperty,cw=Object.defineProperties,uw=Object.getOwnPropertyDescriptors,Qm=Object.getOwnPropertySymbols,dw=Object.prototype.hasOwnProperty,mw=Object.prototype.propertyIsEnumerable,ef=(t,e,n)=>e in t?iw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wo=(t,e)=>{for(var n in e||(e={}))dw.call(e,n)&&ef(t,n,e[n]);if(Qm)for(var n of Qm(e))mw.call(e,n)&&ef(t,n,e[n]);return t},tf=(t,e)=>cw(t,uw(e));const nf=t=>r.createElement("div",{style:{overflow:"auto"}},r.createElement("div",{style:{display:"grid",height:"100%",gridTemplateRows:"1fr"}},t)),rf=(t,e)=>t.split(" ").map((n,o)=>o===e?"max-content":n).join(" "),Jn=6,Oi=(t,e)=>t.findIndex(n=>n.index===e),of=(t,e)=>t.split(" ").find((n,o)=>o===e),fw=t=>{const{children:e,orientation:n,style:o,className:a,dataAttrs:l,events:i,childrenHideProps:s,gridTemplateRows:c,gridTemplateColumns:u,scrollTop:m}=t,d=Wo({},o);e.forEach(j=>{var U,Y;((U=j==null?void 0:j.props)==null?void 0:U.type)==="table"&&((Y=j==null?void 0:j.props)!=null&&Y.freezed)&&o!=null&&o.paddingTop&&(d.marginTop=o.paddingTop+2,d.height="auto",delete d.paddingTop)});const[f,p]=(0,r.useState)(null),[g,w]=(0,r.useState)(null),[h,_]=(0,r.useState)(null),[I,S]=(0,r.useState)([]),[E,P]=(0,r.useState)([]),[b,C]=(0,r.useState)([]),[M,O]=(0,r.useState)(null),[T,D]=(0,r.useState)({}),L=(0,r.useRef)(null),$=(j,U)=>Y=>{Y.preventDefault(),O(of(n==="horizontal"?f:g,j));const W=n==="horizontal"?Y.clientX:Y.clientY,oe=Array.from(L.current.children),R=oe.map(X=>X.clientHeight),N=oe.map(X=>X.clientWidth);D({width:N,height:R}),_({index:j,splitterAtRight:U,client:W})},x=(0,r.useCallback)(j=>{let U="";return j?U="minmax(0,100%)"+Jn+"px":U=Jn+"px minmax(0,100%)",n==="horizontal"?{display:"grid",gridTemplateColumns:U}:{display:"grid",gridTemplateRows:U}},[n,Jn]),Z=(0,r.useCallback)((j,U,Y)=>j.split(" ").map((W,oe)=>oe===U?Y===-1?(C([...b,{index:U,predSize:W}]),Jn+"px"):(C(b.filter(R=>R.index!==U)),b[Y].predSize):W).join(" "),[b,C,Jn]),A=(0,r.useCallback)(j=>{const U=Oi(b,j);n==="horizontal"?p(Z(f,j,U)):w(Z(g,j,U))},[f,g,p,w,b]),F=(0,r.useCallback)(j=>{Oi(b,j)===-1?n==="horizontal"?p(rf(f,j)):w(rf(g,j)):C(b.map(U=>j===U.index?tf(Wo({},U),{predSize:"max-content"}):U))},[C,b,f,g,p,w]),z=(0,r.useCallback)(j=>j.reduce((U,Y)=>{if(Y){const{isAdaptive:W,isFixSize:oe,style:R,autoSize:N,hasGrid:X,type:ne,useSplitter:ae,hasCaption:ce,_autoSize:be}=Y.props,{size:_e,width:Ce,paddingLeft:ie=0,paddingRight:he=0}=R||{},Ie=_e||Ce,Ae=pt(R.minSize),ke=pt(R.maxSize);let Re="min-content";return oe&&Ie?Re=sn(Ie+(ie+he)/4+2):oe||(Re=`${Ie||1}fr`,!ce&&ce!==void 0&&(Re="max-content")),N&&(ne!=="grid"&&ne!=="table"?Re="max-content":Re="auto"),X&&be&&(Re="100%",j[j.length-1].props.hasGrid&&(Re="auto")),n==="horizontal"&&ne==="group"&&W&&(Re="auto"),ne==="frame"&&ae!==void 0?ae?Re="minmax("+(Ae||Jn)+"px,"+Re+")":Ae&&(Re="minmax("+Ae+"px,"+Re+")"):ke&&(Re="minmax("+(Ae||0)+"px,"+ke+"px)"),`${U} ${Re}`}else return U},""),[e,S,Jn,n]);(0,r.useEffect)(()=>{let j=u||c;(!j||j.split(" ").length!==e.length)&&(j=z(e).trim()),n==="horizontal"?p(j==null?void 0:j.trim()):w(j==null?void 0:j.trim()),du(e)&&w("minmax(0,1fr)")},[e]),(0,r.useEffect)(()=>{if(h===null&&i!=null&&i.saveContent&&(g&&g!==" "||f&&f!==" ")){const{alias:j,args:U}=i.saveContent;le[j]({args:U,data:{childrenHide:b,gridTemplateRows:g,gridTemplateColumns:f}})}},[h,b]),(0,r.useEffect)(()=>{s&&C(s)},[]),(0,r.useEffect)(()=>{const j=[],U=[];e.forEach((Y,W)=>{if(Y){const oe=Oi(b,W)!==-1,{useSplitter:R,splitterAtRight:N,canResizeBySplit:X,canHideBySplit:ne,name:ae,style:ce,type:be}=Y.props;U.push({minSize:pt(ce.minSize),maxSize:pt(ce.maxSize)});const _e={orientation:n,index:W,splitterAtRight:N,canResizeBySplit:X,canHideBySplit:ne,WIDTH_SPLITTER:Jn,onMouseDown:$,hideFrame:A,isHideElement:oe,autoSize:F};R&&(be==="frame"||be==="menuBar")?N?j.push(r.createElement("div",{key:ae,style:x(N)},nf(Y),r.createElement(Jm,Wo({},_e)))):j.push(r.createElement("div",{key:ae,style:x(N)},r.createElement(Jm,Wo({},_e)),nf(Y))):j.push(Y)}}),P(U),S(j)},[e,f,g]);const H=(0,r.useCallback)((j,U,Y,W)=>{const oe=Y.split(" ").map((R,N)=>{if(h.index===N){let X=j-h.client;h.splitterAtRight||(X*=-1);let ne=U[N]+X;return E[N].minSize&&E[N].minSize>ne&&(ne=E[N].minSize),E[N].maxSize&&E[N].maxSize<=ne&&(ne=E[N].maxSize),ne<Jn&&(C([...b,{index:N,predSize:M}]),ne=Jn),ne+"px"}return R}).join(" ");W(oe)},[Jn,E,M,b,h,C]),K=(0,r.useCallback)(j=>{h.index!==null&&(C(b.filter(U=>U.index!==h.index)),j.preventDefault(),n==="horizontal"?(document.body.style.cursor="col-resize",H(j.clientX,T.width,f,p)):(document.body.style.cursor="row-resize",H(j.clientY,T.height,g,w)))},[h,b,C,L,T]),G=(0,r.useCallback)(()=>{window.removeEventListener("mousemove",K),window.removeEventListener("mouseup",G)},[K]),ee=(0,r.useCallback)(()=>{_(null),O(null),G()},[_]);return(0,r.useEffect)(()=>(h!==null&&(window.addEventListener("mousemove",K),window.addEventListener("mouseup",ee)),()=>{G()}),[h,K,ee,G]),(0,r.useEffect)(()=>{L.current&&m&&setTimeout(()=>L.current.scrollTo(0,m),10)},[L.current]),(0,r.useEffect)(()=>()=>{if(i!=null&&i.saveContent&&L.current){const{alias:j,args:U}=i.saveContent;le[j]({args:U,data:{scrollTop:L.current.scrollTop}})}},[]),r.createElement("div",Wo({ref:L,className:a,style:tf(Wo({},d),{gridTemplateRows:g,gridTemplateColumns:f})},l),I)};var pw=(0,r.memo)(fw),tM={popperIconSize:"18px"};class vw extends r.Component{constructor(e){super(e),this.state={error:null,errorInfo:null}}componentDidCatch(e,n){this.setState({error:e,errorInfo:n})}render(){return this.state.errorInfo?r.createElement("div",{className:"error-boundary"},r.createElement("h2",null,Ke.t("error_application")),r.createElement("div",{className:"error-comment"},Ke.t("contact_to_dev")),r.createElement("details",{className:"error-detail-container"},r.createElement("div",{className:"error-detail"},this.state.error&&this.state.error.toString()),r.createElement("div",{className:"error-detail-stack"},this.state.errorInfo.componentStack))):this.props.children}}var wl=vw,nM={popperIconSize:"18px"};const gw="slide-bar";function af(t){switch(t){case"next":return"caret-right";case"prev":return"caret-left";default:return""}}function lf(t){const{className:e,isExcluded:n,slides:o,activeSlidesIds:a,onSlideClick:l,onSlideRender:i,testId:s}=t,c=["prev","next"],u=(0,r.useRef)(null),m=(0,r.useRef)(null),d=(0,r.useRef)(null),f={showPrevButton:!1,showNextButton:!0,leftOffset:0},[p,g]=(0,r.useState)(!1),[w,h]=(0,r.useState)(f),[_,I]=(0,r.useState)(!0),S=s||gw,E=40,P=60;(0,r.useEffect)(()=>{g(u.current.clientWidth<m.current.clientWidth)}),(0,r.useEffect)(()=>{if(d!=null&&d.current){const x=new so.Z(C);return x.observe(d.current),()=>{d!=null&&d.current&&x.unobserve(d.current)}}},[d]),(0,r.useEffect)(()=>{h(p?{leftOffset:u.current.clientWidth-m.current.clientWidth,showPrevButton:!0,showNextButton:!1}:f)},[o.length,p]),(0,r.useEffect)(()=>{var x;if(a!==void 0&&!Array.isArray(a)){const Z=m.current.offsetWidth,A=u.current.offsetWidth,F=Array.from((x=m==null?void 0:m.current)==null?void 0:x.childNodes).filter(G=>G.dataset.slideId===a).shift();let z=0;if(F)if(z=F.offsetLeft,_)I(!1);else{const{leftOffset:G}=w,ee=F.offsetLeft+F.offsetWidth-Math.abs(G)<=A,j=F.offsetLeft-Math.abs(G)<A;if(!ee&&j){O("next");return}if(ee&&j&&F.offsetLeft-Math.abs(G)>=0)return}const H=z>5;let K=Z-z>=A;if(p){if(z+A>=Z){z=z-A+((F==null?void 0:F.offsetWidth)||0)+E,K=Z-z>=A,h({leftOffset:-z,showPrevButton:H,showNextButton:K});return}h({leftOffset:-z,showPrevButton:H,showNextButton:K})}else h(f)}},[a]);function b(x){const Z=u.current.clientWidth,A=Array.from(m.current.children),{leftOffset:F,showPrevButton:z}=w,H=Math.abs(F);let K=0,G=null,ee=z;return A.some(j=>(K+=j.clientWidth,ee&&K-H>0?(j===x&&(G=c[0]),ee=!1):K-H>Z&&j===x&&(G=c[1]),!!G)),G}function C(){var x,Z,A;const F=(x=u.current)==null?void 0:x.clientWidth,z=(Z=m.current)==null?void 0:Z.clientWidth,H=(A=m==null?void 0:m.current)==null?void 0:A.offsetLeft,K=Math.abs(H);if(F<z){const ee=K>5,j=z-F-K>0;h({leftOffset:H,showNextButton:j,showPrevButton:ee})}else h(f)}const M=x=>{const{leftOffset:Z}=w,A=Math.abs(Z),F=m.current.offsetWidth,z=u.current.offsetWidth,H=Array.from(m.current.children);let K=null;if(x==="next"){if(K=H.find(ee=>ee.offsetLeft-A>=z||ee.offsetLeft+ee.offsetWidth-A>=z),K===H[H.length-1])return F-z}else if(K=Array.from(H).reverse().find(ee=>ee.offsetLeft-A<=0),K===H[1]||K===H[0])return 0;const G=x==="next"?K.offsetLeft+K.offsetWidth-z-A+E:A-K.offsetLeft+P;return K?x==="next"?G+A:A-G:x==="next"?F-z:0};function O(x){const Z=m.current.offsetWidth,A=u.current.offsetWidth,F=M(x),z=F<0?0:F,H=Z-A!==F;h({leftOffset:-z,showPrevButton:!!z,showNextButton:H})}const T=({event:x})=>{x.preventDefault();const{dataset:{nav:Z}}=x.currentTarget;O(Z)},D=x=>{x.preventDefault();const{dataset:{close:Z}}=x.target,{dataset:{slideId:A}}=x.currentTarget,{dataset:{name:F}}=x.currentTarget;if(!Z){const z=b(x.currentTarget);z&&O(z)}l&&l({id:A||F,close:!!Z})},L=me()(e,"slide-bar"),$=me()("slide-bar__slide-list-wrapper",{"slide-bar__slider":p,"slide-bar__slider_prev-hidden":w.showPrevButton,"slide-bar__slider_next-hidden":w.showNextButton});return n?null:r.createElement("div",{className:L,ref:d},p&&w.showPrevButton?r.createElement("div",{className:"slide-bar__nav-button-wrapper"},r.createElement(Lt,{className:"slide-bar__nav-button",iconName:af(c[0]),onClick:T,dataAttrs:{"data-nav":c[0]}})):null,r.createElement("div",{ref:u,className:$},r.createElement("div",{ref:m,className:"slide-bar__slide-list",style:{left:w.leftOffset},"data-testid":`${S}__slide-list`},o.map((x,Z)=>r.createElement(r.Fragment,{key:x.GUID||Z},i({slide:x,handleSlideClick:D,activeSlidesIds:a}))))),p&&w.showNextButton?r.createElement("div",{className:"slide-bar__nav-button-wrapper"},r.createElement(Lt,{className:"slide-bar__nav-button",iconName:af(c[1]),onClick:T,dataAttrs:{"data-nav":c[1]}})):null)}lf.propTypes={className:v().string,activeSlidesIds:v().oneOfType([v().array,v().string]),slides:v().oneOfType([v().array]),onSlideClick:v().func};var ki=(0,r.memo)(lf),rM={popperIconSize:"18px"},oM={popperIconSize:"18px"},hw=Object.defineProperty,bw=Object.defineProperties,Cw=Object.getOwnPropertyDescriptors,sf=Object.getOwnPropertySymbols,yw=Object.prototype.hasOwnProperty,_w=Object.prototype.propertyIsEnumerable,cf=(t,e,n)=>e in t?hw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ea=(t,e)=>{for(var n in e||(e={}))yw.call(e,n)&&cf(t,n,e[n]);if(sf)for(var n of sf(e))_w.call(e,n)&&cf(t,n,e[n]);return t},Ri=(t,e)=>bw(t,Cw(e));const yn="label";function xi(t){var e;const{_ref:n,focusedElement:o,className:a,style:l,id:i,isDisabled:s,isExcluded:c,isStatic:u,hasActiveMode:m,hasError:d,hint:f,dataAttrs:p,iconName:g,iconSize:w,value:h,testId:_,tabIndex:I,events:S,metaSet:E,onClick:P,onFocus:b,onBlur:C,onHint:M,isFixSize:O,isMultiLine:T,isWrapped:D,staticStyle:L,cellColor:$}=t,x=(0,r.useMemo)(()=>Pn({isFixSize:O,style:l}),[O,l]),{textAlign:Z,display:A}=x;let F=(0,r.useRef)(null);(o||n)&&(F=o||n);const[z,H]=Bo(),K=me()(a,yn,{[`${yn}_error`]:d,[`${yn}_disabled`]:s,[`${yn}_active`]:H.checkActiveMode(),[`${yn}_interactive`]:!u,[`${yn}_wrapped`]:D,[`${yn}_multiline`]:T,[`${yn}_not-multiline`]:!T&&!g,[`${yn}_not-multiline_with-icon`]:!T&&g,[`${yn}_static-button`]:L==="staticButton",[`${yn}_static-header`]:L==="staticHeader",[`${yn}_static-hyperlink`]:L==="staticHyperlink",[`${yn}_static-normal`]:L==="normalText"}),G=(0,r.useCallback)(oe=>{if(s||u){oe.preventDefault();return}if(P&&P({value:h,metaSet:E,event:oe}),S.onClick){const{alias:R,args:N}=S.onClick;le[R]({args:N,value:h,event:oe})}},[s,u,P,S,E]),ee=(0,r.useCallback)(oe=>{const{keyCode:R}=oe;Bn(R)&&G(oe)},[G]),j=(0,r.useCallback)(oe=>{if(s||u)return;const{value:R}=oe.currentTarget;let N=!0;if(b&&(N=b({event:oe,metaSet:E,value:R})),N&&(S!=null&&S.onFocus)){const{alias:X,args:ne}=S.onFocus;N=le[X]({event:oe,metaSet:E,args:ne,value:R})}N&&(m?H.setActiveMode():H.setEditableMode())},[s,S,E,b]),U=(0,r.useCallback)(oe=>{if(s||u)return;const{value:R}=oe.currentTarget;let N=!0;if(C&&(N=C({event:oe,metaSet:E,value:R})),N&&(S!=null&&S.onBlur)){const{alias:X,args:ne}=S.onBlur;N=le[X](Ri(Ea({event:oe},ne),{metaSet:E,value:R}))}N&&H.setDefaultMode()},[s,S,E,C]),Y=(0,r.useCallback)(oe=>{let R=!0;if(M&&(R=M({event:oe,metaSet:E})),R&&(S!=null&&S.onHint)){const{alias:N,args:X}=S.onHint;R=le[N]({event:oe,args:X,metaSet:E})}},[M,S,E]);if(Sr(F,f||h,(e=F==null?void 0:F.current)==null?void 0:e.innerText),c)return null;let W=null;if(g){const oe={width:w,height:w};W=r.createElement("img",Ea({className:`${yn}__img img-${_}`,style:oe,alt:g,src:Ft(g)},p))}return r.createElement("div",{ref:F,onMouseEnter:Y,style:{backgroundColor:$,flexGrow:2,display:A}},r.createElement("div",Ea({className:K,style:Ri(Ea({},x),{textAlign:Z}),"data-testid":_,id:i,tabIndex:Br(!u&&!s,I),onClick:G,onKeyDown:ee,onFocus:j,onBlur:U},p),W,r.createElement("span",{className:`${yn}__span`},h)))}xi.propTypes={_ref:v().object,id:v().string,className:v().string,style:v().object,isExcluded:v().bool,isDisabled:v().bool,hasActiveMode:v().bool,isStatic:v().bool,metaSet:v().object,dataAttrs:v().object,iconName:v().string,hasError:v().bool,hint:v().string,events:v().object,tabIndex:v().oneOfType([v().number,v().string]),testId:v().string,value:v().string,onClick:v().func,onFocus:v().func,onBlur:v().func,staticStyle:v().string,cellColor:v().string},xi.defaultProps={_ref:null,id:null,className:null,style:null,isExcluded:!1,isDisabled:!1,hasActiveMode:!1,isStatic:!0,metaSet:null,dataAttrs:null,iconName:null,hasError:!1,hint:null,events:null,tabIndex:0,testId:null,value:"",onClick:null,onFocus:null,onBlur:null,staticStyle:"",cellColor:""};var El=(0,r.memo)((0,r.forwardRef)((t,e)=>r.createElement(xi,Ri(Ea({},t),{_ref:e})))),ww=Object.defineProperty,uf=Object.getOwnPropertySymbols,Ew=Object.prototype.hasOwnProperty,Sw=Object.prototype.propertyIsEnumerable,df=(t,e,n)=>e in t?ww(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pw=(t,e)=>{for(var n in e||(e={}))Ew.call(e,n)&&df(t,n,e[n]);if(uf)for(var n of uf(e))Sw.call(e,n)&&df(t,n,e[n]);return t};const Iw=t=>{var e;const{activeTabName:n,isDisabled:o,handleTabClick:a,handleSlideClick:l,slide:i}=t,s=(0,r.useRef)(),{name:c,hint:u,title:m}=i,d=m&&typeof m!="string"?m:null,f=me()("tabs__tab-title",{"tabs__tab-title_active":c===n,"tabs__tab-title_disabled":o}),p=g=>{!o&&a(g),l&&l(g)};return Sr(s,u,(e=s==null?void 0:s.current)==null?void 0:e.innerText),r.createElement(r.Fragment,null,d?r.createElement(El,Pw({className:"tabs__tab-title_label"},d)):r.createElement("div",{ref:s,className:f,onClick:p,"data-name":c},m))};var Ow=Object.defineProperty,kw=Object.defineProperties,Rw=Object.getOwnPropertyDescriptors,mf=Object.getOwnPropertySymbols,xw=Object.prototype.hasOwnProperty,Nw=Object.prototype.propertyIsEnumerable,ff=(t,e,n)=>e in t?Ow(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dw=(t,e)=>{for(var n in e||(e={}))xw.call(e,n)&&ff(t,n,e[n]);if(mf)for(var n of mf(e))Nw.call(e,n)&&ff(t,n,e[n]);return t},Mw=(t,e)=>kw(t,Rw(e));const Eo="tabs";function Tw(t){const{className:e,name:n,style:o,isDisabled:a,isExcluded:l,children:i,onClick:s,onChange:c,eventsTabs:u,metaSet:m,activeTab:d,isFixSize:f,autoSize:p,showTabs:g}=t,w=r.Children.toArray(i);let h=(0,r.useMemo)(()=>Pn({isFixSize:f,style:o}),[f,o]),_=d||Th(w);const[I,S]=(0,r.useState)([_]),[E,P]=(0,r.useState)([]),[b,C]=(0,r.useState)(0);(0,r.useEffect)(()=>{!I.includes(_)&&S([...I,_])},[_]),(0,r.useEffect)(()=>{const L=w.filter($=>{var x;return((x=$==null?void 0:$.props.children)==null?void 0:x.length)===0});if(L.length!==b){let $=[...I];C(L.length),L.forEach(x=>{I.includes(x==null?void 0:x.props.name)&&($=$.filter(Z=>Z!==(x==null?void 0:x.props.name)),$.length===0?S([_]):S([...$]))})}},[w,_,I]);const M=w.map(L=>({name:L.props.name||"undefined-tab-name",type:L.props.type||"undefined-tab-type",title:L.props.title||L.props.name||"undefined-tab-title",hint:L.props.hint,isDisabled:L.props.isDisabled,isExcluded:L.props.isExcluded})),O=(0,r.useCallback)(L=>{const{dataset:{name:$}}=L.target,x=$;let Z=!0;if(!E.includes(x)&&P([...E,x]),u!=null&&u.onChange){if(c&&(Z=c({event:L,metaSet:m,value:x})),Z){const{alias:A,args:F}=u.onChange;le[A]({event:L,args:F,metaSet:m,value:x})}}else if(s&&(Z=s({event:L,metaSet:m,value:x})),u!=null&&u.onClick){const{alias:A,args:F}=u.onClick;le[A]({event:L,args:F,metaSet:m,value:x})}},[s,c,u,m,E]);function T(L){const{handleSlideClick:$,slide:x}=L;return r.createElement(Iw,{activeTabName:_,isDisabled:a,handleTabClick:O,handleSlideClick:$,slide:x})}if(l)return null;const D=me()(e,Eo,{disabled:a,[`${Eo}_adaptive`]:p===!1,[`${Eo}__not-show-tabs-links`]:p&&!g,[`${Eo}__not-show-tabs-links__adaptive`]:p===!1&&!g});return r.createElement("div",{"data-name":n,className:D,style:h},g&&r.createElement(ki,{slides:M,onSlideRender:T}),_?r.createElement("div",{className:`${Eo}__content`},w.filter(L=>{var $;return I.includes(($=L.props)==null?void 0:$.name)}).map(L=>{var $;const x={activeTabName:_},Z=(0,r.cloneElement)(L,x);return r.createElement("div",{key:Z.key,className:me()((($=Z.props)==null?void 0:$.name)===_?`${Eo}__show`:`${Eo}__hidden`)},Z)})):null)}var pf=(0,r.memo)((0,r.forwardRef)((t,e)=>r.createElement(Tw,Mw(Dw({},t),{_ref:e})))),Aw=Object.defineProperty,vf=Object.getOwnPropertySymbols,Fw=Object.prototype.hasOwnProperty,Bw=Object.prototype.propertyIsEnumerable,gf=(t,e,n)=>e in t?Aw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hf=(t,e)=>{for(var n in e||(e={}))Fw.call(e,n)&&gf(t,n,e[n]);if(vf)for(var n of vf(e))Bw.call(e,n)&&gf(t,n,e[n]);return t};const Sl="frame";function Ni(t){const{className:e,name:n,_autoSize:o,orientation:a,style:l,children:i,dataAttrs:s,autoSize:c,metaSet:u,events:m,onLoadData:d,childrenHide:f,gridTemplateColumns:p,gridTemplateRows:g,scrollerStyle:w,scrollTop:h,activeTabName:_}=t,I=(0,r.useMemo)(()=>{const M=hf({},l);switch(w){case 1:M.overflow="hidden";break;case 2:M.overflowX="auto";break;case 3:M.overflowY="auto";break;case 0:default:M.overflow="auto";break}return!c&&!o&&(M.maxSize&&(a==="vertical"?M.maxHeight=pt(M.maxSize):M.maxWidth=pt(M.maxSize)),M.minSize&&(a==="vertical"?M.minHeight=pt(M.minSize):M.minWidth=pt(M.minSize))),M},[l,a,w]),S=r.Children.toArray(i),E=me()(e,Sl,{[`${Sl}_vertical`]:a==="vertical",[`${Sl}_horizontal`]:a==="horizontal",[`${Sl}_autosize`]:c}),P=!!S.length,b=S.map(M=>{const{type:O}=(M==null?void 0:M.props)||{};return O==="table"||O==="grid"?r.cloneElement(M,{selfWidthByContent:c,isActiveTab:_===n,_autoSize:o}):M}),C=(0,r.useCallback)(()=>{let M=!0;const O=n;if(d&&(M=d({metaSet:u,value:O})),M&&(m!=null&&m.onLoadData)){const{alias:T,args:D}=m.onLoadData;le[T]({args:D,metaSet:u,value:O})}},[m,u,n]);return(0,r.useEffect)(()=>{P||C()},[]),r.createElement(wl,null,a==="tabs"?r.createElement(pf,hf({},t),b):r.createElement(pw,{dataAttrs:s,className:E,orientation:a,events:m,childrenHideProps:f,gridTemplateColumns:p,gridTemplateRows:g,style:I,scrollTop:h},b))}Ni.propTypes={name:v().string,children:v().arrayOf(v().object),classNames:v().string,style:v().object,hint:v().string,isDisabled:v().bool,isFlexible:v().bool,isScrollable:v().bool,isPrintable:v().bool},Ni.defaultProps={orientation:"vertical",style:null};var bf=(0,r.memo)(Ni),aM={popperIconSize:"18px"},zw=Object.defineProperty,Pl=Object.getOwnPropertySymbols,Cf=Object.prototype.hasOwnProperty,yf=Object.prototype.propertyIsEnumerable,_f=(t,e,n)=>e in t?zw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lw=(t,e)=>{for(var n in e||(e={}))Cf.call(e,n)&&_f(t,n,e[n]);if(Pl)for(var n of Pl(e))yf.call(e,n)&&_f(t,n,e[n]);return t},$w=(t,e)=>{var n={};for(var o in t)Cf.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Pl)for(var o of Pl(t))e.indexOf(o)<0&&yf.call(t,o)&&(n[o]=t[o]);return n};const Di="group";function Mi(t){const{className:e,behavior:n,isAdaptive:o,style:a,children:l,isDisabled:i,dataAttrs:s,isFixSize:c}=t,u=$w(a,[]),m=kh(u),d=r.Children.toArray(l),f=me()(e,Di,{[`${Di}_vertical`]:n==="vertical",[`${Di}_horizontal`]:n==="horizontal",adaptive:o,disabled:i}),p=d.reduce((g,w)=>{if(w){let{isFixSize:h,style:{maxWidth:_,minWidth:I,width:S},isAdaptive:E,autoSize:P}=w.props,b="min-content";return I&&_&&!h&&o?b=`minmax( ${sn(I)}, ${sn(_)})`:_&&!h&&o?b=sn(_):!h&&o?b=`${S||1}fr`:S&&!o&&(b=sn(S),m.minWidth=b),P&&(b="min-content"),E&&(b=n==="vertical"?"min-content":"1fr"),`${g} ${b}`}else return g},"");if(n==="horizontal"?m.gridTemplateColumns=p==null?void 0:p.trim():m.gridTemplateRows=p==null?void 0:p.trim(),!c){const g=m.width||1;m.width=`${g}fr`}return r.createElement("div",Lw({className:f,style:m},s),d)}Mi.propTypes={name:v().string,children:v().arrayOf(v().object),classNames:v().string,style:v().object,hint:v().string,isExcluded:v().bool,isDisabled:v().bool,isFlexible:v().bool,isScrollable:v().bool,isPrintable:v().bool},Mi.defaultProps={style:null,behavior:"horizontal"};var Hw=(0,r.memo)(Mi),lM={popperIconSize:"18px"},jw=Object.defineProperty,Vw=Object.defineProperties,Ww=Object.getOwnPropertyDescriptors,Il=Object.getOwnPropertySymbols,wf=Object.prototype.hasOwnProperty,Ef=Object.prototype.propertyIsEnumerable,Sf=(t,e,n)=>e in t?jw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ol=(t,e)=>{for(var n in e||(e={}))wf.call(e,n)&&Sf(t,n,e[n]);if(Il)for(var n of Il(e))Ef.call(e,n)&&Sf(t,n,e[n]);return t},Pf=(t,e)=>Vw(t,Ww(e)),Uw=(t,e)=>{var n={};for(var o in t)wf.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Il)for(var o of Il(t))e.indexOf(o)<0&&Ef.call(t,o)&&(n[o]=t[o]);return n};const jr="box";function Gw(t){var e;const{children:n,className:o,style:a,name:l,isCollapsed:i,isHandleCollapsed:s,title:c,hint:u,events:m,onToggle:d,onLoadData:f,metaSet:p,isFixSize:g,autoSize:w}=t,h=!!(n!=null&&n.length),_=(0,r.useMemo)(()=>Pn({isFixSize:g,style:a}),[g,a]),{gridTemplateRows:I}=_,S=Uw(_,["gridTemplateRows"]),E=Ol({gridTemplateRows:I},S),P=(0,r.useRef)(null),b=c&&typeof c!="string"?c:null;if(!g&&!w){const T=E!=null&&E.size?E.size:1;E.height="auto",E.gridTemplateRows=`auto ${T}fr`,E.minHeight=0}E.hasOwnProperty("textAlign")&&delete E.textAlign;const C=me()(o,jr),M=me()(`${jr}__content`,{[`${jr}__content_picture`]:du(n)}),O=(0,r.useCallback)(function(T){let D=!0;const L={isCollapsed:!i};if(d&&(D=d({event:T,metaSet:p,value:L})),D&&(m!=null&&m.onToggle)){const{alias:$,args:x}=m.onToggle;D=le[$]({event:T,args:x,metaSet:p,value:L})}if(!h&&(f&&f({event:T,metaSet:p}),m!=null&&m.onLoadData)){const{alias:$,args:x}=m.onLoadData;le[$]({event:T,args:x,metaSet:p})}return D},[h,i,m,d,p,s]);return Sr(P,u,(e=P==null?void 0:P.current)==null?void 0:e.innerText),r.createElement("div",{"data-name":l,className:C},!b&&r.createElement("div",{ref:P,className:`${jr}__title-simple`,onClick:O},r.createElement(wt(),{name:i?"angle-right":"angle-down",className:`${jr}__title-icon`}),c),b&&r.createElement("div",{ref:P,className:`${jr}__title-complex`,onClick:O,style:{backgroundColor:b.cellColor,fontSize:b.fontSize,color:b.color}},r.createElement(wt(),{name:i?"angle-right":"angle-down",className:`${jr}__title-icon`,style:{fontSize:b.iconsize}}),r.createElement(El,Ol({className:`${jr}__title-label`},b))),!i&&(n!=null&&n.length)?r.createElement(bf,Pf(Ol({},t),{className:M})):null)}var Kw=(0,r.memo)((0,r.forwardRef)((t,e)=>r.createElement(Gw,Pf(Ol({},t),{_ref:e})))),qw=Object.defineProperty,Zw=Object.defineProperties,Yw=Object.getOwnPropertyDescriptors,kl=Object.getOwnPropertySymbols,If=Object.prototype.hasOwnProperty,Of=Object.prototype.propertyIsEnumerable,kf=(t,e,n)=>e in t?qw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ti=(t,e)=>{for(var n in e||(e={}))If.call(e,n)&&kf(t,n,e[n]);if(kl)for(var n of kl(e))Of.call(e,n)&&kf(t,n,e[n]);return t},Rf=(t,e)=>Zw(t,Yw(e)),Xw=(t,e)=>{var n={};for(var o in t)If.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&kl)for(var o of kl(t))e.indexOf(o)<0&&Of.call(t,o)&&(n[o]=t[o]);return n};const Jw="number",Qw=/^[-+]?\d*([.,]\d*)?$/;function eE(t){const e=t,{className:n,focusedElement:o,style:a}=e,l=Xw(e,["className","focusedElement","style"]),i=a.textAlign?Ti({textAlign:"right"},a):a,s=me()(n,Jw),c=(0,r.useRef)(null),u=o||c;return r.createElement(bn,Rf(Ti({},l),{style:i,isNumeric:!0,className:s,isControlledValue:!1,controlRegExp:Qw,focusedElement:u}))}var tE=(0,r.memo)((0,r.forwardRef)((t,e)=>r.createElement(eE,Rf(Ti({},t),{_ref:e})))),nE=Object.defineProperty,rE=Object.defineProperties,oE=Object.getOwnPropertyDescriptors,Rl=Object.getOwnPropertySymbols,xf=Object.prototype.hasOwnProperty,Nf=Object.prototype.propertyIsEnumerable,Df=(t,e,n)=>e in t?nE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ai=(t,e)=>{for(var n in e||(e={}))xf.call(e,n)&&Df(t,n,e[n]);if(Rl)for(var n of Rl(e))Nf.call(e,n)&&Df(t,n,e[n]);return t},Mf=(t,e)=>rE(t,oE(e)),aE=(t,e)=>{var n={};for(var o in t)xf.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Rl)for(var o of Rl(t))e.indexOf(o)<0&&Nf.call(t,o)&&(n[o]=t[o]);return n};const lE="integer",sE=/^[-+]?\d*$/;function iE(t){const e=t,{className:n,focusedElement:o,style:a}=e,l=aE(e,["className","focusedElement","style"]),i=a.textAlign?Ai({textAlign:"right"},a):a,s=me()(n,lE),c=(0,r.useRef)(null),u=o||c;return r.createElement(bn,Mf(Ai({},l),{isNumeric:!0,className:s,isControlledValue:!1,controlRegExp:sE,focusedElement:u,style:i}))}var cE=(0,r.memo)((0,r.forwardRef)((t,e)=>r.createElement(iE,Mf(Ai({},t),{_ref:e})))),sM={popperIconSize:"18px"},uE=Object.defineProperty,dE=Object.defineProperties,mE=Object.getOwnPropertyDescriptors,Tf=Object.getOwnPropertySymbols,fE=Object.prototype.hasOwnProperty,pE=Object.prototype.propertyIsEnumerable,Af=(t,e,n)=>e in t?uE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ff=(t,e)=>{for(var n in e||(e={}))fE.call(e,n)&&Af(t,n,e[n]);if(Tf)for(var n of Tf(e))pE.call(e,n)&&Af(t,n,e[n]);return t},Bf=(t,e)=>dE(t,mE(e));const Fi=["left","right"],nn="checkbox",zf=1,Lf=5.5;function Bi(t){var e;const{_ref:n,focusedElement:o,className:a,style:l,id:i,isDisabled:s,isExcluded:c,isStatic:u,hasActiveMode:m,mode:d,modeSwitch:f,hasError:p,hint:g,dataAttrs:w,value:h,initialValue:_,testId:I,events:S,metaSet:E,tabIndex:P,label:b,labelPosition:C,onChange:M,onKeyDown:O,onKeyUp:T,onEnter:D,onEsc:L,onFocus:$,onBlur:x,onTab:Z,onClick:A,onModeChange:F,isFixSize:z,isWrapped:H,isMultiLine:K,disableOnEdit:G,onEdit:ee,onImplicitChange:j,onHint:U,isParentTable:Y,cellColor:W}=t;let oe=(0,r.useRef)(null);oe=n||oe;const R=(S==null?void 0:S.onEdit)||ee,N=iu(b);let X=(0,r.useRef)(null);X=o||X;const ne=(0,r.useMemo)(()=>Pn({isFixSize:z,style:l}),[z,l]),ae={};(l==null?void 0:l.width)<=Lf&&!N&&(ae.width=sn(l.width-zf),ae.height=sn(l.width-zf));let ce=i||null;!ce&&N&&(ce=Gn().generate());const[be,_e]=Bo(d,f),Ce=C===Fi[0],ie=C===Fi[1],he=me()(a,nn,"text-ellipsis",{[`${nn}_with-label`]:!!N,[`${nn}_left-direction`]:Ce,[`${nn}_right-direction`]:ie,[`${nn}_error`]:p,[`${nn}_disabled`]:s,[`${nn}_static`]:u,[`${nn}_active`]:_e.checkActiveMode(),[`${nn}_editable`]:_e.checkEditableMode(),[`${nn}_custom-style`]:(l==null?void 0:l.width)<=Lf,[`${nn}__cell`]:Y}),Ie=me()(`${nn}__label`,{[`${nn}__label_left`]:Ce,[`${nn}__label_right`]:ie,[`${nn}__label_wrapped`]:H,[`${nn}__label_multiline`]:K,[`${nn}__label_not-multiline`]:!K}),Ae=(0,r.useCallback)(Ee=>{if(Ee.stopPropagation(),R&&G!==!1)return;let ue=!0;if(A&&(ue=A({event:Ee,metaSet:E,value:h})),ue&&(S!=null&&S.onClick)){const{alias:Te,args:We}=S.onFocus;ue=le[Te]({event:Ee,metaSet:E,args:We,value:h})}},[s,E,S,A,h]),ke=(0,r.useCallback)(Ee=>{if(h!==_&&_!==void 0&&(j&&j({event:Ee,metaSet:E,value:_,notValidValue:!0}),S!=null&&S.onImplicitChange)){const{alias:Te,args:We}=S.onImplicitChange;le[Te]({event:Ee,metaSet:E,args:We,value:_,notValidValue:!0})}let ue=!0;if($&&(ue=$({event:Ee,metaSet:E,value:h})),ue&&(S!=null&&S.onFocus)){const{alias:Te,args:We}=S.onFocus;ue=le[Te]({event:Ee,metaSet:E,args:We,value:h})}if(ue)if(m){if(_e.setActiveMode(),R)if(ee)ue=ee({event:Ee,metaSet:E,value:h});else{const{alias:Te,args:We}=S.onEdit;le[Te]({event:Ee,metaSet:E,args:We,value:h})}}else _e.setEditableMode()},[s,u,S,E,h,$,j]),Re=(0,r.useCallback)(Ee=>{if(s)return;let ue=!0;if(x&&(ue=x({event:Ee,metaSet:E,value:h})),ue&&(S!=null&&S.onBlur)){const{alias:Te,args:We}=S.onBlur;ue=le[Te]({event:Ee,args:We,metaSet:E,value:h})}ue&&_e.setDefaultMode()},[s,u,S,E,h,x]),Fe=(0,r.useCallback)(Ee=>{if(s||u||R&&G!==!1){Ee!=null&&Ee.preventDefault&&(Ee==null||Ee.preventDefault());return}if(M&&M({event:Ee,metaSet:E,value:!h}),S!=null&&S.onChange){const{alias:ue,args:Te}=S.onChange;le[ue]({event:Ee,metaSet:E,args:Te,value:!h})}},[s,u,S,E,M,h,R]),Ue=(0,r.useCallback)(Ee=>{const{keyCode:ue}=Ee;if(s||R&&G!==!1)return;let Te=!0;if(Bn(ue))Fe(Ee);else if(ai(ue))Ee.stopPropagation();else if(zo(ue)){if(Z&&(Te=Z({event:Ee,metaSet:E,value:h})),Te&&(S!=null&&S.onTab)){const{alias:We,args:Ye}=S.onTab;Te=le[We]({event:Ee,metaSet:E,args:Ye,value:h})}Te&&_e.setDefaultMode()}else if(zr(ue)){if(L&&(Te=L({event:Ee,metaSet:E,value:h})),Te&&(S!=null&&S.onEsc)){const{alias:We,args:Ye}=S.onEsc;Te=le[We]({event:Ee,metaSet:E,args:Ye,value:h})}Te&&(m?_e.setActiveMode():_e.setDefaultMode())}else if(Co(Ee))Ee.preventDefault();else if(O&&(Te=O({event:Ee,metaSet:E,value:h})),Te&&(S!=null&&S.onKeyDown)){const{alias:We,args:Ye}=S.onKeyDown;le[We]({event:Ee,metaSet:E,value:h,args:Ye})}},[s,u,S,E,h,O,Z,D,L,Fe]),Qe=(0,r.useCallback)(Ee=>{if(s||u||R&&G!==!1)return;let ue=!0;if(T&&(ue=T({event:Ee,metaSet:E,value:h})),ue&&(S!=null&&S.onKeyUp)){const{alias:Te,args:We}=S.onKeyUp;le[Te]({event:Ee,metaSet:E,value:h,args:We})}},[s,u,S,E,h,T]),fe=(0,r.useCallback)(Ee=>{let ue=!0;if(U&&(ue=U({event:Ee,metaSet:E})),ue&&(S!=null&&S.onHint)){const{alias:Te,args:We}=S.onHint;ue=le[Te]({event:Ee,args:We,metaSet:E})}},[U,S,E]);return(0,r.useEffect)(()=>{if(!s&&m){let Ee=!0;if(F&&(Ee=F({metaSet:E,value:be})),Ee&&(S!=null&&S.onModeChange)){const{alias:ue,args:Te}=S.onModeChange;le[ue]({args:Te,metaSet:E,value:be})}}},[s,m,E,S,F,be]),(0,r.useEffect)(()=>{s&&_e.setDefaultMode()},[s]),(0,r.useEffect)(()=>{R&&G===!1&&Fe({})},[G]),Sr(oe,g||N,(e=oe==null?void 0:oe.current)==null?void 0:e.innerText),ci({dataAttrs:w,initialValue:_,value:h,resetValue:()=>{if(j&&j({event,metaSet:E,value:_,notValidValue:!0}),S!=null&&S.onImplicitChange){const{alias:Ee,args:ue}=S.onImplicitChange;le[Ee]({event,metaSet:E,args:ue,value:_,notValidValue:!0})}}}),c?null:r.createElement("div",{style:{backgroundColor:Y&&W?"transparent":W}},r.createElement("div",{ref:oe,className:he,style:ne,onMouseEnter:fe,"data-testid":I,tabIndex:-1},r.createElement("input",Bf(Ff({style:ae,type:"checkbox",ref:X,id:ce,className:`${nn}__control`,disabled:s,checked:h,readOnly:s||u,"data-is-checked":h},w),{tabIndex:Br(!u&&!s,P),onFocus:ke,onBlur:Re,onKeyDown:Ue,onKeyUp:Qe,onChange:Fe,onClick:Ae})),N&&r.createElement("span",{className:Ie,onClick:Fe,tabIndex:-1},N)))}Bi.propTypes={_ref:v().object,focusedElement:v().object,className:v().string,style:v().object,id:v().string,isDisabled:v().bool,isExcluded:v().bool,isStatic:v().bool,hasActiveMode:v().bool,mode:v().string,modeSwitch:v().object,hasError:v().bool,hint:v().string,dataAttrs:v().object,value:v().oneOfType([v().bool,v().string,v().number]),testId:v().string,tabIndex:v().oneOfType([v().number,v().string]),events:v().object,metaSet:v().oneOfType([v().object,v().boolean]),label:v().string,labelPositions:v().string,onChange:v().func,onKeyDown:v().func,onKeyUp:v().func,onEnter:v().func,onEsc:v().func,onTab:v().func,onFocus:v().func,onBlur:v().func,onClick:v().func,onModeChange:v().func},Bi.defaultProps={_ref:null,focusedElement:null,className:null,style:null,id:null,isDisabled:!1,isExcluded:!1,isStatic:!1,hasActiveMode:!1,mode:null,modeSwitch:null,hasError:!1,hint:null,dataAttrs:null,value:!1,testId:null,tabIndex:0,events:null,metaSet:null,label:null,labelPosition:Fi[1],onChange:null,onKeyDown:null,onKeyUp:null,onEnter:null,onEsc:null,onTab:null,onFocus:null,onBlur:null,onClick:null,onModeChange:null};var xl=(0,r.memo)((0,r.forwardRef)((t,e)=>r.createElement(Bi,Bf(Ff({},t),{_ref:e})))),vE=xe(89755),vr=xe(70722),Uo=xe(58916),Go=xe(49599),gE=xe(37042),hE=xe(4543),bE=xe(39880),CE={firstDayOfWeek:1,dayNames:["\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435","\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0432\u0442\u043E\u0440\u043D\u0438\u043A","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043F\u044F\u0442\u043D\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043E\u0442\u0430"],dayNamesShort:["\u0412\u0441","\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431"],dayNamesMin:["\u0412\u0441","\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431"],monthNames:["\u044F\u043D\u0432\u0430\u0440\u044C","\u0444\u0435\u0432\u0440\u0430\u043B\u044C","\u043C\u0430\u0440\u0442","\u0430\u043F\u0440\u0435\u043B\u044C","\u043C\u0430\u0439","\u0438\u044E\u043D\u044C","\u0438\u044E\u043B\u044C","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u043E\u043A\u0442\u044F\u0431\u0440\u044C","\u043D\u043E\u044F\u0431\u0440\u044C","\u0434\u0435\u043A\u0430\u0431\u0440\u044C"],monthNamesShort:["\u044F\u043D","\u0444\u0432","\u043C\u0440","\u0430\u043F","\u043C\u0430\u0439","\u0438\u043D","\u0438\u043B","\u0430\u0432","\u0441\u0442","\u043E\u043A","\u043D\u043E","\u0434\u0435"]},yE={firstDayOfWeek:1,dayNames:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],dayNamesShort:["sun","mon","tue","wed","thur","fri","sat"],dayNamesMin:["Su","Mn","Tu","Wd","Th","Fr","Sa"],monthNames:["january","february","march","april","may","june","july","august","september","october","november","december"],monthNamesShort:["jan","feb","mar","apr","may","june","july","aug","sept","oct","nov","dec"]};const $f={ru:CE,en:yE},zi={dateAndTime:/^([0-9]|0[1-9]|[12][0-9]|3[01])?(\.)?([0-9]|0[1-9]|1[012])?(\.)?(\d|20\d\d|20[0-9]|210[01]?|1\d\d|19\d\d|0\d|[1-9]\d)?(( )(([012]|[01][0-9]|2[0-3])?([:]([0-9]|[0-5][0-9])?)?([:]([0-9]|[0-5][0-9])?)?)?)?$/,dateOnly:/^([0-9]|0[1-9]|[12][0-9]|3[01])?(\.)?([0-9]|0[1-9]|1[012])?(\.)?(\d|20\d\d|20[0-9]|210[01]?|1\d\d|19\d\d|0\d|[1-9]\d)?$/,timeOnly:/^([0-1]?\d|2[0-3])?:?(?::([0-5]?\d))?:?(?::([0-5]?\d))?$/},Hf={dateAndTime:{formatOfDate:"dd.MM.yyyy HH:mm:ss",defaultMask:zi.dateAndTime,0:/^$/,1:/^[0-9]|[.]$/,2:/^([012][0-9]|3[0|1])|(\d\.)|(\.\d)|(\.\.)$/,3:/^(([012][0-9]|3[0|1])\.)|(\d\.\d)|(\d\.\.)|(\.\.\d)|(\.([0][0-9]|[1][0-2]))$/,4:/^(([012][0-9]|3[0|1])\.\.)|(([012][0-9]|3[0|1])\.\d)|(\d\.([0][0-9]|1[012]))|(\d\.\d\.)|(\.\d\.\d)|(\.([0][0-9]|1[012])\.)|(\.\.(19|2[0-1]))$/,5:/^(([012][0-9]|3[0|1])\.([0][0-9]|[1][0-2]))|(([012][0-9]|3[0|1])\.\d\.)|(([012][0-9]|3[0|1])\.\.\d)|(\d\.([0][0-9]|[1][0-2])\.)|(\d\.\d\.\d)|(\d\.\.\d\d)|(\.([0][0-9]|[1][0-2])\.\d)|(\.\d\.\d\d)|(\.\.\d\d\d)$/},timeOnly:{formatOfDate:"HH:mm:ss",defaultMask:zi.timeOnly},dateOnly:{formatOfDate:"dd.MM.yyyy",defaultMask:zi.dateOnly,0:/^$/,1:/^[0-9]|[.]$/,2:/^([012][0-9]|3[0|1])|(\d\.)|(\.\d)|(\.\.)$/,3:/^(([012][0-9]|3[0|1])\.)|(\d\.\d)|(\d\.\.)|(\.\.\d)|(\.([0][0-9]|[1][0-2]))$/,4:/^(([012][0-9]|3[0|1])\.\.)|(([012][0-9]|3[0|1])\.\d)|(\d\.([0][0-9]|1[012]))|(\d\.\d\.)|(\.\d\.\d)|(\.([0][0-9]|1[012])\.)|(\.\.(19|2[0-1]))$/,5:/^(([012][0-9]|3[0|1])\.([0][0-9]|[1][0-2]))|(([012][0-9]|3[0|1])\.\d\.)|(([012][0-9]|3[0|1])\.\.\d)|(\d\.([0][0-9]|[1][0-2])\.)|(\d\.\d\.\d)|(\d\.\.\d\d)|(\.([0][0-9]|[1][0-2])\.\d)|(\.\d\.\d\d)|(\.\.\d\d\d)$/}};function Li(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function Sa(t,e){e||(e={formatOfDate:"dateOnly",utc:!1});const n=Li(),o=new window.Date;let a=t||null,l=null,i=null,s=null;switch(e.formatOfDate){case"dateAndTime":i="dd.MM.yyyy HH:mm:ss";break;case"timeOnly":i="HH:mm:ss";break;case"dateOnly":default:i="dd.MM.yyyy";break}if(/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d+(?:[+-][0-2]\d:[0-5]\d|Z)/.test(a)){let c=(0,Uo.Z)(a,"yyyy-MM-dd'T'HH:mm:ss'Z'",o),u=(0,Uo.Z)(a,"yyyy-MM-dd'T'HH:mm:ssXXX'Z'",o);!e.utc&&(0,Go.Z)(c)?l=c:!e.utc&&(0,Go.Z)(u)&&(l=u),l=e.utc?(0,vr.utcToZonedTime)(a,n):l,s=a}else if(/^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])$/.test(a)&&e.utc)s=`${a}T00:00:00Z`,l=(0,vr.utcToZonedTime)(s,n);else if(/^(?:2[0-3]|[01]?[0-9]):[0-5][0-9]:[0-5][0-9]Z$/.test(a)&&e.utc)s=`${(0,vr.format)(o,"yyyy-MM-dd")}T${a}`,l=(0,vr.utcToZonedTime)(s,n);else if(a)if(a.length!==i.length){let c=(0,Uo.Z)(a,"dd.MM.yyyy",o),u=(0,Uo.Z)(a,"dd.MM.yyyy HH:mm:ss",o),m=(0,Uo.Z)(a,"dd.MM.yyyy HH:mm",o);e.formatOfDate==="dateAndTime"&&(0,Go.Z)(c)?l=c:e.formatOfDate==="dateAndTime"&&(0,Go.Z)(m)?l=m:e.formatOfDate==="dateOnly"&&(0,Go.Z)(u)?l=u:e.formatOfDate==="dateOnly"&&(0,Go.Z)(m)&&(l=m)}else l=(0,Uo.Z)(a,i,o);if(l instanceof Date&&!isNaN(l)&&(a=(0,vr.format)(l,i),e.utc)){const c=e.formatOfDate==="dateOnly"?(0,gE.Z)((0,hE.Z)((0,bE.Z)(l,0),0),0):l,u=(0,vr.utcToZonedTime)(c,"UTC");s=(0,vr.format)(u,"yyyy-MM-dd'T'HH:mm:ss'Z'")}return{value:a,date:l,dateFormat:i,preparedValue:s}}function jf(){return $f[Ke.language]||$f.ru}const Vf=(t,e,n,o)=>{if(!t)return t;const a=Li(),l=new window.Date;let i="",[s,c]=t.split(" "),[u,m,d]=s.split(".");n==="timeOnly"&&(c=s);let[f,p,g]=(c==null?void 0:c.split(":"))||[];d||(d=l.getFullYear()),m?m&&(m=+m-1):m=l.getMonth(),d.length===1?d=`200${d}`:d.length===2&&(d>=46?d=`19${d}`:d=`20${d}`),(!f||!p||!g)&&(f||(f="00"),p||(p="00"),g||(g="00"));const w=h=>h.toString().length>1?h:"0"+h;if(["dateAndTime","dateOnly"].includes(n)){const h=new window.Date(d,m,u,f,p,g);if(h.getDate()!==Number(u)||h.getMonth()!==Number(m)||h.getFullYear()!==Number(d)){let _=n==="dateAndTime"?` ${w(f)}:${w(p)}:${w(g)}`:"";i=`${w(u)}.${w(m+1)}.${d}`+_}else i=(0,vr.format)(h,e,{timeZone:a})}else n==="timeOnly"&&(i=`${f}:${p}:${g}`);return o.current.value=i,i},_E=(t,e)=>{const n=Hf[e][t.length]||Hf[e].defaultMask;return n==null?void 0:n.test(t)};var uM={popperIconSize:"18px"},wE=Object.defineProperty,EE=Object.defineProperties,SE=Object.getOwnPropertyDescriptors,Wf=Object.getOwnPropertySymbols,PE=Object.prototype.hasOwnProperty,IE=Object.prototype.propertyIsEnumerable,Uf=(t,e,n)=>e in t?wE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_n=(t,e)=>{for(var n in e||(e={}))PE.call(e,n)&&Uf(t,n,e[n]);if(Wf)for(var n of Wf(e))IE.call(e,n)&&Uf(t,n,e[n]);return t},Qn=(t,e)=>EE(t,SE(e));function OE(t){return t==null}const fn="date",Pa={input:"input",button:"button"},kE=["pi-chevron-up","pi-chevron-down"],RE=(t,e,n)=>{let o=0,a=0,l=0;for(let i=0;i<t.length;i++)t[i]===e&&o++;if(n==="dateAndTime")for(let i=0;i<t.length;i++)i>=9&&t[i]===" "&&a++,i>=11&&t[i]===":"&&l++;return{count:o,spaceCount:a,colonCount:l}},xE=(t,e)=>{const n=(u,m)=>{let d=o.split("");d.splice(u,0,m),o=d.join("")};let o=t,a=".",l=" ",i=":",s;e==="dateAndTime"||e==="dateOnly"?s=a:e==="timeOnly"&&(s=i);const c=RE(o,s,e);return e==="timeOnly"&&c.count===2||e==="dateOnly"&&c.count===2||(o.length===3&&c.count===0?n(2,a):o.length===6&&c.count===1?n(5,a):o.length===11&&c.spaceCount===0?n(10,l):o.length===14&&c.colonCount===0?n(13,i):o.length===17&&c.colonCount===1&&n(16,i)),o};function $i(t){var e,n;const{_ref:o,focusedElement:a,id:l,className:i,style:s,isDisabled:c,isDisabledByAutolock:u,isStatic:m,hasActiveMode:d,mode:f,modeSwitch:p,value:g,formattedValue:w,initialValue:h,initialFormattedValue:_,testId:I,hasError:S,hint:E,dataAttrs:P,metaSet:b,events:C,tabIndex:M,onAutolock:O,onModeChange:T,onChange:D,onKeyDown:L,onKeyUp:$,onEnter:x,onEsc:Z,onBlur:A,onBlurCapture:F,onImplicitChange:z,onFocus:H,onTab:K,onDelete:G,onMouseDown:ee,onMouseUp:j,onClick:U,onDoubleMouseDown:Y,onDoubleMouseUp:W,onDoubleClick:oe,dateOptions:R,disableOnEdit:N,onEdit:X,isRequired:ne,isParentTable:ae,cellColor:ce,isFixSize:be,isAutoLock:_e,type:Ce}=t,ie=m||u,he=_e&&u===void 0,Ie=(C==null?void 0:C.onEdit)||X,Ae=P["data-table-id"]==="CardFile",ke=w!==void 0?w:g,Re=(0,r.useRef)({value:g,formattedValue:ke}),Fe=(0,r.useRef)(""),{formatOfDate:Ue}=R,Qe=Ue!=="dateOnly",fe=Ue==="timeOnly",Oe=(0,r.useRef)(null),Ee=(0,r.useRef)(null),ue=a||Oe,Te=(0,r.useRef)(null),We=(0,r.useRef)(null),[Ye,Xe]=Bo(f,p),mt=(0,r.useRef)(null),[ot,Je]=(0,r.useState)(!1),[ct,nt]=(0,r.useState)(()=>{const V=Sa(g,R);return mt.current=V.dateFormat,V.date}),[pe,te]=(0,r.useState)(!1);let ge=!1;const re=(0,r.useMemo)(()=>l||Gn().generate(),[l]),we=`${fn}_${re}`,Se=!c&&!ie,$e=me()(i,fn,we,{[`${fn}_disabled`]:c||u,[`${fn}_error`]:S,[`${fn}_active`]:Xe.checkActiveMode(),[`${fn}_editable`]:Xe.checkEditableMode(),[`${fn}_static`]:ie,[`${fn}_with-icon`]:Se,[`${fn}__cell`]:ae}),je=me()(`${fn}__date-picker`,we),at=me()(i,`${fn}__input`,{[`${fn}_required`]:ne&&!g&&!Xe.checkEditableMode()}),Ct=(0,r.useMemo)(()=>Qn(_n({},P),{"data-sub-element":Pa.input}),[]),it=(0,r.useMemo)(()=>Qn(_n({},P),{"data-sub-element":Pa.button,"data-testid":`${I}_button`}),[]),ft=(0,r.useCallback)(()=>{var V;(V=ue.current)==null||V.focus()},[ue]);(0,r.useEffect)(()=>{$e.includes(`${fn}_editable`)&&ft()},[$e]);const It=(0,r.useCallback)(()=>{const V=ue.current.value;return V===ke?g:V},[g,ke,ue]),rn=(0,r.useCallback)(V=>{ue.current&&(ue.current.value=V)},[ue]),qe=(0,r.useCallback)(V=>{var ve;const De=(ve=ue.current)==null?void 0:ve.value;let J=V?g:ke;return!V&&De!==Re.current.formattedValue?J:!V&&De!==void 0&&De!==J&&De!==Re.current.value?De:J},[g,ke]),on=qe(Xe.checkEditableMode());(0,r.useEffect)(()=>{ue.current&&on!==void 0&&ue.current.value!==on&&rn(on)},[ue,on]),(0,r.useLayoutEffect)(()=>{if(h!==void 0&&(ue.current.value=h,Re.current={initialValue:h,initialFormattedValue:_},g!==h&&(z&&z({event,metaSet:b,value:h,notValidValue:!0}),C!=null&&C.onImplicitChange))){const{alias:V,args:ve}=C.onImplicitChange;le[V]({event,metaSet:b,args:ve,value:h,notValidValue:!0})}},[]),Sr(ue,E,(e=ue==null?void 0:ue.current)==null?void 0:e.innerText);const[,Ln]=Kd({targetElement:ue.current,needSelection:!0,textSelectionSwitch:Ee,editableMode:Xe.checkEditableMode()}),Mo=(0,r.useCallback)(()=>Xe.checkDefaultMode(),[Xe]),sr=(0,r.useCallback)(()=>Xe.checkActiveMode(),[Xe]),Ge=(0,r.useCallback)(()=>Xe.checkEditableMode(),[Xe]),Kt=(0,r.useCallback)(()=>{Ln.setDefaultMode(),Xe.setDefaultMode()},[Xe]),Vt=(0,r.useCallback)(()=>{Ln.setDefaultMode(),Xe.setActiveMode()},[Xe,qe]),Be=(0,r.useCallback)((V=!1)=>{Ln[V?"setSelectedMode":"setDefaultMode"](),Xe.setEditableMode()},[Xe,qe]);(0,r.useEffect)(()=>{ie&&Je(!1)},[ie]),(0,r.useEffect)(()=>{if(!c&&d){let V=!0;if(T&&(V=T({metaSet:b,value:Ye})),V&&(C!=null&&C.onModeChange)){const{alias:ve,args:De}=C.onModeChange;le[ve](Qn(_n({},De),{args:De,metaSet:b,value:Ye}))}}},[c,b,C,T,Ye]);const $n=V=>V instanceof window.Date&&!isNaN(V);(0,r.useEffect)(()=>{const{date:V}=Sa(g,ke);($n(V)||g==="")&&(Re.current={value:g,formattedValue:ke})},[g,ke]),(0,r.useEffect)(()=>{Ie&&pe==="button"&&N===!1&&Je(!ot)},[N]);const an=(0,r.useCallback)(()=>{if(c)return;let V=!0;const ve=Vf(It(),mt.current,Ue,ue);if(x&&(V=x({metaSet:b,value:ve})),V&&(C!=null&&C.onEnter)){const{alias:De,args:J}=C.onEnter;le[De]({metaSet:b,args:J,value:ve})}d&&(Je(!1),Vt()),ft()},[ft,c,b,C,x,Vt,d,It]),ut=(0,r.useCallback)(V=>{V.stopPropagation()},[]),ir=(0,r.useCallback)(V=>{const{target:{dataset:{subElement:ve}},detail:De}=V,{value:J}=ue.current;let ye=!0;if(ge=ve===Pa.button,De===1&&(U&&(ye=U({event:V,metaSet:Qn(_n({},b),{subElement:ve}),value:J})),ye&&(C!=null&&C.onClick))){const{alias:Ne,args:Le}=C.onClick;le[Ne]({event:V,metaSet:Qn(_n({},b),{subElement:ve}),value:J,args:Le})}},[c,C,b,g,U]),Nt=(0,r.useCallback)(V=>{const{value:ve}=ue.current;let De=!0;if(oe&&(De=oe({event:V,metaSet:b,value:ve})),De&&(C!=null&&C.onDoubleClick)){const{alias:J,args:ye}=C.onDoubleClick;De=le[J]({event:V,metaSet:b,value:ve,args:ye})}},[b,oe,ae,c,ie]),Dt=(0,r.useCallback)(V=>{if(c)return;const{target:{dataset:{subElement:ve}},detail:De,button:J}=V;if(J===0){const{value:ye}=ue.current;if(te(ve),c||Ie&&(N||N===void 0))return;let Ne=!0;if(ge=ve===Pa.button,De===1){if(ee&&(Ne=ee({event:V,metaSet:Qn(_n({},b),{subElement:ve}),value:ye})),Ne&&(C!=null&&C.onMouseDown)){const{alias:Le,args:ht}=C.onMouseDown;le[Le]({event:V,metaSet:Qn(_n({},b),{subElement:ve}),value:ye,args:ht})}ge&&(V.preventDefault(),V.stopPropagation(),Je(!ot),ft(),Be())}else if(De===2){if(Y&&(Ne=Y({event:V,metaSet:b,value:ye})),Ne&&(C!=null&&C.onDoubleMouseDown)){const{alias:Le,args:ht}=C.onDoubleMouseDown;Ne=le[Le]({event:V,metaSet:b,value:ye,args:ht})}Ne&&Be(!0)}}else V.preventDefault(),ot&&Je(!1)},[c,d,C,b,ee,Y,Be]),mn=(0,r.useCallback)(V=>{if(c)return;if(V==null||V.persist(),ot&&(V==null?void 0:V.target)===ue.current){Be();return}let ve=It();if(Ge()){ve=Vf(ve,mt.current,Ue,ue);let J=!0;if(z&&(J=z({event:V,metaSet:b,value:ve})),J&&(C!=null&&C.onImplicitChange)){const{alias:ye,args:Ne}=C.onImplicitChange;le[ye]({event:V,metaSet:b,args:Ne,value:ve})}}let De=!0;if(A&&(De=A({event:V,metaSet:b,value:ve})),De&&(C!=null&&C.onBlur)){const{alias:J,args:ye}=C.onBlur;le[J]({event:V,metaSet:b,args:ye,value:ve})}De&&Kt()},[c,It,ot,Ge,mt,Ue,ue,A,b,C,Be,Kt,z,on]),qt=(0,r.useCallback)(()=>{!c&&!ie&&ot&&(mn(),Je(!1))},[c,ie,ot,ft,Be,mn,It]),Rn=(0,r.useCallback)(({event:V})=>{if(!c)if(ot)V.preventDefault(),V.stopPropagation(),Te.current.querySelector(".p-datepicker-prev.p-link").focus();else{let ve=!0;if(K&&(ve=K({event:V,metaSet:b,value:g})),ve&&(C!=null&&C.onTab)){const{alias:De,args:J}=C.onTab;le[De]({event:V,metaSet:b,args:J,value:g})}return!0}},[ot,c,K,b,g,C]),En=(0,r.useCallback)(()=>{const V=new window.Date;let ve="";switch(Ue){case"dateAndTime":ve="dd.MM.yyyy HH:mm:ss";break;case"dateOnly":ve="dd.MM.yyyy";break;case"timeOnly":ve="HH:mm:ss";break;default:break}ue.current.value=(0,vr.format)(V,ve),Je(!1)},[ot,Ue]),br=(0,r.useCallback)(({event:V})=>{c||(ot&&(g===""||OE(g))&&En(),V.altKey?ot?Je(!1):(Be(),Je(!0)):(d&&(sr()?Be(!0):Vt()),Ge()?an():Je(!1)))},[d,ot,Be,Vt,sr,Ge,c,an,En]),Rr=(0,r.useCallback)(({event:V,value:ve})=>{if(c)return;let De=ve;if(d&&sr()){if(ue.current.value==="")return;De="",ue.current.value=De}let J=!0;if(G&&(De===""||$n(De))&&(J=G({event:V,metaSet:b,value:De})),J&&(C!=null&&C.onDelete)){const{alias:ye,args:Ne}=C.onDelete;le[ye]({event:V,metaSet:b,args:Ne,value:De})}return!1},[G,c,C,b,ue,d,sr]),Hn=(0,r.useCallback)(()=>{if(!c){if(h!==void 0&&(ue.current.value=h,z&&z({event,metaSet:b,value:h,notValidValue:!0}),C!=null&&C.onImplicitChange)){const{alias:V,args:ve}=C.onImplicitChange;le[V]({event,metaSet:b,args:ve,value:h,notValidValue:!0})}Je(!1),d?Vt():Kt()}},[d,Vt,Kt,c,Re,ue]),Sn=(0,r.useCallback)(V=>{if(!Te.current)return;const ve=Te.current.querySelector(".p-hour-picker"),De=Te.current.querySelector(".p-minute-picker"),J=Te.current.querySelector(".p-second-picker");if((ve||De||J)&&V.stopPropagation(),!We.current)return;const ye="pi-chevron-down",Ne="pi-chevron-up",Le=V.target.querySelector(`.${ye}`)||V.target.classList.contains(ye),ht=V.target.querySelector(`.${Ne}`)||V.target.classList.contains(Ne);ve.contains(V.target)&&(ht?We.current.incrementHour(V):Le&&We.current.decrementHour(V)),De.contains(V.target)&&(ht?We.current.incrementMinute(V):Le&&We.current.decrementMinute(V)),J.contains(V.target)&&(ht?We.current.incrementSecond(V):Le&&We.current.decrementSecond(V))},[We,Te]),jn=(0,r.useCallback)(V=>{const{button:ve}=V;if(ve===2){Je(!1);return}Qe&&Sn(V)},[Qe,Sn]),Yr=(0,r.useCallback)(V=>{if(V.stopPropagation(),c)return;const{keyCode:ve}=V;Bn(ve)&&Qe&&Sn(V),zr(ve)&&(V.preventDefault(),Je(!1),ft())},[ft,c,Qe,Sn]),cr=(0,r.useCallback)(({event:V,value:ve})=>{if(c||he)return;let De=!0;if(D&&D({event:V,metaSet:b,value:ve}),De&&(C!=null&&C.onChange)){const{alias:J,args:ye}=C.onChange;le[J](Qn(_n({event:V},ye),{args:ye,metaSet:b,value:ve}))}},[c,he,b,C,D]),Xr=(0,r.useCallback)(V=>{var ve,De,J;if(c||he)return;const ye=Li(),Ne=new window.Date(V.value),Le=(0,vr.format)(Ne,mt.current,{timeZone:ye}),ht=kE.some(At=>{var Yt;return(Yt=V.originalEvent.target.classList)==null?void 0:Yt.contains(At)});rn(Le),nt(V.value);const dt=(De=(ve=V.originalEvent)==null?void 0:ve.nativeEvent)==null?void 0:De.pointerType;return!ht&&(((J=V.originalEvent)==null?void 0:J.detail)===2||dt==="touch")&&(cr({event:V,value:Le}),an({event:V,value:Le}),Je(!1)),!1},[cr,he,mt,an,rn,We,ft]),Jr=(0,r.useCallback)(()=>{c||he||(En(),an())},[En,he,an]),Mn=(0,r.useCallback)(V=>{V.persist();const ve=V.target.value,De=xE(ve,Ue),J=_E(De,Ue),{date:ye}=Sa(De,R);let Ne=V.target.selectionStart;if(J&&!(Ie&&(N||N===void 0))){V.target.value=De;const Le=V.target.value[V.target.value.length-2];(Le==="."||Le===":")&&(Ne+=1)}else V.target.value=Fe.current,De.length>V.target.value.length?Ne-=1:Ne+=1;return V.target.setSelectionRange(Ne,Ne),nt(ye),cr({value:De}),!1},[It,cr,R,Ue]);(0,r.useEffect)(()=>{const{dateFormat:V,date:ve}=Sa(g,R);mt.current=V,nt(ve)},[g,R]);const Qr=(0,r.useCallback)(V=>{if(c)return;const{target:{dataset:{subElement:ve}},detail:De}=V,{value:J}=ue.current;let ye=!0;if(ge=ve===Pa.button,De===1){if(j&&(ye=j({event:V,metaSet:Qn(_n({},b),{subElement:ve}),value:J})),ye&&(C!=null&&C.onMouseUp)){const{alias:Ne,args:Le}=C.onMouseUp;le[Ne]({event:V,metaSet:Qn(_n({},b),{subElement:ve}),value:J,args:Le})}}else if(De===2&&(W&&(ye=W({event:V,metaSet:b,value:J})),ye&&(C!=null&&C.onDoubleMouseUp))){const{alias:Ne,args:Le}=C.onDoubleMouseUp;le[Ne]({event:V,metaSet:b,value:J,args:Le})}},[c,C,b,g,j,W]),xr=(0,r.useCallback)(V=>{if(c||Ie&&(N||N===void 0))return;const ve=It();let De=!0;if(!Xe.checkEditableMode()&&Hd(V))Nr();else{if(!Xe.checkEditableMode()&&li(V))return;if(zr(V.keyCode)&&!ie)Hn({event:V});else if(Bn(V.keyCode)&&!ie)br({event:V,value:ve});else if(ri(V.keyCode)&&!ie)Rr({event:V});else if(zo(V.keyCode))Rn({event:V});else if(Co(V)&&!Xe.checkEditableMode())V.preventDefault();else if(!ie||Ae){if(Fe.current=ve,L&&(De=L({event:V,metaSet:b,value:ve})),De&&(C!=null&&C.onKeyDown)){const{alias:J,args:ye}=C.onKeyDown;le[J]({event:V,metaSet:b,args:ye,value:ve})}De&&(Xe.checkEditableMode()||(dl(V.keyCode)&&!Ae?(Be(),ue.current.value=""):oi(V.keyCode)&&Be()))}}},[Hn,br,Rr,Rn,ot,c,C,b,L,K,x,Z,Xe,Kt,Vt,Be,d,ue,b,le,ie,It]),Tn=(0,r.useCallback)(V=>{const{value:ve}=V.currentTarget;let De=!0;if(H&&(De=H({event:V,metaSet:b,value:ve})),De&&(C!=null&&C.onFocus)){const{alias:J,args:ye}=C.onFocus;De=le[J]({event:V,metaSet:b,args:ye,value:ve})}if(_e&&!c&&!Ge()&&!Ie&&(O&&O({event:V,metaSet:b,value:ve}),C!=null&&C.onAutolock)){const{alias:J,args:ye}=C.onAutolock;le[J]({args:ye})}if(De&&!ie){const{date:J}=Sa(ve,ke);if(d){if(Ie)if(X)De=X({event:V,metaSet:b,value:ve});else{const{alias:ye,args:Ne}=C.onEdit;le[ye]({event:V,metaSet:b,args:Ne,value:ve})}$n(J)||ve===""?Vt():Be()}else Be()}},[c,C,b,H,Vt,Be,d,ue,ie,_e,he]),eo=(0,r.useCallback)(V=>{if(c)return;const ve=It();let De=!0;if($&&(De=$({event:V,metaSet:b,value:ve})),De&&(C!=null&&C.onKeyUp)){const{alias:J,args:ye}=C.onKeyUp;le[J](_n({event:V,metaSet:b,value:ve},ye))}},[c,C,b,$,ue,It]),to=(0,r.useCallback)(V=>{const{value:ve}=V.currentTarget;let De=!0;if(F&&(De=F({event:V,metaSet:b,value:ve})),De&&(C!=null&&C.onBlurCapture)){const{alias:J,args:ye}=C.onBlurCapture;le[J]({event:V,metaSet:b,args:ye,value:ve})}},[b,C,F]),Nr=(0,r.useCallback)(()=>{var V,ve;uu((V=ue.current)==null?void 0:V.value),Ah({value:ct,formattedValue:(ve=ue.current)==null?void 0:ve.value})},[ue,ct]),Cr=(0,r.useCallback)(V=>{var ve;if(!Xe.checkEditableMode()){V.preventDefault();return}(ve=V==null?void 0:V.clipboardData)!=null&&ve.types.includes("Files")&&V.preventDefault();let De=!0;const J=V.clipboardData.getData("text/plain"),{value:ye,formattedValue:Ne}=Fh();let Le="";if(J!==void 0&&(Le=J),Le===Ne&&(V.preventDefault(),Le=Bh(ye,{options:Ue}),Le===null&&(Le=J),ue.current.value=Le),z&&(De=z({event:V,metaSet:b,value:Le})),De&&(C!=null&&C.onImplicitChange)){const{alias:ht,args:dt}=C.onImplicitChange;le[ht]({event:V,metaSet:b,args:dt,value:Le})}},[ue,Xe,z,b,C,Ue]),Dr=(0,r.useCallback)(()=>{const V=new window.Date;let ve=jf().monthNames[V==null?void 0:V.getMonth()];return/[а-я]/i.test(ve)?(ve=ve[ve.length-1]==="\u0442"?ve+"\u0430":ve.slice(0,ve.length-1)+"\u044F",fe?"\u0421\u0435\u0439\u0447\u0430\u0441":`\u0421\u0435\u0433\u043E\u0434\u043D\u044F ${V==null?void 0:V.getDate()} ${ve} ${V==null?void 0:V.getFullYear()}`):fe?"Now":`Today ${ve} ${V==null?void 0:V.getDate()}, ${V==null?void 0:V.getFullYear()}`},[fe]),yr=()=>{if(ue.current.value=h,z&&z({event,metaSet:b,value:g}),C!=null&&C.onImplicitChange){const{alias:V,args:ve}=C.onImplicitChange;le[V]({event,metaSet:b,args:ve,value:g})}};ci({dataAttrs:P,initialValue:h,value:(n=ue.current)==null?void 0:n.value,resetValue:yr});const no=!c&&!ie&&Xe.checkEditableMode(),{textAlign:Zt,color:_r}=s,An=(0,r.useMemo)(()=>({textAlign:Zt||"center",color:_r}),[Zt,_r]),Vn=(0,r.useMemo)(()=>Pn({isFixSize:be,style:s,type:Ce}),[be,s,Ce]),ro=_n({ref:ue,id:re,type:"text","data-testid":I,autoComplete:"off",spellCheck:"false",className:at,style:An,tabIndex:Br(!ie&&!c,M),disabled:c,contentEditable:no,defaultValue:on,onKeyDown:xr,onKeyUp:eo,onFocus:Tn,onBlur:mn,onBlurCapture:to,onChange:Mn,readOnly:ie||N||he,onPaste:Cr},Ct),wr=r.createElement("div",{ref:o,className:$e,style:Vn,onMouseDown:ie?null:Dt,onMouseUp:ie?null:Qr,onClick:ir},r.createElement("input",_n({},ro)),Se&&r.createElement(wt(),_n({className:`${fn}__button`,name:"calendar",tabIndex:-1,onFocus:Tn,onBlur:mn},it)));return r.createElement(Ca,{onClickOutside:qt,outsideClickIgnoreClass:we,className:`${fn}__outside-wrapped`,onDoubleClick:Nt,style:{backgroundColor:ae&&ce?"transparent":ce}},r.createElement(ya,{withArrow:!0,TargetComponent:wr,needToRender:ot},r.createElement("div",{className:je,ref:Te,onClick:ut,onMouseDownCapture:jn,onKeyDown:Yr},r.createElement(vE.Calendar,{ref:We,key:ct==null?void 0:ct.toString(),locale:jf(),showTime:Qe,timeOnly:fe,dateFormat:mt.current,hourFormat:"24",showSeconds:!0,inline:!0,minDate:new window.Date(100,0,1),maxDate:new window.Date(2101,0,1),monthNavigator:!0,yearNavigator:!0,yearRange:"1900:2101",value:ct,onChange:Xr}),r.createElement("div",{onClick:Jr,className:`${fn}__label-today-date`},Dr()))))}$i.propTypes={_ref:v().object,focusedElement:v().object,isDisabled:v().bool,isStatic:v().bool,events:v().object,metaSet:v().object,className:v().string,mode:v().string,modeSwitch:v().object,id:v().string,dateOptions:v().object,value:v().string,hasActiveMode:v().bool,onChange:v().func,onBlur:v().func,onTab:v().func,onEnter:v().func,isParentTable:v().bool,isAutoLock:v().bool},$i.defaultProps={events:{},dateOptions:{formatOfDate:"dateOnly"},isParentTable:!1,isAutoLock:!1};var NE=(0,r.memo)((0,r.forwardRef)((t,e)=>r.createElement($i,Qn(_n({},t),{_ref:e}))));function DE(t,e){const{index:n,selected:o,value:a,onMouseDown:l,className:i}=t,s=me()(i,{[`${i}_selected`]:n===o}),c=(0,r.useCallback)(u=>{l&&l({event:u,value:a})},[l,a]);return r.createElement("li",{className:s,onMouseDown:c,ref:e},a.root)}var ME=(0,r.memo)((0,r.forwardRef)(DE)),dM={popperIconSize:"18px"},TE=Object.defineProperty,AE=Object.defineProperties,FE=Object.getOwnPropertyDescriptors,Nl=Object.getOwnPropertySymbols,Gf=Object.prototype.hasOwnProperty,Kf=Object.prototype.propertyIsEnumerable,qf=(t,e,n)=>e in t?TE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ko=(t,e)=>{for(var n in e||(e={}))Gf.call(e,n)&&qf(t,n,e[n]);if(Nl)for(var n of Nl(e))Kf.call(e,n)&&qf(t,n,e[n]);return t},Ia=(t,e)=>AE(t,FE(e)),BE=(t,e)=>{var n={};for(var o in t)Gf.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Nl)for(var o of Nl(t))e.indexOf(o)<0&&Kf.call(t,o)&&(n[o]=t[o]);return n};const Zf="enum",zE=31*5,Hi=t=>{const e=t,{_ref:n,focusedElement:o,isDisabled:a,isStatic:l,isExcluded:i,hasActiveMode:s,modeSwitch:c,events:u,isAutoLock:m,isDisabledByAutolock:d,buttonIconName:f,isSwitchedToEnum:p,metaSet:g,value:w,formattedValue:h,initialValue:_,listValues:I,selected:S,setSelected:E,onEsc:P,onEnter:b,onChange:C,onSelect:M,onKeyDown:O,onBlur:T,showButton:D,onLookup:L,onClick:$,onDoubleClick:x,onResetAutocompleteValues:Z,onImmediatelyAutoComplete:A,style:F,disableOnEdit:z,isAutocomplete:H,keyBoardNavigation:K,elementNode:G,containerNode:ee}=e,j=BE(e,["_ref","focusedElement","isDisabled","isStatic","isExcluded","hasActiveMode","modeSwitch","events","isAutoLock","isDisabledByAutolock","buttonIconName","isSwitchedToEnum","metaSet","value","formattedValue","initialValue","listValues","selected","setSelected","onEsc","onEnter","onChange","onSelect","onKeyDown","onBlur","showButton","onLookup","onClick","onDoubleClick","onResetAutocompleteValues","onImmediatelyAutoComplete","style","disableOnEdit","isAutocomplete","keyBoardNavigation","elementNode","containerNode"]),U=p?f:"caret-down",Y=m&&d===void 0,W=l||a,oe=`${j.className?j.className+"-drop-down":""} ${Zf}__drop-down`,R=p||!H?L:null,N=p?D:!0,[X,ne]=(0,r.useState)(!1),ae=(0,r.useMemo)(()=>Ia(Ko({},F),{textAlign:"left"}),[F]),ce=(0,r.useMemo)(()=>W||z||!X?!1:!!(I!=null&&I.length),[X,I,z,W]);let be=(0,r.useRef)({}),_e=(0,r.useRef)(null),Ce=(0,r.useRef)(null);be=c||be,_e=n||_e,Ce=o||Ce;const ie=()=>be.current.checkEditableMode(),he=()=>be.current.checkActiveMode(),Ie=()=>be.current.checkDefaultMode(),Ae=(0,r.useCallback)(re=>{Ce.current&&(Ce.current.textContent=re||h||w)},[Ce,h,w]),ke=(0,r.useCallback)(()=>{ne(!1),E(-1)},[ne,E]),Re=(0,r.useCallback)(({event:re,value:we})=>{let Se=!0;if(Se&&Z&&(Se=Z({event:re,value:we})),Se&&(u!=null&&u.onResetAutocompleteValues)){const{alias:$e,args:je}=u.onResetAutocompleteValues;le[$e](Ia(Ko({},je),{value:we}))}return Se},[Z,u]),Fe=(0,r.useCallback)(re=>{const we=window.getSelection();we.removeAllRanges(),re===fr.selected&&we.selectAllChildren(Ce.current)},[Ce]),Ue=(0,r.useCallback)(()=>{W||Ie()||(ke(),be.current.setDefaultMode())},[ke,W,Ie]),Qe=(0,r.useCallback)(()=>{W||!s||he()||(ke(),be.current.setActiveMode())},[ke,W,s,he]),fe=(0,r.useCallback)(()=>{W||z||ie()||be.current.setEditableMode()},[z,W,ie]),Oe=(0,r.useCallback)(()=>{s?Qe():Ue()},[s,Ue,Qe]),Ee=(0,r.useCallback)(re=>{var we;return H||!(I!=null&&I.length)?re:((we=I.find($e=>$e.value===re))==null?void 0:we.key)||re},[H,I]),ue=(0,r.useCallback)(({event:re,value:we})=>{if(W)return;let Se=!0;if(C&&(Se=C({event:re,metaSet:g,value:we})),Se&&(u!=null&&u.onChange)){const{alias:$e,args:je}=u.onChange;le[$e]({event:re,metaSet:g,args:je,value:we})}return!we&&Se&&(Se=Re({event:re,value:we})),Se&&ne(!!we),!1},[W,u,g,C,Re]),Te=(0,r.useCallback)(({event:re,value:we})=>{if(W)return;let Se=!0;if(X&&K&&(Se=K(re)),!H)return!$d(re.keyCode)&&!Ld(re.keyCode)&&re.preventDefault(),!1;if(Se&&O&&(Se=O({event:re,type:"autoComplete",autocompleteValues:I,selected:S})),Se&&(u!=null&&u.onKeyDown)){const{alias:$e,args:je}=u.onKeyDown;le[$e](Ia(Ko({event:re,metaSet:g},je),{value:we}))}return!1},[W,u,g,w,X,K,O,I,S,H]),We=(0,r.useCallback)(({event:re,value:we})=>{if(W)return;let Se=!0;if(P&&(Se=P({event:re,metaSet:g,value:we})),Se&&(u!=null&&u.onEsc)){const{alias:$e,args:je}=u.onEsc;Se=le[$e]({event:re,metaSet:g,args:je,value:we})}return Se&&(ke(),Oe(),Fe(fr.default),Ce.current.scrollLeft=0),!1},[W,g,u,P,ke,Oe,Fe,Ce]),Ye=(0,r.useCallback)(({event:re,value:we})=>{if(W||Y)return;re.preventDefault();const Se=Array.isArray(we)?we[0]:we,$e=(Se==null?void 0:Se.root)===_;let je=!0;if($e)Ae();else if(Ae(Se==null?void 0:Se.root),M&&(je=M({event:re,metaSet:g,value:Se})),je&&(u!=null&&u.onSelect)){const{alias:at,args:Ct}=u.onSelect;je=le[at]({args:Ct,value:Se})}return je&&(ke(),Oe(),Fe(fr.default)),!1},[W,g,u,M,Oe,ke,Fe,_,Ae,Y]),Xe=(0,r.useCallback)(({event:re,value:we})=>{if(!(W||re.repeat)){if(!ie())fe();else if(S===-1){const Se=we?{keyValue:Ee(we),root:we}:Ee(we);let $e=!0;if(b&&($e=b({event:re,metaSet:g,value:Se})),$e&&(u!=null&&u.onEnter)){const{alias:je,args:at}=u.onEnter;$e=le[je]({args:at,value:Se})}$e&&(ke(),Oe(),Fe(fr.default))}else if(S>=0){const Se=I==null?void 0:I[S];if(!Se)return!1;const{key:$e,value:je}=Se;Ye({event:re,value:{keyValue:$e,root:je}})}return!1}},[Ee,Oe,W,Fe,g,u,I,S,b,Ye,ie,fe]),mt=(0,r.useCallback)(({event:re,value:we})=>{if(W)return;let Se=!0;const $e=Ee(we);if(T&&(Se=T({event:re,metaSet:g,value:$e})),Se&&(u!=null&&u.onBlur)){const{alias:je,args:at}=u.onBlur;Se=le[je]({event:re,metaSet:g,args:at,value:$e})}return Se&&(Se=Re({event:re,value:$e})),Se&&(ke(),Ce.current.scrollLeft=0,Ue()),!1},[W,g,u,T,ke,Ue,Ee,Ce,Re]),ot=(0,r.useCallback)(({event:re})=>{re.relatedTarget!==Ce.current&&Ue()},[Ue,Ce]),Je=(0,r.useCallback)(({event:re,value:we})=>{const Se=we||"*",$e=Ia(Ko({},g),{isOpenList:X});let je=!0;if(A&&(je=A({event:re,metaSet:$e,value:Se})),je&&(u!=null&&u.onImmediatelyAutoComplete)){const{alias:at,args:Ct}=u.onImmediatelyAutoComplete;le[at]({event:re,metaSet:$e,args:Ct,value:Se})}return je},[W,u,A,X,g]),ct=(0,r.useCallback)(({event:re,metaSet:we,value:Se,isButtonClick:$e})=>{var je;if(W)return!1;z?(ke(),Oe()):$e&&(document.activeElement!==Ce.current&&((je=Ce.current)==null||je.focus()),ne(it=>!it),Je({event:re}),ie()||fe());let at=!0;if($&&(at=$({event:re,metaSet:we,value:Se,isButtonClick:$e})),at&&(u!=null&&u.onClick)){const{alias:Ct,args:it}=u.onClick;le[Ct]({event:re,metaSet:we,value:Se,args:it,isButtonClick:$e})}return!1},[W,Je,Ce,fe,ie,Fe,ke,z,Oe,$,u]),nt=(0,r.useCallback)(({event:re,metaSet:we,value:Se,isButtonClick:$e})=>{var je;if(W)return!1;z?(ke(),Oe()):$e?(document.activeElement!==Ce.current&&((je=Ce.current)==null||je.focus()),ne(it=>!it),Je({event:re}),ie()||fe()):ie()&&(Je({event:re}),ne(!0),Fe(fr.selected));let at=!0;if(x&&(at=x({event:re,metaSet:we,value:Se,isButtonClick:$e})),at&&(u!=null&&u.onDoubleClick)){const{alias:Ct,args:it}=u.onDoubleClick;le[Ct]({event:re,metaSet:we,value:Se,args:it,isButtonClick:$e})}return!1},[W,Je,Ce,fe,ie,Fe,ke,z,Oe,ie,x,u]);(0,r.useEffect)(()=>{z&&ie()&&(Oe(),Fe(fr.default))},[z,ie,Oe,Fe]),(0,r.useEffect)(()=>{_===w&&Ae()},[_,w,Ae]);const pe=(0,r.useMemo)(()=>I==null?void 0:I.map(({key:re="",value:we=""})=>({value:{keyValue:re,root:we},keyValue:re,className:`${Zf}__item`,onMouseDown:Ye})),[Ye,I]),te=(0,r.useMemo)(()=>{const re=Ko({},u);return delete re.onBlur,delete re.onEnter,delete re.onSelect,delete re.onEsc,delete re.onKeyDown,delete re.onChange,delete re.onClick,delete re.onDoubleClick,delete re.onImmediatelyAutoComplete,delete re.onResetAutocompleteValues,!p&&H&&delete re.onLookup,re},[u,p,H]);if(i)return null;const ge=r.createElement(bn,Ia(Ko({},j),{_ref:_e,events:te,focusedElement:Ce,buttonIconName:U,isSwitchedToEnum:p,needTextSelection:!0,isDisabled:a,isStatic:l,modeSwitch:be,hasActiveMode:s,isAutoLock:m,isDisabledByAutolock:d,metaSet:g,value:w,onBlur:mt,isEnum:!0,onEnter:Xe,onKeyDown:Te,onChange:ue,onEsc:We,onLookup:R,onClick:ct,onDoubleClick:nt,isAutocomplete:H,disableOnEdit:z,formattedValue:h,initialValue:_,showButton:N,style:ae}));return r.createElement(ya,{ref:ee,TargetComponent:ge,data:pe,Component:ME,className:oe,maxHeight:zE,hasMenuOffset:!0,selected:S,elementNode:G,needToRender:ce,onBlur:ot,onKeyDown:Te})};Hi.propTypes={_ref:v().object,focusedElement:v().object,selected:v().number,setSelected:v().func,listValues:v().array,elementNode:v().object,containerNode:v().object,hasActiveMode:v().bool,metaSet:v().object,dataAttrs:v().object,events:v().object,value:v().string,formattedValue:v().string,initialValue:v().string,isExcluded:v().bool,isAutoLock:v().bool,isDisabled:v().bool,isDisabledByAutolock:v().bool,isStatic:v().bool,style:v().object,onLookup:v().func,modeSwitch:v().object,keyBoardNavigation:v().func,onResetAutocompleteValues:v().func,onSelect:v().func,onFocus:v().func,onBlur:v().func,onClick:v().func,onChange:v().func,onKeyDown:v().func,onKeyUp:v().func,onEnter:v().func,onEsc:v().func,onDelete:v().func,onTab:v().func,onDoubleClick:v().func,disableOnEdit:v().bool},Hi.defaultProps={_ref:null,metaSet:{},events:{},style:{},isExcluded:!1,isAutoLock:!1,isDisabled:!1,isDisabledByAutolock:!1,isStatic:!1,disableOnEdit:!1};var LE=(0,r.memo)(QC(Hi)),pM={popperIconSize:"18px"},$E=Object.defineProperty,HE=Object.defineProperties,jE=Object.getOwnPropertyDescriptors,Yf=Object.getOwnPropertySymbols,VE=Object.prototype.hasOwnProperty,WE=Object.prototype.propertyIsEnumerable,Xf=(t,e,n)=>e in t?$E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jf=(t,e)=>{for(var n in e||(e={}))VE.call(e,n)&&Xf(t,n,e[n]);if(Yf)for(var n of Yf(e))WE.call(e,n)&&Xf(t,n,e[n]);return t},UE=(t,e)=>HE(t,jE(e));const GE="menu-bar";function KE(t){var e;const{className:n,style:o,title:a,subTitle:l,isDisabled:i,isExcluded:s,children:c,isFixSize:u,testId:m,iconName:d,iconSize:f}=t,p=a&&typeof a!="string"?a:null,g=p?p.iconname:d,w=p?p.iconsize:f,h=(0,r.useRef)(null),_=(0,r.useMemo)(()=>Pn({isFixSize:u,style:o}),[u,o]),I=UE(Jf({},_),{backgroundColor:p==null?void 0:p.cellColor});let S={};const E=m||GE,P=me()(n,"menu-bar",{disabled:i});let b=null;if(c!=null&&c.length){const C=c==null?void 0:c.filter(O=>O&&!!O.props.isCollapsible&&!O.props.isExcluded),M=c==null?void 0:c.filter(O=>O&&!O.props.isCollapsible&&!O.props.isExcluded);if(C!=null&&C.length){const O=M[M.length-1];let T={width:"40px"};M!=null&&M.length&&!((e=O==null?void 0:O.props)!=null&&e.caption)&&(T=O.props.style),M.push(r.createElement(wa,{key:"CollapsibleButtons",name:"CollapsibleButtons",iconName:"angle-down",isFixSize:!0,isDisabled:!1,style:T,testId:`${E}_collapsible-buttons`,hint:"\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u043E"},C))}b=M.map(O=>(0,r.cloneElement)(O,{className:"menu-bar__button"}))}return b!=null&&b.length&&(S.gridTemplateColumns=`repeat(${b==null?void 0:b.length}, min-content)`),(0,r.useEffect)(()=>{const C=h.current;if(C){const M=C.clientWidth;C.scrollWidth>M&&(C.title=C.innerText)}}),s?null:r.createElement("div",{className:P,style:I,"data-testid":E},r.createElement("div",{ref:h,className:"menu-bar__title-container text-ellipsis"},g&&r.createElement("img",{className:"menu-bar__img",style:{height:`${w}px`},alt:g,src:Ft(g)}),!p&&r.createElement("span",{className:"menu-bar__title"},a),p&&r.createElement(El,Jf({},p)),l&&r.createElement("span",{className:"menu-bar__sub-title"},l)),r.createElement("div",{className:"menu-bar__buttons",style:S},b))}var qE=(0,r.memo)(KE),vM={popperIconSize:"18px"},ZE=Object.defineProperty,YE=Object.defineProperties,XE=Object.getOwnPropertyDescriptors,Qf=Object.getOwnPropertySymbols,JE=Object.prototype.hasOwnProperty,QE=Object.prototype.propertyIsEnumerable,ep=(t,e,n)=>e in t?ZE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oa=(t,e)=>{for(var n in e||(e={}))JE.call(e,n)&&ep(t,n,e[n]);if(Qf)for(var n of Qf(e))QE.call(e,n)&&ep(t,n,e[n]);return t},ka=(t,e)=>YE(t,XE(e));const Ra="...",tp=5,Dl=(t,e)=>{const n=e-t+1;return Array.from({length:n},(o,a)=>a+t)},eS=({itemsQuantity:t,itemsPerPageInitial:e=60})=>{const[n,o]=(0,r.useState)(1),[a,l]=(0,r.useState)(e),i=n*a,s=i-a,c=Math.ceil(t/a),u={currentPage:n,setCurrentPage:o,itemsPerPage:a,setItemsPerPage:l,lastItemIndex:i,firstItemIndex:s,listOfPages:c,itemsQuantity:t};return(0,r.useEffect)(()=>{localStorage.setItem("currentPage",JSON.stringify(n)),(JSON.parse(localStorage.getItem("currentPage")||"1")===null||JSON.parse(localStorage.getItem("currentPage")||"1")<=0)&&localStorage.setItem("currentPage","1")},[n]),(0,r.useMemo)(()=>{if(c<=6)return ka(Oa({},u),{paginationRange:[...Dl(1,c)]});const m=Math.max(n-1,1),d=Math.min(n+1,c),f=m>2,p=d<=c-2,g=1,w=c;if(!f&&p){const h=Dl(1,tp);return ka(Oa({},u),{paginationRange:[...h,Ra,w]})}if(f&&!p){const h=Dl(c-tp+1,c);return ka(Oa({},u),{paginationRange:[g,Ra,...h]})}if(f&&p){const h=Dl(m,d);return ka(Oa({},u),{paginationRange:[g,Ra,...h,Ra,w]})}return ka(Oa({},u),{paginationRange:[]})},[c,n,a,s,i])};var gM={popperIconSize:"18px"};const tS=t=>{const{handleChangePage:e,paginationRange:n,currentPage:o,countOfPages:a}=t;return!n||!o||!a?null:r.createElement("div",{className:`${gt}__numbers-wrapper`},n.map((l,i)=>l===Ra?r.createElement("div",{key:i,className:`${gt}__dots`},"\u2026"):r.createElement("div",{key:i,className:`${o===l&&a.length>1?`${gt}__number_active`:`${gt}__number`}`,onClick:()=>e(l)},l)))};var np=(0,r.memo)(tS),nS=Object.defineProperty,rp=Object.getOwnPropertySymbols,rS=Object.prototype.hasOwnProperty,oS=Object.prototype.propertyIsEnumerable,op=(t,e,n)=>e in t?nS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ap=(t,e)=>{for(var n in e||(e={}))rS.call(e,n)&&op(t,n,e[n]);if(rp)for(var n of rp(e))oS.call(e,n)&&op(t,n,e[n]);return t};const zn={start:"pagination__button_start",prev:"pagination__button_prev",next:"pagination__button_next",end:"pagination__button_end"},aS=t=>{const{countOfPages:e,currentPage:n=null,className:o,isDisabled:a,handleClick:l,onClickAngleDoubleLeftIcon:i,onClickAngleLeftIcon:s,onClickAngleDoubleRightIcon:c,onClickAngleRightIcon:u,isPrevBtnDisabled:m,isNextBtnDisabled:d,handleChangePage:f,paginationRange:p,isAdaptiveButtons:g}=t,w=me()(o,`${gt}__buttons`,{[`${gt}_disabled`]:a}),h=me()([`${gt}__prev-buttons`],{[`${gt}__prev-buttons_disabled`]:n===1||m}),_=me()([`${gt}__next-buttons`],{[`${gt}__next-buttons_disabled`]:n===(e==null?void 0:e.length)||d}),I=(0,r.useMemo)(()=>({handleChangePage:f,currentPage:n,countOfPages:e,paginationRange:p}),[f,n,e,p]);return g?r.createElement("div",null,r.createElement("div",{className:w,onClick:l},r.createElement("div",{className:h},r.createElement(wt(),{name:"angle-double-left",className:"pagination__icon","data-id":zn.start,onClick:i}),r.createElement(wt(),{name:"angle-left",className:"pagination__icon","data-id":zn.prev,onClick:s})),r.createElement("div",{className:_},r.createElement(wt(),{name:"angle-right",className:"pagination__icon","data-id":zn.next,onClick:u}),r.createElement(wt(),{name:"angle-double-right",className:"pagination__icon","data-id":zn.end,onClick:c}))),r.createElement(np,ap({},I))):r.createElement("div",null,r.createElement("div",{className:w,onClick:l},r.createElement("div",{className:h},r.createElement(wt(),{name:"angle-double-left",className:"pagination__icon","data-id":zn.start,onClick:i}),r.createElement(wt(),{name:"angle-left",className:"pagination__icon","data-id":zn.prev,onClick:s})),r.createElement(np,ap({},I)),r.createElement("div",{className:_},r.createElement(wt(),{name:"angle-right",className:"pagination__icon","data-id":zn.next,onClick:u}),r.createElement(wt(),{name:"angle-double-right",className:"pagination__icon","data-id":zn.end,onClick:c}))))};var ji=(0,r.memo)(aS);const lS=t=>{const{countOfPages:e,handleChangePage:n,isSmallSize:o,currentPage:a}=t,[l,i]=(0,r.useState)(!1),s=(0,r.useRef)(null),c=me()({[`${gt}__input-wrapper_small`]:o}),u=me()({[`${gt}__input_error`]:l});(0,r.useEffect)(()=>{s.current&&(s.current.value=a,i(!1))},[s,a]);const m=(0,r.useCallback)(d=>{if(!d.target.value)return;d.target.value=d.target.value.replace(/[^0-9]/g,"");const f=parseInt(d.target.value,10);f<=e.length&&f>0&&n(f),f>e.length||f<=0?i(!0):i(!1)},[n]);return r.createElement("div",{className:`${gt}__input-wrapper ${c}`},r.createElement("label",{className:`${gt}__label-input`},"\u041A \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435"),r.createElement("input",{ref:s,className:`${gt}__input ${u}`,onChange:m}))};var lp=(0,r.memo)(lS);const sS=t=>{const{itemsPerPage:e,handleChangeItemsPerPage:n,itemsQuantity:o,isSmallSize:a}=t,l=(0,r.useRef)(null),[i,s]=(0,r.useState)(!1),c=o>Zo?Zo:o,u=me()(gt,{[`${gt}__input_error`]:i}),m=me()({[`${gt}__items-count_small`]:a});(0,r.useEffect)(()=>{l.current&&localStorage.getItem("valueOfElements")===null||+(localStorage.getItem("valueOfElements")||"60")>Zo?l.current!==null&&(l.current.value=e):l.current!==null&&(l.current.value=localStorage.getItem("valueOfElements")||"60")},[l]);const d=(0,r.useCallback)(f=>{if(!f.target.value)return;f.target.value=f.target.value.replace(/[^0-9]/g,"");const p=parseInt(f.target.value,10);p>0?localStorage.setItem("valueOfElements",JSON.stringify(p)):localStorage.setItem("valueOfElements",JSON.stringify(e)),p>Zo?(n(Zo),s(!0)):p<=0?(n(e),s(!0)):p>o?(n(o),s(!0)):(n(p),s(!1))},[l.current,n]);return r.createElement("div",{className:`${gt}__items-count ${m}`},r.createElement("p",null,"\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u043F\u043E"),r.createElement("input",{ref:l,className:`${gt}__input ${u}`,onChange:d}),r.createElement("p",null,"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430(\u043E\u0432) ",r.createElement("span",null," (\u043D\u0435 \u0431\u043E\u043B\u0435\u0435 ",c,")")))};var sp=(0,r.memo)(sS),iS=Object.defineProperty,ip=Object.getOwnPropertySymbols,cS=Object.prototype.hasOwnProperty,uS=Object.prototype.propertyIsEnumerable,cp=(t,e,n)=>e in t?iS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qo=(t,e)=>{for(var n in e||(e={}))cS.call(e,n)&&cp(t,n,e[n]);if(ip)for(var n of ip(e))uS.call(e,n)&&cp(t,n,e[n]);return t};const gt="pagination",Zo=500,Vi="toggle-button",dS=t=>{const{listOfPages:e,currentPage:n,setCurrentPage:o,paginationRange:a,itemsPerPage:l,setItemsPerPage:i,itemsQuantity:s}=t,[c,u]=(0,r.useState)(!1),[m,d]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!0),g=(0,r.useRef)(null),w=me()({[`${gt}__small`]:c}),h=me()({[`${gt}__hidden`]:!f}),_=me()({[`${Vi}_small`]:c});(0,r.useEffect)(()=>{if(g.current){const A=new so.Z(I);return A.observe(g.current),()=>{g.current&&A.unobserve(g.current)}}},[g]);const I=(0,r.useCallback)(()=>{let A=!1,F=!1;g.current!==null&&(A=g.current.clientWidth<900,F=g.current.clientWidth<500),u(A),d(F)},[g]);(0,r.useEffect)(()=>{const A=JSON.parse(localStorage.getItem("currentPage")||"1"),F=JSON.parse(localStorage.getItem("valueOfElements")||"60");F&&F<=Zo&&i(F),o(A===null?1:A)},[]);const S=(0,r.useMemo)(()=>[...Array(e).keys()],[e]),E=(0,r.useCallback)(A=>{A===void 0||!A||A>S.length||o(A)},[S.length]),P=(0,en.debounce)(E,500),b=(0,r.useCallback)(A=>{A&&(i(A),o(1))},[]),C=(0,en.debounce)(b,500),M=(0,r.useCallback)(()=>{o(1)},[]),O=(0,r.useCallback)(()=>{o(A=>A<=1?A:A-1)},[]),T=(0,r.useCallback)(()=>{o(S.length)},[S]),D=(0,r.useCallback)(()=>{o(A=>A>=S.length?A:A+1)},[S]),L=(0,r.useCallback)(()=>{p(!f)},[f]),$=(0,r.useMemo)(()=>({countOfPages:S,currentPage:n,onClickAngleDoubleLeftIcon:M,onClickAngleLeftIcon:O,onClickAngleDoubleRightIcon:T,onClickAngleRightIcon:D,handleChangePage:P,paginationRange:a,isAdaptiveButtons:m}),[S,n,M,O,T,D,P,a,m]),x=(0,r.useMemo)(()=>({itemsPerPage:l,handleChangeItemsPerPage:C,itemsQuantity:s,isSmallSize:c}),[l,C,s,c]),Z=(0,r.useMemo)(()=>({handleChangePage:P,countOfPages:S,isSmallSize:c,currentPage:n}),[P,S,c]);return c?r.createElement("div",{className:`${gt}__main-wrapper${w}`,ref:g},r.createElement("div",{className:f?`${_} fa fa-angle-down`:`${_} fa fa-angle-up`,onClick:L,title:"\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C/\u0420\u0430\u0437\u0432\u0435\u0440\u043D\u0443\u0442\u044C"}),r.createElement("div",{className:`${gt} ${h}`},r.createElement("div",{className:`${gt}__left-block`},r.createElement(ji,qo({},$))),r.createElement("div",{className:`${gt}__center-block`},r.createElement(lp,qo({},Z)),r.createElement(sp,qo({},x))))):r.createElement("div",{className:`${gt}__main-wrapper`,ref:g},r.createElement("div",{className:f?`${Vi} fa fa-angle-down`:`${Vi} fa fa-angle-up`,onClick:L,title:"\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C/\u0420\u0430\u0437\u0432\u0435\u0440\u043D\u0443\u0442\u044C"}),r.createElement("div",{className:`${gt} ${h}`},r.createElement("div",{className:`${gt}__left-block`},r.createElement(ji,qo({},$)),r.createElement(lp,qo({},Z)),r.createElement(sp,qo({},x))),n&&S&&r.createElement("p",{className:`${gt}__current-page`},"\u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430 ",n," \u0438\u0437 ",S.length)))};var mS=(0,r.memo)(dS),fS=Object.defineProperty,pS=Object.defineProperties,vS=Object.getOwnPropertyDescriptors,up=Object.getOwnPropertySymbols,gS=Object.prototype.hasOwnProperty,hS=Object.prototype.propertyIsEnumerable,dp=(t,e,n)=>e in t?fS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wi=(t,e)=>{for(var n in e||(e={}))gS.call(e,n)&&dp(t,n,e[n]);if(up)for(var n of up(e))hS.call(e,n)&&dp(t,n,e[n]);return t},mp=(t,e)=>pS(t,vS(e));const bS=t=>{const{className:e,isDisabled:n,isStatic:o,isPrevBtnDisabled:a,isNextBtnDisabled:l,onClick:i,onButtonClick:s,metaSet:c,events:u,countOfPages:m,currentPage:d}=t,f=(0,r.useCallback)(g=>{var w,h;if(n||o)return;const _=(h=(w=g==null?void 0:g.target)==null?void 0:w.dataset)==null?void 0:h.id;if(_&&(s&&s({value:_,metaSet:c,event:g}),u!=null&&u.onButtonClick)){const{alias:I,args:S}=g.onButtonClick;le[I](mp(Wi({value:_},S),{event:g}))}if(i&&i({metaSet:c,event:g}),u!=null&&u.onClick){const{alias:I,args:S}=g.onClick;le[I](mp(Wi({},S),{event:g}))}},[n,o,i,s,u,c]),p=(0,r.useMemo)(()=>({isDisabled:n,handleClick:f,isPrevBtnDisabled:a,isNextBtnDisabled:l,className:e,countOfPages:m,currentPage:d}),[n,f,a,l,e,m,d]);return r.createElement(ji,Wi({},p))};var CS=(0,r.memo)(bS),yS=Object.defineProperty,Ml=Object.getOwnPropertySymbols,fp=Object.prototype.hasOwnProperty,pp=Object.prototype.propertyIsEnumerable,vp=(t,e,n)=>e in t?yS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gp=(t,e)=>{for(var n in e||(e={}))fp.call(e,n)&&vp(t,n,e[n]);if(Ml)for(var n of Ml(e))pp.call(e,n)&&vp(t,n,e[n]);return t},_S=(t,e)=>{var n={};for(var o in t)fp.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Ml)for(var o of Ml(t))e.indexOf(o)<0&&pp.call(t,o)&&(n[o]=t[o]);return n};const wS=t=>{const e=t,{isServerSide:n,isClientSide:o,isExcluded:a}=e,l=_S(e,["isServerSide","isClientSide","isExcluded"]);return a?null:o?r.createElement(mS,gp({},l)):n?r.createElement(CS,gp({},l)):(console.warn("\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D \u0442\u0438\u043F \u043F\u0430\u0433\u0438\u043D\u0430\u0446\u0438\u0438"),null)};var Ui=(0,r.memo)(wS),ES=Object.defineProperty,SS=Object.defineProperties,PS=Object.getOwnPropertyDescriptors,Tl=Object.getOwnPropertySymbols,hp=Object.prototype.hasOwnProperty,bp=Object.prototype.propertyIsEnumerable,Cp=(t,e,n)=>e in t?ES(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xa=(t,e)=>{for(var n in e||(e={}))hp.call(e,n)&&Cp(t,n,e[n]);if(Tl)for(var n of Tl(e))bp.call(e,n)&&Cp(t,n,e[n]);return t},Gi=(t,e)=>SS(t,PS(e)),IS=(t,e)=>{var n={};for(var o in t)hp.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Tl)for(var o of Tl(t))e.indexOf(o)<0&&bp.call(t,o)&&(n[o]=t[o]);return n};const OS="report",Na=(t,e)=>Array.from((e||document).querySelectorAll(t));function Ki(t){const{className:e,id:n,dataAttrs:o,isDisabled:a,isExcluded:l,name:i,formId:s,value:c,metaSet:u,selectedCellId:m,onCellSelect:d,onClick:f,onDoubleClick:p,onExpand:g,onCollapse:w,events:h,freezeHeader:_,freezeSide:I,scrollTop:S,scrollLeft:E}=t,P=(0,r.useMemo)(()=>z_(c),[c]),[b,C]=(0,r.useState)(!1),[M,O]=(0,r.useState)(!1),T=(0,r.useRef)(null),D=P.tbody[0],L=60,$=(D==null?void 0:D.length)>=L,x=eS({itemsPerPageInitial:L,itemsQuantity:D==null?void 0:D.length}),{firstItemIndex:Z,lastItemIndex:A}=x,F=IS(x,["firstItemIndex","lastItemIndex"]),z=D==null?void 0:D.slice(Z,A),H=c&&yi(c);let K=M_();const G=(0,r.useCallback)(R=>{const N=!!R.attribs;N&&(R.attribs.uniquecell=K.uniqueCell++);const X=ne=>{ne.forEach(ae=>{if(ae.type==="tag"){N&&ae.name==="tr"&&(ae.attribs["data-tab"]=K.currentReportTable,K.currentReportRow=ae.attribs["data-row"]||null,K.currentReportSerialNumber=1),ae.name==="td"&&(ae.attribs["data-tab"]=K.currentReportTable,ae.attribs["data-row"]=K.currentReportRow,!ae.attribs["data-ind"]&&(ae.attribs["data-tab"]||ae.attribs["data-row"]||ae.attribs["data-col"])&&(ae.attribs["data-ser"]=K.currentReportSerialNumber++),ae.attribs.class.includes("hdr1")&&(ae.attribs["data-ser"]=K.currentReportSerialNumber++));for(let ce in ae)Array.isArray(ae[ce])&&X(ae[ce])}})};if(R.name==="table"&&typeof R.attribs["data-tab"]!="undefined"){let{children:ne}=R;K.currentReportTable=R.attribs["data-tab"],X(ne)}else N&&R.type==="tag"&&(R.name==="tr"&&(K.currentReportRow=R.attribs["data-row"],K.currentReportSerialNumber=1),R.name==="td"&&(R.attribs["data-row"]=K.currentReportRow,!R.attribs["data-ind"]&&(R.attribs["data-tab"]||R.attribs["data-row"]||R.attribs["data-col"])&&(R.attribs["data-ser"]=K.currentReportSerialNumber++)),R.name==="th"&&R.attribs.class.includes("hdr1")&&(R.attribs["data-ser"]=K.currentReportSerialNumber++))},[K]),ee=(0,r.useCallback)(R=>{if(R.name!=="td"||!R.attribs||!R.attribs["data-ind"]||!wi(R.attribs["data-ind"]))return;const N=xa({},R.children[0]);N.attribs=Gi(xa({},R.attribs),{class:"","data-hierarchy-button":!0,"data-lvl":R.parent.attribs&&R.parent.attribs["data-lvl"]||void 0,"data-grp":R.parent.attribs&&R.parent.attribs["data-grp"]||void 0,"data-tab":R.parent.attribs&&R.parent.attribs["data-tab"]||void 0}),N.type="tag",N.name="button",N.children=[...R.children],R.children=[N]},[]),j=(0,r.useCallback)(R=>{R.name==="style"?R.children=R.children.map(N=>(N.data=`'.report__container' ${N.data}`,N)):(G(R),ee(R))},[G,ee]),U=(0,r.useCallback)(R=>{if(a||!["BUTTON","TD","TH"].includes(R.target.tagName))return;let N=!0;const X=R.detail,ne=["BUTTON"].includes(R.target.tagName);if(X===1||ne)if(ne){const ae=_i(R),ce=wi(ae["data-ind"]);ce==="onExpand"?N=Ze({specificEvent:g,nativeEvent:"onExpand",event:R,metaSet:u,value:ae,events:h}):ce==="onCollapse"&&(N=Ze({specificEvent:w,nativeEvent:"onCollapse",event:R,metaSet:u,value:ae,events:h}))}else if(R.target.className.includes("hdr1")){const ae=_i(R);N=Ze({specificEvent:f,nativeEvent:"onClick",event:R,metaSet:u,value:ae,events:h})}else{const ae=R==null?void 0:R.target.getAttribute("uniqueCell");N=Ze({specificEvent:d,nativeEvent:"onCellSelect",event:R,metaSet:u,value:ae,events:h})}else if(X===2){const ae=_i(R);N=Ze({specificEvent:p,nativeEvent:"onDoubleClick",event:R,metaSet:u,value:ae,events:h})}return N},[a,d,p,g,w,u,h]);(0,r.useEffect)(()=>{if(m){let R=document.querySelectorAll(`[id="${s}"] .report[data-name="${i}"] .report__cell_selected`);R.length&&R.forEach(X=>{X==null||X.classList.remove("report__cell_selected")});const N=document.querySelector(`[id="${s}"] .report[data-name="${i}"] [uniqueCell="${m}"]`);N==null||N.classList.add("report__cell_selected")}},[m]),(0,r.useEffect)(()=>{P!=null&&P.script.length&&!b&&(P==null||P.script.map(R=>{const N=document.createElement("script");N.type="text/javascript",R.src?(N.src=R.src,document.head.appendChild(N)):(N.innerHTML=R.text,document.body.appendChild(N))}),C(!0)),P.link.length&&!M&&(P==null||P.link.map(R=>{const N=document.createElement("link");R.attributes&&(R.attributes.forEach(X=>{N[X==null?void 0:X.name]=X==null?void 0:X.textContent}),document.head.appendChild(N)),O(!0)}))},[P,b,M]);const Y=me()(e,OS,{report_disabled:a});(0,r.useEffect)(()=>{if(c){let R=Na("table.rep");if(R=R&&R.length?R[0]:void 0,!R)return;let N=Na("tr",R);if(!(N&&N.length))return;let X=Na("thead",R);X=X&&X.length?X[0]:void 0;let ne=document.querySelector(".report");_&&(ne.style.height="100%",ne.style.overflow="auto",X.classList.add("freezeHeader"));let ae={freezedCells:[],freezeCellsLength:[]};N.forEach(be=>{let _e=be.querySelectorAll(".freeze");_e.length>1&&ae.freezedCells.push(_e);let Ce=Na("td",be);Ce&&Ce.length||(Ce=Na("th",be)),Ce.forEach(ie=>{I&&ie.classList.contains("freeze")&&ie.classList.add("freezeCells"),be.style.height=ie.offsetHeight+"px;"})}),ae.freezedCells.forEach(be=>{if(_||I){let _e=0;if(be.length>2)for(const Ie of be)_e+=Ie.offsetWidth;let Ce=[...be],ie=[];Ce.map(Ie=>ie.push(Ie.offsetWidth)),ie=ie.map((Ie,Ae)=>ie.slice(0,Ae+1).reduce((ke,Re)=>ke+Re));for(let Ie=1;Ie<=Ce.length;Ie+=1)for(let Ae=0;Ae<=ie.length;Ae+=1)Ce[Ie]!==void 0&&(Ce[Ie].style.left=`${ie[Ie-1]}px`);const he=()=>{R.style.overflowX=_e>ne.offsetWidth?"hidden":"auto",ne.style.overflowX=_e>ne.offsetWidth?"hidden":"auto"};if(T.current){const Ie=new so.Z(he);return Ie.observe(T.current),()=>{T.current&&Ie.unobserve(T.current)}}}});const ce=()=>{if(_||I){let be=window.innerHeight,_e=window.innerWidth,Ce=ae.freezeCellsLength[0]+20;R.style.overflowX=_e<=Ce?"hidden":"auto",R.style.maxHeight=`${be-R.offsetTop-30}px`,ne.offsetHeight>R.offsetHeight+20&&(R.style.display="block",ne.style.overflowX=_e<=Ce?"visible":"hidden")}};return ce(),window.addEventListener("resize",ce),()=>{window.removeEventListener("resize",ce)}}},[c,_,I]),(0,r.useEffect)(()=>{T.current&&setTimeout(()=>T.current.scrollTo(E||0,S||0),10)},[]),(0,r.useEffect)(()=>()=>{if(h!=null&&h.saveContent&&T.current){const{alias:R,args:N}=h.saveContent;le[R]({args:N,data:{scrollTop:T.current.scrollTop,scrollLeft:T.current.scrollLeft}})}},[]);const W=()=>r.createElement(r.Fragment,null,r.createElement("div",Gi(xa({className:Y,"data-name":i,ref:T,id:n},o),{onClick:U}),(0,Kn.ZP)(P.style,{replace:j}),r.createElement("table",{className:P.table},(0,Kn.ZP)(P.thead,{replace:j}),r.createElement("tbody",null,z==null?void 0:z.map((R,N)=>r.createElement(r.Fragment,{key:N},(0,Kn.ZP)(R.outerHTML,{replace:j})))))),r.createElement(Ui,xa({isClientSide:!0},F))),oe=()=>r.createElement("div",Gi(xa({className:Y,"data-name":i,ref:T,id:n},o),{onClick:U}),(0,Kn.ZP)(P.style+P.body,{replace:j}));return l?null:r.createElement(r.Fragment,null,c&&$&&H?W():oe())}Ki.propTypes={className:v().string,id:v().string,dataAttrs:v().object,isExcluded:v().bool,name:v().string.isRequired,type:v().string.isRequired,formId:v().string.isRequired,value:v().string.isRequired,metaSet:v().object,selectedCellId:v().string,onCellSelect:v().func,onClick:v().func,onDoubleClick:v().func,onExpand:v().func,onCollapse:v().func,events:v().object,freezeHeader:v().bool,freezeSide:v().bool,scrollTop:v().number,scrollLeft:v().number},Ki.defaultProps={className:"",disabled:!1,id:"",dataAttrs:{}};var kS=(0,r.memo)(Ki),hM={popperIconSize:"18px"},RS=Object.defineProperty,xS=Object.defineProperties,NS=Object.getOwnPropertyDescriptors,yp=Object.getOwnPropertySymbols,DS=Object.prototype.hasOwnProperty,MS=Object.prototype.propertyIsEnumerable,_p=(t,e,n)=>e in t?RS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vr=(t,e)=>{for(var n in e||(e={}))DS.call(e,n)&&_p(t,n,e[n]);if(yp)for(var n of yp(e))MS.call(e,n)&&_p(t,n,e[n]);return t},Da=(t,e)=>xS(t,NS(e));const qi=({currentTarget:t})=>{var e;return(e=t==null?void 0:t.dataset)==null?void 0:e.itemId},wp=(t,e,n)=>{let o=t;return n==="up"?o=t-1<0?0:t-1:n==="down"&&(o=t+1>e.length-1?e.length-1:t+1),o};function TS(t){const{schema:e,entities:n,className:o,style:a,name:l,isExcluded:i,isDisabled:s,onSelect:c,onToggle:u,onBlur:m,onFocus:d,onDoubleClick:f,GUID:p,openNodesIds:g,currentNodeId:w,events:h,metaSet:_,isFixSize:I}=t,S=(0,r.useMemo)(()=>su(e,g),[e,g]),[E,P]=(0,r.useState)(w),b=(0,r.useRef)(null),C=(0,r.useRef)(null),M=(0,r.useMemo)(()=>Pn({isFixSize:I,style:a}),[I,a]),O=16;let T;const D="tree",L=me()(o,"tree",{disabled:s}),$=(0,r.useCallback)(Y=>{if(s)return;let W=!0;if(d&&(W=d({event:Y,metaSet:_})),W&&(h!=null&&h.onFocus)){const{alias:oe,args:R}=h.onFocus;W=le[oe]({event:Y,args:R,metaSet:_})}return W},[d,h,_,s]),x=(0,r.useCallback)(Y=>{if(s)return;let W=!0;if(m&&(W=m({event:Y,metaSet:_})),W&&(h!=null&&h.onBlur)){const{alias:oe,args:R}=h.onBlur;W=le[oe]({event:Y,args:R,metaSet:_})}return W},[m,h,_,s]),Z=(0,r.useCallback)(Y=>{if(s)return;let W=!0;const oe=qi(Y);if(f&&(W=f({event:Y,metaSet:_,value:oe})),W&&(h!=null&&h.onDoubleClick)){const{alias:R,args:N}=h.onDoubleClick;W=le[R]({event:Y,args:N,metaSet:_,value:oe})}return W},[s,f,h,_]),A=(0,r.useCallback)(Y=>{Y.preventDefault(),Y.stopPropagation(),clearTimeout(T),Z(Y)}),F=(0,r.useCallback)(Y=>{if(s)return;let W=!0;const oe=qi(Y);if(c&&(W=c({event:Y,metaSet:_,value:oe})),W&&(h!=null&&h.onSelect)){const{alias:R,args:N}=h.onSelect;W=le[R]({event:Y,args:N,metaSet:_,value:oe})}return W&&(clearTimeout(C.current),P(oe)),W},[s,c,h,_]),z=(0,r.useCallback)(Y=>{if(s)return;const{parentNode:W}=Y.target,{dataset:{arrowWrapper:oe}}=W;if(oe){let R=!0;const N=qi(Y);if(u&&(R=u({event:Y,metaSet:_,value:N})),R&&(h!=null&&h.onToggle)){const{alias:ae,args:ce}=h.onToggle;R=le[ae]({event:Y,args:ce,metaSet:_,value:N})}const X=Rs(e,N);if(!!Rs(X,E)&&E!==N){if(s)return;if(c&&(R=c({event:Y,metaSet:_,value:N})),R&&(h!=null&&h.onSelect)){const{alias:ae,args:ce}=h.onSelect;R=le[ae]({event:Y,args:ce,metaSet:_,value:N})}}return R}else F(Y)},[s,u,h,F,_,e,c,E]),H=Y=>W=>{W.preventDefault(),W.stopPropagation();const oe={currentTarget:W.currentTarget,target:W.target};W.detail===1&&(T=setTimeout(()=>{Y(oe)},200))},K=(0,r.useCallback)(Y=>{Y.preventDefault()},[]),G=(0,r.useCallback)(Y=>{Y.preventDefault();const{keyCode:W}=Y,oe=Object.keys(n);if(oe.length>0&&(Yn(W)||Pr(W))){let R;const N=S.findIndex(ne=>ne===E);Yn(W)?R=wp(N,oe,"up"):R=wp(N,oe,"down");const X=S[R];if(P(X),X){if(s)return;let ne=!0;const ae=X;if(c&&(ne=c({event:Y,metaSet:_,value:ae})),ne&&(h!=null&&h.onSelect)){const{alias:ce,args:be}=h.onSelect;clearTimeout(C.current),C.current=setTimeout(()=>{le[ce]({event:Y,args:be,metaSet:_,value:ae})},500)}if(ne&&(b!=null&&b.current)){const ce=b.current,be=ce==null?void 0:ce.querySelector(`[data-item-id="${ae}"]`),_e=ce==null?void 0:ce.getBoundingClientRect().top,Ce=be.offsetTop;if((ce==null?void 0:ce.scrollHeight)>(ce==null?void 0:ce.clientHeight)){const ie=Ce-_e,he=ce.scrollTop,Ie=ce.clientHeight,Ae=he,ke=Ae+Ie,Fe={top:cu({activeNodeOffsetTop:ie,parentNodeScrollTop:he,cellHeight:22,step:20,visibleRangeMax:ke,visibleRangeMin:Ae}),left:0,behavior:"smooth"};ce==null||ce.scrollTo(Fe)}}return ne}}if(Bn(W)){if(s)return;let R=!0;const N=E;if(u&&(R=u({event:Y,metaSet:_,value:N})),R&&(h!=null&&h.onToggle)){const{alias:X,args:ne}=h.onToggle;R=le[X]({event:Y,args:ne,metaSet:_,value:N})}return R}},[n,E,c,h,_,S,u,b]);(0,r.useEffect)(()=>{P(w)},[w]);const ee=(0,r.useCallback)(Y=>{const{caption:W,GUID:oe,depth:R,name:N,hint:X,iconName:ne,nodeId:ae,dataAttrs:ce}=Y,be=me()("tree__hierarchy-list__command-item"),_e=me()("tree__hierarchy-list__command-span");let Ce={className:me()("tree__hierarchy-list__item-icon")};ne&&(Ce.src=Ft(ne));const ie=Vr({},ce);return ie["data-name"]=N,r.createElement("li",Da(Vr({key:oe,"data-item-id":ae,"data-item-guid":oe,onClick:H(F),onDoubleClick:A},ce),{className:be,"data-testid":`${D}__command-item`}),r.createElement("span",Da(Vr({className:me()("tree__hierarchy-list__command-item-link",{"tree__hierarchy-list__command-item-link_marked":E!==void 0&&E===ae})},ie),{style:{paddingLeft:`${R*O}px`},title:X||Ke.t(W),"data-caption":Ke.t(W),"data-id":N,"data-testid":`${D}__command-item-link`}),r.createElement("span",{className:"tree__hierarchy-list__command-action-item-arrow-stub"}),ne?r.createElement("img",Da(Vr({},Ce),{"data-testid":`${D}__command-item-icon`})):r.createElement("span",Da(Vr({},Ce),{"data-testid":`${D}__command-item-icon`})),r.createElement("span",{className:_e},W)))},[E,F,A,O,D]),j=(0,r.useCallback)(Y=>{const{depth:W,children:oe,iconName:R,GUID:N,hint:X,caption:ne,nodeId:ae,dataAttrs:ce}=Y,be=me()("tree__hierarchy-list__category-wrapper"),_e=me()("tree__hierarchy-list__category-name",{"tree__hierarchy-list__category_marked":E!==void 0&&E===ae});let Ce=g==null?void 0:g.includes(ae);const ie=Ce?"angle-down":"angle-right";return r.createElement("li",Da(Vr({key:N,id:N,className:be,"data-item-id":ae,"data-item-guid":N,"data-testid":`${D}__category`},ce),{onClick:H(z),onDoubleClick:A}),r.createElement("span",{className:_e,style:{paddingLeft:`${W*O}px`},title:X||ne,"data-testid":`${D}__category-name`},r.createElement("span",{"data-arrow-wrapper":!0},r.createElement(wt(),{name:ie,className:"tree__hierarchy-list__category-icon","data-testid":`${D}__category-icon`})),R&&r.createElement("img",{className:"tree__hierarchy-list__command-icon",src:Ft(R)}),r.createElement("span",{className:"tree__hierarchy-list__category-caption text-ellipsis"},ne)),Ce&&oe)},[g,E,z,A,O,D,H]),U=(0,r.useCallback)(({schema:Y,children:W,depth:oe})=>{const{nodeId:R,GUID:N}=Y||{};if(!R)return null;const{caption:X,iconName:ne,hint:ae,isExpansible:ce}=n[R];let be="";const _e={GUID:N,hint:ae,caption:X,nodeId:R};return ce?be=j(Vr({depth:oe,children:W,iconName:ne,schema:Y,nodeId:R},_e)):be=ee(Vr({depth:oe,schema:Y,isExcluded:i,isDisabled:s,iconName:ne},_e)),r.createElement("ul",{key:N,className:"tree__hierarchy-list","data-testid":`${D}__category`},be)});return i?null:r.createElement("div",{style:M,"data-name":l,"data-item-guid":p,className:L,tabIndex:0,onKeyDown:K,onKeyUp:G,onFocus:$,onBlur:x,ref:b},r.createElement(bm,{className:"tree__hierarchy-list",schema:e,renderElement:U,testId:"tree__hierarchy-list"}))}var AS=(0,r.memo)(TS),bM={popperIconSize:"18px"},FS=Object.defineProperty,Ep=Object.getOwnPropertySymbols,BS=Object.prototype.hasOwnProperty,zS=Object.prototype.propertyIsEnumerable,Sp=(t,e,n)=>e in t?FS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,LS=(t,e)=>{for(var n in e||(e={}))BS.call(e,n)&&Sp(t,n,e[n]);if(Ep)for(var n of Ep(e))zS.call(e,n)&&Sp(t,n,e[n]);return t};const $S="pdf";function Zi(t){const{className:e,id:n,dataAttrs:o,isExcluded:a,value:l,style:i,name:s,GUID:c,isFixSize:u}=t,m=(0,r.useMemo)(()=>Pn({isFixSize:u,style:i}),[u,i]);if(a)return null;const d=n||c||s||Gn().generate(),f=me()(e,$S);return r.createElement("iframe",LS({src:l,className:f,id:d,style:m},o))}Zi.defaultProps={value:""},Zi.propTypes={className:v().string,id:v().string,value:v().string.isRequired,dataAttrs:v().object,style:v().object,name:v().string,GUID:v().string};var HS=(0,r.memo)(Zi),CM={popperIconSize:"18px"},jS=Object.defineProperty,VS=Object.defineProperties,WS=Object.getOwnPropertyDescriptors,Pp=Object.getOwnPropertySymbols,US=Object.prototype.hasOwnProperty,GS=Object.prototype.propertyIsEnumerable,Ip=(t,e,n)=>e in t?jS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Op=(t,e)=>{for(var n in e||(e={}))US.call(e,n)&&Ip(t,n,e[n]);if(Pp)for(var n of Pp(e))GS.call(e,n)&&Ip(t,n,e[n]);return t},KS=(t,e)=>VS(t,WS(e));const qS="img";function ZS(t){return t>6?1:t>3.5?.5:t>1?.25:.1}function kp(t){const{clientWidth:e,clientHeight:n,scrollWidth:o,scrollHeight:a}=t;return a>n||o>e}function Rp(t){t.preventDefault()}function Yi(t){const{className:e,id:n,title:o,dataAttrs:a,value:l,center:i,stretch:s,shrink:c,preview:u,isExcluded:m,GUID:d,name:f,type:p,events:g,metaSet:w,onDoubleClick:h,scaleByWheel:_}=t,I=p==="img",S=l.includes(".svg"),E=n||d||f||Gn().generate(),P={high:10,low:.1},[b,C]=(0,r.useState)(null),M=(0,r.useRef)(1),O=(0,r.useRef)(null),T=(0,r.useRef)({}),D=(0,r.useRef)(null),L=me()(e,"image",{image_center:i&&I}),$=me()("image__img",{image__img__svg:S,image__img_shrink:c&&I&&!(s&&b==="stretch"),image__img_stretch:s&&I&&!(c&&b==="shrink")}),x=(0,r.useCallback)(()=>{i&&kp(D.current)&&D.current.scrollTo((O.current.clientWidth-D.current.clientWidth)/2,(O.current.clientHeight-D.current.clientHeight)/2)},[i,O,D,kp]),Z=(0,r.useCallback)(({width:U,height:Y})=>{O.current.style.height=Y,O.current.style.width=U},[O]),A=(0,r.useCallback)(()=>{T.current={width:O.current.clientWidth,height:O.current.clientHeight},M.current=1},[O,T,M]),F=(0,r.useCallback)(()=>{var U,Y;if(c&&s){const{height:W,width:oe}=((U=O==null?void 0:O.current)==null?void 0:U.getBoundingClientRect())||{},{height:R,width:N}=((Y=D==null?void 0:D.current)==null?void 0:Y.getBoundingClientRect())||{};C(N/oe<R/W?"stretch":"shrink")}},[O,D,c,s]),z=(0,r.useCallback)(()=>{Z({width:"",height:""})},[Z]),H=(0,r.useCallback)(()=>{F(),A(),x()},[A,F,x]),K=(0,r.useCallback)(U=>{var Y,W,oe;if(g!=null&&g.onClick){const{alias:R,args:N}=g.onClick,X={args:N,value:l,event:U},ne=(oe=(W=(Y=U==null?void 0:U.target)==null?void 0:Y.parentElement)==null?void 0:W.href)==null?void 0:oe.baseVal;return ne&&(X.href=ne),le[R](X),!1}u&&(U.stopPropagation(),Ve.onImagePreview({component:"ImgModal",componentProps:{value:l,className:qS}}))},[u,l,g]),G=(0,r.useCallback)(U=>{let Y=!0;if(h&&(Y=h({event:U,metaSet:w,value:l})),Y&&(g!=null&&g.onDoubleClick)){const{alias:W,args:oe}=g.onDoubleClick;Y=le[W]({event:U,args:oe,metaSet:w,value:l})}},[h,g,w]),ee=(0,r.useCallback)(U=>{if(_){const Y=U.deltaY||U.detail||U.wheelDelta,W=ZS(M.current);Y>0?M.current.toFixed(1)>P.low&&(M.current-=W):M.current.toFixed(1)<P.high&&(M.current+=W),Z({width:T.current.width*M.current+"px",height:T.current.height*M.current+"px"}),x()}},[M,_,T,Z,x]),j=(0,r.useCallback)(()=>{var U,Y,W,oe;if(S){const R=O.current.contentDocument.documentElement;if(R&&!R.getAttribute("viewBox")){const{height:N,width:X}=R.getBBox();N&&X&&R.setAttribute("viewBox",`0 0 ${((Y=(U=R.width)==null?void 0:U.baseVal)==null?void 0:Y.value)||X} ${((oe=(W=R.height)==null?void 0:W.baseVal)==null?void 0:oe.value)||N}`)}}H()},[H,S,O]);return(0,r.useLayoutEffect)(()=>{(c||s)&&z(),H()},[c,s,O,D]),(0,r.useEffect)(()=>{x()},[i]),(0,r.useEffect)(()=>{const U=D.current;_?U.addEventListener("wheel",Rp):U.removeEventListener("wheel",Rp)},[D,_]),(0,r.useEffect)(()=>{const U=D==null?void 0:D.current;if(U&&H){const Y=new so.Z(()=>{(M==null?void 0:M.current)===1&&H()});return Y.observe(U),()=>{Y.unobserve(U)}}},[D,M,H]),m?null:r.createElement("div",{ref:D,className:L,onWheel:ee,onClick:K,onDoubleClick:G},S?r.createElement("object",Op({data:l,type:"image/svg+xml",ref:O,tabIndex:-1,id:E,className:$,title:o||Ke.t("image"),onLoad:j},a),o||Ke.t("image")):r.createElement("img",KS(Op({ref:O,src:l,id:E,className:$,title:o,tabIndex:-1,onLoad:j},a),{alt:o||Ke.t("image")})))}Yi.defaultProps={center:!1,stretch:!1,shrink:!1,preview:!1,originalStyle:{},events:null},Yi.PropTypes={className:v().string,id:v().string,title:v().string,value:v().string.isRequired,dataAttrs:v().object,center:v().bool,stretch:v().bool,shrink:v().bool,preview:v().bool,isExcluded:v().bool,name:v().string,type:v().string,events:v().object};var YS=(0,r.memo)(Yi),XS=YS,yM={popperIconSize:"18px"},JS=Object.defineProperty,xp=Object.getOwnPropertySymbols,QS=Object.prototype.hasOwnProperty,eP=Object.prototype.propertyIsEnumerable,Np=(t,e,n)=>e in t?JS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tP=(t,e)=>{for(var n in e||(e={}))QS.call(e,n)&&Np(t,n,e[n]);if(xp)for(var n of xp(e))eP.call(e,n)&&Np(t,n,e[n]);return t};const Dp="html",Mp="<p><br></p>",nP=["OnTextChange","DoExecuteScriptAsyncResult","DoSelectionChange"];function Xi(t){const{className:e,id:n,dataAttrs:o,isExcluded:a,value:l,srcdoc:i,style:s,name:c,GUID:u,isFixSize:m,initialScripts:d,events:f,scriptValues:p,content:g}=t,w=o["data-form-id"],h=(0,r.useRef)(null),[_,I]=(0,r.useState)(!1),[S,E]=(0,r.useState)([]),P=(0,r.useRef)("");(0,r.useEffect)(()=>{p&&E([...S,...p])},[p]);const b=z=>{if(Ve.onIFrameClick&&z.button===0){const H=z.target.dataset||{},K=w;if(Object.keys(H).length){const G={controlId:c,formId:K,data:H};Ve.onIFrameClick(G)}}},C=(0,r.useCallback)(()=>{var z;const H=(z=h.current)==null?void 0:z.contentDocument;if(!H)return;const K=H.querySelector("#chartDiv");if(!K)return;const G=H.querySelector("html"),ee=H.body;[G,ee,K].forEach(j=>{j.style.height="100%"})},[h]),M=(0,r.useCallback)(z=>{var H,K,G,ee;if(Ve.onIFrameMessage&&((H=z==null?void 0:z.data)!=null&&H.dataset)&&z.source===h.current.contentWindow){const j=((K=z==null?void 0:z.data)==null?void 0:K.dataset)||{},U=w;if(Object.keys(j).length){const W={controlId:c,formId:U,data:j};Ve.onIFrameMessage(W)}const Y=(ee=(G=h.current)==null?void 0:G.contentDocument)==null?void 0:ee.querySelector(".ql-editor");if(!Y)return;if(nP.includes(j.Event)&&Y.innerHTML===Mp){P.current=Y.innerHTML;return}Y.innerHTML===Mp&&P.current?Y.innerHTML=P.current:P.current=Y.innerHTML}},[h,P,w]),O=()=>{Ve.onShowProcessIndicator()},T=()=>{Ve.onHideProcessIndicator()},D=()=>{var z;const H=(z=h.current)==null?void 0:z.contentDocument;H.onmouseup=b,H.showThrobber=O,H.hideThrobber=T},L=()=>{h.current.contentWindow.getData=()=>g},$=()=>{D(),I(!0)},x=()=>{if($(),!g){const z=p!=null&&p.length&&!(0,en.isEqual)(p,d)?p:[];E([...d,...z])}};(0,r.useEffect)(()=>(window.addEventListener("message",M),()=>{window.removeEventListener("message",M)}),[]),(0,r.useEffect)(()=>(h&&g&&L(),()=>{var z,H,K,G;if(h&&(H=(z=h.current)==null?void 0:z.contentDocument)!=null&&H.body&&f!=null&&f.saveContent){const{alias:ee,args:j}=f.saveContent;if(!((K=h.current)!=null&&K.contentWindow.saveData))return;const U=(G=h.current)==null?void 0:G.contentWindow.saveData(),Y="";le[ee]({args:j,content:U,value:Y})}}),[h]),(0,r.useEffect)(()=>{h&&S.length!==0&&_&&(S.forEach(z=>{var H,K;try{(K=(H=h.current)==null?void 0:H.contentWindow)==null||K.eval(z)}catch(G){console.error(G)}}),E([]),C())},[h,S,_,C]);const Z=(0,r.useMemo)(()=>Pn({isFixSize:m,style:s}),[m,s]),A=n||u||c||Gn().generate(),F=me()(e,Dp);return a?null:r.createElement("div",{className:"wrapper_"+Dp},r.createElement("iframe",tP({ref:h,srcDoc:i,src:l||" ",className:F,id:A,style:Z,onLoad:x,sandbox:"allow-modals allow-same-origin allow-top-navigation allow-scripts"},o)))}Xi.defaultProps={value:"",style:null,scriptValues:[],initialScripts:[]},Xi.propTypes={className:v().string,id:v().string,value:v().string.isRequired,dataAttrs:v().object,style:v().object,name:v().string,GUID:v().string};var rP=(0,r.memo)(Xi,(t,e)=>t.scriptValues===e.scriptValues&&t.value===e.value),_M={popperIconSize:"18px"};const Ma="circle-item";function oP(t){const{name:e,caption:n,iconName:o,cellSize:a,onItemSelect:l,dummy:i}=t,s=me()(Ma,{[`${Ma}__dummy`]:i}),c={maxWidth:pt(a==null?void 0:a.maxWidth),minWidth:pt(a==null?void 0:a.minWidth)},u={width:(c.maxWidth+c.minWidth)/2},m=(0,r.useCallback)(d=>{var f;if(d.target.classList.contains("circle-item"))return null;const p=(f=d.currentTarget.dataset)==null?void 0:f.id;l(p)},[l]);return r.createElement("div",{className:s,"data-id":e,style:c,onClick:m,title:n},r.createElement("div",{className:`${Ma}__icon-wrapper`},r.createElement("img",{className:`${Ma}__icon`,src:Ft(o)})),r.createElement("p",{className:`${Ma}__title`,style:u},Xc(n,15,`
`)))}var Ji=(0,r.memo)(oP),wM={popperIconSize:"18px"};const er="circle-menu";function aP(t){const{circles:e,caption:n,cellSize:o,onItemSelect:a,entities:l}=t,[i,s]=(0,r.useState)(!1),c={maxWidth:35,minWidth:21},u={maxWidth:pt(o==null?void 0:o.maxWidth),width:"100%",minWidth:pt(o==null?void 0:o.minWidth)},m=50,d=(0,r.useCallback)(w=>{let h={x:3,y:2};return w<=4&&w>2?h={x:2,y:2}:w<=2&&(h={x:2,y:1}),h},[]),f=(0,r.useCallback)(()=>{s(!i)},[i]),p=(0,r.useCallback)(w=>w?r.createElement("h1",{className:`${er}__title`},w):"",[]),g=(0,r.useCallback)(()=>{const w=d(e.length),h=e.map(P=>{const b=l==null?void 0:l[P.name];return r.createElement(Ji,{key:P.name,name:P.name,caption:b.caption,iconName:b.iconName,cellSize:c,onItemSelect:a,entities:l})}),_={borderRadius:"10px"},I={top:`${m}px`},S={width:`${m}px`,height:`${m}px`},E={gridTemplateColumns:`repeat(${w.x}, max-content)`,gridTemplateRows:`repeat(${w.y}, max-content)`};return r.createElement("div",{style:u,className:er},r.createElement(ya,{withArrow:!0,className:`${er}__drop-down-menu`,TargetComponent:r.createElement("div",{className:`${er}__arrow-container`,onClick:f},r.createElement("div",{className:`${er}__arrow-wrapper`,style:S},r.createElement(wt(),{size:"2x",name:"angle-right",className:`${er}__arrow`})),r.createElement("p",{className:`${er}__more`,style:I},"\u0415\u0449\u0435...")),needToRender:i},r.createElement("div",{onClick:f,className:`${er}__drop-down-container`},p(n),r.createElement(el.ZP,{noDefaultStyles:!0,translateContentSizesToHolder:!0,thumbYProps:{style:_}},r.createElement("div",{className:`${er}__items-wrapper`,style:E},h)),r.createElement("div",{className:`${er}__triangle`}))))},[e,l,a,f]);return r.createElement(r.Fragment,null,i?r.createElement("div",{className:`${er}__substrate`,onClick:f}):"",g())}var lP=(0,r.memo)(aP),EM={popperIconSize:"18px"};const Ir="tile";function sP(t){const{onItemSelect:e}=t,n=55,o=50,a=81,l=(0,r.useCallback)(({elements:m,elementsLength:d,cols:f,rows:p})=>{const g=f*p,w={renderInWrap:[],circlesInMenu:[],needToRenderMenu:d>g};return w.needToRenderMenu?(w.renderInWrap=m.slice(0,g-1),w.circlesInMenu=m.slice(g-1)):w.renderInWrap=m&&m.slice(),w},[]),i=(0,r.useCallback)((m,d)=>{const f=r.createElement("h1",{className:`${Ir}__title`},m||" ");return d!=null&&d.length?f:String.fromCharCode(160)},[]);let s=[];const c=(0,r.useCallback)(m=>{const{circlesItemsList:d,circlesInMenu:f,heightCircle:p,caption:g,cellSize:w,entities:h,needToRenderMenu:_,cols:I}=m;return d==null?void 0:d.reduce((E,P,b)=>{const C=s.length,M=d.length-1;if(M>b)if(C===I){const O=r.createElement("div",{key:P.key,className:`${Ir}__column-wrapper`},[...s]);E=E.concat(O),s=[P]}else s.push(P);else if(M===b){if(C===I){const T=r.createElement("div",{key:P.key,className:`${Ir}__column-wrapper`},[...s]);E=E.concat(T),s=[P]}else s.push(P);if(_&&s.push(r.createElement(lP,{circles:f,heightCircle:p,caption:g,onItemSelect:e,cellSize:w,entities:h,key:g})),s.length<I){const T=I-s.length;for(let D=0;D<T;D++)s.push(r.createElement(Ji,{key:D,dummy:!0,cellSize:w}))}const O=r.createElement("div",{key:b,className:`${Ir}__column-wrapper`},[...s]);E=E.concat(O),s=[]}return E},[])},[s]),u=(0,r.useCallback)(m=>{const{id:d,cols:f,rows:p,caption:g,orientation:w,elements:h,index:_=0,length:I=0,cellSize:S,entities:E,heightCircle:P}=m,b=Math.ceil((h==null?void 0:h.length)/f)||1,C=b>p?p:b,M=pt(S==null?void 0:S.maxWidth),O=me()(Ir,{[`${Ir}__vertical--offset`]:w==="vertical"&&_>0&&_+1!==I,[`${Ir}__vertical-orientation`]:w==="vertical",[`${Ir}__horizontal-orientation`]:w==="horizontal"}),T=(h==null?void 0:h.filter(G=>!G.isExcluded).length)||0,L=(h==null?void 0:h.some(G=>G.elements))&&(h==null?void 0:h.map((G,ee)=>{const j=E==null?void 0:E[G.name];if(!G.elements)return;const U={index:ee,id:j.name,cols:j.cols,rows:j.rows,caption:j.caption,orientation:j.orientation,elements:G.elements,length:T,cellSize:S,entities:E};return u(U)})),$=C*(n+o)+a,x=!!(L!=null&&L.length),Z=x?{}:{width:f*M,height:$},{renderInWrap:A,circlesInMenu:F,needToRenderMenu:z}=l({elements:h,elementsLength:T,cols:f,rows:p}),H=A&&A.map(G=>{const ee=E==null?void 0:E[G.name];return ee.isExcluded?null:r.createElement(Ji,{key:G.name,name:G.name,caption:ee==null?void 0:ee.caption,iconName:ee==null?void 0:ee.iconName,cellSize:S,onItemSelect:e})}),K={circlesItemsList:H,circlesInMenu:F,heightCircle:P,caption:g,cellSize:S,entities:E,needToRenderMenu:z,cols:f};return r.createElement("div",{className:O,style:Z,"data-id":d,key:d},x||i(g,H),r.createElement("div",{className:`${Ir}__wrapper`},x?L:c(K)))},[l,e,i,c]);return u(t)}var iP=(0,r.memo)(sP),SM={popperIconSize:"18px"},cP=Object.defineProperty,Tp=Object.getOwnPropertySymbols,uP=Object.prototype.hasOwnProperty,dP=Object.prototype.propertyIsEnumerable,Ap=(t,e,n)=>e in t?cP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qi=(t,e)=>{for(var n in e||(e={}))uP.call(e,n)&&Ap(t,n,e[n]);if(Tp)for(var n of Tp(e))dP.call(e,n)&&Ap(t,n,e[n]);return t};const So="role-center";function mP(t){const{className:e,isExcluded:n,entities:o,schema:a,buttonsBefore:l,buttonsAfter:i}=t;if(n)return null;const s=me()(e,So),c=(0,r.useCallback)(p=>{Ve.saveSelectedRoleCenterItemId&&Ve.saveSelectedRoleCenterItemId(p),Ve.onRoleCenterCommandSend&&Ve.onRoleCenterCommandSend({id:p,controlId:"roleCenter"})},[Ve.saveSelectedRoleCenterItemId,Ve.onRoleCenterCommandSend]),u=(0,r.useCallback)((p,g)=>p.elements?p.elements.map(w=>{const h=o[w.name];return r.createElement(iP,{key:w.name,id:w.name,cols:h.cols,rows:h.rows,caption:h.caption,elements:w.elements,orientation:h.orientation,cellSize:g.cellSize,onItemSelect:c,entities:o})}):[],[o,c]),m=(0,r.useCallback)((p,g)=>p.map(w=>{var h;if(w.type==="button")return r.createElement(Lt,Qi({key:w.name,className:`${So}__button-title ${g}`,metaSet:w.name,testId:w.name},w));if(w.type==="listButton"){let _=null;return(h=w.elements)!=null&&h.length&&(_=w.elements.map(I=>r.createElement(Lt,Qi({key:I.name,metaSet:I.name,testId:I.name},I)))),r.createElement(wa,Qi({key:w.name,className:`${So}__button-title ${g}`},w),_)}}),[]),d=(0,r.useCallback)(p=>{let g="",w="";return l!=null&&l.length&&(g=m(l,"before-title")),i!=null&&i.length&&(w=m(i,"after-title")),r.createElement("div",{className:`${So}__title-group`},g,r.createElement("h1",{className:`${So}__first-lvl-ids-title`},p||""),w)},[]),f=(0,r.useCallback)(p=>{const g=o[p.name],w=g.orientation==="vertical"?`${So}__vertical-orientation`:`${So}__horizontal-orientation`;return r.createElement(r.Fragment,{key:p.name},d(g.caption),r.createElement("div",{key:p.name,className:w},u(p,g)))},[o,u]);return r.createElement("div",{className:s},r.createElement(wl,null,a.map(p=>f(p))))}var fP=(0,r.memo)(mP),pP=xe(47229),vP=Object.defineProperty,gP=Object.defineProperties,hP=Object.getOwnPropertyDescriptors,Fp=Object.getOwnPropertySymbols,bP=Object.prototype.hasOwnProperty,CP=Object.prototype.propertyIsEnumerable,Bp=(t,e,n)=>e in t?vP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ec=(t,e)=>{for(var n in e||(e={}))bP.call(e,n)&&Bp(t,n,e[n]);if(Fp)for(var n of Fp(e))CP.call(e,n)&&Bp(t,n,e[n]);return t},zp=(t,e)=>gP(t,hP(e));const Ta="chart",Lp=t=>{var e,n,o;const a=((e=t.legend)==null?void 0:e.show)===void 0||((n=t.legend)==null?void 0:n.show);return!!((o=t.legend)!=null&&o.showForSingleSeries&&a)};function tc(t){var e;const{className:n,style:o,series:a,options:l,chartType:i,height:s,dataAttrs:c,isDisabled:u,events:m,onDataPointSelect:d,onClick:f,metaSet:p}=t,g=(0,r.useMemo)(()=>Pn({style:o}),[o]),w=s?sn(s):"100%",h=(0,r.useRef)(null);let _;const[I,S]=(0,r.useState)((0,en.cloneDeep)(l)),E=me()(n,Ta,{[`${Ta}_disabled`]:u,[`${Ta}_custom-legend`]:Lp(l)&&((e=a[0])==null?void 0:e.name)===""}),P=(0,r.useCallback)((b,C,M)=>{if(u)return!1;let O=!0;const{detail:T}=b,D=M.seriesIndex+1,$={valueNumber:M.dataPointIndex+1,seriesNumber:D};if(T===1)_=setTimeout(()=>{if(O&&f&&(O=f({event:b,metaSet:p,value:$})),O&&(m!=null&&m.onClick)){const{alias:x,args:Z}=m.onClick;le[x]({event:b,args:Z,metaSet:p,value:$})}},200);else if(T===2&&(clearTimeout(_),O&&d&&(O=d({event:b,metaSet:p,value:$})),O&&(m!=null&&m.onDataPointSelect))){const{alias:x,args:Z}=m.onDataPointSelect;le[x]({event:b,args:Z,metaSet:p,value:$})}},[f,d,m]);return(0,r.useEffect)(()=>{var b;let C=(0,en.cloneDeep)(l);if(C.dataLabels||(C.dataLabels={formatter:(M,O)=>O.w.config.series[O.seriesIndex]}),C.chart||(C.chart={}),!C.chart.parentHeightOffset&&(C.chart.parentHeightOffset=0),C.chart.animations||(C.chart.animations={enabled:!1}),["bubble","scatter"].includes(i)&&(a!=null&&a.length)){const{min:M,max:O,tickPlacement:T}=(C==null?void 0:C.xaxis)||{};if(M!==void 0&&O!==void 0&&T==="on"){const[D,L]=a.reduce(($,x)=>{const[Z,A]=x.data.reduce((F,[z])=>[Math.min(z,F[0]),Math.max(z,F[1])],[Number.MAX_VALUE,Number.MIN_VALUE]);return[Math.min(Z,$[0]),Math.max(A,$[1])]},[Number.MAX_VALUE,Number.MIN_VALUE]);(M<D||O>L)&&(C.chart.events=zp(ec({},C.chart.events),{beforeZoom:function($,{xaxis:x}){return x.min===D&&x.max===L&&(M<D&&(x.min=M),O>L&&(x.max=O)),{xaxis:x}}}))}}C.xaxis&&C.xaxis.categories&&!((b=C.plotOptions.bar)!=null&&b.horizontal)&&(C.xaxis={categories:C.xaxis.categories.reverse(),labels:{rotate:-45,rotateAlways:!1,minHeight:120}}),C.chart.events=zp(ec({},C.chart.events),{dataPointSelection:(M,O,T)=>P(M,O,T),mounted:M=>{var O,T;(T=(O=l.chart.events)==null?void 0:O.mounted)==null||T.call(O),M.windowResizeHandler()}}),Lp(C)&&(C.legend.formatter=(M,O)=>{const T=O.w.globals.labels||[];return M||T.map(D=>D).join("<br />")}),["area","line"].includes(C.chart.type)&&(C.tooltip||(C.tooltip={},C.tooltip.intersect=!0,C.tooltip.shared=!1),C.markers||(C.markers={},C.markers.size=5)),u&&(C.chart.toolbar={show:!1}),S(C)},[l,P,a,u]),r.createElement("div",ec({className:E,style:g,ref:h},c),u&&r.createElement("div",{className:`${Ta}_overlay`}),a!=null&&a.length&&i?r.createElement(pP.Z,{className:`${Ta}__apexchart`,options:I,series:a,type:i,height:w}):null)}tc.propTypes={chartType:v().string,height:v().any,className:v().string,id:v().string.isRequired,dataAttrs:v().object.isRequired,events:v().object.isRequired,style:v().object,options:v().object,series:v().array,isDisabled:v().bool,isExcluded:v().bool,onDataPointSelect:v().func},tc.defaultProps={chartType:""};var yP=(0,r.memo)(tc),_P=yP,On=xe(78092),nc=xe(19688),Wr=xe(71336),PM={popperIconSize:"18px"},IM={popperIconSize:"18px"},wP=Object.defineProperty,EP=Object.defineProperties,SP=Object.getOwnPropertyDescriptors,$p=Object.getOwnPropertySymbols,PP=Object.prototype.hasOwnProperty,IP=Object.prototype.propertyIsEnumerable,Hp=(t,e,n)=>e in t?wP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rc=(t,e)=>{for(var n in e||(e={}))PP.call(e,n)&&Hp(t,n,e[n]);if($p)for(var n of $p(e))IP.call(e,n)&&Hp(t,n,e[n]);return t},jp=(t,e)=>EP(t,SP(e));const Yo="item-context-menu",Vp="item-context-menu";var Wp=t=>{var e;const{caption:n,GUID:o,name:a,hint:l,iconName:i,isDisabled:s,isPressed:c,className:u,testId:m,index:d,currentActiveIndex:f}=t,p=(0,r.useRef)(null),g=m||Vp,w=me()(u,Yo,{[`${Yo}_disabled`]:s,[`${Yo}_active`]:d===f}),h=`${Yo}-content`,_=me()(h,{[`${h}_pressed`]:c});let I={className:`${Yo}-icon`,"data-testid":`${Vp}-icon`};const S=i||(c?"check":""),E=`${g}_icon`,P=S?S!=null&&S.includes("/")?r.createElement("img",jp(rc({},I),{src:Ft(S),alt:"","data-testid":E})):r.createElement(wt(),jp(rc({},I),{name:S,"data-testid":E})):r.createElement("span",rc({},I));return Sr(p,l,(e=p==null?void 0:p.current)==null?void 0:e.innerText),r.createElement("div",{key:o||a,"data-item-id":a,"data-item-guid":o,"data-name":a,className:w},r.createElement("div",{className:_,"data-id":a,"data-name":a,"data-testid":g,ref:p},P,r.createElement("span",{className:`${Yo}-caption`,"data-testid":`${g}_caption`},Ke.t(n))))},OP=Object.defineProperty,kP=Object.defineProperties,RP=Object.getOwnPropertyDescriptors,Up=Object.getOwnPropertySymbols,xP=Object.prototype.hasOwnProperty,NP=Object.prototype.propertyIsEnumerable,Gp=(t,e,n)=>e in t?OP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xo=(t,e)=>{for(var n in e||(e={}))xP.call(e,n)&&Gp(t,n,e[n]);if(Up)for(var n of Up(e))NP.call(e,n)&&Gp(t,n,e[n]);return t},Aa=(t,e)=>kP(t,RP(e));function DP(t){const{itemsContextMenu:e,id:n,handleClickContextMenu:o,handleCloseContextMenu:a,metaSet:l,dataAttrs:i}=t,s=(0,r.useRef)(null),{hideAll:c}=(0,Wr.av)({id:n}),u=Xo({"data-testid":"contextMenu-"+n},i),{pageZoom:m}=(0,Xt.v9)(_=>_.mainAppParams),d=(0,r.useCallback)(({event:_,data:I,props:S})=>{if(o){const{menuItem:E}=I;o(Aa(Xo({event:_,metaSet:I},S),{menuItem:E}))}},[o]),f=(0,r.useCallback)(_=>{s.current&&!s.current.contains(_.target)&&c(),a&&a(_)},[c,s]),p=(0,r.useCallback)(()=>{const _=m||1;if(_<1){const{left:I,top:S}=s.current.firstChild.style;s.current.firstChild.style.left=`${parseInt(I,10)/_}px`,s.current.firstChild.style.top=`${parseInt(S,10)/_}px`}document.addEventListener("click",f)},[f,m]),g=(0,r.useCallback)(()=>{document.removeEventListener("click",f)},[f]);(0,r.useEffect)(()=>g,[g]);const w=(_,I)=>{switch(_.type){case"separator":return r.createElement(Wr.Z0,{key:I});case"group":return r.createElement(Wr.rS,{arrow:!1,key:I,className:"context-menu__item context-menu__submenu",label:r.createElement(Wp,Aa(Xo({},_),{index:I}))},_.elements.map(w));default:return r.createElement(Wr.ck,{disabled:_.isDisabled,data:Aa(Xo({},l),{id:n,menuItem:_.name}),onClick:d,className:"context-menu__item",key:I},r.createElement(Wp,Aa(Xo({},_),{index:I})))}},h=(0,r.useMemo)(()=>e==null?void 0:e.map(w),[e]);return r.createElement("div",{ref:s},r.createElement(Wr.v2,Aa(Xo({},u),{onShown:p,onHidden:g,className:"context-menu",animation:!1,id:n}),h))}var Kp=(0,r.memo)(DP),qp=Kp;const Zp=["string","number","integer","enum","date","checkbox"],MP=[...Zp];function TP(t){return Zp.includes(t)}function Al(t){return MP.includes(t)}var AP=Object.defineProperty,Yp=Object.getOwnPropertySymbols,FP=Object.prototype.hasOwnProperty,BP=Object.prototype.propertyIsEnumerable,Xp=(t,e,n)=>e in t?AP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zP=(t,e)=>{for(var n in e||(e={}))FP.call(e,n)&&Xp(t,n,e[n]);if(Yp)for(var n of Yp(e))BP.call(e,n)&&Xp(t,n,e[n]);return t};const pn=26,Fa=28,Ba=10,LP=41,Ht="table",Ur=Ht+"__grid-header",oc=Ur+"-sorter",Jp=Ur+"-cell",Qp=Jp+"-item";function Po(t,e,n){return`${t}-${e}-${n}`}function e0(t,e){return To(e,"rowId",t,1)}function t0(t,e){return To(e,"rowId",t,-1)}function $P(t,e){return To(e,"name",t,1)}function HP(t,e){return To(e,"name",t,-1)}function jP(t,e={}){const{maxWidth:n,minWidth:o,width:a}=e;if(a===void 0)return null;const l=Math.round(a-t);return n0(l,o,n)}function n0(t=0,e,n){return n&&t>n?n:e&&t<e?e:t<Fa?Fa:t}function VP(t){return Number.isFinite(t)&&Number(t)!==0?Math.round(parseFloat(t)/4):t||null}const WP=(t,e)=>{var n,o;if(!e||!(t!=null&&t.length))return null;for(const a of t){if(a.name===e)return a;if((n=a.insideColumns)!=null&&n.length){const l=a.insideColumns.find(i=>i.name===e);if(l)return l}if((o=a.linkedColumns)!=null&&o.length){const l=WP(a.linkedColumns,e);if(l)return l}}return null},UP=(t,e)=>{const n=Object.assign({},e),o={},a=(i,s)=>{o[i]||(o[i]=[]),o[i].push(s)},l=(i,s=1)=>{var c,u,m;const d={row:s,height:(m=(u=(c=e[i.name])==null?void 0:c.headerSize)==null?void 0:u.height)!=null?m:pn},{name:f,rowspan:p,linkedColumns:g}=i;if(p&&p>1&&!g.length){d.rowspan=p;for(let w=s+1;w<=p;w++)a(w,f)}n[f]?n[f].headerSize=d:n[f]={headerSize:d},a(s,f),i.linkedColumns.forEach(w=>l(w,s+1))};return t.forEach(i=>l(i)),{newHeaderRows:o,newTableSizes:n}},r0=(t,e,n,o)=>{const a=Object.entries(t),l=e-(n?Ba:0);let i=0,s=0;const c={};a.forEach(([f,p])=>{c[f]=zP({},p),p.isFixSize&&p.width?i+=p.width:p.width&&s++});const u=()=>l-i-o-4;let m=!0;const d=[];for(;m;)m=!1,a.forEach(([f,p])=>{const{width:g,minWidth:w,maxWidth:h,isFixSize:_}=p;if(_||d.includes(f)||!g)return;let I=Math.round(u()/s);const S=n0(I,w,h);I!==S&&(d.push(f),i+=S,s--,I=S,m=!0),c[f].width=I});return c},o0=(t,e=[],n)=>{var o,a;const l=(o=e[t])==null?void 0:o.rowId;if(l){const i=pn-8;return(((a=n[l])==null?void 0:a.reduce((c,u)=>u>c?u:c,i))||i)+8}return pn},GP=({rowsData:t=[],columnsData:e,wrapperWidth:n,isCardFile:o,getWidthColumn:a,serviceListWidth:l,rowsHeights:i,headerHeight:s,hasScroll:c,isTableOptimisationNeeded:u})=>{const m=t.length||1,d=n||0;let f;o?f=d:f=e.reduce((h,{name:_})=>h+a({name:_}),l)+2;let p,g=0;for(let w=0;w<m;w++){let h=o0(w,t,i);t.length||(h-=pn),g+=h}return p=g+s+4,c.horizontal&&(p+=Ba),c.vertical&&u&&(f+=Ba),{countedWidth:f,countedHeight:p}};var KP=Object.defineProperty,qP=Object.defineProperties,ZP=Object.getOwnPropertyDescriptors,Fl=Object.getOwnPropertySymbols,a0=Object.prototype.hasOwnProperty,l0=Object.prototype.propertyIsEnumerable,s0=(t,e,n)=>e in t?KP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gr=(t,e)=>{for(var n in e||(e={}))a0.call(e,n)&&s0(t,n,e[n]);if(Fl)for(var n of Fl(e))l0.call(e,n)&&s0(t,n,e[n]);return t},i0=(t,e)=>qP(t,ZP(e)),c0=(t,e)=>{var n={};for(var o in t)a0.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Fl)for(var o of Fl(t))e.indexOf(o)<0&&l0.call(t,o)&&(n[o]=t[o]);return n},YP=(0,r.memo)(({data:t,columnIndex:e,rowIndex:n,style:o})=>{var a,l,i;const{tableId:s,columns:c,rows:u,currentRowId:m,currentColumnId:d,isCardFile:f,onRowSelect:p,isInPlaceEdit:g,editableRowId:w,onNavigation:h,onCellDoubleClick:_,onCellControlEvent:I,onRowsBlur:S,onRowHeightChange:E,showContextMenuColumn:P,onMove:b,setFocusedEditableCell:C,tableWasFocused:M,wasServiceRowFocused:O,getWidthColumn:T}=t,D=["string","number","integer","enum","checkbox","date","button","listButton","label"],L=u[n]||null,$=c[e],{name:x,control:Z,isDisabled:A}=$,F=L?L.rowId:null,z=(L==null?void 0:L[x])||{},H=z,{style:K,isRequired:G,isWrapped:ee,isMultiLine:j,dataAttrs:U={}}=H,Y=c0(H,["style","isRequired","isWrapped","isMultiLine","dataAttrs"]),W=i0(Gr({},K),{width:VP(T({name:x}))}),oe={rowId:F,rowIndex:n,columnId:x,columnIndex:e},R=m===F,N=w===F,X=d===x&&R,ne=`${Ht}__grid-cell`,ae=me()(ne,{[`${Ht}__main-cell`]:!0,[`${ne}_active`]:R&&!A,[`${ne}_disabled`]:A,[`${ne}_active_disabled`]:R&&A}),ce=Z,{events:be}=ce,_e=c0(ce,["events"]),{type:Ce,hint:ie}=_e,he=(0,r.useRef)(null),Ie=(0,r.useRef)(null),Ae=(0,r.useRef)(zt.active),ke=Po(s,F,x),Re=(0,r.useCallback)((pe,{event:te,value:ge,rowId:re,columnId:we})=>(I({event:te,eventType:pe,control:Z,cellData:oe,value:ge,targetRowId:re,targetColumnId:we}),!0),[Z,oe,I]),Fe=(0,r.useCallback)(pe=>{var te;const{detail:ge}=pe;(te=Ie.current)==null||te.focus(),ge===2&&_&&!g&&_({event:pe,rowId:F})},[F,_,Ie,g]),Ue=(0,r.useCallback)(pe=>{var te;pe.stopPropagation();const{keyCode:ge}=pe,re=Yn(ge),we=Pr(ge);if(ai(ge)&&!g&&p({event:pe,rowId:F}),(re||we)&&(Ae.current!==zt.editable||f)){const Se=re?t0(F,u):e0(F,u);return(te=document.getElementById(Po(s,Se,x)))==null||te.focus({preventScroll:!0}),!1}return!0},[s,F,x,u,g,p,Ae]),Qe=(0,r.useCallback)(({event:pe})=>{let te={rowId:F,columnId:x};return R&&delete te.rowId,x===d&&delete te.columnId,b({event:pe,value:{submit:!R||!M.current&&!f,rowId:F,columnId:x}}),(te.rowId||te.columnId)&&F==="serviceRow"&&!O.current&&(O.current=!0,h({event:pe,value:te})),M.current||(M.current=!0),!0},[h,F,m,x,d,b,R,M,O]),fe=(0,r.useCallback)(({event:pe})=>{var te;const ge=(te=pe==null?void 0:pe.relatedTarget)==null?void 0:te.dataset;return((ge==null?void 0:ge.tableId)!==s||!(ge!=null&&ge.hasOwnProperty("rowId")))&&S({event:pe,value:{lastSelectedRowId:F}}),!0},[s,S,F]),Oe=(0,r.useCallback)(({event:pe,value:te})=>(Re("onImplicitChange",{event:pe,value:te}),!0),[Re]),Ee=(0,r.useCallback)(({event:pe})=>{const{shiftKey:te}=pe,ge=c.filter(we=>!we.isDisabled);return(te?HP(x,ge):$P(x,ge))===x&&pe.preventDefault(),!1},[x,c]),ue=(0,r.useCallback)(pe=>(Re("onEnter",pe),!0),[Re,Ae]),Te=(0,r.useCallback)(pe=>(Re("onEdit",pe),!0),[Re,Ae]),We=(0,r.useCallback)(({value:pe})=>{Ae.current=pe},[Ae]),[Ye,Xe]=(0,r.useState)(0),mt=(0,r.useCallback)(({value:pe})=>{const{blockSize:te}=pe.borderBoxSize;pn<te&&Ye!==te&&(Xe(te),E({rowId:F,rowIndex:n,columnIndex:e,height:te})),pn>te&&Ye>pn&&(Xe(te),E({rowId:F,rowIndex:n,columnIndex:e,height:te}))},[F,n,e,E,Ye]),ot=(0,r.useMemo)(()=>i0(Gr({},U),{["data-table-id"]:s,["data-row-id"]:F,["data-column-id"]:x}),[s,F,x,U]);let Je=null;if(D.includes(Ce)){const pe={isWrapped:ee,isMultiLine:j,isRequired:G,hint:ie,style:W,className:`${Ht}__cell-control`||null,isDisabled:A,focusedElement:Ie,isStatic:A||f&&(!N||!g),isParentTable:!0,tabIndex:Br(g&&!A)},te={};for(const re in be)be.hasOwnProperty(re)&&(te[re]=Re.bind(void 0,re));te.onTab=Ee,te.onFocus=Qe,te.onBlur=fe,te.onEnter=ue,te.onModeChange=We,te.onEdit=be&&Object.keys(be).includes("onEdit")&&Te;let ge=null;switch(Ce){case"checkbox":{pe.isStatic=!g;break}case"button":{pe.isStatic=!g;break}case"listButton":{pe.isStatic=!g,(a=_e.elements)!=null&&a.length&&(ge=_e.elements.map(re=>{var we;const Se=Gr({},re);return(we=re==null?void 0:re.actions)!=null&&we.length&&re.actions.forEach($e=>{Se[$e]=Re.bind(void 0,$e)}),ja(Se,_e.isDisabled)}));break}default:break}pe.dataAttrs=ot,pe.value=z.value,Al(Ce)&&(pe.formattedValue=z.formattedValue||z.value,te.onImplicitChange=Oe),pe.isWrapped&&(te.onResize=mt),Je=ja(Gr(Gr(Gr(Gr({GUID:ke},_e),pe),Y),te),!1,ge)}(0,r.useEffect)(()=>{var pe;f&&X&&g&&Ie.current&&!A&&((pe=Ie.current)==null||pe.focus(),C(Ie.current))},[X,g]);const{show:ct}=(0,Wr.av)({id:s,props:{rowId:F}}),nt=pe=>{ct(pe)};return L?r.createElement("div",{ref:he,className:ae,style:Gr({backgroundColor:(i=(l=Je==null?void 0:Je.props)==null?void 0:l.style)==null?void 0:i.backgroundColor},o),tabIndex:-1,"data-cell":"",onClick:Fe,onKeyDown:Ue,onContextMenu:P?nt:null},Je):null},On.wy),XP=xe(89537),JP=(0,r.memo)(({data:t,index:e,style:n})=>{const{tableId:o,isDisabled:a,rows:l,currentRowId:i,selectedRowIds:s,showSelectColumn:c,showIcon:u,onRowsBlur:m,testId:d,onRowSelect:f,onNavigation:p,onMove:g,onCellDoubleClick:w,onClickIcon:h,isCardFile:_,tableWasFocused:I,wasServiceRowFocused:S,isInPlaceEdit:E}=t,P={checkBox:"sc-checkBox",subMenu:"sc-subMenu",image:"sc-image"},b=l[e]||null,C=(b==null?void 0:b.rowId)||null,M=(b==null?void 0:b.iconName)||{},O=i===C,T=s.includes(C),D=me()(`${Ht}__grid-cell`,`${Ht}__service-cell`,{[`${Ht}__grid-cell_active`]:O}),L=`${Ht}__row-marker`,$=me()(D,L,{[`${L}_select`]:T,[`${L}_edit`]:!1}),x=me()(D,`${Ht}__row-selector`),Z=me()(D,`${Ht}__row-image`),A=R=>{const N={};return R.bgColor&&(N.backgroundColor=R.bgColor),N},z=(R=>{const N={};return R.color&&(N.filter=(0,XP.hexToCSSFilter)(R.color).filter.slice(0,-1)),N})(M),H=A(M),K=`${d}_${C}_checkbox-selector`,G=(0,r.useCallback)(R=>{const{detail:N}=R;p&&p({event:R,value:{rowId:C}}),N===2&&w&&w({event:R,rowId:C})},[C,p,w]),ee=R=>{const{detail:N}=R;N===1&&h&&!_?h({event:R,rowId:C}):N===1&&w&&_&&w({event:R,rowId:C})},j=(0,r.useCallback)(R=>{var N;R.stopPropagation();const{keyCode:X,currentTarget:{dataset:{tableId:ne,columnId:ae,rowId:ce}}}=R,be=Yn(X),_e=Pr(X);if(ai(X)&&!E&&f({event:R,rowId:ce}),be||_e){const Ce=be?t0(ce,l):e0(ce,l);return(N=document.getElementById(Po(ne,Ce,ae)))==null||N.focus(),!1}return!0},[l,E,f]),U=(0,r.useCallback)(R=>(g({event:R,value:{submit:!O||!I.current&&!_,rowId:C}}),I.current||(I.current=!0),C==="serviceRow"&&!S.current&&(S.current=!0,p({event:R,value:{rowId:C}})),!0),[p,C,I,O,S,g]),Y=(0,r.useCallback)(R=>{var N;const X=(N=R.relatedTarget)==null?void 0:N.dataset;return((X==null?void 0:X.tableId)!==o||!(X!=null&&X.hasOwnProperty("rowId")))&&m({event:R,value:{lastSelectedRowId:C}}),!0},[o,m,C]),W=(0,r.useCallback)(({event:R,value:N})=>{f&&f({event:R,value:N,rowId:C})},[f,C]),oe=(0,r.useMemo)(()=>({["data-table-id"]:o,["data-row-id"]:C}),[o,C]);return r.createElement("div",{className:`${Ht}__grid-service-row`,style:n},c&&r.createElement(r.Fragment,null,r.createElement("div",{className:$}),r.createElement("div",{className:x,"data-table-id":o,"data-row-id":C,"data-column-id":P.checkBox,onClick:G,onKeyDown:j,onFocus:U,onBlur:Y,tabIndex:-1},r.createElement(xl,{id:Po(o,C,P.checkBox),isDisabled:a,value:T,onChange:W,dataAttrs:oe,metaSet:{rowId:C},tabIndex:-1,testId:K,isParentTable:!0}))),u&&r.createElement("div",{className:Z,"data-table-id":o,"data-row-id":C,"data-column-id":P.image,style:H,onClick:ee,onKeyDown:j,onFocus:U,onBlur:Y,tabIndex:-1},r.createElement("div",{className:"service-cell__img-container"},r.createElement("img",{style:z,tabIndex:-1,id:Po(o,C,P.image),className:"img",src:Ft(M.name),"data-table-id":o,"data-row-id":C,alt:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435"}))))},On.wy);const QP=({_ref:t,cellColor:e,textStyle:n,hasSorter:o,handleMouseUp:a,handleCellResizeMouseDown:l,controlClasses:i,sorterClasses:s,isFixSize:c,title:u,children:m,tabIndex:d,height:f})=>{const p=r.createElement("div",{className:i,style:{position:"relative",height:f},onMouseUp:a,tabIndex:d},r.createElement("span",{ref:t,className:"table__grid-header-text text-ellipsis",style:n,title:u},m),o&&r.createElement("span",{className:s}),!c&&r.createElement("div",{className:"table__grid-header-lane-resizable",onMouseDown:l}));return e?r.createElement("div",{className:"table__grid-header-cell-item_wrapper",style:{background:e}},p):p};var e4=(0,r.memo)(QP),t4=Object.defineProperty,n4=Object.defineProperties,r4=Object.getOwnPropertyDescriptors,u0=Object.getOwnPropertySymbols,o4=Object.prototype.hasOwnProperty,a4=Object.prototype.propertyIsEnumerable,d0=(t,e,n)=>e in t?t4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,m0=(t,e)=>{for(var n in e||(e={}))o4.call(e,n)&&d0(t,n,e[n]);if(u0)for(var n of u0(e))a4.call(e,n)&&d0(t,n,e[n]);return t},f0=(t,e)=>n4(t,r4(e));const l4=t=>{const{headerCellData:e,getWidthHeader:n}=t;return r.createElement(r.Fragment,null,e.linkedColumns.map(o=>{const{style:a}=o,l=n(o),i=f0(m0({},a),{width:l+"px",maxWidth:l+"px",minWidth:l+"px"});return r.createElement(h0,f0(m0({},t),{headerCellData:o,style:i,key:o.name}))}))};var s4=(0,r.memo)(l4),i4=Object.defineProperty,p0=Object.getOwnPropertySymbols,c4=Object.prototype.hasOwnProperty,u4=Object.prototype.propertyIsEnumerable,v0=(t,e,n)=>e in t?i4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g0=(t,e)=>{for(var n in e||(e={}))c4.call(e,n)&&v0(t,n,e[n]);if(p0)for(var n of p0(e))u4.call(e,n)&&v0(t,n,e[n]);return t};const d4=t=>{var e,n,o;const{headerCellData:a,style:l,isResizedHeaderWidth:i,handleHeaderClick:s,onMouseDownResizableWidthHed:c,setCellHeight:u,getHeaderCellHeight:m,onContextMenu:d}=t,f=(0,r.useRef)(null),p=a.sortDir,g=(e=a.events)==null?void 0:e.includes("onClick"),w=!!a.linkedColumns.length,h=me()(Qp,Ur,{[`${Ur}_clicked`]:g,[`${Ur}_hyperlink`]:a.staticStyle==="staticHyperlink",[`${Ur}_button`]:a.staticStyle==="staticButton",[`${Ur}_header`]:a.staticStyle==="staticHeader",[`${Ur}_normal`]:a.staticStyle==="normalText"}),_=me()(oc,{[`${oc}_asc`]:p==="asc",[`${oc}_desc`]:p==="desc"}),I=(0,r.useCallback)(b=>{if(g){if(i){b.preventDefault();return}b.button===0&&b.detail<2&&s({event:b,value:a.name})}},[g,i,s]),S=(0,r.useCallback)(b=>{var C;if(a.linkedColumns.length){c(b,[a.name,...a.linkedColumns.map(M=>M.name)]);return}if((C=a.insideColumns)!=null&&C.length){c(b,[a.name,...a.insideColumns.map(M=>M.name)]);return}c(b,[a.name])},[c,a]),E=(0,r.useCallback)(b=>{d(b,a.name)},[a.name]),P=(0,r.useCallback)(()=>({_ref:f,hasSorter:p!=="none",textStyle:a.style,handleMouseUp:I,handleCellResizeMouseDown:S,controlClasses:h,sorterClasses:_,isFixSize:a.isFixSize||!!a.sizes.fixedSize.length,title:a.hint||a.title,cellColor:a.cellColor,tabIndex:Br(g),height:m(a.name)}),[]);return(0,r.useEffect)(()=>{f.current&&f.current.clientHeight>0&&u(a.name,f.current.clientHeight)},[(n=f.current)==null?void 0:n.clientHeight]),r.createElement("div",{key:a.name,className:Jp,style:l,onContextMenu:E},r.createElement(e4,g0({},P()),(o=a.title)!=null?o:""),w&&r.createElement("div",{className:Qp},r.createElement(s4,g0({},t))))};var h0=(0,r.memo)(d4),m4=h0,f4=xe(18446),p4=xe.n(f4),v4=Object.defineProperty,g4=Object.defineProperties,h4=Object.getOwnPropertyDescriptors,b0=Object.getOwnPropertySymbols,b4=Object.prototype.hasOwnProperty,C4=Object.prototype.propertyIsEnumerable,C0=(t,e,n)=>e in t?v4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mt=(t,e)=>{for(var n in e||(e={}))b4.call(e,n)&&C0(t,n,e[n]);if(b0)for(var n of b0(e))C4.call(e,n)&&C0(t,n,e[n]);return t},wn=(t,e)=>g4(t,h4(e));const ac="allRowsSelector",y4="table";function lc(t){var e,n,o,a;const{className:l,style:i,isFixSize:s,name:c,isDisabled:u,dataAttrs:m,events:d,metaSet:f,initialValue:p,isInPlaceEdit:g,isCardFile:w,showFilter:h,showScroll:_,isFirstPage:I,isLastPage:S,headersData:E,showIcon:P,showSelectColumn:b,showHierarchyButton:C,columnsData:M,rowsData:O,displayRowCount:T,currentRowId:D,currentColumnId:L,selectedRowIds:$,summaryRowCount:x,contextMenuElements:Z,contextHeader:A,testId:F,onEnter:z,onHierarchyButtonClick:H,onRowsSelect:K,onRowsBlur:G,onCellClick:ee,onCellControlEvent:j,onNavigation:U,onMove:Y,onDoubleClick:W,onRowCounterClick:oe,onMenuItemSelect:R,onHeaderCtxMenuClick:N,onHeaderClick:X,onStartPageMove:ne,onEndPageMove:ae,onPrevPageMove:ce,onNextPageMove:be,onClickIcon:_e,freezed:Ce,hasCaption:ie,isActiveTab:he,isAdaptive:Ie}=t,Ae=(0,r.useRef)(!1);(0,r.useEffect)(()=>{Ae.current&&(Ae.current=document.activeElement.dataset.tableId===c)},[(e=document.activeElement.dataset)==null?void 0:e.tableId]);const ke=F||y4,Re=me()(l,Ht,{[`${Ht}__cardfile`]:w}),Fe=me()(`${Ht}__grid`,`${Ht}__grid-wrapper`,{[`${Ht}__cardfile-wrapper`]:w}),Ue=me()(`${Ht}__grid-headers`,{[`${Ht}__grid-headers__freezed`]:Ce}),Qe=(0,r.useMemo)(()=>{const y=Mt({},i);return ie!==void 0&&(ie?y.marginBottom="0":y.marginTop="0"),Pn({isFixSize:s,style:y})},[s,i]),fe=(0,r.useRef)(null),Oe=(0,r.useRef)({}),Ee=(0,r.useRef)(!1),ue=(0,r.useRef)(null),Te=(0,r.useRef)(null),We=(0,r.useRef)(null),Ye=(0,r.useRef)(null),Xe=(0,r.useRef)(null),mt=(0,r.useRef)(null),ot=(0,r.useRef)(null),Je=T>60,ct=LP*(0+!!P+!!b),nt=h,pe=_||x,te=!!Z,ge=O.length&&O.every(y=>$.includes(y.rowId)),re=(n=Xe.current)==null?void 0:n.scrollLeft,[we,Se]=(0,r.useState)(!1),[$e,je]=(0,r.useState)(null),[at,Ct]=(0,r.useState)(null),[it,ft]=(0,r.useState)((o=fe.current)==null?void 0:o.clientWidth),[It,rn]=(0,r.useState)(null),[qe,on]=(0,r.useState)({}),[Ln,Mo]=(0,r.useState)(null),[sr,Ge]=(0,r.useState)(!1),[Kt,Vt]=(0,r.useState)({}),[Be,$n]=(0,r.useState)({vertical:!1,horizontal:!1}),[an,ut]=(0,r.useState)(null),ir=(0,r.useCallback)(()=>Object.keys(qe).filter(y=>!y.includes("Group")),[qe]),Nt=(0,r.useCallback)(y=>{var k;let B=pn;const Q=(k=Oe.current[y])!=null?k:[];for(const se of Q){const de=qe[se];if(de&&de.headerSize){let{height:Me,rowspan:He}=de.headerSize;He&&(Me/=He),Me>B&&(B=Me)}}return B},[pn,Oe.current,qe]),Dt=(0,r.useCallback)(()=>{const y=Object.keys(Oe.current),k=y.length-1;return y.map(Nt).reduce((B,Q)=>B+Q,k)},[Oe.current,Nt]),mn=(0,r.useCallback)(y=>{const k=qe[y];if(k&&k.headerSize){const{row:B,rowspan:Q}=k.headerSize;if(Q){let se=0;for(let de=B;de<B+Q;de++)se+=Nt(de);return se}return Nt(B)}return pn},[qe,Nt]),qt=(0,r.useCallback)((y,k)=>{const B=qe[y];if(B&&B.headerSize&&B.headerSize.height&&B.headerSize.height!==k){const Q=Object.assign({},qe);Q[y].headerSize.height=k,on(Q)}},[qe]),Rn=(0,r.useCallback)(y=>Math.round(y)-Dt()-4,[Dt]),En=(0,r.useCallback)(y=>{const k=Rn(y);return Be.horizontal?k-Ba:k},[Dt,Be.horizontal]),br=(0,r.useCallback)(({event:y,rowId:k,columnId:B,isDisabledColumn:Q})=>{if(u)return;const se={rowId:k,columnId:B};Q&&(se.columnId=L),Ze(wn(Mt({specificEvent:ee,nativeEvent:"onCellClick"},{event:y,metaSet:f,events:d}),{value:se}))},[u,f,d,L,ee]),Rr=(0,r.useCallback)(({event:y,rowId:k})=>{let B=!0;const Q={rowId:k};if(_e&&(B=ee({event:y,metaSet:f,value:Q})),B&&(d!=null&&d.onClickIcon)){const{alias:se,args:de}=d.onClickIcon;le[se]({event:y,args:de,metaSet:f,value:Q})}},[f,d]),Hn=(0,r.useCallback)(({event:y,value:k,rowId:B})=>{if(y.stopPropagation(),u)return;let Q=!0;const se={selectedRowIds:null};return B===ac?se.selectedRowIds=k?O.map(Me=>Me.rowId):[]:$.includes(B)?se.selectedRowIds=$.filter(Me=>Me!==B):se.selectedRowIds=[...$,B],Q=Ze(wn(Mt({specificEvent:K,nativeEvent:"onRowsSelect"},{event:y,metaSet:f,events:d}),{value:se})),B!==ac&&br({event:y,rowId:B}),Q},[u,O,$,br,f,d,K]),Sn=(0,r.useCallback)(({event:y,value:k,metaSet:{rowId:B}})=>{Hn({event:y,value:k,rowId:B})},[Hn]),jn=(0,r.useCallback)(({event:y,rowId:k})=>{if(u)return;Ze(wn(Mt({specificEvent:W,nativeEvent:"onDoubleClick"},{event:y,metaSet:f,events:d}),{value:k}))},[u,W,d,f]),Yr=(0,r.useCallback)(y=>{if(u)return;Ze(Mt({specificEvent:oe,nativeEvent:"onRowCounterClick"},{event:y,metaSet:f,events:d}))},[u,d,f,oe]);(0,r.useEffect)(()=>{if(w&&!T&&mt.current&&We.current){const y=mt.current.style,k=We.current.style;y.width!==k.width&&(y.width=k.width)}},[qe]);const cr=(0,r.useCallback)(y=>{var k,B;const{horizontalScrollDirection:Q,verticalScrollDirection:se,scrollLeft:de,scrollTop:Me}=y;se&&(ut(Me),(k=ue.current)==null||k.scrollTo(Me)),Q&&((B=Te.current)==null||B.scrollTo(de)),ot.current=de},[ue,Te]),Xr=(0,r.useCallback)(y=>{var k;const{scrollOffset:B}=y;(k=Ye.current)==null||k.scrollTo({scrollTop:B})},[Ye]);(0,r.useEffect)(()=>{var y;an&&((y=Ye.current)==null||y.scrollTo({scrollTop:an+1}))},[(a=fe.current)==null?void 0:a.offsetLeft]),(0,r.useEffect)(()=>{let y={};O.map(({rowId:k})=>{Kt[k]?y[k]=Kt[k]:y[k]=M.map(()=>15)}),Vt(y),O.length===1&&O[0].rowId==="serviceRow"&&(Ee.current=!1)},[O]);const Jr=(0,r.useCallback)(y=>{var k;const{scrollOffset:B}=y;(k=Ye.current)==null||k.scrollTo({scrollLeft:B})},[Ye]),Mn=(0,r.useCallback)(y=>{var k;const B=(k=qe[y.name])==null?void 0:k.width;return B&&B>=Fa?B:Fa},[qe]),Qr=(0,r.useCallback)(y=>Mn(M[y]),[M,Mn]),xr=(0,r.useCallback)(y=>{if(u)return;Ze(Mt({specificEvent:H,nativeEvent:"onHierarchyButtonClick"},{event:y,metaSet:f,events:d}))},[u,H,f,d]),Tn=(0,r.useCallback)(({value:y,event:k})=>{if(u)return;let B=null,Q=null;if(y===zn.start){if(I)return;ne&&(B=ne),d!=null&&d.onStartPageMove&&(Q=d.onStartPageMove)}else if(y===zn.end){if(S)return;ae&&(B=ae),d!=null&&d.onEndPageMove&&(Q=d.onEndPageMove)}else if(y===zn.prev){if(I)return;ce&&(B=ce),d!=null&&d.onPrevPageMove&&(Q=d.onPrevPageMove)}else if(y===zn.next){if(S)return;be&&(B=be),d!=null&&d.onNextPageMove&&(Q=d.onNextPageMove)}if(B&&B({event:k,metaSet:f}),Q){const{alias:se,args:de}=Q;le[se]({event:k,args:de,metaSet:f})}},[u,d,f,I,S,ne,ae,ce,be]),eo=(0,r.useCallback)(y=>{if(u||g||!Bn(y.keyCode))return;const k={rowId:D};Ze(wn(Mt({specificEvent:z,nativeEvent:"onEnter"},{event:y,metaSet:f,events:d}),{value:k}))},[u,d,f,z,D,g]),to=(0,r.useCallback)(y=>{oi(y.keyCode)&&y.preventDefault()},[]),Nr=(0,r.useCallback)(({event:y,value:k})=>{if(u)return;let B=!0;return B=Ze(wn(Mt({specificEvent:ee,nativeEvent:w?"onCellClick":null},{event:y,metaSet:f,events:d}),{value:k})),B},[u,d,f,U]),Cr=(0,r.useCallback)(({event:y,value:k})=>{if(u)return;let B=!0;return B=Ze(wn(Mt({specificEvent:Y,nativeEvent:"onMove"},{event:y,metaSet:f,events:d}),{value:k})),B},[u,d,f,Y]),Dr=(0,r.useCallback)(({event:y,menuItem:k})=>{if(u)return;const B=!!E.find(de=>de.name===k),Q={menuItem:k,hidden:B};Ze(wn(Mt({specificEvent:N,nativeEvent:"onHeaderCtxMenuClick"},{event:y,metaSet:f,events:d}),{value:Q}))},[u,d,f,N,E]),yr=(0,r.useCallback)(({event:y,rowId:k,menuItem:B})=>{if(u)return;const Q={menuItem:B,rowId:k};Ze(wn(Mt({specificEvent:R,nativeEvent:"onMenuItemSelect"},{event:y,metaSet:f,events:d}),{value:Q}))},[u,d,f,R]),no=(0,r.useCallback)(({event:y,value:k})=>{if(u)return;Ze(wn(Mt({nativeEvent:"onHeaderCtxMenu"},{event:y,events:d}),{value:k}))},[u,d,f]),Zt=(0,r.useCallback)(()=>{if(u)return;Ze(Mt({nativeEvent:"onCloseHeaderCtxMenu"},{events:d}))},[u,d,f]),_r=(0,r.useCallback)(({event:y,value:k})=>{if(u)return;Se(!0),Ze(wn(Mt({specificEvent:X,nativeEvent:"onHeaderClick"},{event:y,metaSet:f,events:d}),{value:k}))},[u,d,f,X]),An=(0,r.useCallback)(y=>{var k,B;let Q=0;return(k=y.linkedColumns)!=null&&k.length?y.linkedColumns.forEach(se=>{Q+=An(se)}):((B=y.insideColumns)==null?void 0:B.length)>0?y.insideColumns.forEach(se=>{Q+=An(se)}):Q+=Mn(y),Q},[Mn]),Vn=(0,r.useCallback)(y=>An(E[y]),[E,An]),ro=(0,r.useCallback)(({event:y,eventType:k,control:B,cellData:Q,value:se,targetRowId:de,targetColumnId:Me})=>{if(u)return!1;let He=!0;const et={controlType:B.type,controlId:B.name,controlEvents:B.events,eventType:k,cellData:Q,cellValue:se,targetRowId:de,targetColumnId:Me};if(j&&(He=j({event:y,metaSet:f,value:et})),He&&(d!=null&&d.onCellControlEvent)){const{alias:tt,args:Ot}=d.onCellControlEvent;le[tt]({event:y,args:Ot,metaSet:f,value:et})}},[u,d,f,j]),wr=(0,r.useCallback)((y=0)=>{var k,B;(k=Ye.current)==null||k.resetAfterRowIndex(y),(B=ue.current)==null||B.resetAfterIndex(y)},[]),V=(0,r.useCallback)(({rowId:y,rowIndex:k,columnIndex:B,height:Q})=>{Vt(se=>{if(!se[y])return wr(k),se;const de=Mt({},se);return de[y][B]=Q,wr(k),de})},[wr]),ve=(0,r.useCallback)(({event:y,value:k})=>{if(u)return!1;const B=wn(Mt({},k),{rowId:null});Ze(wn(Mt({specificEvent:G,nativeEvent:"onRowsBlur"},{event:y,metaSet:f,events:d}),{value:B}))},[u,d,f,G]);function De({index:y,style:k}){let B=E[y];Ie&&(B=Object.assign({},B,{isFixSize:!0}));const Q={isResizedHeaderWidth:sr,handleHeaderClick:_r,onMouseDownResizableWidthHed:oo,onContextMenu:ao,getWidthHeader:An,headerCellData:B,style:k,setCellHeight:qt,getHeaderCellHeight:mn,getWidthColumn:Mn};return r.createElement(m4,Mt({},Q))}const J={tableId:c,isDisabled:u,rows:O,currentRowId:D,selectedRowIds:$,showSelectColumn:b,showContextMenuColumn:te,showIcon:P,onRowsBlur:ve,onRowSelect:Hn,onNavigation:Nr,onMove:Cr,onMenuItemSelect:yr,onCellDoubleClick:jn,onClickIcon:Rr,contextMenuElements:Z,testId:ke,isCardFile:w,tableWasFocused:Ae,wasServiceRowFocused:Ee,isInPlaceEdit:g},ye={cellsGrid:Ye,tableId:c,isDisabled:u,columns:M,rows:O,currentColumnId:L,currentRowId:D,isCardFile:w,isInPlaceEdit:g,editableRowId:Ln,onRowSelect:Hn,onNavigation:Nr,onMove:Cr,onCellDoubleClick:jn,onCellControlEvent:ro,onRowsBlur:ve,onRowHeightChange:V,showContextMenuColumn:te,setFocusedEditableCell:je,tableWasFocused:Ae,wasServiceRowFocused:Ee,getWidthColumn:Mn};(0,r.useEffect)(()=>{document.activeElement.blur()},[g]),(0,r.useEffect)(()=>{var y,k,B;if(Ae.current&&document.activeElement.dataset.rowId!==D&&(document.activeElement.dataset.tableId!==c||D===(p==null?void 0:p.currentRowId))){const Q=L||((y=M==null?void 0:M[0])==null?void 0:y.name);(k=document.getElementById(Po(c,D,Q)))==null||k.focus()}(B=Ye.current)==null||B.scrollToItem({rowIndex:O.findIndex(Q=>(Q==null?void 0:Q.rowId)===D)})},[D]),(0,r.useEffect)(()=>{w&&g&&$e&&he&&($e.focus(),Se(!1))},[he,we]),(0,r.useEffect)(()=>{g&&Ln===null?Mo(D):g||Mo(null)},[g,D]),(0,r.useEffect)(()=>{var y;ot.current!==re&&((y=Xe.current)==null||y.scroll({left:ot.current}))},[re]),(0,r.useEffect)(()=>{Ye.current&&Ye.current.resetAfterColumnIndex(0),ue.current&&ue.current.resetAfterIndex(0),Te.current&&Te.current.resetAfterIndex(0)},[ye,J]);const Ne=(0,r.useCallback)(y=>o0(y,O,Kt),[Kt,O]),Le=(0,r.useCallback)(()=>{const y=mt.current,k=Xe.current;if(k&&y){const B={vertical:y.clientHeight===1?!1:y.clientHeight>k.clientHeight,horizontal:y.clientWidth>k.clientWidth};if(!p4()(Be,B))return B}},[Xe,mt,Be]),ht=(0,r.useCallback)(()=>{const y=Le();y&&$n(y)},[Le]),dt=(0,r.useCallback)(()=>{const y={};if(Object.keys(qe))for(const k in qe){const B=qe[k];B.width&&!Number.isNaN(B.width)&&(y[k]=parseFloat((B.width/4).toFixed(5)))}if(Object.keys(y).length){const{alias:k,args:B}=d.onControlResize;le[k]({formId:B==null?void 0:B.formId,controlId:c,columns:y})}},[qe,d]);(0,r.useEffect)(()=>{var y;const k={};M.forEach(se=>{var de,Me,He,et,tt,Ot,Wn,Tr,Un,ur,ln,Wt,yt,ys;k[se.name]={minWidth:pt((Me=(de=se.control)==null?void 0:de.style)==null?void 0:Me.minWidth)||((He=qe[se.name])==null?void 0:He.minWidth),maxWidth:pt((tt=(et=se.control)==null?void 0:et.style)==null?void 0:tt.maxWidth)||((Ot=qe[se.name])==null?void 0:Ot.maxWidth),width:pt(((Tr=(Wn=se.control)==null?void 0:Wn.style)==null?void 0:Tr.width)||((Un=se==null?void 0:se.style)==null?void 0:Un.width))||((ur=qe[se.name])==null?void 0:ur.width)||Fa,isFixSize:se.isFixSize||((ln=qe[se.name])==null?void 0:ln.isFixSize),canResize:((Wt=se.control)==null?void 0:Wt.canResize)||((yt=qe[se.name])==null?void 0:yt.canResize)};const _s=(ys=qe[se.name])==null?void 0:ys.headerSize;_s&&(k[se.name].headerSize=_s)});let{newHeaderRows:B,newTableSizes:Q}=UP(E,k);Oe.current=B,Ie&&(Q=r0(Q,(y=fe.current)==null?void 0:y.clientWidth,Be.vertical,ct)),on(Q)},[M,E]);const At=(0,r.useCallback)(()=>{var y,k,B;Ye.current&&((y=Ye.current)==null||y.resetAfterIndices({columnIndex:0,rowIndex:0})),Te.current&&((k=Te.current)==null||k.resetAfterIndex(0)),ue.current&&((B=ue.current)==null||B.resetAfterIndex(0))},[Ye,Te,ue]),Yt=(0,r.useCallback)(y=>{if(at!==null){y.preventDefault();const k=It-y.clientX,B={},Q=ir(),se=at.reduce((de,Me)=>Q.includes(Me)?de+1:de,0);at.forEach(de=>{if(Q.includes(de)){const Me=qe[de],He=jP(k/(se||1),Me);B[de]=wn(Mt({},qe[de]),{width:He})}}),on(Mt(Mt({},qe),B)),At()}},[at,At]),oo=(0,r.useCallback)((y,k)=>{Ge(!0),rn(y.clientX),Ct(k)},[rn,Ct]),Er=(0,r.useCallback)(()=>{dt(),Ge(!1),Ct(null),window.removeEventListener("mousemove",Yt),window.removeEventListener("mouseup",Er)},[qe,Yt]);(0,r.useEffect)(()=>(at&&(window.addEventListener("mousemove",Yt),window.addEventListener("mouseup",Er)),()=>{window.removeEventListener("mousemove",Yt),window.removeEventListener("mouseup",Er)}),[at,Yt,Er]),(0,r.useEffect)(()=>{let y=0;O.forEach((k,B)=>{k.rowId===D&&(y=B)}),y!==0&&setTimeout(()=>{var k;(k=ue.current)==null||k.scrollToItem(y-1,"start")},0)},[]);const bs=(0,r.useCallback)(({width:y})=>{ft(y);const k=Le();k&&$n(k),fe.current&&Ie&&Object.keys(qe).length&&on(r0(qe,y,(k==null?void 0:k.vertical)||Be.vertical,ct))},[fe,Le,qe]),{show:la}=(0,Wr.av)();(0,r.useEffect)(()=>{A!=null&&A.event&&la(A.event,{id:c+"-header"})},[A]);const ao=(y,k)=>{y.preventDefault(),y.stopPropagation(),y.persist(),no({event:y,value:{columnName:k,isCardFile:w}})},{countedWidth:Ua,countedHeight:Vc}=GP({rowsData:O,columnsData:M,wrapperWidth:it,isCardFile:w,getWidthColumn:Mn,serviceListWidth:ct,rowsHeights:Kt,headerHeight:Dt(),hasScroll:Be,isTableOptimisationNeeded:Je}),Cs=Ua-ct-(1+!!w),Mr=Cs-Ba*(0+!!Be.vertical);return r.createElement("div",wn(Mt({"data-name":c,className:Re,style:wn(Mt({},Qe),{height:Je?"100%":null,minWidth:!s||Ie||Je?null:Ua,width:w||Ie||Je?null:Ua+2})},m),{"data-testid":ke}),nt&&r.createElement("div",{className:"table__service-row table__service-row_top"},_&&r.createElement(Ui,{isServerSide:!0,className:"table__pagination",isDisabled:u,isPrevBtnDisabled:I,isNextBtnDisabled:S})),r.createElement("div",{className:Fe,ref:fe,style:{padding:"1px",height:Je?"100%":Vc}},r.createElement(nc.Z,{onResize:bs,className:`${Ht}__auto-sizer`},({height:y})=>r.createElement("div",{className:"table__grid-body"},ie!==!1&&r.createElement("div",{className:Ue,style:{height:Dt()},onContextMenu:ao},r.createElement("div",{className:"table__grid-service-headers"},b&&r.createElement(r.Fragment,null,r.createElement("div",{className:`table__grid-cell table__grid-cell_header\r
                        table__service-cell table__row-marker`}),r.createElement("div",{className:`table__grid-cell table__grid-cell_header\r
                            table__service-cell table__row-selector`},r.createElement(xl,{isDisabled:u,value:ge,onChange:Sn,metaSet:{rowId:ac},tabIndex:-1,isParentTable:!0}))),P&&r.createElement("div",{className:"table__grid-cell table__grid-cell_header table__service-cell"},C&&r.createElement(Lr,{className:"table__grid-cell-button_transparent",isDisabled:u,iconName:"level-up",onClick:xr,tabIndex:-1,isParentTable:!0}))),r.createElement(On.S_,{ref:Te,innerRef:We,className:`${Ht}__grid-column-headers`,layout:"horizontal",height:Dt(),width:Mr,itemCount:E.length,itemSize:Vn,onScroll:Jr},(0,r.memo)(De,On.wy)),Be.vertical&&r.createElement("div",{className:"table__grid-column-headers-fake-scroll"})),r.createElement("div",{className:"table__grid-rows",tabIndex:-1,onKeyDownCapture:to,onKeyUp:eo},r.createElement("div",{className:"table__grid-service-rows-container"},r.createElement(On.S_,{ref:ue,className:`${Ht}__grid-service-rows`,height:En(y),width:ct,itemCount:T,itemSize:Ne,onScroll:Xr,itemData:J},JP),Be.horizontal&&w&&r.createElement("div",{className:"table__grid-service-rows-fake-scroll"})),r.createElement(On.cd,{ref:Ye,outerRef:Xe,innerRef:mt,className:"table__grid-cells",width:Cs,height:Rn(y),columnCount:M.length,rowCount:T,columnWidth:Qr,rowHeight:Ne,estimatedRowHeight:pn,onScroll:cr,onItemsRendered:ht,itemData:ye},YP))))),pe&&r.createElement("div",{className:"table__service-row table__service-row_bottom"},_&&r.createElement(Ui,{isServerSide:!0,className:"table__pagination",isDisabled:u,isPrevBtnDisabled:I,isNextBtnDisabled:S,onButtonClick:Tn}),x&&r.createElement("div",{className:"table__row-counter",onClick:Yr},x)),te&&r.createElement(qp,{itemsContextMenu:zh(A==null?void 0:A.list),id:c+"-header",handleCloseContextMenu:Zt,handleClickContextMenu:Dr}),te&&r.createElement(qp,{itemsContextMenu:Z,id:c,handleClickContextMenu:yr}))}lc.propTypes={classNames:v().string,columnsData:v().array,contextMenuElements:v().array,currentColumnId:v().string,currentRowId:v().string,dataAttrs:v().object,displayRowCount:v().number,events:v().object,freezed:v().bool,hasCaption:v().bool,headersData:v().array,headerHeightMultiplier:v().number,isActiveTab:v().bool,isAdaptive:v().bool,isCardFile:v().bool,isFirstPage:v().bool,isFixSize:v().bool,isInPlaceEdit:v().bool,isLastPage:v().bool,metaSet:v().object,name:v().string,onCellClick:v().func,onCellControlEvent:v().func,onDoubleClick:v().func,onEndPageMove:v().func,onPrevPageMove:v().func,onNextPageMove:v().func,onEnter:v().func,onClickIcon:v().func,onControlResize:v().object,onHeaderClick:v().func,onHierarchyButtonClick:v().func,onNavigation:v().func,onMenuItemSelect:v().func,onMove:v().func,onRowsSelect:v().func,onRowsBlur:v().func,onRowCounterClick:v().func,onStartPageMove:v().func,rowsData:v().array,showFilter:v().bool,showScroll:v().bool,style:v().object,showIcon:v().bool,showSelectColumn:v().bool,showHierarchyButton:v().bool,selectedRowIds:v().array,summaryRowCount:v().string,testId:v().string},lc.defaultProps={};var _4=(0,r.memo)(lc);function Jo(t,e){var n;return(n=t==null?void 0:t.classList)==null?void 0:n.contains(e)}function y0(t,e){var n;(n=t==null?void 0:t.classList)==null||n.add(e)}function sc(t,e){var n;(n=t==null?void 0:t.classList)==null||n.remove(e)}const w4=(t,e,n)=>{Object.entries(e).forEach(([o,a])=>{t.addEventListener(o,a,n)})},E4=(t,e,n)=>{Object.entries(e).forEach(([o,a])=>{t.removeEventListener(o,a,n)})},Io=(t,e,n)=>t==null?void 0:t.forEach(o=>o&&w4(o,e,n)),Oo=(t,e,n)=>t==null?void 0:t.forEach(o=>o&&E4(o,e,n));var xM={popperIconSize:"18px"};function S4(t,e={edgeSize:25,scrollSpeed:12}){const n=(0,r.useRef)(null),{edgeSize:o,scrollSpeed:a}=e;return(i,s=!0)=>{if(!s)return M(),!1;const c=t.getBoundingClientRect(),u=t,m=i.clientX-c.left,d=i.clientY-c.top,f=c.width,p=c.height,g=o,w=o,h=p-o,_=f-o,I=m<w,S=m>_,E=d<g,P=d>h;I||S||E||P?C():M();function b(){D()?(n.current=void 0,C()):M()}function C(){n.current||(n.current=window.requestAnimationFrame(b))}function M(){n.current&&(window.cancelAnimationFrame(n.current),n.current=void 0)}let O=u.scrollWidth-u.clientWidth,T=u.scrollHeight-u.clientHeight;function D(){let L=u.scrollLeft,$=u.scrollTop,x=$>0,Z=$<T,A=L>0,F=L<O,z=L,H=$;return I&&A?z-=a:S&&F&&(z+=a),E&&x?H-=a:P&&Z&&(H+=a),z=Math.max(0,Math.min(O,z)),H=Math.max(0,Math.min(T,H)),z!==L||H!==$?(u.scrollTo(z,H),!0):!1}}}var P4=Object.defineProperty,I4=Object.defineProperties,O4=Object.getOwnPropertyDescriptors,Bl=Object.getOwnPropertySymbols,_0=Object.prototype.hasOwnProperty,w0=Object.prototype.propertyIsEnumerable,E0=(t,e,n)=>e in t?P4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zl=(t,e)=>{for(var n in e||(e={}))_0.call(e,n)&&E0(t,n,e[n]);if(Bl)for(var n of Bl(e))w0.call(e,n)&&E0(t,n,e[n]);return t},Ll=(t,e)=>I4(t,O4(e)),k4=(t,e)=>{var n={};for(var o in t)_0.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Bl)for(var o of Bl(t))e.indexOf(o)<0&&w0.call(t,o)&&(n[o]=t[o]);return n};const S0=26,R4=30,x4=20,ic=25,cc=8,ko=10,$l=2,_t="grid",uc=(t,e)=>To(e,"id",t,1),dc=(t,e)=>To(e,"id",t,-1),N4=(t,e,n)=>{const o=[];return t&&o.push(Ll(zl({},t),{priority:t.priority+.75})),e&&o.push(Ll(zl({},e),{priority:e.priority+.5})),n?o.push(Ll(zl({},n),{priority:e.priority+.25})):o.push({control:{},style:{},cellSettings:{},priority:.25}),o.sort((a,l)=>a.priority>l.priority?-1:a.priority<l.priority?1:0)},P0=t=>{var e,n;let o=1;return(e=t==null?void 0:t.nodes)!=null&&e.length&&(o=t.nodes.reduce((a,l)=>a+P0(l),0)),(n=t==null?void 0:t.branches)!=null&&n.length&&t.isExpanded&&(o+=t.branches.reduce((a,l)=>a+P0(l),0)),o},I0=t=>{var e;let n=0;return(e=t.branches)!=null&&e.length&&(n=1+t.branches.reduce((o,a)=>{const l=I0(a);return o<l?l:o},0)),n},D4=t=>t.reduce((e,n)=>{const o=I0(n);return e<o?o:e},0),O0=t=>{var e,n;let o=S0,a=0,l=[];const i=s=>{a+=1,s.forEach(c=>{var u;const m=c,{nodes:d}=m,f=k4(m,["nodes"]);d&&(l=l.concat(d)),(u=f.branches)!=null&&u.length&&f.isExpanded&&i(f.branches)})};return(e=t.nodes)!=null&&e.length&&(l=l.concat(t.nodes)),(n=t.branches)!=null&&n.length&&t.isExpanded&&i(t.branches),o+=x4*a,l.length&&(o+=l.reduce((s,c)=>{const u=O0(c);return s<=u?u:s},0)),o},M4=t=>t.reduce((e,n)=>{const o=O0(n);return e<o?o:e},0),Qo=(t,e=null,n=[])=>{const{isFixed:o,auto:a,min:l,value:i,max:s}=t||{};let c=i||R4;if(o)return c;if(a)if(e)c=e.length?e.length*2:2,l&&c<l&&(c=l),s&&s<c&&(c=s);else if(l&&s){const u=(l+s)/3;c=u<l?l:u}else if(l||s)c=l||s;else{const u=D4(n);c+=u*ic}return c},Hl=t=>{var e,n,o,a;const{sizeValue:l,isAdaptiveCell:i}=za(t.size);if(i&&!((e=t.nodes)!=null&&e.length)&&!((n=t.branches)!=null&&n.length))return pt(Qo(t.size,t.caption)+cc);let s=l||0;return(o=t.nodes)!=null&&o.length&&(s=t.nodes.reduce((c,u)=>c+Hl(u),0)),(a=t.branches)!=null&&a.length&&t.isExpanded&&(s+=t.branches.reduce((c,u)=>c+Hl(u),0)),s},NM=(t,e=null)=>{let n=t;const o=a=>{a!==e&&(n=n.reduce((l,i)=>i.nodes?l.concat(i.nodes):l,[]),o(a+1))};return o(0),n},ea=(t,e,n)=>`${t}-${e}-${n}`,za=t=>!t||t.auto||!t.value?{isAdaptiveCell:!0,sizeValue:null}:{isAdaptiveCell:!1,sizeValue:pt(t.value)},La=(t,e,n)=>{t&&e&&n&&(t[e]=n)},k0=t=>{var e;if((e=t.nodes)!=null&&e.length)return t.nodes.reduce((n,o)=>n+Hl(o),0);{const{isAdaptiveCell:n,sizeValue:o}=za(t.size);return n?pt(Qo(t.size,t.caption)+cc):o}},T4=t=>{const e=Ll(zl({},t),{minHeight:"100%"});return e==null||delete e.height,e};var A4=Object.defineProperty,F4=Object.defineProperties,B4=Object.getOwnPropertyDescriptors,R0=Object.getOwnPropertySymbols,z4=Object.prototype.hasOwnProperty,L4=Object.prototype.propertyIsEnumerable,x0=(t,e,n)=>e in t?A4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mc=(t,e)=>{for(var n in e||(e={}))z4.call(e,n)&&x0(t,n,e[n]);if(R0)for(var n of R0(e))L4.call(e,n)&&x0(t,n,e[n]);return t},N0=(t,e)=>F4(t,B4(e));const fc=t=>{var e,n,o,a,l,i;const{header:s,isRow:c,headerLevel:u,branchLevel:m,columns:d,levels:f,handleHeaderEvent:p,isDisabled:g,updateRowHeaderHeight:w}=t,h=(0,r.useRef)(null),_=(0,r.useRef)(null),I=(e=s.events)==null?void 0:e.includes("onClick"),S=g,E=`${_t}__header`,P=me()(E,{[`${E}_root`]:I,[`${E}_disabled`]:S});let b=null,C=null,M=null;const O=pt(Qo((n=f==null?void 0:f.rows[u])==null?void 0:n.size))-m*ic;if(c){if(s.nodes){const F=O;b=F,C=F}const{isAdaptiveCell:Z,sizeValue:A}=za(s.size);Z||(M=A)}else b=k0(s);const T=mc({},s.style);M&&La(T,"minHeight",`${M}px`),b&&La(T,"width",`${b}px`),C&&La(T,"minWidth",`${C}px`),b||(La(T,"flex","1 1"),La(T,"maxWidth","100%"));const D=I&&T.textAlign;D&&(T.justifyContent=T.textAlign);const L=Z=>{!S&&I&&p({event:Z,isRow:c,header:s})};let $=null,x=null;if((o=s.branches)!=null&&o.length&&s.isExpanded){const Z=O-ic;$=r.createElement("div",{className:`${_t}__header-branches-container`},r.createElement("div",{className:`${_t}__header-branches-padding`}),r.createElement("div",{className:`${_t}__header-branches`,style:{width:Z}},s.branches.map(A=>{const F={header:A,columns:d,levels:f,handleHeaderEvent:p,isRow:c,headerLevel:u,branchLevel:m+1,isDisabledGrid:g,updateRowHeaderHeight:w};return r.createElement(fc,N0(mc({},F),{key:A.id}))})))}return x=s.icon?r.createElement("img",{className:`${_t}__header-img img`,alt:"",src:Ft(s.icon)}):null,(0,r.useEffect)(()=>{var Z,A;h.current&&_.current&&w&&((Z=s.nodes)!=null&&Z.length||(A=s.branches)!=null&&A.length?w(s.id,h.current.clientHeight,_.current.clientHeight):w(s.id,_.current.clientHeight))},[(a=h.current)==null?void 0:a.clientHeight,(l=_.current)==null?void 0:l.clientHeight]),r.createElement(r.Fragment,{key:s.id},s.expandDirection==="prev"&&$,r.createElement("div",{ref:_,className:`${_t}__header-cell`},r.createElement("div",{"data-id":s.id,className:P,style:T,onClick:L},x,r.createElement("span",{ref:h,className:`${_t}__header-text`,title:s.caption,style:D&&{flexGrow:0}},`${s.caption||""}`)),(i=s.nodes)!=null&&i.length?r.createElement("div",{className:`${_t}__header-nodes`},s.nodes.map(Z=>{const A={header:Z,columns:d,levels:f,handleHeaderEvent:p,isRow:c,headerLevel:u+1,branchLevel:0,isDisabledGrid:g,updateRowHeaderHeight:w};return r.createElement(fc,N0(mc({},A),{key:Z.id}))})):null),s.expandDirection==="next"&&$)};var $4=(0,r.memo)(fc),D0=$4,H4=Object.defineProperty,M0=Object.getOwnPropertySymbols,j4=Object.prototype.hasOwnProperty,V4=Object.prototype.propertyIsEnumerable,T0=(t,e,n)=>e in t?H4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,W4=(t,e)=>{for(var n in e||(e={}))j4.call(e,n)&&T0(t,n,e[n]);if(M0)for(var n of M0(e))V4.call(e,n)&&T0(t,n,e[n]);return t};const A0=(0,r.memo)(({data:t,index:e,style:n})=>{var o;const a=(0,r.useRef)(null),{columns:l,levels:i,handleHeaderEvent:s,isDisabled:c,updateColumnHeaderHeight:u}=t,m=l[e],d={isDisabled:c,header:m,columns:l,levels:i,handleHeaderEvent:s,isRow:!1,headerLevel:0,branchLevel:0};return(0,r.useEffect)(()=>{a.current&&u(a.current.clientHeight)},[(o=a.current)==null?void 0:o.clientHeight]),r.createElement("div",{ref:a,className:`${_t}__column-list-item`,style:T4(n)},r.createElement(D0,W4({},d)))},On.wy);A0.displayName="Column";var U4=Object.defineProperty,F0=Object.getOwnPropertySymbols,G4=Object.prototype.hasOwnProperty,K4=Object.prototype.propertyIsEnumerable,B0=(t,e,n)=>e in t?U4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q4=(t,e)=>{for(var n in e||(e={}))G4.call(e,n)&&B0(t,n,e[n]);if(F0)for(var n of F0(e))K4.call(e,n)&&B0(t,n,e[n]);return t};const z0=(0,r.memo)(({data:t,index:e,style:n})=>{const{rows:o,columns:a,levels:l,handleHeaderEvent:i,isDisabled:s,updateRowHeaderHeight:c}=t,u=o[e],m={isDisabled:s,header:u,columns:a,levels:l,handleHeaderEvent:i,isRow:!0,headerLevel:0,branchLevel:0,updateRowHeaderHeight:c};return r.createElement("div",{className:`${_t}__row-list-item`,style:n},r.createElement(D0,q4({},m)))},On.wy);z0.displayName="Row";var Z4=Object.defineProperty,Y4=Object.defineProperties,X4=Object.getOwnPropertyDescriptors,L0=Object.getOwnPropertySymbols,J4=Object.prototype.hasOwnProperty,Q4=Object.prototype.propertyIsEnumerable,$0=(t,e,n)=>e in t?Z4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dn=(t,e)=>{for(var n in e||(e={}))J4.call(e,n)&&$0(t,n,e[n]);if(L0)for(var n of L0(e))Q4.call(e,n)&&$0(t,n,e[n]);return t},eI=(t,e)=>Y4(t,X4(e));const H0=(0,r.memo)(({data:t,columnIndex:e,rowIndex:n,style:o})=>{var a,l;const{gridId:i,isDisabled:s,columnTerminalNodes:c,rowTerminalNodes:u,currentColumnId:m,currentRowId:d,cells:f,globalCellSettings:p,onCellControlEvent:g,onNavigation:w,onCellsBlur:h,hasActiveMode:_}=t,I=["string","number","integer","enum","checkbox","date"],S=u[n],E=c[e],P=s||S.isDisabled||E.isDisabled,b=S.isDivider||E.isDivider,C=b?`${_t}__cell-divider`:`${_t}__cell`,M=me()(C,{[`${C}_column`]:E.isDivider,[`${C}_row`]:S.isDivider,[`${C}_disabled`]:P}),O=u[n].id,T=c[e].id,D=(a=f==null?void 0:f[O])==null?void 0:a[T],L={rowId:O,rowIndex:n,columnId:T,columnIndex:e},[$,x,Z]=N4(E,S,p),A=m===T&&d===O,F=Dn(Dn(Dn({type:"number"},Z.control),x.control),$.control),z=Dn(Dn(Dn({},Z.cellSettings),x.cellSettings),$.cellSettings),H=Dn(Dn({},z),o),K=F.type,G=(0,r.useRef)(null),ee=(0,r.useRef)(zt.active),j=ea(i,O,T),U=(0,r.useCallback)((ie,{event:he,value:Ie,rowId:Ae,columnId:ke})=>(g({event:he,eventType:ie,controlType:K,cellData:L,value:Ie,rowId:Ae,columnId:ke}),!0),[K,L,g]),Y=(0,r.useCallback)(ie=>{var he;if(P||b)return;const{detail:Ie}=ie;Ie===1&&((he=G.current)==null||he.focus())},[P,b,G]),W=(0,r.useCallback)(({event:ie})=>{var he,Ie;ie.stopPropagation();const{keyCode:Ae}=ie,ke=Yn(Ae),Re=Pr(Ae);if((ke||Re)&&ee.current!==zt.editable){const Qe=u.filter(Oe=>!Oe.isDisabled&&!Oe.isDivider),fe=ke?dc(O,Qe):uc(O,Qe);return(he=document.getElementById(ea(i,fe!=null?fe:O,T)))==null||he.focus(),!1}const Fe=Ld(Ae),Ue=$d(Ae);if((Fe||Ue)&&ee.current!==zt.editable){const Qe=c.filter(Oe=>!Oe.isDisabled&&!Oe.isDivider),fe=Fe?dc(T,Qe):uc(T,Qe);return(Ie=document.getElementById(ea(i,O,fe!=null?fe:T)))==null||Ie.focus(),!1}return!0},[i,O,T,u]),oe=(0,r.useCallback)(({event:ie})=>{const he={rowId:O,columnId:T};return O===d&&delete he.rowId,T===m&&delete he.columnId,(he.rowId||he.columnId)&&w({event:ie,value:he}),!0},[w,O,d,T,m]),R=(0,r.useCallback)(({event:ie})=>{var he;const Ie=(he=ie==null?void 0:ie.relatedTarget)==null?void 0:he.dataset;return((Ie==null?void 0:Ie.gridId)!==i||!(Ie!=null&&Ie.hasOwnProperty("rowId")))&&h({event:ie}),!0},[i,U,h,ee]),N=(0,r.useCallback)(({event:ie,value:he})=>(U("onImplicitChange",{event:ie,value:he}),!0),[U]),X=(0,r.useCallback)(({event:ie})=>{var he,Ie,Ae,ke,Re;const{shiftKey:Fe}=ie,Ue=c.filter(fe=>!fe.isDisabled&&!fe.isDivider);if((Fe?dc(T,Ue):uc(T,Ue))===T){ie.preventDefault();const fe=u.filter(ue=>!ue.isDisabled&&!ue.isDivider),Oe=Fe?(he=Ue[Ue.length-1])==null?void 0:he.id:(Ie=Ue[0])==null?void 0:Ie.id,Ee=Fe?(Ae=fe[n-1])==null?void 0:Ae.id:(ke=fe[n+1])==null?void 0:ke.id;(Re=document.getElementById(ea(i,Ee,Oe)))==null||Re.focus()}return!1},[T,c]),ne=(0,r.useCallback)(ie=>{var he;return ee.current!==zt.editable?(he=ie.event)==null||he.stopPropagation():U("onEnter",ie),!0},[U,ee]),ae=(0,r.useCallback)(ie=>{var he;return ee.current===zt.editable?(he=ie.event)==null||he.stopPropagation():U("onDelete",ie),!0},[U,ee]),ce=(0,r.useCallback)(({value:ie})=>{ee.current=ie},[ee]),be=(0,r.useMemo)(()=>({["data-grid-id"]:i,["data-row-id"]:O,["data-column-id"]:T}),[i,O,T]);if(!D)return r.createElement("div",{className:M,style:o,tabIndex:-1},r.createElement("div",{className:"indicator__loader"}));const _e=D.iconName||D.icon?r.createElement("img",{className:`${_t}__cell-img img`,alt:"",src:Ft(D.iconName||D.icon)}):null;let Ce=null;if(I.includes(K)){const ie={style:z,className:`${_t}__cell-control`||null,isDisabled:P,focusedElement:G,isStatic:P,tabIndex:Br(!P),mode:A?zt.active:zt.default,hasActiveMode:_,isSpellCheck:D.isSpellCheck,isParentTable:!0},he={onTab:X,onFocus:oe,onBlur:R,onDelete:ae,onKeyDown:W,onModeChange:ce,onAutolock:U.bind(void 0,"onAutolock")};switch(K){case"checkbox":{he.onChange=U.bind(void 0,"onChange"),ie.isStatic=!1;break}case"date":{he.onEnter=U.bind(void 0,"onEnter");break}case"enum":{he.onEnter=U.bind(void 0,"onEnter"),he.onSelect=U.bind(void 0,"onEnter");break}case"string":case"number":case"integer":{he.onEnter=ne,(l=F.action)!=null&&l.includes("onLookup")&&(he.onLookup=U.bind(void 0,"onLookup"));break}default:break}ie.dataAttrs=be,ie.value=D.value,Al(K)&&(ie.formattedValue=D.staticValue,he.onImplicitChange=N),Ce=ja(eI(Dn(Dn(Dn({GUID:j,initialValue:D.initialValue},F),ie),he),{style:D.style||{}}))}return b?r.createElement("div",{className:M,style:H}):r.createElement("div",{className:M,style:Dn(Dn({},D.style),H),tabIndex:-1,onClick:Y},_e,Ce)},On.wy);H0.displayName="Cell";var tI=Object.defineProperty,nI=Object.defineProperties,rI=Object.getOwnPropertyDescriptors,j0=Object.getOwnPropertySymbols,oI=Object.prototype.hasOwnProperty,aI=Object.prototype.propertyIsEnumerable,V0=(t,e,n)=>e in t?tI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jl=(t,e)=>{for(var n in e||(e={}))oI.call(e,n)&&V0(t,n,e[n]);if(j0)for(var n of j0(e))aI.call(e,n)&&V0(t,n,e[n]);return t},pc=(t,e)=>nI(t,rI(e));const vc=`${_t}__cell`,Or=`${_t}__cell_select`;function gc(t){const{className:e,style:n,name:o,isDisabled:a,dataAttrs:l,events:i,metaSet:s,columns:c,cells:u,levels:m,rows:d,cellSettings:f,currentRowId:p,currentColumnId:g,onCellControlEvent:w,onCellsPaste:h,onNavigation:_,onCellsBlur:I,onHeaderEvent:S,onLoadData:E,rowThreshold:P=15,columnThreshold:b=15,loadedRowCount:C=60,loadedColumnCount:M=60,selfWidthByContent:O,hasActiveMode:T,_autoSize:D}=t,L=me()(e,_t),$=(0,r.useRef)(null),x=(0,r.useRef)(null),Z=(0,r.useRef)(null),A=(0,r.useRef)(null),F=(0,r.useRef)([]),z=(0,r.useRef)([]),H=(0,r.useRef)({}),K=(0,r.useRef)({}),G=(0,r.useRef)({}),[ee,j]=(0,r.useState)(null),[U,Y]=(0,r.useState)({overscanColumnStartIndex:0,overscanColumnStopIndex:0,overscanRowStartIndex:0,overscanRowStopIndex:0,visibleColumnStartIndex:0,visibleColumnStopIndex:0,visibleRowStartIndex:0,visibleRowStopIndex:0}),[W,oe]=(0,r.useState)({vertical:!1,horizontal:!1}),R=(0,r.useRef)(null),N=(0,r.useRef)(!1),X=(0,r.useRef)(!1),ne=(0,r.useRef)([]),ae=(0,r.useRef)([]),ce=(0,r.useRef)(!1),be=(0,r.useRef)({start:null,end:null}),_e=(0,r.useRef)(null),Ce=(0,r.useRef)(null),ie=(0,r.useRef)([0,0]),he=d.length>C,Ie=c.length>M,Ae=(0,r.useRef)([]),ke=(0,r.useRef)([]),Re=S4(Z.current),[Fe,Ue]=(0,r.useState)(M4(c)),Qe=(0,r.useCallback)(y=>{Fe<y&&y>=pn&&Ue(y)},[]),fe=(0,r.useRef)({}),Oe=(0,r.useCallback)((y,k,B)=>{const Q=B?1:0,se={height:k+Q>pn?k+Q:pn};B&&(se.heightWithNodes=B>pn?B:pn),fe.current[y]=se},[fe]),Ee=ks(c);(0,en.isEqual)(F.current,Ee)||(F.current=Ee);const ue=ks(d);(0,en.isEqual)(z.current,ue)||(z.current=ue),(0,en.isEqual)(H.current,u)||(H.current=u),(0,en.isEqual)(K.current,f)||(K.current=f);const Te=F.current,We=z.current,Ye=H.current,Xe=K.current,mt=(0,r.useCallback)((y,k,B,Q)=>{var se,de,Me,He,et;const tt={},Ot=Object.keys(G.current),Wn=Object.keys(Ye),Tr=(0,en.intersection)(Wn,Ot),Un=Ot.length&&Tr.length<Ot.length;for(let ur=y;ur<=k;ur++){const ln=(se=Te[ur])==null?void 0:se.id;for(let Wt=B;Wt<=Q;Wt++){const yt=(de=We[Wt])==null?void 0:de.id;(!((Me=Ye[yt])!=null&&Me[ln])&&yt&&ln&&!((He=G.current[yt])!=null&&He[ln])||!((et=Ye[yt])!=null&&et[ln])&&Un)&&(tt[yt]||(tt[yt]=[]),tt[yt].push(ln),G.current[yt]||(G.current[yt]={}),G.current[yt][ln]=!0)}}return tt},[Te,We,Ye,G]),ot=(0,r.useCallback)(y=>{const{overscanColumnStartIndex:k,overscanColumnStopIndex:B,overscanRowStartIndex:Q,overscanRowStopIndex:se,visibleColumnStartIndex:de,visibleColumnStopIndex:Me,visibleRowStartIndex:He,visibleRowStopIndex:et}=y,tt=He<U.visibleRowStartIndex||et<U.visibleRowStopIndex,Ot=He>U.visibleRowStartIndex||et>U.visibleRowStopIndex,Wn=de<U.visibleColumnStartIndex||Me<U.visibleColumnStopIndex,Tr=de>U.visibleColumnStartIndex||de>U.visibleColumnStopIndex;Y(y),Ae.current=mu([...Ae.current,[Q,se]]),ke.current=mu([...ke.current,[k,B]]);const Un={start:0,stop:Te.length-1},ur={start:0,stop:We.length-1};let ln=null;if(Tr){let Wt=de,yt=Me+b+M;yt>Un.stop&&(yt=Un.stop),ln=mt(Wt,yt,Q,se)}else if(Wn){let Wt=de-b-M,yt=Me;Wt<Un.start&&(Wt=Un.start),ln=mt(Wt,yt,Q,se)}else if(Ot){let Wt=He,yt=et+P+C;yt>ur.stop&&(yt=ur.stop),ln=mt(k,B,Wt,yt)}else if(tt){let Wt=He-P-C,yt=et;Wt<ur.start&&(Wt=ur.start),ln=mt(k,B,Wt,yt)}else ln=mt(k,B,Q,se);if(ln&&Object.keys(ln).length){const Wt=ln;let yt=!0;if(E&&(yt=E({metaSet:s,value:Wt})),yt&&i.onLoadData){const{alias:ys,args:_s}=i.onLoadData;le[ys]({metaSet:s,args:_s,value:Wt})}}},[We,Te,U,mt,i,s,E,P,b,C,M]),Je=pt(m==null?void 0:m.rows.reduce((y,k)=>y+Qo(k==null?void 0:k.size,null,d),0)),ct=(0,r.useCallback)(y=>{var k,B;const{isAdaptiveCell:Q,sizeValue:se}=za(y.size),{height:de,heightWithNodes:Me}=(k=fe.current[y.id])!=null?k:{};let He=y.isExpanded?Me:de;return(B=y==null?void 0:y.nodes)!=null&&B.length&&(He=y.nodes.reduce((et,tt)=>et+nt(tt),0)),!Q&&He<se?se:He>=se?He:S0},[fe]),nt=(0,r.useCallback)(y=>{var k,B;let Q=ct(y);return(k=y==null?void 0:y.nodes)!=null&&k.length&&y.isExpanded&&(Q=y.nodes.reduce((se,de)=>se+nt(de),0)),(B=y==null?void 0:y.branches)!=null&&B.length&&y.isExpanded&&(Q+=y.branches.reduce((se,de)=>se+nt(de),0)),Q},[ct]),pe=(0,r.useCallback)(y=>{const k=d[y];return nt(k)},[d,nt]),te=(0,r.useCallback)(y=>{const k=Te[y]||{},{isAdaptiveCell:B,sizeValue:Q}=za(k.size);if(!B)return Q;const{size:se,caption:de}=k,Me=Qo(se,de);return pt(Me+cc)},[Te,b]),ge=(0,r.useCallback)(y=>{const k=We[y];return ct(k)},[We,ct]),re=(0,r.useCallback)(y=>y-Je-$l,[Je]),we=(0,r.useCallback)(y=>{const k=re(y);return W.vertical?k-ko:k},[re,W]),Se=(0,r.useCallback)(y=>y-Fe-$l,[Fe]),$e=(0,r.useCallback)(y=>{const k=Se(y);return W.horizontal?k-ko:k},[Se,W]),je=(0,r.useCallback)(({event:y,isRow:k,header:B})=>{if(a)return;const Q={event:"onClick",isRow:k,headerId:B.id};let se=!0;if(S&&(se=S({event:y,metaSet:s,value:Q})),se&&i.onHeaderEvent){const{alias:de,args:Me}=i.onHeaderEvent;le[de]({event:y,metaSet:s,args:Me,value:Q})}},[a,i,s,S]),at=(0,r.useCallback)(y=>{var k,B;const{horizontalScrollDirection:Q,verticalScrollDirection:se,scrollLeft:de,scrollTop:Me}=y;se&&((k=$.current)==null||k.scrollTo(Me)),Q&&((B=x.current)==null||B.scrollTo(de))},[$,x]),Ct=(0,r.useCallback)(y=>{const{scrollOffset:k}=y;ee==null||ee.scrollTo({scrollTop:k})},[ee]),it=(0,r.useCallback)(y=>{const{scrollOffset:k}=y;ee==null||ee.scrollTo({scrollLeft:k})},[ee]),ft=(0,en.debounce)(ot,200),It=(0,r.useCallback)(y=>{if(y){const{overscanColumnStartIndex:He,overscanColumnStopIndex:et,overscanRowStartIndex:tt,overscanRowStopIndex:Ot}=y;_r([tt,Ot,He,et]),ft(y)}if(!Z.current||!A.current)return;const{clientWidth:k,clientHeight:B}=Z.current,{clientWidth:Q,clientHeight:se}=A.current,de=se>B!==W.vertical,Me=Q>k!==W.horizontal;(de||Me)&&oe({vertical:se>B,horizontal:Q>k})},[Z,A,W.vertical,W.horizontal,ot]),rn=(0,r.useCallback)(()=>{var y,k;ee&&(ee==null||ee.resetAfterIndices({columnIndex:0,rowIndex:0})),x.current&&((y=x.current)==null||y.resetAfterIndex(0)),$.current&&((k=$.current)==null||k.resetAfterIndex(0))},[ee,x,$]),qe=(0,r.useCallback)(()=>{rn()},[rn]),on=(0,r.useCallback)(({event:y,value:k})=>{if(a)return;let B=!0;if(_&&(B=_({event:y,metaSet:s,value:k})),B&&(i!=null&&i.onNavigation)){const{alias:Q,args:se}=i.onNavigation;B=le[Q]({event:y,args:se,metaSet:s,value:k})}return B},[a,i,s,_]),Ln=(0,r.useCallback)(y=>{const k=c[y];return Hl(k)},[c]),Mo=(0,r.useCallback)(({data:y,columnIndex:k,rowIndex:B})=>{const{columnTerminalNodes:Q,rowTerminalNodes:se}=y,de=se[B].id,Me=Q[k].id;return`${de}:${Me}`},[]),sr=(0,r.useCallback)(({event:y,eventType:k,controlType:B,cellData:Q,value:se,rowId:de,columnId:Me})=>{if(a)return!1;let He=!0;if(w&&(He=w(y)),He&&(i!=null&&i.onCellControlEvent)){const{alias:et,args:tt}=i.onCellControlEvent;le[et]({event:y,args:tt,metaSet:s,value:{controlType:B,eventType:k,cellData:Q,cellValue:se===""?null:se,rowId:de,columnId:Me}})}},[a,i,s,w]),Ge=(0,r.useCallback)(({event:y,eventType:k,cellsData:B})=>{if(a)return!1;let Q=!0;if(h&&(Q=h(y)),Q&&(i!=null&&i.onPasteEvent)){const{alias:se,args:de}=i.onPasteEvent;le[se]({event:y,args:de,metaSet:s,value:{eventType:k,cellsData:B}})}},[a,i,s,h]),Kt=(0,r.useCallback)(({event:y})=>{if(a)return!1;let k=!0;const B={rowId:null,columnId:null};if(I&&(k=I({event:y,metaSet:s,value:B})),k&&(i!=null&&i.onCellsBlur)){const{alias:Q,args:se}=i.onCellsBlur;le[Q]({event:y,args:se,metaSet:s,value:B})}},[a,i,s,I]),Vt=(0,r.useMemo)(()=>({rows:d,columns:c,levels:m,handleHeaderEvent:je,updateColumnHeaderHeight:Qe,updateRowHeaderHeight:Oe}),[d,c,m,je,Qe,Oe]),Be=(0,r.useMemo)(()=>({isDisabled:a,gridId:o,columnTerminalNodes:Te,rowTerminalNodes:We,currentColumnId:g,currentRowId:p,globalCellSettings:Xe,cells:Ye,onCellsBlur:Kt,onCellControlEvent:sr,onNavigation:on,hasActiveMode:T}),[o,Te,We,g,p,Xe,Ye,sr,on,Kt]),$n=!!Object.keys(Be.cells||{}).length,an=ee,ut=A.current,ir=Te.length,Nt=x.current,Dt=be.current,mn=(0,r.useCallback)((y=N.current)=>y?ae.current:ne.current,[]),qt=(0,r.useCallback)((y,k,B)=>{const Q=mn();Q[y]||(Q[y]=[]),Q[y][k]=B},[]),Rn=(0,r.useCallback)((y,k)=>{var B,Q;(Q=(B=mn())==null?void 0:B[y])==null||delete Q[k]},[]),En=(0,r.useCallback)(()=>{const y=[null,null],k=[0,0],B=ne.current;for(const[Q,se]of B.entries())if(se)for(const[de,Me]of se.entries())Me&&((y[0]>Q||y[0]===null)&&(y[0]=Q),(y[1]>de||y[1]===null)&&(y[1]=de),k[0]<Q&&(k[0]=Q),k[1]<de&&(k[1]=de));return{start:y,end:k}},[]),br=(0,r.useCallback)(()=>{const y=_e.current,k=Math.abs(y.start[0]-y.end[0])+1,B=Math.abs(y.start[1]-y.end[1])+1;return{rows:k,columns:B}},[]),Rr=(0,r.useCallback)(y=>((y==null?void 0:y.clipboardData)||window.clipboardData).getData("text/plain")||!1,[]),Hn=(0,r.useCallback)(y=>{let k=y.replaceAll(" ","").replace(",",".").trim();return["false","true"].includes(k)&&(k=k==="true"),k},[]),Sn=(0,r.useCallback)((y,k)=>document.getElementById(ea(o,y,k)),[ea]),jn=(0,r.useCallback)(y=>{let k=y;for(;!Jo(k,vc)&&k.nodeName!=="BODY";)k=k.parentElement;return k},[ut]),Yr=(0,r.useCallback)(y=>{var k;return(k=y.querySelector(`.${vc}-control`))==null?void 0:k.firstChild},[]),cr=(0,r.useCallback)((y,k)=>{const B=z.current.findIndex(se=>se.id===y),Q=F.current.findIndex(se=>se.id===k);return[B,Q]},[z,F]),Xr=(0,r.useCallback)((y,k)=>{var B,Q,se,de;const Me=(Q=(B=z.current)==null?void 0:B[y])==null?void 0:Q.id,He=(de=(se=F.current)==null?void 0:se[k])==null?void 0:de.id;return[Me,He]},[z,F]),Jr=(0,r.useCallback)(y=>{const k=y.map(B=>R.current.querySelector(`[data-id="${B.id}"]`));return k.length?k:!1},[R]),Mn=(0,r.useCallback)((y,k)=>{let B=!1,Q=!1;for(const se of Ae.current)if(y>=se[0]&&y<=se[1]){B=!0;break}for(const se of ke.current)if(k>=se[0]&&k<=se[1]){Q=!0;break}return B&&Q},[Ae,ke]),Qr=(0,r.useCallback)((y,k)=>{var B,Q;return a||((B=z.current[y])==null?void 0:B.isDisabled)||((Q=F.current[k])==null?void 0:Q.isDisabled)},[a,z,F]),xr=(0,r.useCallback)(()=>{const{start:y,end:k}=Dt;if(y&&k){const B=y[0]<k[0]?1:-1,Q=y[1]<k[1]?1:-1;for(let se=y[0];se!==k[0]+B;se+=B)for(let de=y[1];de!==k[1]+Q;de+=Q){const[Me,He]=Xr(se,de);if(!Mn(se,de)||!(Me&&He))return!1;const et=H.current[Me][He],tt=Sn(Me,He),Ot=tt&&jn(tt);ce.current?(Rn(se,de),sc(Ot,Or)):(qt(se,de,pc(jl({},et),{row:Me,column:He})),y0(Ot,Or))}_e.current=En()}},[H,Xr,Sn,jn,qt,Rn]),Tn=(0,r.useCallback)((y,k)=>{Dt.start=y,Dt.end=k,xr()},[R,xr]),eo=(0,r.useCallback)(y=>{var k,B;const Q=((B=(k=ne.current)==null?void 0:k[y])==null?void 0:B.length)===ir;if(!Q)return!1;let se=!0;for(const de of ne.current[y])if(!de){se=!1;break}return Q&&se},[ne]),to=(0,r.useCallback)(y=>{const k=ne.current.reduce(Q=>Q+1,0)===la;if(!k)return!1;let B=!0;for(const Q of ne.current)if(!Q[y]){B=!1;break}return k&&B},[ne]),Nr=(0,r.useCallback)(y=>{const k=y.currentTarget,B=z.current.findIndex(Q=>Q.id===k.dataset.id);ce.current=eo(B),Tn([B,0],[B,ir-1])},[z,Tn,eo]),Cr=(0,r.useCallback)(y=>{const k=y.currentTarget,B=F.current.findIndex(Q=>Q.id===k.dataset.id);ce.current=to(B),Tn([0,B],[la-1,B])},[F,Tn,to]),Dr=(0,r.useCallback)(y=>{if(N.current=!0,An("crosshair"),y.shiftKey&&ie.current)Dt.start=ie.current;else{ce.current=Jo(y.currentTarget,Or);const k=Yr(y.currentTarget);Dt.start=cr(k==null?void 0:k.dataset.rowId,k==null?void 0:k.dataset.columnId),ie.current=[...Dt.start]}},[]),yr=(0,r.useCallback)(y=>{const k=Yr(Ce.current);Dt.end=cr(k==null?void 0:k.dataset.rowId,k==null?void 0:k.dataset.columnId),(y.ctrlKey||Dt.start.toString()!==Dt.end.toString())&&(xr(),document.activeElement.blur())},[]),no=(0,r.useCallback)(y=>{N.current=!1,An("auto"),ae.current.length=0,yr(y)},[]),Zt=(0,r.useCallback)(()=>{var y,k,B;if(!ut)return;const Q=mn(!0),se=mn(!1);if(N.current||Q.length){for(let de=0;de<Q.length;de++)for(let Me=0;Me<((y=Q==null?void 0:Q[de])==null?void 0:y.length);Me++){if((k=se==null?void 0:se[de])!=null&&k[Me])continue;const He=(B=Q[de])==null?void 0:B[Me],et=Sn(He==null?void 0:He.row,He==null?void 0:He.column),tt=et&&jn(et);Jo(tt,Or)&&sc(tt,Or)}Q.length=0}else{for(const de of ut.children)Jo(de,Or)&&sc(de,Or);se.length=0}},[ut]),_r=(0,r.useCallback)(y=>{const[k,B,Q,se]=y,de=(Me,He,et,tt)=>{var Ot,Wn;if((Wn=(Ot=ne.current)==null?void 0:Ot[et])!=null&&Wn[tt]){const Tr=Sn(Me,He),Un=Tr&&jn(Tr);Jo(Un,Or)||y0(Un,Or)}};for(let Me=k;Me<=B;Me++){const He=Object.keys(Ye)[Me];if(!He)return;for(let et=Q;et<=se;et++){const tt=Object.keys(Ye[He])[et];de(He,tt,Me,et)}}},[Ye,ne,Sn,jn]),An=(0,r.useCallback)(y=>{R.current.style.cursor=y},[R]),Vn=(0,r.useCallback)(y=>{y.ctrlKey&&(y.preventDefault(),y.stopPropagation())},[]),ro=(0,r.useCallback)(y=>{y.detail!==2&&(y.ctrlKey||Zt(),Dr(y))},[Zt,Dr]),wr=(0,r.useCallback)(y=>{Ce.current=y.currentTarget},[]),V=(0,r.useCallback)(y=>{N.current&&(Zt(),yr(y))},[Zt,yr]),ve=(0,r.useCallback)(y=>{N.current&&no(y)},[no]),De=(0,r.useCallback)(y=>{y.target===y.currentTarget&&!(y.offsetX>y.target.clientWidth-ko||y.offsetY>y.target.clientHeight-ko)&&Zt()},[Zt]),J=(0,r.useCallback)(y=>{Re(y,N.current)},[Re]),ye=(0,r.useCallback)(()=>{N.current&&(Zt(),N.current=!1,An("auto"))},[Zt]),Ne=(0,r.useCallback)(y=>{y.ctrlKey||Zt()},[Zt]),Le=(0,r.useCallback)(()=>{var y,k;const{start:B,end:Q}=_e.current;let se="";for(let de=B[0];de<=Q[0];de++){const Me=ne.current[de];de!==B[0]&&(se+=`
`);for(let He=B[1];He<=Q[1];He++){const et=Me==null?void 0:Me[He];let tt=((y=et==null?void 0:et.value)==null?void 0:y.toString())||"";((k=tt.match(/[.]/g))==null?void 0:k.length)===1&&(tt=tt.replace(".",",")),se+=tt,He+1!==(Me==null?void 0:Me.length)&&(se+="	")}}return se},[]),ht=(0,r.useCallback)(y=>{if(ne.current.length){y.preventDefault();const k=Le();y.clipboardData.setData("text/plain",k)}},[ne,_e,Le]),dt=(0,r.useCallback)((y,k)=>{const B="onPasteCells",Q=k.map(({type:se,rowId:de,columnId:Me,value:He,index:et})=>{const[tt,Ot]=et;return{cellData:{columnId:Me,columnIndex:Ot,rowId:de,rowIndex:tt},cellValue:He,columnId:Me,rowId:de,controlType:se,eventType:B}});Ge({event:y,eventType:B,cellsData:Q}),Zt()},[Zt,Ge]),At=(0,r.useCallback)(y=>{var k;const B=[],Q=ne.current,se=y.length===1&&y[0].length===1;for(let de=0;de<Q.length;de++){const Me=Q[de];for(let He=0;He<(Me==null?void 0:Me.length);He++){const et=Me[He];if(!et||Qr(de,He))continue;const tt=_e.current.start,Ot=se?y[0][0]:(k=y==null?void 0:y[de-tt[0]])==null?void 0:k[He-tt[1]];if(Ot!==void 0){const Wn=typeof Ot=="string"?Hn(Ot):Ot;B.push({type:"string",rowId:et==null?void 0:et.row,columnId:et==null?void 0:et.column,value:Wn,index:[de,He]})}}}return B},[ne,_e,Qr,Hn]),Yt=(0,r.useCallback)(y=>{y.preventDefault();const k=Rr(y),B=k?k.split(`
`).map(Q=>Q.split("	")):[[null]];if(X.current&&!ne.current.length&&ie.current){const[Q,se]=ie.current,de=Object.values(B),Me=de==null?void 0:de.length,He=de.reduce((et,tt)=>(tt==null?void 0:tt.length)>et?tt==null?void 0:tt.length:et,-Number.MAX_VALUE);Tn(ie.current,[Math.min(Q+Me,la)-1,Math.min(se+He,ir)-1])}if(ne.current.length){const Q=At(B);dt(y,Q)}},[ne,ie,X,At,dt,Tn]),oo=(0,r.useCallback)(()=>{X.current=!1},[]),Er=(0,r.useCallback)(()=>{X.current=!0},[]),bs=(0,r.useCallback)(y=>{const k=y.keyCode||y.charCode;if((ri(k)||RC(k))&&ne.current.length){const B=br(),Q=Array(B.rows);Q.fill(Array(B.columns).fill(null));const se=At(Q);dt(y,se)}},[br,At,dt]);(0,r.useEffect)(()=>{Nt==null||Nt.resetAfterIndex(0),an==null||an.resetAfterColumnIndex(0)},[Nt,an,ir]);const la=We.length,ao=$.current;(0,r.useEffect)(()=>{ao==null||ao.resetAfterIndex(0),an==null||an.resetAfterRowIndex(0)},[ao,an,la]),(0,r.useEffect)(()=>{ot(U);const y=Array.from((ut==null?void 0:ut.children)||[]).filter(k=>!Jo(k,`${vc}-divider`));return Io(y,{mousedown:ro,mouseover:wr,mouseenter:V,click:Vn}),()=>{Oo(y,{mousedown:ro,mouseover:wr,mouseenter:V,click:Vn})}},[ee,U,ot]),(0,r.useEffect)(()=>(Io([Z.current],{mousedown:De}),Io([R.current],{mouseleave:ye,mouseup:ve,mousemove:J}),Io([document],{copy:ht,paste:Yt,keydown:bs}),Io([R.current],{focus:Er,blur:oo},!0),()=>{Oo([Z.current],{mousedown:De}),Oo([R.current],{mouseleave:ye,mouseup:ve,mousemove:J}),Oo([document],{copy:ht,paste:Yt,keydown:bs}),Oo([R.current],{focus:Er,blur:oo},!0)}),[ee]),(0,r.useEffect)(()=>{let y,k;return ao&&Nt&&(Ie||(y=Jr(z.current),Io(y,{click:Nr})),he||(k=Jr(F.current),Io(k,{click:Cr}))),()=>{Oo(y,{click:Nr}),Oo(k,{click:Cr})}},[ee,d,c,ao,Nt,U]);const Ua=(0,r.useCallback)(()=>{let y=1+Je+$l+c.reduce((B,Q)=>B+k0(Q),0),k;return D?(k="100%",W.horizontal&&(k=`calc(${k}+${ko})`)):(k=1+Fe+$l+d.reduce((B,Q,se)=>B+pe(se),0),W.horizontal&&(k+=ko)),W.vertical&&(y+=ko),{width:y,height:k}},[c,Je,d,Fe,W.vertical,W.horizontal]),Vc=(0,r.useMemo)(()=>{const y=`${_t}__row-list`;return me()(y,{[`${y}_scrollable`]:W.horizontal})},[W]),Cs=(0,r.useMemo)(()=>{const y=`${_t}__column-list`;return me()(y,{[`${y}_scrollable`]:W.vertical})},[W]);let Mr=jl({},n);if(Mr.width&&!Mr.width.toString().includes("px")&&(Mr.width=pt(Mr.width)),O){const{width:y,height:k}=Ua();Mr=pc(jl({},Mr),{minWidth:y,minHeight:k})}return r.createElement("div",pc(jl({"data-name":o,className:L,style:Mr},l),{tabIndex:0}),r.createElement(nc.Z,{className:`${_t}__auto-sizer`,onResize:qe},({height:y,width:k})=>r.createElement("div",{style:{height:y,width:k},ref:R},(c==null?void 0:c.length)>0&&r.createElement("div",{className:`${_t}__columns`},r.createElement("div",{className:`${_t}__row-levels`,style:{width:Je,height:Fe}},m==null?void 0:m.rows.map((B,Q)=>r.createElement("div",{key:B.caption||Q,className:`${_t}__header`,style:{width:pt(Qo(B==null?void 0:B.size))+10}},r.createElement("span",{className:`${_t}__header-text text-ellipsis`,title:B.caption},`${B.caption||""}`)))),r.createElement(On.S_,{ref:x,className:Cs,layout:"horizontal",height:Fe,width:we(k),itemCount:c.length,itemSize:Ln,onScroll:it,itemData:Vt},A0)),r.createElement("div",{className:`${_t}__body`},r.createElement("div",{className:`${_t}__rows`},r.createElement(On.S_,{ref:$,className:Vc,height:$e(y),width:Je,itemCount:d.length,itemSize:pe,onScroll:Ct,itemData:Vt},z0)),$n&&r.createElement(Ca,{onClickOutside:Ne},r.createElement(On.cd,{ref:j,outerRef:Z,innerRef:A,className:`${_t}__cells`,width:re(k),height:Se(y),columnCount:Te.length,rowCount:We.length,columnWidth:te,rowHeight:ge,onScroll:at,onItemsRendered:It,itemData:Be,itemKey:Mo,overscanColumnCount:b,overscanRowCount:P},H0))))))}gc.propTypes={GUID:v().string,actions:v().array,cellSettings:v().object,cells:v().object,children:v().array,columns:v().array,currentColumnId:v().string,currentRowId:v().string,dataAttrs:v().object,events:v().object,hasActiveMode:v().bool,hint:v().string,id:v().string,isDisabled:v().bool,isExcluded:v().bool,isFixSize:v().bool,isStatic:v().bool,levels:v().object,metaSet:v().object,name:v().string,rows:v().array,adaptiveBigDataGrid:v().bool,selfWidthByContent:v().bool,style:v().object,testId:v().string,type:v().string},gc.defaultProps={isDisabled:!1,isExcluded:!1};var lI=gc,sI=xe(23279),iI=xe.n(sI),DM={popperIconSize:"18px"},cI=Object.defineProperty,uI=Object.defineProperties,dI=Object.getOwnPropertyDescriptors,Vl=Object.getOwnPropertySymbols,W0=Object.prototype.hasOwnProperty,U0=Object.prototype.propertyIsEnumerable,G0=(t,e,n)=>e in t?cI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gr=(t,e)=>{for(var n in e||(e={}))W0.call(e,n)&&G0(t,n,e[n]);if(Vl)for(var n of Vl(e))U0.call(e,n)&&G0(t,n,e[n]);return t},$a=(t,e)=>uI(t,dI(e)),K0=(t,e)=>{var n={};for(var o in t)W0.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Vl)for(var o of Vl(t))e.indexOf(o)<0&&U0.call(t,o)&&(n[o]=t[o]);return n};const mI=(t,e,n)=>{var o;const a=(o=n[e])==null?void 0:o[t];return a===void 0?{isLoading:!0}:a===!0?{}:a},fI=(t,e)=>t.style&&e.hasOwnProperty(t.style)?e[t.style]:{},pI=(t,e)=>{if(t.control&&e.hasOwnProperty(t.control))return e[t.control]},q0=(t,e,n=[],o)=>{let a=new Array(e).fill(pt(t));const l=[];if(n.forEach(i=>{i.hasOwnProperty("size")&&(a[i.index-1]=pt(i.size)),i.hasOwnProperty("hidden")&&i.hidden===!0&&(a[i.index-1]=0)}),o){for(let i=0;i<o;i++)l[i]=a[i];a=a.slice(o)}return[a,l]},MM={overscanColumnStartIndex:0,overscanColumnStopIndex:0,overscanRowStartIndex:0,overscanRowStopIndex:0,visibleColumnStartIndex:0,visibleColumnStopIndex:0,visibleRowStartIndex:0,visibleRowStopIndex:0},TM=(t,e)=>{var n;const o=[];for(let a=t[0];a<=t[2];a+=1)for(let l=t[1];l<=t[3];l+=1)((n=e[l])==null?void 0:n[a])===void 0&&(o.length?(o[0]=Math.min(a,o[0]),o[1]=Math.min(l,o[1])):(o[0]=a,o[1]=l));if(o.length)return o},vI=(t,e)=>{const n=[...t],o=e[2]-e[0],a=e[3]-e[1];return t[2]-t[0]<o&&(n[2]=t[0]+o),t[3]-t[1]<a&&(n[3]=t[1]+a),n},gI=t=>{const e=[...t];for(let n=0;n<t.length;n+=1)e[n]+=1;return e},hI=t=>{const{renderedCells:e,events:n,viewBox:o}=t,{visibleColumnStartIndex:a,visibleRowStartIndex:l,visibleColumnStopIndex:i,visibleRowStopIndex:s}=e;let c=[a,l,i,s];c=vI(gI(c),o),Ze({specificEvent:null,nativeEvent:"onLoadData",value:c,events:n})},bI={center:"center",left:"flexStart",right:"flexEnd"},CI=t=>{const e={enumType:"enum"},{listValues:n,value:o,formattedValue:a,isAutocomplete:l}=t;if(!l&&(n!=null&&n.length)&&o){const i=n.find(s=>s.key===o);i&&(e.value=i.value)}return o!==void 0&&(a===void 0&&(e.formattedValue=e.value),e.initialValue=e.value,e.initialFormattedValue=e.value),e},yI=t=>{const{control:e,cellData:n,cellStyleData:o={},events:a,gridName:l,eventProps:i,wrapperStyle:s}=t,c=o,{fontColor:u,color:m,horzAlign:d,vertAlign:f,border:p=["none"]}=c,g=K0(c,["fontColor","color","horzAlign","vertAlign","border"]),w=e==null?void 0:e.disabled,h=e==null?void 0:e.hasButton,_=gr({},g);_.backgroundColor=m,_.color=u,_.textAlign=d;const I=e==null?void 0:e.type;if(I==="checkbox"&&(_.justifyContent=d?bI[d]:"center"),_.verticalAlign=f,_.borderRadius=0,_.margin=0,_.width=s.width,_.height=s.height,o!=null&&o.border){if(p.length===1)p[0]==="none"?_.border="none":(_.borderWidth=p[0],_.borderStyle="solid");else if(p.length===4)for(let $=0;$<4;$+=1)if(p[$]==="none")switch($){case 0:_.borderLeft="none";break;case 1:_.borderTop="none";break;case 2:_.borderRight="none";break;default:_.borderBottom="none";break}else switch($){case 0:_.borderLeftWidth=p[0],_.borderLeftStyle="solid";break;case 1:_.borderTopWidth=p[1],_.borderTopStyle="solid";break;case 2:_.borderRightWidth=p[2],_.borderRightStyle="solid";break;default:_.borderBottomWidth=p[3],_.borderBottomStyle="solid";break}}const[S,E]=_I(i,a,w,n.value,e==null?void 0:e.type),P=Po(l,n.X,n.Y),b={["data-grid-id"]:l,["data-row-id"]:n.Y,["data-column-id"]:n.X};let C=n.value,M=n.value,O=n.value,T,D,L;if(Al(I)&&I!=="enum")n.staticValue&&(C=n.staticValue);else if((I==="enum"||I==="shortlist")&&e){const{value:$,formattedValue:x,initialFormattedValue:Z,initialValue:A,enumType:F}=CI(gr(gr({},n),e));O=$,M=A,T=Z,C=x,D=F,I==="shortlist"&&(L=!0)}return $a(gr(gr({GUID:P,dataAttrs:b,isWrapped:o==null?void 0:o.wrap,isAutocomplete:L,isParentTable:!0,isDisabled:w,initialValue:M,initialFormattedValue:T,formattedValue:C,value:O},S),e),{type:D||(e==null?void 0:e.type),showButton:h,events:E,style:_})},Z0=(t,e,n)=>{function o(a){const{value:l}=a,i=["onEnter","onAutocomplete"].includes(t)?$a(gr({},n),{value:l}):n;Ze({specificEvent:null,nativeEvent:t,events:e,value:i})}return o},_I=(t,e,n,o,a)=>{const l=t,{actionList:i}=l,s=K0(l,["actionList"]),c={},u={};return i&&i.length&&i.forEach(m=>{const d=m==="onDblClick"?"onDoubleClick":m;c[d]=Z0(d,e,s),e[d]&&(u[d]=e[d])}),n||(c.onEnter=Z0("onEnter",e,s),Al(a)&&(c.onImplicitChange=m=>{(m==null?void 0:m.value)!==o&&Ze({specificEvent:null,nativeEvent:"onEnter",events:e,value:$a(gr({},s),{value:m.value})})})),a==="checkbox"&&(c.onChange=m=>{Ze({specificEvent:null,nativeEvent:"onEnter",events:e,value:$a(gr({},s),{value:m.value})})}),a==="enum"&&(c.onSelect=m=>{const{value:d}=m;return Ze({specificEvent:null,nativeEvent:"onEnter",events:e,value:$a(gr({},s),{value:typeof d=="object"&&(d==null?void 0:d.keyValue)!==void 0?d==null?void 0:d.keyValue:d})}),!0}),[c,u]},wI=({colSpan:t,rowSpan:e,wrapperStyle:n,columnWidths:o,rowHeights:a,rowIndex:l,columnIndex:i})=>{const s=gr({},n);if(t){let c=0;for(let u=0;u<=t;u++)c+=o[i+u];s.width=c,s.position="absolute",s.left="0",s.zIndex="3"}if(e){let c=0;for(let u=0;u<=e;u++)c+=a[l+u];s.height=c,s.position="absolute",s.top="0",s.zIndex="3"}return s},EI=t=>{const e=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];return t.reduce((n,{props:{columnIndex:o,rowIndex:a}})=>{let[l,i,s,c]=n;return a<l&&(l=a),a>i&&(i=a),o<s&&(s=o),o>c&&(c=o),[l,i,s,c]},e)},SI=(t=0,e=0,n)=>{var o;let a=n;if(t&&(a=a.slice(t)),e)for(let l=0;l<a.length;l++)a[l]=(o=a[l])==null?void 0:o.slice(e);return{gridMatrixWoFreezedCells:a,freezedCols:t,freezedRows:e}};var PI=Object.defineProperty,II=Object.defineProperties,OI=Object.getOwnPropertyDescriptors,Y0=Object.getOwnPropertySymbols,kI=Object.prototype.hasOwnProperty,RI=Object.prototype.propertyIsEnumerable,X0=(t,e,n)=>e in t?PI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hc=(t,e)=>{for(var n in e||(e={}))kI.call(e,n)&&X0(t,n,e[n]);if(Y0)for(var n of Y0(e))RI.call(e,n)&&X0(t,n,e[n]);return t},xI=(t,e)=>II(t,OI(e));const NI=t=>{const{columnIndex:e,rowIndex:n,style:o,data:{styles:a,defaultStyle:l,defaultControl:i,controls:s,events:c,freezedCols:u=0,freezedRows:m=0,columnWidths:d,rowHeights:f,gridMatrix:p,name:g}}=t,w=`${uv}__cell`,h=mI(e,n,p),_=hc(hc({},a[l]),fI(h,a)),I=pI(h,s)||s[i],S={actionList:I==null?void 0:I.actionList,row:n+1+m,col:e+1+u},E=h.colSpan||h.rowSpan;let P={width:"100%",height:"100%"};if(E){const{colSpan:C,rowSpan:M}=h;P=wI({colSpan:C,rowSpan:M,wrapperStyle:P,columnWidths:d,rowHeights:f,rowIndex:n,columnIndex:e})}const b=ja(yI({control:I,style:o,cellStyleData:_,cellData:h,eventProps:S,gridName:g,events:c,wrapperStyle:P}));return r.createElement("div",{style:xI(hc({},o),{overflow:E?"initial":void 0}),className:w},r.createElement("div",{style:P},h.isLoading?r.createElement("div",{className:"indicator__loader"}):b))};var Wl=(0,r.memo)(NI,On.wy),J0=(0,r.createContext)(null),DI=Object.defineProperty,MI=Object.defineProperties,TI=Object.getOwnPropertyDescriptors,Ul=Object.getOwnPropertySymbols,Q0=Object.prototype.hasOwnProperty,ev=Object.prototype.propertyIsEnumerable,tv=(t,e,n)=>e in t?DI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tr=(t,e)=>{for(var n in e||(e={}))Q0.call(e,n)&&tv(t,n,e[n]);if(Ul)for(var n of Ul(e))ev.call(e,n)&&tv(t,n,e[n]);return t},Gl=(t,e)=>MI(t,TI(e)),AI=(t,e)=>{var n={};for(var o in t)Q0.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Ul)for(var o of Ul(t))e.indexOf(o)<0&&ev.call(t,o)&&(n[o]=t[o]);return n};const hr=(t,e)=>t+e,FI=(t,e,n,o,a,l,i)=>{const s=[];for(let c=e+l;c<=n+l;c++){const u={left:a.slice(0,c).reduce(hr,0)};for(let m=0;m<i;m++){const d={height:o[c],width:a[c],top:o.slice(0,m).reduce(hr,0)};s.push(r.createElement("div",{className:"frozen-columns-cell",style:tr(tr({},d),u),key:`${c}${m}`},r.createElement(Wl,{columnIndex:c,rowIndex:m,data:t,style:d})))}}return s},BI=(t,e,n,o,a,l,i)=>{const s=[];for(let c=e;c<=n;c++){const u={top:o.slice(0,c).reduce(hr,0)};for(let m=0;m<l;m++){const d={height:o[c],width:a[m],left:a.slice(0,m).reduce(hr,0)};s.push(r.createElement("div",{className:"frozen-rows-cell",style:tr(tr({},d),u),key:`${c+i}${m}`},r.createElement(Wl,{columnIndex:m,rowIndex:c+i,style:d,data:t})))}}return s},zI=(t,e,n,o,a)=>{const l=[];for(let i=0;i<o;i++){const s={top:e.slice(0,i).reduce(hr,0),left:0};for(let c=0;c<a;c++){s.left=n.slice(0,c).reduce(hr,0);const u={height:e[i],width:n[c]};l.push(r.createElement("div",{className:"frozen-columns__base-cell",style:tr(tr({},u),s),key:`${i}${c}`},r.createElement(Wl,{columnIndex:c,rowIndex:i,style:u,data:t})))}}return l},nv=(0,r.forwardRef)((t,e)=>{var n=t,{children:o}=n,a=AI(n,["children"]);return r.createElement(J0.Consumer,null,l=>{const{freezedData:i,itemData:s,initialGridMatrix:c}=l||{};if(i&&s){const{freezedRowsSizes:u,freezedColsSizes:m,freezedCols:d,freezedRows:f}=i,p=u.reduce(hr,0),g=m.reduce(hr,0),[w,h,_,I]=EI(o),S=[...m,...s.columnWidths],E=[...u,...s.rowHeights],P=FI(Gl(tr({},s),{gridMatrix:c||s.gridMatrix,columnWidths:S,rowHeights:E}),_,I,E,S,f,d),b=BI(Gl(tr({},s),{gridMatrix:c||s.gridMatrix,columnWidths:S,rowHeights:E}),w,h,E,S,f,d),C=zI(Gl(tr({},s),{gridMatrix:c||s.gridMatrix,columnWidths:S,rowHeights:E}),E,S,f,d),M={width:`${s.columnWidths.reduce(hr,0)}px`,height:`${s.rowHeights.reduce(hr,0)}px`},O={top:p,width:g,height:`calc(100% - ${p}px)`},T={height:p,width:g},D=Gl(tr({},a),{style:M}),L={top:p,left:g};return r.createElement("div",tr({className:"grid-container",ref:e},D),!!d&&r.createElement("div",{className:"frozen-columns"},r.createElement("div",{className:"frozen-columns__base",style:T},C),r.createElement("div",{className:"frozen-columns__cells-container"},P)),!!f&&r.createElement("div",{className:"frozen-rows",style:O},b),r.createElement("div",{className:"grid-container",style:L},o))}})});nv.displayName="FrozenItems";var LI=nv,$I=Object.defineProperty,Kl=Object.getOwnPropertySymbols,rv=Object.prototype.hasOwnProperty,ov=Object.prototype.propertyIsEnumerable,av=(t,e,n)=>e in t?$I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,HI=(t,e)=>{for(var n in e||(e={}))rv.call(e,n)&&av(t,n,e[n]);if(Kl)for(var n of Kl(e))ov.call(e,n)&&av(t,n,e[n]);return t},jI=(t,e)=>{var n={};for(var o in t)rv.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Kl)for(var o of Kl(t))e.indexOf(o)<0&&ov.call(t,o)&&(n[o]=t[o]);return n},VI=t=>{var e=t,{freezedData:n,initialGridMatrix:o,columnWidth:a,rowHeight:l,children:i,cols:s,rows:c}=e,u=jI(e,["freezedData","initialGridMatrix","columnWidth","rowHeight","children","cols","rows"]);const m=d(s,c);function d(f,p){const g=(0,r.useRef)(null);return r.useEffect(()=>{g.current&&g.current.resetAfterIndices({columnIndex:0,rowIndex:0,shouldForceUpdate:!0})},[f,p]),g}return r.createElement(J0.Provider,{value:{freezedData:n,initialGridMatrix:o,itemData:u.itemData}},r.createElement(On.cd,HI({columnWidth:a,rowHeight:l,innerElementType:LI,ref:m},u),i))},WI=Object.defineProperty,ql=Object.getOwnPropertySymbols,lv=Object.prototype.hasOwnProperty,sv=Object.prototype.propertyIsEnumerable,iv=(t,e,n)=>e in t?WI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,UI=(t,e)=>{for(var n in e||(e={}))lv.call(e,n)&&iv(t,n,e[n]);if(ql)for(var n of ql(e))sv.call(e,n)&&iv(t,n,e[n]);return t},GI=(t,e)=>{var n={};for(var o in t)lv.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&ql)for(var o of ql(t))e.indexOf(o)<0&&sv.call(t,o)&&(n[o]=t[o]);return n};const cv=0,uv="canvas-grid";var KI=t=>{const{name:e,freezedCols:n=0,freezedRows:o=0,colsCount:a,rowsCount:l,rows:i,cols:s,styles:c,controls:u,defaultControl:m,defaultStyle:d,defaultCol:f,defaultRow:p,events:g,gridMatrix:w,viewBox:h}=t,_=iI()(hI,250),I=L=>{L&&_({renderedCells:L,events:g,viewBox:h})},[S,E]=q0(p.size||cv,l,i,o),[P,b]=q0(f.size||cv,a,s,n),C=UI({freezedRowsSizes:E,freezedColsSizes:b},SI(n,o,w)),{gridMatrixWoFreezedCells:M}=C,O=GI(C,["gridMatrixWoFreezedCells"]),T=L=>P[L],D=L=>S[L];return r.createElement("div",{"data-name":e,style:{height:"100%",width:"100%"}},r.createElement(nc.Z,null,({height:L,width:$})=>r.createElement(VI,{height:L,width:$,initialGridMatrix:w,columnCount:a-n,rowCount:l-o,rowHeight:D,columnWidth:T,freezedData:O,className:uv,cols:s,rows:i,itemData:{styles:c,defaultStyle:d,defaultControl:m,controls:u,events:g,freezedCols:n,freezedRows:o,columnWidths:P,rowHeights:S,name:e,gridMatrix:M},onItemsRendered:I},Wl)))},qI=KI,ZI=xe(97762),dv=xe(73042),zM={popperIconSize:"18px"},YI={labelInvalidField:"\u041D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B\u0435 \u0444\u0430\u0439\u043B\u044B",labelFileWaitingForSize:"\u0412 \u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0438 \u0440\u0430\u0437\u043C\u0435\u0440\u0430",labelFileSizeNotAvailable:"\u0420\u0430\u0437\u043C\u0435\u0440 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D",labelFileLoading:"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430",labelFileLoadError:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435",labelFileProcessing:"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430",labelFileProcessingComplete:"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430",labelFileProcessingAborted:"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u043E\u0442\u043C\u0435\u043D\u0435\u043D\u0430",labelFileProcessingError:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435",labelFileProcessingRevertError:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043C\u0435\u043D\u0435",labelFileRemoveError:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438",labelTapToCancel:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",labelTapToRetry:"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C \u043F\u043E\u043F\u044B\u0442\u043A\u0443",labelTapToUndo:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",labelButtonRemoveItem:"\u0423\u0434\u0430\u043B\u044F\u0442\u044C",labelButtonAbortItemLoad:"\u041F\u0440\u0435\u0440\u0432\u0430\u0442\u044C",labelButtonRetryItemLoad:"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C",labelButtonAbortItemProcessing:"\u041E\u0442\u043C\u0435\u043D\u0430",labelButtonUndoItemProcessing:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",labelButtonRetryItemProcessing:"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C",labelButtonProcessItem:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",imageValidateSizeLabelFormatError:"\u0422\u0438\u043F \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044F",imageValidateSizeLabelImageSizeTooSmall:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0441\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435",imageValidateSizeLabelImageSizeTooBig:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0441\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435",imageValidateSizeLabelExpectedMinSize:"\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440: {minWidth} \xD7 {minHeight}",imageValidateSizeLabelExpectedMaxSize:"\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440: {maxWidth} \xD7 {maxHeight}",imageValidateSizeLabelImageResolutionTooLow:"\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u0441\u043B\u0438\u0448\u043A\u043E\u043C \u043D\u0438\u0437\u043A\u043E\u0435",imageValidateSizeLabelImageResolutionTooHigh:"\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u0441\u043B\u0438\u0448\u043A\u043E\u043C \u0432\u044B\u0441\u043E\u043A\u043E\u0435",imageValidateSizeLabelExpectedMinResolution:"\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u0435: {minResolution}",imageValidateSizeLabelExpectedMaxResolution:"\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u0435: {maxResolution}",labelFileTypeNotAllowed:"\u0424\u0430\u0439\u043B \u043D\u0435\u0432\u0435\u0440\u043D\u043E\u0433\u043E \u0442\u0438\u043F\u0430",fileValidateTypeLabelExpectedTypes:"\u041E\u0436\u0438\u0434\u0430\u0435\u0442 {allButLastType} \u0438\u043B\u0438 {lastType}",labelMaxFileSizeExceeded:"\u0424\u0430\u0439\u043B \u0441\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0439",labelMaxFileSize:"\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440 {filesize}",labelMaxTotalFileSizeExceeded:"\u041F\u0440\u0435\u0432\u044B\u0448\u0435\u043D \u043C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u043E\u0431\u0449\u0438\u0439 \u0440\u0430\u0437\u043C\u0435\u0440",labelMaxTotalFileSize:"\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u043E\u0431\u0449\u0438\u0439 \u0440\u0430\u0437\u043C\u0435\u0440 {filesize}"},XI={labelInvalidField:"Field contains invalid files",labelFileWaitingForSize:"Waiting for size",labelFileSizeNotAvailable:"Size not available",labelFileLoading:"Loading",labelFileLoadError:"Error during load",labelFileProcessing:"Uploading",labelFileProcessingComplete:"Upload complete",labelFileProcessingAborted:"Upload cancelled",labelFileProcessingError:"Error during upload",labelFileProcessingRevertError:"Error during revert",labelFileRemoveError:"Error during remove",labelTapToCancel:"tap to cancel",labelTapToRetry:"tap to retry",labelTapToUndo:"tap to undo",labelButtonRemoveItem:"Remove",labelButtonAbortItemLoad:"Abort",labelButtonRetryItemLoad:"Retry",labelButtonAbortItemProcessing:"Cancel",labelButtonUndoItemProcessing:"Undo",labelButtonRetryItemProcessing:"Retry",labelButtonProcessItem:"Upload",imageValidateSizeLabelFormatError:"Image type not supported",imageValidateSizeLabelImageSizeTooSmall:"Image is too small",imageValidateSizeLabelImageSizeTooBig:"Image is too big",imageValidateSizeLabelExpectedMinSize:"Minimum size is {minWidth} \xD7 {minHeight}",imageValidateSizeLabelExpectedMaxSize:"Maximum size is {maxWidth} \xD7 {maxHeight}",imageValidateSizeLabelImageResolutionTooLow:"Resolution is too low",imageValidateSizeLabelImageResolutionTooHigh:"Resolution is too high",imageValidateSizeLabelExpectedMinResolution:"Minimum resolution is {minResolution}",imageValidateSizeLabelExpectedMaxResolution:"Maximum resolution is {maxResolution}",labelFileTypeNotAllowed:"File of invalid type",fileValidateTypeLabelExpectedTypes:"Expects {allButLastType} or {lastType}",labelMaxFileSizeExceeded:"File is too large",labelMaxFileSize:"Maximum file size is {filesize}",labelMaxTotalFileSizeExceeded:"Maximum total size exceeded",labelMaxTotalFileSize:"Maximum total file size is {filesize}"},JI=Object.defineProperty,QI=Object.defineProperties,eO=Object.getOwnPropertyDescriptors,Zl=Object.getOwnPropertySymbols,mv=Object.prototype.hasOwnProperty,fv=Object.prototype.propertyIsEnumerable,pv=(t,e,n)=>e in t?JI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yl=(t,e)=>{for(var n in e||(e={}))mv.call(e,n)&&pv(t,n,e[n]);if(Zl)for(var n of Zl(e))fv.call(e,n)&&pv(t,n,e[n]);return t},bc=(t,e)=>QI(t,eO(e)),tO=(t,e)=>{var n={};for(var o in t)mv.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Zl)for(var o of Zl(t))e.indexOf(o)<0&&fv.call(t,o)&&(n[o]=t[o]);return n};if(Ya()){const t=xe(18236);(0,dv.fo)(t)}const vv={ru:YI,en:XI},Ha="upload",Cc=({_ref:t,className:e,style:n,id:o,isDisabled:a,isExcluded:l,hasActiveMode:i,mode:s,modeSwitch:c,hasError:u,hint:m,dataAttrs:d,value:f,testId:p,events:g,metaSet:w,multiple:h,onFocus:_,onBlur:I,onLoadSuccess:S,onLoadError:E,fileMaxSize:P=10*1024*1024,fileExtMask:b,server:C,onRemoveFile:M})=>{const O=(0,r.useRef)(null),T=t||O,[,D]=Bo(s,c),[L,$]=(0,r.useState)([]),x=(0,r.useMemo)(()=>o||Gn().generate(),[o]),Z=me()(e,Ha,{[`${Ha}_error`]:u,[`${Ha}_disabled`]:a,[`${Ha}_active`]:!a&&D.checkActiveMode()});function A(){return vv[Ke.language]||vv.ru}const F=()=>(0,ZI.renderToString)(r.createElement(r.Fragment,null,r.createElement(wt(),{style:{fontSize:"2em",color:"#000"},name:"upload"}),r.createElement("p",null," \u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u0430\u0439\u043B\u044B \u0438\u043B\u0438 ",r.createElement("span",{className:"filepond--label-action"}," \u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 ")))),z=(0,r.useCallback)(j=>{if(a)return;let U=!0;if(_&&(U=_({event:j,metaSet:w})),U&&(g!=null&&g.onFocus)){const{alias:Y,args:W}=g.onFocus;le[Y]({event:j,metaSet:w,args:W})}U&&T.current.className!=="upload"&&(i?D.setActiveMode():D.setEditableMode())},[a,D,w,g,_,i]),H=(0,r.useCallback)(()=>{let j=!0;if(I&&(j=I({metaSet:w,value:f})),j&&(g!=null&&g.onBlur)){const{alias:U,args:Y}=g.onBlur;le[U]({metaSet:w,args:Y,value:f})}},[w,g,I,f]),K=(0,r.useCallback)(j=>{a||!zo(j.keyCode)||(D.setDefaultMode(),H())},[D,a,H]),G=(0,r.useCallback)((j,U)=>{if(a)return;let Y=!0;if(j){const W=j;if(E&&(Y=E({metaSet:w,value:W})),Y&&(g!=null&&g.onLoadError)){const{alias:oe,args:R}=g.onLoadError;Y=le[oe]({metaSet:w,args:R,value:W})}}else{const W=U;if(S&&(Y=S({metaSet:w,value:W})),Y&&(g!=null&&g.onLoadSuccess)){const{alias:oe,args:R}=g.onLoadSuccess;Y=le[oe]({metaSet:w,args:R,value:W})}}return Y},[a,g,w,E,S]),ee=(0,r.useCallback)(()=>{if(!T.current)return;const j=T.current.querySelector('input[type="file"]');j&&(j.setAttribute("tabIndex","-1"),b!==void 0&&j.setAttribute("accept",`${b}`))},[T]);return(0,r.useEffect)(()=>{f&&$(f.map(j=>{var U=j,{url:Y}=U,W=tO(U,["url"]);return{source:Y,options:{type:"limbo",file:bc(Yl({},W),{url:Y})}}}))},[]),l?null:r.createElement("div",{className:Ha},r.createElement("div",bc(Yl({ref:T},d),{id:x,className:Z,style:n,title:m,"aria-disabled":a,"data-testid":p,onFocus:z,onKeyDown:K}),r.createElement(dv.Q9,Yl({name:"file",instantUpload:!0,allowMultiple:h,maxFileSize:P,allowFileSizeValidation:!0,allowFileTypeValidation:!1,server:C,files:L,onremovefile:(j,U)=>M(U),oninit:ee,onprocessfile:G,labelIdle:F()},A()))))};Cc.propTypes={_ref:v().object,className:v().string,style:v().object,id:v().string,isDisabled:v().bool,isExcluded:v().bool,isStatic:v().bool,hasActiveMode:v().bool,mode:v().string,modeSwitch:v().object,hasError:v().bool,hint:v().string,dataAttrs:v().object,value:v().bool,testId:v().string,tabIndex:v().oneOfType([v().number,v().string]),events:v().object,metaSet:v().object,onClick:v().func,onChange:v().func,onFocus:v().func,onBlur:v().func,multiple:v().bool,fileMaxSize:v().number,server:v().object,onRemoveFile:v().func},Cc.defaultProps={events:null};const nO=(t,e)=>r.createElement(Cc,bc(Yl({},t),{_ref:e}));var gv=(0,r.memo)((0,r.forwardRef)(nO)),rO=Object.defineProperty,hv=Object.getOwnPropertySymbols,oO=Object.prototype.hasOwnProperty,aO=Object.prototype.propertyIsEnumerable,bv=(t,e,n)=>e in t?rO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lO=(t,e)=>{for(var n in e||(e={}))oO.call(e,n)&&bv(t,n,e[n]);if(hv)for(var n of hv(e))aO.call(e,n)&&bv(t,n,e[n]);return t};const sO="simple-html";function yc(t){const{className:e,id:n,dataAttrs:o,isExcluded:a,value:l,style:i,name:s,GUID:c,isFixSize:u}=t,m=(0,r.useMemo)(()=>Pn({isFixSize:u,style:i}),[u,i]);if(a)return null;const d=n||c||s||Gn().generate(),f=me()(e,sO);return r.createElement("div",lO({style:m,className:f,id:d},o),(0,Kn.ZP)(l))}yc.defaultProps={value:"",style:null},yc.propTypes={className:v().string,id:v().string,value:v().string.isRequired,dataAttrs:v().object,style:v().object,name:v().string,GUID:v().string};var iO=(0,r.memo)(yc),cO=Object.defineProperty,uO=Object.defineProperties,dO=Object.getOwnPropertyDescriptors,Cv=Object.getOwnPropertySymbols,mO=Object.prototype.hasOwnProperty,fO=Object.prototype.propertyIsEnumerable,yv=(t,e,n)=>e in t?cO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bt=(t,e)=>{for(var n in e||(e={}))mO.call(e,n)&&yv(t,n,e[n]);if(Cv)for(var n of Cv(e))fO.call(e,n)&&yv(t,n,e[n]);return t},pO=(t,e)=>uO(t,dO(e));function ja(t,e,n=null){const{GUID:o,type:a,isDisabled:l,isExcluded:i,isStatic:s,hint:c,name:u,style:m,events:d,title:f,metaSet:p,dataAttrs:g,onEdit:w}=t;if(i)return null;const h=u||o||Gn().generate(),_=pO(bt({},t),{id:o==null?void 0:o.replace(/\s/g,"_"),style:m,hint:c||f,isDisabled:l,isStatic:s,dataAttrs:bt({"data-guid":o||null,"data-type":a||null,"data-name":u||null},g),metaSet:p,events:d});return _.hasOwnProperty("hasActiveMode")||(a!=="grid"?_.hasActiveMode=!!(d!=null&&d.onEdit||w):_.hasActiveMode=!0),a==="frame"?(_.orientation=t.orientation,r.createElement(bf,bt({key:h,isFixSize:!1,autoSize:!1},_),n)):a==="tabs"?r.createElement(pf,bt({key:h},_),n):a==="box"?r.createElement(Kw,bt({key:h},_),n):a==="group"?r.createElement(Hw,bt({key:h,autoSize:!0},_),n):a==="table"?r.createElement(_4,bt({key:h},_),n):a==="grid"?r.createElement(lI,bt({key:h},_),n):a==="canvasGrid"?r.createElement(qI,bt({key:h},_),n):a==="simpleHtml"?r.createElement(iO,bt({key:h},_)):a==="string"?r.createElement(bn,bt({key:h},_)):a==="button"?r.createElement(Lt,bt({key:h},_)):a==="checkbox"?r.createElement(xl,bt({key:h},_)):a==="number"?r.createElement(tE,bt({key:h},_)):a==="integer"?r.createElement(cE,bt({key:h},_)):a==="date"?r.createElement(NE,bt({key:h},_)):a==="label"?r.createElement(El,bt({key:h},_)):a==="enum"?r.createElement(LE,bt({key:h},_)):a==="menuBar"?r.createElement(qE,bt({key:h},_),n):a==="report"?r.createElement(kS,bt({key:h},_)):a==="listButton"?r.createElement(Km,bt({key:h},_),n):a==="tree"?r.createElement(AS,bt({key:h},_)):a==="pdf"?r.createElement(HS,bt({key:h},_)):a==="img"?r.createElement(XS,bt({key:h},_)):a==="html"?r.createElement(rP,bt({key:h},_)):a==="roleCenter"?r.createElement(fP,bt({key:h},_)):a==="chart"?r.createElement(_P,bt({key:h},_)):a==="upload"?r.createElement(gv,bt({key:h},_)):null}var vO=Object.defineProperty,_v=Object.getOwnPropertySymbols,gO=Object.prototype.hasOwnProperty,hO=Object.prototype.propertyIsEnumerable,wv=(t,e,n)=>e in t?vO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ev=(t,e)=>{for(var n in e||(e={}))gO.call(e,n)&&wv(t,n,e[n]);if(_v)for(var n of _v(e))hO.call(e,n)&&wv(t,n,e[n]);return t};function bO(t,e){function n(o,a){const{type:l,name:i}=o,s=e[l][i]||{},c=a||s.isDisabled,u=o.elements?o.elements.map(m=>n(m,c)):[];return ja(Ev(Ev({},o),s),c,u)}return n(t,!1)}var HM={popperIconSize:"18px"};function CO(t){const{className:e,formId:n,schema:o,entities:a}=t,l=me()(e,"form");return r.createElement("div",{id:n,className:l},r.createElement(wl,null,bO(o,a)))}var _c=(0,r.memo)(CO),jM={popperIconSize:"18px"};const yO=({slide:t,handleSlideClick:e,activeSlidesIds:n,testId:o})=>{const a=t.id==="0",l=a?"caret-down":"times-circle",i={backgroundImage:`url(${Ft(t.icon)})`,backgroundSize:"contain"},s=n===t.id,c=me()("tab-bar__tab-icon",{"tab-bar__tab-icon_close":!a,"tab-bar__tab-icon_role-center":a}),u=me()("tab-bar__tab",{"tab-bar__tab_role-center":a,"tab-bar__tab_active":s}),{show:m}=(0,Wr.av)({id:o,props:{formId:t.id}}),d=f=>{m(f)};return r.createElement("div",{className:u,onClick:e,"data-slide-id":t.id,"data-testid":`${o}__tab`,onContextMenu:d},!a&&t.icon&&r.createElement("span",{className:"tab-bar__tab-slide-icon",style:i}),a?null:r.createElement("span",{className:"tab-bar__tab-title text-ellipsis",title:t.name,"data-testid":`${o}__tab-title`},t.name),r.createElement(wt(),{name:l,className:c,"data-close":a?null:t.id,"data-testid":a?`${o}__tab-icon_role-center`:`${o}__tab-icon`}))};var _O=(0,r.memo)(yO);const wO="tab-bar",EO=[{type:"button",name:"close-form-button",caption:Ke.t("close"),iconName:"times-circle"},{type:"button",name:"all-close-form-button",caption:Ke.t("close_all"),iconName:"times-circle"},{type:"button",name:"others-close-form-button",caption:Ke.t("others_close"),iconName:"times-circle"}],SO=({formId:t,menuItem:e})=>{switch(e){case"close-form-button":Ve.onFormClose({formId:t});break;case"all-close-form-button":Ve.onAllFormClose();break;case"others-close-form-button":Ve.onOthersFormClose({formId:t});break;default:break}};function Sv({className:t,isExcluded:e,tabs:n,activeTabId:o,onTabClick:a,contextMenuTab:l,testId:i}){const s=i||wO,c=l||EO,u=(0,r.useCallback)(({slide:d,handleSlideClick:f,activeSlidesIds:p})=>r.createElement(_O,{slide:d,handleSlideClick:f,activeSlidesIds:p,testId:s}),[]);if(e)return null;const m=me()(t,"tab-bar");return r.createElement("div",{className:m},r.createElement(ki,{className:"tab-bar__slide-bar",slides:n,activeSlidesIds:o,onSlideClick:a,onSlideRender:u,testId:"tab-bar"}),r.createElement(Kp,{itemsContextMenu:c,id:s,handleClickContextMenu:SO}))}Sv.propTypes={className:v().string,tabs:v().arrayOf(v().object).isRequired,activeTabId:v().string,onTabClick:v().func};var PO=(0,r.memo)(Sv),IO=PO,VM={popperIconSize:"18px"},WM={popperIconSize:"18px"};const OO="bread-crumbs";function Pv(t){const{className:e,activeCrumbsIds:n,children:o}=t,a=({slide:s,activeSlidesIds:c})=>{const{id:u}=s,m=c.includes(u);let d="all";c.length===2&&c.includes(u)&&(c[0]===u?d="left":d="right");const f=o==null?void 0:o.find(p=>p.props.id===u);return f?r.cloneElement(f,{activePosition:d,isActive:m}):null},l=me()(e,OO),i=r.Children.map(o,({props:s})=>s);return r.createElement(ki,{className:l,slides:i,activeSlidesIds:n,onSlideRender:a})}Pv.propTypes={className:v().string,isFormsExpanded:v().bool.isRequired,activeCrumbsIds:v().oneOfType([v().array,v().string]).isRequired};var kO=Pv,RO=kO;const xO="bread-crumb";function wc(t){const{isActive:e,id:n,name:o,activePosition:a,metaSet:l,onClick:i,events:s,children:c,onDoubleClick:u,testId:m}=t,d=m||xO,f=(0,r.useCallback)(h=>{let _=!0;const I=n;if(h.detail===1){if(i&&(_=i({event:h,metaSet:l,value:I})),_&&(s!=null&&s.onClick)){const{alias:S,args:E}=s.onClick;le[S]({event:h,metaSet:l,args:E,value:I})}}else if(h.detail===2&&(u&&(_=u({event:h,metaSet:l,value:I})),_&&(s!=null&&s.onDoubleClick))){const{alias:S,args:E}=s.onDoubleClick;le[S]({event:h,metaSet:l,args:E,value:I})}},[n,l,s,i]),p=(0,r.useCallback)(({event:h})=>{h.stopPropagation()},[]),g=me()("bread-crumbs__bread-crumb-wrapper",{"bread-crumbs__bread-crumb-wrapper_active":e,[`bread-crumbs__bread-crumb-wrapper_${a}`]:a!=="all"}),w=me()("bread-crumbs__bread-crumb-options-toggler",{"bread-crumbs__bread-crumb-options-toggler_active":e});return r.createElement("div",{className:"bread-crumbs__bread-crumb-external-wrapper",onClick:f,"data-slide-id":n},r.createElement("div",{className:g,"data-testid":`${d}`},r.createElement("span",{className:"bread-crumbs__bread-crumb",title:o,"data-testid":`${d}_caption`},o),r.createElement(wa,{className:w,dropDownClassName:"bread-crumbs__drop-down",iconName:"caret-down",onClick:p,testId:`${d}_options-button`},c)))}wc.propTypes={isActive:v().bool,onSelect:v().func,id:v().string,name:v().string,options:v().array,activePosition:v().oneOf(["all","left","right"])},wc.defaultProps={isActive:!1,id:"",name:"",options:[],activePosition:"all"};var NO=wc;const Ro=250,Ec=400,DO=t=>{const{children:e,mainCssClass:n,isMainMenuOpened:o}=t,[a,l]=(0,r.useState)(!1),[i,s]=(0,r.useState)({}),[c,u]=(0,r.useState)({gridTemplateColumns:""}),[m,d]=(0,r.useState)(null),f=(0,r.useRef)(),p=`${n}__form-container`,g=me()(p,{[`${p}_double`]:e.length>1}),w=`${n}__delimiter`,h=()=>{l(!1)},_=S=>{S.preventDefault(),ru(),l(!0)},I=S=>{a?(S.preventDefault(),document.body.style.cursor="col-resize",(o?S.clientX-Ec:S.clientX)<Ro?(u({gridTemplateColumns:Ro+"px 4px 1fr"}),d(S.clientX)):(o?S.clientX-Ec:S.clientX)>f.current.clientWidth-Ro?(u({gridTemplateColumns:f.current.clientWidth-Ro+"px 4px 1fr"}),d(S.clientX)):(u({gridTemplateColumns:(o?S.clientX-Ec:S.clientX)+"px 4px 1fr"}),d(S.clientX))):document.body.style.removeProperty("cursor")};return(0,r.useEffect)(()=>(e.length>1?(u(i),document.addEventListener("mouseup",h)):(s(c),u({gridTemplateColumns:""})),()=>{document.removeEventListener("mouseup",h)}),[e.length]),(0,r.useEffect)(()=>{o&&m>f.current.clientWidth-Ro&&u({gridTemplateColumns:f.current.clientWidth-Ro+"px 4px 1fr"})},[o]),r.createElement("div",{ref:f,style:c,className:g,onMouseMove:I},e[0],e.length>1&&r.createElement("div",{key:w,className:w,onMouseDown:_}),e.length>1&&e[1])};function MO({mainAppParams:{menu:t}}){const{isOpened:e}=t;return{isMainMenuOpened:e}}var TO=(0,xn.qC)((0,Xt.$j)(MO),r.memo)(DO),AO=Object.defineProperty,Iv=Object.getOwnPropertySymbols,FO=Object.prototype.hasOwnProperty,BO=Object.prototype.propertyIsEnumerable,Ov=(t,e,n)=>e in t?AO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kv=(t,e)=>{for(var n in e||(e={}))FO.call(e,n)&&Ov(t,n,e[n]);if(Iv)for(var n of Iv(e))BO.call(e,n)&&Ov(t,n,e[n]);return t};function Rv(t,e,n){const o=e.find(({formId:a})=>a===t);n.push(o),o.childFormId&&Rv(o.childFormId,e,n)}function zO(t,e,n){let o=[];if(e.length===1||n)o.push(t);else if(e.length>1)if(e.length===2)o.push(e[0].formId),o.push(e[1].formId);else{const a=e.find(({formId:l})=>l===t);o.push(t),a.parentFormId?o.unshift(a.parentFormId):o.push(a.childFormId)}return o}const LO=({activeFormStackId:t,mainForm:e,forms:n,mainCssClass:o,contentClasses:a,handleFormClose:l,handleFormExpansion:i,handleRaiseForm:s,handleFormActive:c})=>{let u=null;const m=[],d=e.keepMounted&&e.formId!==t;Rv(e.formId,n,m);const f=(m==null?void 0:m.length)<2?!1:e.isWideScreenMode,{showedFormId:p}=e,g=zO(p,m,f),w=g.map(h=>{const _=m.find(({formId:I})=>I===h);return _?r.createElement("div",{key:_.formId,className:`${o}__form-container`},r.createElement(_c,kv({className:`${o}__form`},_))):r.createElement("div",{key:"roleCenterForm",className:`${o}__form-container`},r.createElement(_c,kv({key:e.formId,className:`${o}__form ${o}__form_without-bread-crumbs`},e)))});return u=r.createElement(r.Fragment,null,r.createElement("div",{style:t==="0"?{display:"none"}:null},r.createElement(RO,{className:`${o}__bread-crumbs`,isFormsExpanded:f,activeCrumbsIds:g},m==null?void 0:m.map((h,_)=>{const{formId:I,formName:S}=h;return r.createElement(NO,{key:I,id:I,name:S,metaSet:{isShowed:g.includes(I),isWideScreenMode:f,formId:I,isSingleForm:m.length===1},onClick:c,onDoubleClick:i,testId:Za([S,"bread-crumb"])},_!==0&&r.createElement(Lt,{type:"button",key:"raise-form-button",name:"raise-form-button",caption:Ke.t("raise_form"),metaSet:{formId:I},onClick:s,iconName:"external-link-square"}),m.length>1&&r.createElement(Lt,{type:"button",key:"expand-form-button",name:"expand-form-button",testId:Za([S,"bread-crumb-options","wide-screen-mode-button"]),caption:f?Ke.t("roll_up"):Ke.t("expand"),iconName:f?"compress":"arrows-alt",metaSet:{isWideScreenMode:f,formId:I},onClick:i}),_!==0&&r.createElement(Lt,{type:"button",key:"close-form-button",name:"close-form-button",testId:Za([S,"bread-crumb-options","close-button"]),caption:Ke.t("close"),iconName:"times-circle",metaSet:{formId:I},onClick:l}))}))),r.createElement(TO,{mainCssClass:o},w)),r.createElement("div",{className:a+(d?"__hidden":""),key:e.formName},u)};var $O=(0,r.memo)(LO);const ta="form-stack",HO=ta+"__empty";function xv(t){const{className:e,forms:n=[],activeFormStackId:o,onFormStackClick:a,webUiLanguage:l}=t,i=n[0].entities===void 0,s=!(n.length===1&&i),c=s?me()(e,ta):me()(e,HO),u=n.filter(({openMode:I,formId:S})=>I==="new"&&!(i&&S==="0")).map(({formId:I,formName:S,formIcon:E})=>({id:I,name:S,icon:E})),m=n.filter(({formId:I,keepMounted:S})=>I===o||S===!0),d=`${ta}__content`;let f=d;const p=(0,r.useCallback)(({metaSet:{isShowed:I},value:S})=>{!I&&Ve.onFormActive&&Ve.onFormActive({formStackId:o,formId:S})},[o]),g=(0,r.useCallback)(({event:I,metaSet:S})=>{I.stopPropagation();const{formId:E}=S;Ve.onFormClose&&Ve.onFormClose({formStackId:o,formId:E})},[o]),w=(0,r.useCallback)(({event:I,metaSet:S})=>{I.stopPropagation();const{isWideScreenMode:E,formId:P,isSingleForm:b}=S;b||Ve.onWideScreenModeToggle&&Ve.onWideScreenModeToggle({formId:P,formStackId:o,isWideScreenMode:!E})},[o]),h=(0,r.useCallback)(({event:I,metaSet:S})=>{I.stopPropagation();const{formId:E}=S;Ve.onFormRaise&&Ve.onFormRaise({formId:E})},[]),_=m.length>0&&m.every(I=>I.schema&&I.entities);return r.createElement("div",{className:c},s&&r.createElement(IO,{tabs:u,activeTabId:o,onTabClick:a}),r.createElement(wl,null,_&&m.map(I=>r.createElement($O,{key:I.formName,activeFormStackId:o,mainForm:I,forms:n,contentClasses:f,mainCssClass:ta,handleFormClose:g,handleFormExpansion:w,handleRaiseForm:h,handleFormActive:p})),!_&&r.createElement("div",{className:me()(d,`${f}_empty`)},r.createElement("div",{className:`${ta}__logo ${ta}__logo_${l}`}))))}xv.propTypes={className:v().string,data:v().object};var jO=(0,r.memo)(xv);function UM({singleClick:t,doubleClick:e,delay:n=200}){let o=null;const a=useCallback((...i)=>{const{event:s}=i[0];s.persist(),s.detail===1&&(o=setTimeout(()=>{t(...i)},n))},[t,n]),l=useCallback((...i)=>{clearTimeout(o),e(...i)},[e,n,o]);return[a,l]}const Nv=Xt.I0,VO=Xt.v9;var WO=xe(29119);function Sc(t){if(t&&typeof t=="string"){const e=t.replace(/\D/g,"");return parseInt(e,10)}}var UO=t=>{const{mainCssClass:e,initialStyle:n,canResize:o,children:a,id:l,caption:i}=t,s={width:Sc(n==null?void 0:n.width)||"auto",height:Sc(n==null?void 0:n.height)!==void 0?Sc(n.height)||0+18:"auto"},[c,u]=(0,r.useState)(s);(0,r.useEffect)(()=>{o&&u(s)},[n]);const m=(f,p,g)=>{(g.offsetHeight!==c.height||g.offsetWidth!==c.width)&&u({width:g.offsetWidth,height:g.offsetHeight})};if((0,r.useEffect)(()=>{if(o&&(c.height!==s.height||c.width!==s.width)){const f={height:Math.round(Number(c.height)/4),width:Math.round(Number(c.width)/4)};le.onFormResize({formId:l,formName:i,state:f})}},[c]),o)return r.createElement(WO.e,{maxWidth:"75%",minWidth:"300px",size:{width:c.width,height:c.height},className:`${e}__form`,onResizeStop:m},a);const d=n!=null&&n.width?{}:{maxWidth:"75%",minWidth:"300px"};return r.createElement("div",{className:`${e}__form`,style:d},a)},KM={popperIconSize:"18px"},GO=Object.defineProperty,Dv=Object.getOwnPropertySymbols,KO=Object.prototype.hasOwnProperty,qO=Object.prototype.propertyIsEnumerable,Mv=(t,e,n)=>e in t?GO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ZO=(t,e)=>{for(var n in e||(e={}))KO.call(e,n)&&Mv(t,n,e[n]);if(Dv)for(var n of Dv(e))qO.call(e,n)&&Mv(t,n,e[n]);return t};const Kr="modal-form",Tv=document.getElementById("modal-form"),YO=({className:t,id:e,caption:n,icon:o,onClose:a,isDisabled:l,events:i,metaSet:s,children:c,winCanResize:u,style:m})=>{const d=me()(t,Kr),f=Nv(),{temporaryFormId:p}=VO(_=>_.mainAppParams),g=ZO({},m);delete g.height,delete g.width,(0,r.useEffect)(()=>()=>{e===p&&f(sl(void 0))},[]);const w={backgroundImage:`url(${Ft(o)})`},h=(0,r.useCallback)(_=>{l||Ze({specificEvent:a,nativeEvent:"onClose",event:_,metaSet:s,events:i,value:e})},[i,s,e,l,a]);return Tv&&(0,lo.createPortal)(r.createElement("div",{id:e,className:d},r.createElement(UO,{mainCssClass:Kr,initialStyle:m,canResize:u,id:e,caption:n},r.createElement("div",{className:`${Kr}__title`},r.createElement("span",{className:`${Kr}__icon`,style:w}),r.createElement("span",{className:`${Kr}__caption text-ellipsis`},n),r.createElement(Lt,{name:"closeButton",iconName:"times",className:`${Kr}__close-button`,onClick:h})),r.createElement("div",{className:`${Kr}__content`,style:u?g:m},c)),r.createElement("div",{className:`${Kr}__overlay`})),Tv)};var XO=(0,r.memo)(YO),qM={popperIconSize:"18px"};const qr="upload-form",JO=document.getElementById("upload-form"),QO=({className:t,formId:e,multiple:n,serverConfig:o,fileExtMask:a,fileMaxSize:l,style:i,metaSet:s,isDisabled:c,events:u,onLoadFileSuccess:m,onLoadFileError:d,onUploadApprove:f,onUploadAbort:p})=>{const g=(0,r.useRef)([]),w=me()(t,qr),h=(0,r.useCallback)(({event:P})=>{if(c)return;let b=!0;const C=g.current.map(M=>M.filename);if(f&&(b=f({event:P,metaSet:s,value:C})),b&&(u!=null&&u.onUploadApprove)){const{alias:M,args:O}=u.onUploadApprove;le[M]({event:P,metaSet:s,args:O,value:C})}return b},[c,u,s,f]),_=(0,r.useCallback)(({event:P})=>{if(c)return;let b=!0;const C=g.current.map(M=>M.filename);if(p&&(b=p({event:P,metaSet:s,value:C})),b&&(u!=null&&u.onUploadAbort)){const{alias:M,args:O}=u.onUploadAbort;le[M]({event:P,metaSet:s,args:O,value:C})}return b},[c,u,s,p]),I=(0,r.useCallback)(({value:P})=>{if(c)return;let b=!0;if(g.current.push({filename:P.filename,id:P.id}),m&&(b=m({metaSet:s,value:P})),b&&(u!=null&&u.onLoadFileSuccess)){const{alias:C,args:M}=u.onLoadFileSuccess;le[C]({metaSet:s,args:M,value:P})}return b},[c,u,s,m]),S=P=>{g.current=g.current.filter(b=>b.id!==P.id)},E=(0,r.useCallback)(({value:P})=>{if(c)return;let b=!0;if(d&&(b=d({metaSet:s,value:P})),b&&(u!=null&&u.onLoadFileError)){const{alias:C,args:M}=u.onLoadFileError;le[C]({metaSet:s,args:M,value:P})}return b},[c,u,s,d]);return(0,lo.createPortal)(r.createElement("div",{id:e,className:w},r.createElement("div",{className:`${qr}__upload-window`},r.createElement("p",{className:`${qr}__title`},Ke.t("file_upload")),r.createElement("div",{className:`${qr}__content`,style:i},r.createElement(gv,{onRemoveFile:S,name:"UploadControl",style:{flexGrow:null,width:null,minWidth:null,maxWidth:null},isFixSize:!1,isExcluded:!1,isDisabled:!1,multiple:n,fileExtMask:a,fileMaxSize:l,server:o,onLoadSuccess:I,onLoadError:E}),r.createElement("div",{className:`${qr}__buttons-container`},r.createElement(Lr,{name:"OKButton",hint:"",caption:Ke.t("ok"),iconName:"",isFixSize:!0,isExcluded:!1,isDisabled:!1,onClick:h,className:`${qr}__button`}),r.createElement(Lr,{name:"CancelButton",hint:"",caption:Ke.t("cancel"),iconName:"",isFixSize:!0,isExcluded:!1,isDisabled:!1,onClick:_,className:`${qr}__button`})))),r.createElement("div",{className:`${qr}__overlay`})),JO)};var ek=(0,r.memo)(QO),Pc=xe(1150),ZM={popperIconSize:"18px"},tk=Object.defineProperty,Av=Object.getOwnPropertySymbols,nk=Object.prototype.hasOwnProperty,rk=Object.prototype.propertyIsEnumerable,Fv=(t,e,n)=>e in t?tk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ic=(t,e)=>{for(var n in e||(e={}))nk.call(e,n)&&Fv(t,n,e[n]);if(Av)for(var n of Av(e))rk.call(e,n)&&Fv(t,n,e[n]);return t};const rt="color-picker-form",na=`${rt}__pointer`,ok=document.getElementById("color-picker-form"),ak=()=>r.createElement("div",{className:`${na} ${na}_saturation`}),lk=()=>r.createElement("div",{className:`${na} ${na}_hue`}),sk=()=>r.createElement("div",{className:`${na} ${na}_alpha`}),ik=({isDisabled:t,metaSet:e,onApprove:n,onAbort:o,onError:a,events:l,className:i,id:s,withAlphaChannel:c=!1,value:u})=>{const m=me()(i,rt),d=me()(`${rt}__color-settings`,{[`${rt}__color-settings_w-alpha`]:c}),[f,p]=(0,r.useState)(()=>Xa(u)),g=(0,r.useCallback)(E=>{const P=Xa(E);p(P)},[]),w=(0,r.useCallback)(({value:E})=>{if(E.trim().length===0||E.trim().length%3!==0)p(P=>{const b=Ic({},P);return b.hex=E,b});else{const P=Xa(E);p(P)}},[]),h=(0,r.useCallback)(({metaSet:E,value:P})=>{const b=Ic({},f.rgb);if(P.trim()==="")p(C=>{const M=Ic({},C);return M[E.rgb]="",M});else{b[E.rgb]=P;const C=Xa(b);p(C)}},[f]),_=(0,r.useCallback)((E,P)=>{if(t)return;let b=!0;if(a&&(b=a({event:E,metaSet:e,value:P})),b&&(l!=null&&l.onError)){const{alias:C,args:M}=l.onError;le[C]({event:E,metaSet:e,args:M,value:P})}},[t,a,l,e]),I=(0,r.useCallback)(({event:E})=>{if(t)return;let P=null;if(f.hex.length===3?P=`#${Mh(f.hex)}`:P=`#${f.hex}`,!/^#[0-9A-F]{6}$/i.test(P)){_(E,"invalid_color");return}let C=!0;if(n&&(C=n({event:E,metaSet:e,value:P})),C&&(l!=null&&l.onApprove)){const{alias:M,args:O}=l.onApprove;le[M]({event:E,metaSet:e,args:O,value:P})}},[t,l,e,n,f]),S=(0,r.useCallback)(({event:E})=>{if(t)return;let P=!0;if(o&&(P=o({event:E,metaSet:e})),P&&(l!=null&&l.onAbort)){const{alias:b,args:C}=l.onAbort;le[b]({event:E,metaSet:e,args:C})}},[t,l,e,o]);return(0,lo.createPortal)(r.createElement("div",{id:s,className:m},r.createElement(Nd(),null,r.createElement("div",{className:`${rt}__color-picker`},r.createElement("div",{className:`${rt}__title`},Ke.t("color_selection")),r.createElement("div",{className:`${rt}__content`},r.createElement("div",{className:d},r.createElement("div",{className:`${rt}__saturation`},r.createElement(Pc.OQ,{pointer:ak,direction:"vertical",color:f.hex,hsl:f.hsl,hsv:f.hsv,onChange:g})),r.createElement("div",{className:`${rt}__slider`},r.createElement(Pc.PS,{pointer:lk,direction:"vertical",onChange:g,hsl:f.hsl})),c&&r.createElement("div",{className:`${rt}__slider`},r.createElement(Pc.xV,{pointer:sk,direction:"vertical",rgb:f.rgb,hsl:f.hsl,onChange:g}))),r.createElement("div",{className:`${rt}__details`},r.createElement("div",{className:`${rt}__preview ${rt}__item`},r.createElement("label",{className:`${rt}__label`},"Preview"),r.createElement("div",{style:{backgroundColor:`rgba(${f.rgb.r}, ${f.rgb.g}, ${f.rgb.b}, ${f.rgb.a})`},className:`${rt}__current-color`})),!c&&r.createElement("div",null),r.createElement("div",{className:`${rt}__input-container ${rt}__item`},r.createElement("label",{className:`${rt}__label`},"HEX"),r.createElement(bn,{className:`${rt}__input`,onChange:w,value:f.hex,isControlledValue:!0,controlRegExp:/\s|^[0-9A-F]{0,6}$/i})),c&&r.createElement("div",{className:`${rt}__input-container ${rt}__item`},r.createElement("label",{className:`${rt}__label`},"Alpha"),r.createElement(bn,{metaSet:{rgb:"a"},className:`${rt}__input`,value:f.rgb.a,onChange:h,isControlledValue:!0})),r.createElement("div",{className:`${rt}__input-container ${rt}__item`},r.createElement("label",{className:`${rt}__label`},"Red"),r.createElement(bn,{metaSet:{rgb:"r"},className:`${rt}__input`,value:f.rgb.r,onChange:h,isControlledValue:!0,controlRegExp:/\s|^(\d{0,3})?$/})),r.createElement("div",{className:`${rt}__input-container ${rt}__item`},r.createElement("label",{className:`${rt}__label`},"Green"),r.createElement(bn,{metaSet:{rgb:"g"},className:`${rt}__input`,value:f.rgb.g,onChange:h,isControlledValue:!0,controlRegExp:/\s|^(\d{0,3})?$/})),r.createElement("div",{className:`${rt}__input-container ${rt}__item`},r.createElement("label",{className:`${rt}__label`},"Blue"),r.createElement(bn,{metaSet:{rgb:"b"},className:`${rt}__input`,value:f.rgb.b,onChange:h,isControlledValue:!0,controlRegExp:/\s|^(\d{0,3})?$/}))),r.createElement("div",{className:`${rt}__controls`},r.createElement(Lr,{name:"OKButton",caption:"OK",isFixSize:!0,isExcluded:!1,isDisabled:!1,onClick:I,className:`${rt}__button`}),r.createElement(Lr,{name:"CancelButton",caption:"\u041E\u0442\u043C\u0435\u043D\u0430",isFixSize:!0,isExcluded:!1,isDisabled:!1,onClick:S,className:`${rt}__button`}))))),r.createElement("div",{className:`${rt}__overlay`})),ok)};var ck=(0,r.memo)(ik),YM={popperIconSize:"18px"},uk=Object.defineProperty,dk=Object.defineProperties,mk=Object.getOwnPropertyDescriptors,Bv=Object.getOwnPropertySymbols,fk=Object.prototype.hasOwnProperty,pk=Object.prototype.propertyIsEnumerable,zv=(t,e,n)=>e in t?uk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oc=(t,e)=>{for(var n in e||(e={}))fk.call(e,n)&&zv(t,n,e[n]);if(Bv)for(var n of Bv(e))pk.call(e,n)&&zv(t,n,e[n]);return t},Lv=(t,e)=>dk(t,mk(e));const xo="base-layout";function vk(t){const{className:e,isMainMenuPinned:n,isMainMenuOpened:o,isMainMenuExcluded:a,webUiLanguage:l,forms:i,uploadForm:s,colorPickerForm:c,activeFormStackId:u,toolbarData:m,userName:d,roleName:f,version:p}=t,g=[],w=[],h=Nv();for(const $ in i)if(i.hasOwnProperty($)){const x=i[$];switch(x.openMode){case"modal":g.unshift(x);break;default:w.push(x);break}}const _=g[0],I=(0,r.useCallback)($=>{cl($)&&jd($)&&h(Xs({commandName:"Calculator",controlId:"toolBar",id:"Calculator"}))},[]),S=(0,r.useCallback)(()=>{var $,x;($=Ve)!=null&&$.onMainMenuOpen&&!n&&o&&((x=Ve)==null||x.onMainMenuOpen(!1))},[n,o]),E=(0,r.useCallback)($=>{var x,Z;const{id:A,close:F}=$;F?(Z=Ve)==null||Z.onFormStackClose({formId:A}):(x=Ve)==null||x.onFormStackActive({formId:A})},[]),P=(0,r.useCallback)(({value:$})=>{var x;const{formId:Z}=s;(x=Ve)==null||x.onUploadApprove({formId:Z,fileList:$})},[s]),b=(0,r.useCallback)(({value:$})=>{var x;const{formId:Z}=s;(x=Ve)==null||x.onUploadAbort({formId:Z,fileList:$})},[s]),C=(0,r.useCallback)(({value:$,metaSet:x})=>{var Z;const{formId:A}=x;(Z=Ve)==null||Z.onChooseColorApprove({formId:A,value:$})},[]),M=(0,r.useCallback)(({metaSet:$})=>{var x;const{formId:Z}=$;(x=Ve)==null||x.onChooseColorAbort({formId:Z})},[]),O=(0,r.useCallback)(({value:$,metaSet:{formId:x,controlId:Z}})=>{var A;(A=Ve)==null||A.onClientError({message:$,formId:x,controlId:Z})},[]),T=(0,r.useCallback)(({value:$})=>{var x;(x=Ve)==null||x.onModalFormClose({formId:$})},[]),D=me()(e,xo),L=me()(`${xo}__main-menu-wrapper`,{excluded:!o});return r.createElement("div",{className:D,tabIndex:-1,onKeyDown:I},r.createElement("div",{className:`${xo}__top-area`},r.createElement(sw,{isMainMenuOpen:o,isMainMenuExcluded:a,toolbarData:m,userName:d,roleName:f,version:p})),r.createElement("div",{className:`${xo}__main-area`},r.createElement("div",{className:`${xo}__side-bar`},r.createElement(Ca,{className:L,eventTypes:["click","touchend"],onClickOutside:S,outsideClickIgnoreClass:"header__main-menu-button"},r.createElement(u_,{testId:"main-menu"}))),r.createElement("div",{className:`${xo}__desc-top`},r.createElement(jO,{className:`${xo}__form-stack`,activeFormStackId:u,forms:w,onFormStackClick:E,webUiLanguage:l}))),_&&r.createElement(XO,{onClose:T,caption:_==null?void 0:_.formName,icon:_==null?void 0:_.formIcon,id:_==null?void 0:_.formId,style:_==null?void 0:_.style,winCanResize:_==null?void 0:_.winCanResize},r.createElement(_c,Oc({},_))),s&&r.createElement(ek,Lv(Oc({},s),{onUploadApprove:P,onUploadAbort:b})),c&&r.createElement(ck,Lv(Oc({},c),{onApprove:C,onAbort:M,onError:O})))}var gk=(0,r.memo)(vk);function kc(t){return t.formStackQueue.length?t.formStackQueue[0]:null}const hk="workspace-page";function bk(t){const{isMainMenuPinned:e,isMainMenuOpened:n,isMainMenuExcluded:o,webUiLanguage:a,forms:l,uploadForm:i,colorPickerForm:s,activeFormStackId:c,toolbarData:u,userName:m,roleName:d,version:f,initAppState:p,getForm:g,isFirstRender:w,workspaceSetFirstRender:h}=t,{formType:_,recordId:I}=(0,Rt.UO)(),{search:S}=(0,Rt.TH)(),E=(0,Rt.s0)();return(0,r.useEffect)(()=>{xs()||Ns(m),window.onstorage=function(P){if(P.newValue==="test")return;const b=JSON.parse(P.newValue);switch(P.key){case io.URL_PARAMS:if(xs()===m){const{formType:C,recordId:M,search:O}=b;let T=[];C&&(T.push(C),M&&T.push(M),E("/workspace/"+T.join("/")+O),$h(),alert("\u0421\u0441\u044B\u043B\u043A\u0430 \u043E\u0442\u043A\u0440\u044B\u0442\u0430"))}break;case io.AUTHORIZED:b||Ns(m);break;default:break}}},[]),(0,r.useEffect)(()=>{let P;_&&(P={formType:_},I&&(P.recordId=I),S&&(P.params=S.slice(1))),w?(h(!1),p(P)):P&&g(P)},[_,I,S]),r.createElement(gk,{className:hk,isMainMenuPinned:e,isMainMenuOpened:n,isMainMenuExcluded:o,webUiLanguage:a,forms:l,uploadForm:i,colorPickerForm:s,activeFormStackId:c,toolbarData:u,userName:m,roleName:d,version:f})}function Ck(t){const{authorize:e,mainAppParams:n,forms:o,uploadForm:a,colorPickerForm:l}=t,{version:i,languages:{webUiLanguage:s},toolbar:c,menu:{isOpened:u,isPinned:m,schema:d},workspace:{isFirstRender:f}}=n;return{userName:e.userName,roleName:e.roleName,version:i,webUiLanguage:s,isMainMenuPinned:m,isMainMenuOpened:u,isMainMenuExcluded:!(d!=null&&d.length),toolbarData:c,activeFormStackId:kc(t),forms:o,uploadForm:a,colorPickerForm:l,isFirstRender:f}}var Rc=(0,Xt.$j)(Ck,{initAppState:Bs,getForm:Au,workspaceSetFirstRender:Ju})((0,r.memo)(bk)),XM={popperIconSize:"18px"};const Tt="login-layout",$v=t=>{const{webUiLanguage:e,setLanguagesRequest:n,className:o,serverLanguages:a,isSessionExist:l,isError:i,errorMessage:s,isDisabled:c,onLoginFocus:u,onLoginChange:m,onPasswordChange:d,onLoginSelect:f,onSubmit:p,loginValue:g,passwordValue:w,metaSet:h,events:_,loginList:I,version:S}=t,[E,P]=(0,r.useState)(!1),[b,C]=(0,r.useState)(""),M=(0,r.useRef)(null),O=(0,r.useRef)(null),T=me()(o,Tt),D=(0,r.useCallback)(({value:K})=>P(K),[]),L=(0,r.useCallback)(({event:K})=>{if(c)return;const G={user:gl((M.current.innerText||M.current.value||"").trim()),password:gl(O.current.innerText||O.current.value||""),forceLogin:E,language:e,obf:!0};let ee=!0;if(p&&(ee=p({event:K,metaSet:h,value:G})),ee&&(_!=null&&_.onSubmit)){const{alias:j,args:U}=_.onSubmit;ee=le[j]({event:K,metaSet:h,args:U,value:G})}return ee},[E,e,h,p,_,c]),$=K=>K.icon?r.createElement("img",{className:`${Tt}__language-container-icon`,title:K.name,src:Ft(K.icon),alt:K.name}):"",x=(0,r.useCallback)(K=>{const G=K.currentTarget.dataset.lngCode;n({webUiLanguage:G.toLowerCase()})},[n]),Z=(K,G)=>{const ee=`${Tt}__language-container-code`,j=K?K.map(U=>r.createElement("div",{key:"language-container-code"+U.code,onClick:x,className:`${Tt}__language-container`,"data-lng-code":U.code},r.createElement("button",{className:me()(ee,{[`${ee}_active`]:G===U.code.toLowerCase()})},U.code.toUpperCase()),$(U))):"";return r.createElement("div",{className:`${Tt}__language`},j)},A=(0,r.useCallback)(({event:K})=>{if(c)return;const{value:G}=K.currentTarget;let ee=!0;if(u&&(ee=u({event:K,metaSet:h,value:G})),ee&&(_!=null&&_.onLoginFocus)){const{alias:j,args:U}=_.onLoginFocus;ee=le[j]({event:K,metaSet:h,args:U,value:G})}return ee},[c,h,_,u]),F=(0,r.useCallback)(({event:K,value:{root:G}})=>{if(c)return;let ee=!0;if(f&&(ee=f({event:K,metaSet:h,value:G})),ee&&(_!=null&&_.onLoginSelect)){const{alias:j,args:U}=_.onLoginSelect;ee=le[j]({event:K,metaSet:h,args:U,value:G})}return ee},[c,h,_,f]),z=(0,r.useCallback)(({event:K,value:G})=>{if(C("user"),c)return;let ee=!0;if(m&&(ee=m({event:K,metaSet:h,value:G})),ee&&(_!=null&&_.onLoginChange)){const{alias:j,args:U}=_.onLoginChange;ee=le[j]({event:K,metaSet:h,args:U,value:G})}return ee},[c,h,_,m]),H=(0,r.useCallback)(({event:K,value:G})=>{if(C("password"),c)return;let ee=!0;if(d&&(ee=d({event:K,metaSet:h,value:G})),ee&&(_!=null&&_.onPasswordChange)){const{alias:j,args:U}=_.onPasswordChange;ee=le[j]({event:K,metaSet:h,args:U,value:G})}return ee},[c,h,_,d]);return r.createElement("div",{className:T},Z(a,e),r.createElement("div",{className:`${Tt}__form`},r.createElement("div",{className:me()(`${Tt}__logo`,{[`${Tt}__logo_ru`]:e==="ru",[`${Tt}__logo_en`]:e==="en"})}),r.createElement("form",null,r.createElement("div",{className:`${Tt}__input-container`},r.createElement("label",{className:`${Tt}__label`},Ke.t("login_username")),r.createElement(bn,{name:"username",focusedElement:M,className:`${Tt}__input`,isAutocomplete:!0,listValues:I,onFocus:A,onSelect:F,hasActiveMode:!1,isNameField:!0,isControlledValue:!0,value:g,onChange:z,currentFieldName:b,onEnter:L,testId:"user",metaSet:{stayOnEditableMode:!0}})),r.createElement("div",{className:`${Tt}__input-container`},r.createElement("label",{className:`${Tt}__label`},Ke.t("login_password")),r.createElement(bn,{focusedElement:O,className:`${Tt}__input`,isPassword:!0,testId:"password",onEnter:L,isControlledValue:!0,hasActiveMode:!1,onChange:H,currentFieldName:b,value:w})),l?r.createElement("div",null,r.createElement("label",{className:`${Tt}__force-login-container`},r.createElement(xl,{onChange:D,value:E,className:`${Tt}__force-login-checkbox`}),r.createElement("div",{className:`${Tt}__force-login-caption`},Ke.t("login_disable")))):"",r.createElement("div",{className:`${Tt}__button-container`},r.createElement(Lt,{onClick:L,className:`${Tt}__login-button`,caption:Ke.t("login_enter")}))),i?r.createElement("div",{className:`${Tt}__error`},r.createElement(wt(),{name:"exclamation-triangle",className:`${Tt}__error-icon`}),s||Ke.t("login_session_exist")):""),S&&r.createElement("div",{className:`${Tt}__version`},S))};$v.defaultProps={isDisabled:!1};var yk=$v,JM={popperIconSize:"18px"};const _k="login-page";function wk(t){const{version:e,serverLanguages:n,webUiLanguage:o,isSessionExist:a,isError:l,errorMessage:i,loginRequest:s,setLanguagesRequest:c,addClientError:u}=t,{formType:m,recordId:d}=(0,Rt.UO)(),{search:f}=(0,Rt.TH)(),p=(0,Rt.s0)();(0,r.useEffect)(()=>{Ns(!1),window.onstorage=O=>{O.key===io.AUTHORIZED&&m&&JSON.parse(O.newValue)&&confirm(`\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443 \u0432\u043E \u0432\u043A\u043B\u0430\u0434\u043A\u0435 \u0441 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u043C ${xs()}?`)&&(Hh({formType:m,recordId:d,search:f}),alert("\u041C\u043E\u0436\u0435\u0442\u0435 \u0437\u0430\u043A\u0440\u044B\u0442\u044C \u0442\u0435\u043A\u0443\u0449\u0443\u044E \u0432\u043A\u043B\u0430\u0434\u043A\u0443"),p("/login"))}},[]);const[g,w]=(0,r.useState)([]),[h,_]=(0,r.useState)(""),[I,S]=(0,r.useState)(""),E=(0,r.useCallback)(()=>{const O=lu();return w(O),!0},[]),P=(0,r.useCallback)(({value:O})=>(_(O),!1),[]),b=(0,r.useCallback)(({value:O})=>{_(O);const D=lu().filter(({value:L})=>O===L.slice(0,O.length));return w(D),!0},[]),C=(0,r.useCallback)(({value:O})=>{S(O)},[]),M=(0,r.useCallback)(({value:O})=>O.user===""?(u({message:"error_invalid_username_password"}),!1):(s(O),!0),[s]);return r.createElement(yk,{className:_k,serverLanguages:n,webUiLanguage:o,isSessionExist:a,isError:l,errorMessage:i,loginRequest:s,setLanguagesRequest:c,version:e,onSubmit:M,onLoginFocus:E,onLoginSelect:P,onLoginChange:b,onPasswordChange:C,loginList:g,loginValue:h,passwordValue:I})}function Ek({authorize:t,mainAppParams:e}){const{version:n,languages:{serverLanguages:o,webUiLanguage:a}}=e,{isSessionExist:l,isError:i,errorMessage:s}=t;return{version:n,serverLanguages:o,webUiLanguage:a,isSessionExist:l,isError:i,errorMessage:s}}var xc=(0,Xt.$j)(Ek,{loginRequest:dd,setLanguagesRequest:Qs,addClientError:ol})((0,r.memo)(wk)),Sk=xe(23493),Pk=xe.n(Sk),QM={popperIconSize:"18px"};function Ik(t){const{isUserIntoTab:e,modalPopUp:n,removeModalPopUp:o,setPageZoom:a,appIcon:l}=t,i=(0,r.useCallback)(Pk()(a,500,{trailing:!0}),[a]),{pageZoom:s}=(0,Xt.v9)(m=>m.mainAppParams);(0,r.useEffect)(()=>{Ar(l?Ft(l):yl);const m=()=>{document.activeElement.blur()};return window.addEventListener("blur",m),()=>{window.removeEventListener("blur",m)}},[]),(0,f_.usePinch)(m=>{const d=m.offset[0];if(s===d)return null;d<1?(i(d),document.body.style.touchAction="none",document.body.style.height=`${100/d}%`,document.body.style.width=`${100/d}%`,document.body.style.scale=d):s!==1&&(i(1),document.body.style.touchAction=null,document.body.style.height=null,document.body.style.width=null,document.body.style.scale=null)},{scaleBounds:{min:.25,max:1},pinchOnWheel:!1,target:document.body});const c=(0,r.useCallback)(({id:m})=>{const d=new Event("focus");o({id:m});const{formId:f,controlId:p,rowId:g,rowControlId:w,tableControlId:h}=(n==null?void 0:n[m])||{};if(f&&p){const _=ou({rowId:g,rowControlId:w,tableControlId:h,controlId:p,formId:f});_&&_.dispatchEvent(d)}},[o,n]);if(!Ya())return r.createElement(w_,null);let u=null;return e?u=r.createElement(Rt.Z5,null,r.createElement(Rt.AW,{path:"/login/:formType/:recordId",element:r.createElement(Hr,{to:"/workspace/:formType/:recordId"})}),r.createElement(Rt.AW,{path:"/login/:formType",element:r.createElement(Hr,{to:"/workspace/:formType"})}),r.createElement(Rt.AW,{path:"/login",element:r.createElement(Hr,{to:"/workspace"})}),r.createElement(Rt.AW,{path:"/",element:r.createElement(Hr,{to:"/workspace"})}),r.createElement(Rt.AW,{path:"/workspace/:formType/:recordId",element:r.createElement(Rc,null)}),r.createElement(Rt.AW,{path:"/workspace/:formType",element:r.createElement(Rc,null)}),r.createElement(Rt.AW,{path:"/workspace",element:r.createElement(Rc,null)})):u=r.createElement(Rt.Z5,null,r.createElement(Rt.AW,{path:"/workspace/:formType/:recordId",element:r.createElement(Hr,{to:"/login/:formType/:recordId"})}),r.createElement(Rt.AW,{path:"/workspace/:formType",element:r.createElement(Hr,{to:"/login/:formType"})}),r.createElement(Rt.AW,{path:"/workspace",element:r.createElement(Hr,{to:"/login"})}),r.createElement(Rt.AW,{path:"/",element:r.createElement(Hr,{to:"/login"})}),r.createElement(Rt.AW,{path:"/login/:formType/:recordId",element:r.createElement(xc,null)}),r.createElement(Rt.AW,{path:"/login/:formType",element:r.createElement(xc,null)}),r.createElement(Rt.AW,{path:"/login",element:r.createElement(xc,null)})),r.createElement(r.Fragment,null,r.createElement(P_,null),r.createElement(D_,{modalPopUp:n,onPopUpClose:c}),r.createElement(x_,null),u)}function Ok(t){const{mainAppParams:{app:{appIcon:e}},authorize:{isUserIntoTab:n},modalPopUp:o}=t;return{isUserIntoTab:n,modalPopUp:o,appIcon:e}}var kk=(0,Xt.$j)(Ok,{removeModalPopUp:ju,setPageZoom:Qu})(Ik),q=xe(34857);function Hv(t){return t.authorize}var Rk=Object.defineProperty,xk=Object.defineProperties,Nk=Object.getOwnPropertyDescriptors,Xl=Object.getOwnPropertySymbols,jv=Object.prototype.hasOwnProperty,Vv=Object.prototype.propertyIsEnumerable,Wv=(t,e,n)=>e in t?Rk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dk=(t,e)=>{for(var n in e||(e={}))jv.call(e,n)&&Wv(t,n,e[n]);if(Xl)for(var n of Xl(e))Vv.call(e,n)&&Wv(t,n,e[n]);return t},Mk=(t,e)=>xk(t,Nk(e)),Tk=(t,e)=>{var n={};for(var o in t)jv.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Xl)for(var o of Xl(t))e.indexOf(o)<0&&Vv.call(t,o)&&(n[o]=t[o]);return n};function Nc(t){const e={schema:[],entities:{}};function n(o){return o==null?void 0:o.map(a=>{const l=a,{type:i,name:s,elements:c}=l,u=Tk(l,["type","name","elements"]),m={type:i,name:s};return e.entities[i]||(e.entities[i]={}),e.entities[i][s]=Mk(Dk({},u),{name:s,type:i}),c!=null&&c.length&&(m.elements=n(a.elements)),m})}return e.schema=n(t.elements),e}var Ak=xe(30236),Dc=xe.n(Ak),Fk=xe(82492),Uv=xe.n(Fk),Bk=Object.defineProperty,Jl=Object.getOwnPropertySymbols,Gv=Object.prototype.hasOwnProperty,Kv=Object.prototype.propertyIsEnumerable,qv=(t,e,n)=>e in t?Bk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nr=(t,e)=>{for(var n in e||(e={}))Gv.call(e,n)&&qv(t,n,e[n]);if(Jl)for(var n of Jl(e))Kv.call(e,n)&&qv(t,n,e[n]);return t},Ql=(t,e)=>{var n={};for(var o in t)Gv.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Jl)for(var o of Jl(t))e.indexOf(o)<0&&Kv.call(t,o)&&(n[o]=t[o]);return n};function zk({source:t,expandedNodeId:e,insert:n}){var o;if(!t)return n;const a=uo({source:t,iterationKey:"children",searchValue:e,searchKey:"nodeId"});if(!a||!n)return t;if((o=a.children)!=null&&o.length){let l=[...co(n)];const i=a.children.map(function(s){const c=l.find(m=>m.nodeId===s.nodeId);let u;if(c){const m=c,{GUID:d}=m,f=Ql(m,["GUID"]);u=nr(nr({},s),f),l=l.filter(p=>p.nodeId!==c.nodeId)}return u});a.children=[...i,...l]}else a.children=co(n);return t}function Lk(...t){if(t.length===0)return null;if(t.length===1)return t[0];const[e,...n]=t;let o=e;return n.forEach(function(a){const{expandedNodeId:l,currentNodeId:i,forceUpdate:s}=a;i&&(o.currentNodeId=i),s&&(o.nodes=a.nodes),l&&!s&&(o.nodes=zk({source:o.nodes,expandedNodeId:l,insert:a.nodes}),delete a.nodes),a.updates&&(a.updates.forEach(c=>{const u=uo({source:o.nodes,iterationKey:"children",searchValue:c.nodeId,searchKey:"nodeId"});u&&Object.assign(u,c)}),delete a.updates),o=Uv()(o,a)}),o}function $k(...t){if(t.length===0)return null;if(t.length===1){const a=t[0];return delete a.needForceUpdate,delete a.expandedNodeId,a}let[e,...n]=t,o=e;return n.forEach(function(a){const l=a,{expandedNodeId:i,currentNodeId:s,entities:c,bindings:u,openNodesIds:m,needForceUpdate:d}=l,f=Ql(l,["expandedNodeId","currentNodeId","entities","bindings","openNodesIds","needForceUpdate"]);if(d){o=a,delete o.needForceUpdate,delete o.expandedNodeId;return}s&&(o.currentNodeId=s),i?a.schema?(o.entities=nr(nr({},o.entities),a.entities),o.bindings=nr(nr({},o.bindings),a.bindings),o.openNodesIds=[...Array.from(new Set([...o.openNodesIds||[],...a.openNodesIds||[],i]))]):o.entities[i].isExpansible=!1:(o.schema=nr({},a.schema),o.entities=nr({},a.entities),o.bindings=nr({},a.bindings),a.openNodesIds&&(o.openNodesIds=[...a.openNodesIds])),o=Uv()(o,f)}),o}function Hk(t,e){const n=t,{expandedNodeId:o,elements:a,currentNodeId:l,name:i,type:s}=n,c=Ql(n,["expandedNodeId","elements","currentNodeId","name","type"]),u={},m={},d=[];let f;function p(w){if(!w)return null;const h=w,{nodeId:_,elements:I,toggled:S}=h,E=Ql(h,["nodeId","elements","toggled"]),P=Ka({nodeId:_});return m[_]=P.GUID,u[_]=nr({},E),S&&d.push(_),I!=null&&I.length&&(P.elements=I.map(p)),P}const g=a==null?void 0:a.length;return g&&(g===1?f=p(a[0]):f=a.map(p)),nr({schema:f,entities:u,bindings:m,openNodesIds:d,expandedNodeId:o,currentNodeId:l,name:i,type:s,events:kn({stateElement:t,type:s,formData:e})},c)}var jk=Object.defineProperty,Vk=Object.defineProperties,Wk=Object.getOwnPropertyDescriptors,Zv=Object.getOwnPropertySymbols,Uk=Object.prototype.hasOwnProperty,Gk=Object.prototype.propertyIsEnumerable,Yv=(t,e,n)=>e in t?jk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,st=(t,e)=>{for(var n in e||(e={}))Uk.call(e,n)&&Yv(t,n,e[n]);if(Zv)for(var n of Zv(e))Gk.call(e,n)&&Yv(t,n,e[n]);return t},Jt=(t,e)=>Vk(t,Wk(e));function Kk(...t){if(t.length===0)return null;if(t.length===1)return t[0];const[e,n,...o]=t,a=o.flat();let l=e;const i=l.rows.flat(),s=i.length&&i.reduce((u,m)=>{var d;const f=m.elements;return f!=null&&f.name&&(u[f.name]=m.elements,f.type==="listButton"&&((d=u[f.name].elements)==null||d.forEach(p=>{const g=a.find(w=>w.name===p.name);g&&Object.assign(p,g)}))),u},{}),c=Object.keys(s).reduce((u,m)=>{var d;let f=a.find(g=>g.name===m);f===void 0&&((d=s[m])==null?void 0:d.type)==="button"&&(f=l==null?void 0:l.columnsData[m]);const p=s[m];return p&&(u[m]=st(st({},p),f)),u},{});if(n.isDifferenceUpdate){const u=n.rowsData,m=l.rowsData;u!=null&&u.length&&u.forEach(d=>{const f=m.findIndex(p=>p.rowId===d.rowId);f!==-1?m[f]=d:m.push(d)}),n.rowsData=m}return delete n.isDifferenceUpdate,Jt(st(st({},l),n),{columnsData:c})}function qk(t,e){if(!t&&!e)return null;let n=e?JSON.parse(JSON.stringify(e)):t;return e&&t.currentColumnId&&(n.currentColumnId=t.currentColumnId),e&&Object.keys(t).length&&(n.columnsData.forEach((o,a)=>{o.style.width||(o.style.width=t.columnsData[a].style.width)}),n.rowsData.forEach((o,a)=>{Object.keys(o).forEach(l=>{var i,s,c;const u=o[l];typeof u=="object"&&u.isDisabledByAutolock===void 0&&(u.isDisabledByAutolock=(c=(s=(i=t.rowsData)==null?void 0:i[a])==null?void 0:s[l])==null?void 0:c.isDisabledByAutolock)})})),n}function Zk(t,e,n=null){var o,a,l;const i=st({},t),{name:s,isCardFile:c,isInPlaceEdit:u,headersEntities:m,actions:d,initialValue:f,rowsData:p,selectedRowIds:g,currentRowId:w,showServiceRow:h,columnsData:_}=i;if(m!=null&&m.length){const F=i.headersEntities.flat(1).map(z=>(0,xn.qC)(H=>(H.isFixSize=!!H.isFixSize,H),H=>Ut(H))(z));i.headersEntities=xh(F,"name")}f||(i.initialValue={currentRowId:null,selectedRowIds:null}),p!=null&&p.length&&(i.rowsData=p.map(Ut));const I=st({type:"table",controlId:s},e),S=c&&u;i.events={onEnter:(d==null?void 0:d.includes("onEnter"))&&{alias:"onFormControlEvent",args:Jt(st({},I),{action:"onEnter"})},onHierarchyButtonClick:(d==null?void 0:d.includes("hierarchyUp"))&&{alias:"onFormControlEvent",args:Jt(st({},I),{action:"hierarchyUp"})},onClickIcon:(d==null?void 0:d.includes("clickIcon"))&&{alias:"onFormControlEvent",args:Jt(st({},I),{action:"clickIcon"})},onRowsSelect:c&&{alias:"onFormControlEvent",args:I},onCellClick:{alias:"onFormControlEvent",args:I},onCellControlEvent:{alias:"onTableCellControlAction",args:I},onNavigation:{alias:"onFormControlEvent",args:Jt(st({},I),{isEditableCardFile:S,action:"onNavigation"})},onMove:(d==null?void 0:d.includes("onMove"))&&{alias:"onFormControlEvent",args:Jt(st({},I),{action:"onMove",isEditableCardFile:S})},onControlResize:{alias:"onTableHeaderResize",args:st({},I)},onRowsBlur:{alias:"onFormControlEvent",args:Jt(st({},I),{isEditableCardFile:S,action:"onRowsBlur"})},onRowCounterClick:i.summaryRowCount&&{alias:"onFormControlEvent",args:Jt(st({},I),{action:"onSummaryClick"})},onDoubleClick:(d==null?void 0:d.includes("onDblClick"))&&{alias:"onFormControlEvent",args:Jt(st({},I),{action:"onDblClick"})},onStartPageMove:(d==null?void 0:d.includes("onTop"))&&{alias:"onFormControlEvent",args:Jt(st({},I),{action:"onTop"})},onEndPageMove:(d==null?void 0:d.includes("onBottom"))&&{alias:"onFormControlEvent",args:Jt(st({},I),{action:"onBottom"})},onPrevPageMove:(d==null?void 0:d.includes("onPgUp"))&&{alias:"onFormControlEvent",args:Jt(st({},I),{action:"onPgUp"})},onNextPageMove:(d==null?void 0:d.includes("onPgDn"))&&{alias:"onFormControlEvent",args:Jt(st({},I),{action:"onPgDn"})},onMenuItemSelect:{alias:"onFormControlEvent",args:Jt(st({},I),{action:"onMenuItemSelect"})},onHeaderClick:{alias:"onFormControlEvent",args:Jt(st({},I),{action:"onHeaderClick"})},onHeaderCtxMenu:{alias:"onHeaderCtxMenu",args:Jt(st({},I),{action:"onHeaderCtxMenu"})},onCloseHeaderCtxMenu:{alias:"onCloseHeaderCtxMenu",args:Jt(st({},I),{action:"onCloseHeaderCtxMenu"})},onHeaderCtxMenuClick:{alias:"onFormControlEvent",args:Jt(st({},I),{action:"onHeaderCtxMenuClick"})}};const E=i.headersSchema.map(A=>A.filter(z=>{var H;return!((H=i.headersEntities[z.name])!=null&&H.isExcluded)}).map(z=>{const H=st(st({},z),i.headersEntities[z.name]);return st({},H)})),P=E.map(A=>({isZeroHeightRow:A.every(z=>z.invisibleBorders)}));function b(){return P.filter(A=>!A.isZeroHeightRow).length}function C(A){var F;let z=0,H=A.rowspan||1;const K=(F=A==null?void 0:A.linkedColumns)==null?void 0:F.filter(G=>G!==A.name);if(K!=null&&K.length&&E.forEach(G=>{const ee=G.filter(j=>K.includes(j.name)&&j.invisibleBorders);ee!=null&&ee.length?++H:H===b()&&--H}),A.linkedColumns=K,!A.invisibleBorders)for(let G=0;G<H;G++)P[G].isZeroHeightRow||++z;return z}const M=E.map((A,F)=>A.map(z=>{const H=C(z);return st({rowIndex:F,heightMultiplier:H},z)})),O=[...M].flat();function T(A){A.forEach(F=>{var z;const H=F.control;(z=H==null?void 0:H.actions)!=null&&z.length&&(H.events=kn({type:H.type,stateElement:H,simplePair:!0,formData:e}),delete H.actions)})}function D({headerSchema:A,entities:F,rows:z,columnsInState:H}){const K=[];function G(j){return ua(j)}function ee(j){F.filter(Y=>j.includes(Y.name)).forEach(({style:Y,name:W,isDisabled:oe,isFixSize:R,linkedColumns:N,showReferenceButton:X})=>{let ne={},ae=null;const ce=z.find(Ce=>Ce.elements.name===W);if(ce){const{style:Ce,elements:ie}=ce;ne=Ce||{},ae=ie||{}}let be=H[W];be&&(ae=st(st({},ae),be)),X&&ae&&(ae.showReferenceButton=X);const _e=N==null?void 0:N.filter(Ce=>F.some(({name:ie})=>ie===Ce));if(_e!=null&&_e.length)ee(N);else{const Ce={name:W,isDisabled:oe,isFixSize:R,control:G(ae),style:st(st({},ne),Y)};K.push(Ce)}})}return ee(A),K}function L(A,F){function z(H){return F.filter(G=>H.includes(G.name)).map(G=>{var ee,j;const[U,Y]=Rh(G.style);if(G.style=Y,G.events=G.actions,delete G.actions,G.sizes={fixedSize:[],proportionalSize:[]},(ee=G==null?void 0:G.linkedColumns)!=null&&ee.length&&(G.linkedColumns=G.linkedColumns.filter(W=>F.some(({name:oe})=>oe===W))),(j=G==null?void 0:G.linkedColumns)!=null&&j.length){const W=z(G.linkedColumns);W.reduce((oe,R)=>(oe.fixedSize=oe.fixedSize.concat(R.sizes.fixedSize),oe.proportionalSize=oe.proportionalSize.concat(R.sizes.proportionalSize),oe),G.sizes),G.linkedColumns=W.filter(oe=>!oe.invisibleBorders),G.insideColumns=W.filter(oe=>oe.invisibleBorders)}else G.isFixSize?G.sizes.fixedSize=[parseFloat(U.width)]:G.sizes.proportionalSize=[parseFloat(U.width)];return G})}return z(A)}function $(A,F){return A.map((z,H)=>{const K={};return F.forEach(G=>{var ee;let j=z[G.name];if(G.name.includes("rowIndex"))j={value:z.rowIndex||H};else switch(typeof j){case"object":if(((ee=G.control)==null?void 0:ee.type)==="enum"){!j.listValues&&G.control.listValues&&(j.listValues=G.control.listValues);const U=zc(st(st({},G.control),j),e,!1);j=Ut(U)}else j=Ut(Jt(st({},j),{initialValue:j.value}));break;case"boolean":j={value:!!j,initialValue:!!j};break;default:j={}}K[G.name]=j}),K.rowId=z.rowId,K.iconName=z.iconName,K})}const x=(o=M[0])==null?void 0:o.map(A=>A.name),Z=D({headerSchema:x,entities:O,rows:i.rows,columnsInState:_});if(T(Z),i.columnsData=Z,i.headersData=L(x,O),i.rowsData=$(i.rowsData,i.columnsData),i.headerHeightMultiplier=P.filter(A=>!A.isZeroHeightRow).length,h&&!((a=i.rowsData)!=null&&a.length)){const A={rowId:"serviceRow"};i.columnsData.map(F=>{const z=n==null?void 0:n.find(H=>H.name===F.name);A[F.name]={value:"",initialValue:"",style:z==null?void 0:z.style}}),i.rowsData.push(A),i.displayRowCount+=1}return g!=null&&g.length?i.initialValue.selectedRowIds=[...i.selectedRowIds]:(i.selectedRowIds=[],i.initialValue.selectedRowIds=[]),!w&&i.rowsData.length?i.currentRowId=i.rowsData[0].rowId:i.currentRowId=((l=i.currentRowId)==null?void 0:l.toString())||null,i.initialValue.currentRowId||(i.initialValue.currentRowId=i.currentRowId),c&&(i.currentColumnId=Z!=null&&Z.length?Z[0].name:null),delete i.actions,delete i.rows,delete i.headersSchema,delete i.headersEntities,i}var Yk=Object.defineProperty,Xk=Object.defineProperties,Jk=Object.getOwnPropertyDescriptors,Xv=Object.getOwnPropertySymbols,Qk=Object.prototype.hasOwnProperty,eR=Object.prototype.propertyIsEnumerable,Jv=(t,e,n)=>e in t?Yk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rr=(t,e)=>{for(var n in e||(e={}))Qk.call(e,n)&&Jv(t,n,e[n]);if(Xv)for(var n of Xv(e))eR.call(e,n)&&Jv(t,n,e[n]);return t},ra=(t,e)=>Xk(t,Jk(e));function tR(...t){var e;if(t.length===0)return null;if(t.length===1)return t[0];const[n,o]=t;let a=n;if(o.isDifferenceUpdate){const l=o.cells,i=a.cells;if(l&&((e=Object.keys(l))!=null&&e.length))for(const s in l)l.hasOwnProperty(s)&&(i[s]||(i[s]={}),Dc()(i[s],l[s]));o.cells=i}return delete o.isDifferenceUpdate,a=rr(rr({},a),o),a}function nR(t,e){if(!t&&!e)return null;let n=e||t;return e&&(n.currentColumnId=t.currentColumnId||null,n.currentRowId=t.currentRowId||null),n}function rR(t,e,n){const o=Object.keys(t),a={},l=ks(e);return o.forEach(i=>{l.forEach(s=>{var c;let u=t[i][s.id];switch(typeof u){case"object":if(((c=s.control)==null?void 0:c.type)==="enum"){!u.listValues&&s.control.listValues&&(u.listValues=s.control.listValues);const m=zc(rr(rr({},s.control),u),n,!1);u=Ut(m)}else u=Ut(ra(rr({},u),{initialValue:u.value}));break;case"boolean":u={value:!!u,initialValue:!!u};break;default:u={}}a[i]=ra(rr({},a[i]),{[s.id]:u})})}),a}function oR(t,e){const n=ra(rr({},t),{currentColumnId:null,currentRowId:null}),{name:o}=n,a=rr({type:"grid",controlId:o},e);return n.events={onHeaderEvent:{alias:"onFormControlEvent",args:ra(rr({},a),{action:"onHeaderEvent"})},onPasteEvent:{alias:"onFormControlEvent",args:ra(rr({},a),{action:"onPasteCells"})},onCellControlEvent:{alias:"onGridCellEvent",args:a},onNavigation:{alias:"onFormControlEvent",args:a},onLoadData:{alias:"onFormControlEvent",args:ra(rr({},a),{action:"onLoadData",showIndicator:!1})}},n.cells=rR(n.cells,n.columns,e),n}var aR=Object.defineProperty,lR=Object.defineProperties,sR=Object.getOwnPropertyDescriptors,Qv=Object.getOwnPropertySymbols,iR=Object.prototype.hasOwnProperty,cR=Object.prototype.propertyIsEnumerable,eg=(t,e,n)=>e in t?aR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vn=(t,e)=>{for(var n in e||(e={}))iR.call(e,n)&&eg(t,n,e[n]);if(Qv)for(var n of Qv(e))cR.call(e,n)&&eg(t,n,e[n]);return t},kr=(t,e)=>lR(t,sR(e));const uR=(t,e)=>{if(!t&&!e)return[];if(!t&&e)return e;if(t&&!e)return t;if(t&&e&&Array.isArray(t)&&Array.isArray(e))return[...t,...e]};function dR(t,e){if(!t&&!e)return null;let n=e||t;const o=t.gridMatrix||[],a=e.gridMatrix||[],l=[];if(e.isDifferenceUpdate===!1)return delete e.isDifferenceUpdate,e;if(e){const i=Math.max(o.length,a.length);for(let s=0;s<i;s++)if(a[s]===void 0&&o[s]!==void 0)l[s]=o[s];else if(a[s]&&o[s]){l[s]=[];const c=Math.max(o[s].length,a[s].length);for(let u=0;u<c;u++)l[s][u]=a[s][u]===!0&&typeof o[s][u]=="object"?o[s][u]:a[s][u]||o[s][u]}else a[s]!==void 0&&o[s]===void 0&&(l[s]=a[s]);n.gridMatrix=l}return n}function mR(...t){if(t.length===0)return null;if(t.length===1)return t[0];const[e,n]=t;let o=e;if(n.isDifferenceUpdate!==!1){const a=n.cells,l=o.cells,i=n.styles,s=o.styles,c=n.controls,u=o.controls;n.cells=uR(l,a),n.styles=vn(vn({},s),i),n.controls=vn(vn({},u),c)}else o.cols=n.cols,o.rows=n.rows;return o=vn(vn({},o),n),o}function fR(t,e){const{cells:n,viewBox:o}=t;let a;if(o){a=new Array(o[3]-1);for(let u=o[1]-1;u<o[3];u++)a[u]=new Array(o[2]),a[u].fill(!0,o[0]-1,o[2]);n&&n.length&&n.forEach(u=>{a[u.Y-1]||(a[u.Y-1]=[]),a[u.Y-1][u.X-1]=u})}t.hasOwnProperty("cells")&&delete t.cells;const l=kr(vn({},t),{gridMatrix:a}),{name:i,type:s}=l,c=vn({type:s,controlId:i},e);return l.events={onPasteEvent:{alias:"onFormControlEvent",args:kr(vn({},c),{action:"onPasteCells"})},onEnter:{alias:"onCanvasGridCellEvent",args:kr(vn({},c),{action:"onEnter"})},onEdit:{alias:"onCanvasGridCellEvent",args:kr(vn({},c),{action:"onEdit"})},onClick:{alias:"onCanvasGridCellEvent",args:kr(vn({},c),{action:"onClick"})},onDoubleClick:{alias:"onCanvasGridCellEvent",args:kr(vn({},c),{action:"onDblClick"})},onLookup:{alias:"onCanvasGridCellEvent",args:kr(vn({},c),{action:"onLookup"})},onNavigation:{alias:"onCanvasGridCellEvent",args:kr(vn({},c),{action:"onNavigation"})},onLoadData:{alias:"onFormControlEvent",args:kr(vn({},c),{action:"onLoadData",showIndicator:!1})}},l}var pR=Object.defineProperty,vR=Object.defineProperties,gR=Object.getOwnPropertyDescriptors,tg=Object.getOwnPropertySymbols,hR=Object.prototype.hasOwnProperty,bR=Object.prototype.propertyIsEnumerable,ng=(t,e,n)=>e in t?pR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,es=(t,e)=>{for(var n in e||(e={}))hR.call(e,n)&&ng(t,n,e[n]);if(tg)for(var n of tg(e))bR.call(e,n)&&ng(t,n,e[n]);return t},ts=(t,e)=>vR(t,gR(e));function kn({type:t,stateElement:e,formData:n={},simplePair:o=!1,parentTabs:a}){var l,i;let s=(l=e.actions)!=null&&l.length?[...e.actions]:[];return["checkbox"].includes(t)&&!s.includes("onChange")&&s.push("onChange"),["string","number","integer","enum","date","checkbox"].includes(t)&&(s.push("onImplicitChange"),s.push("onEnter")),["string","date","enum","number"].includes(t)&&s.push("onAutolock"),(t==="enum"||t==="string"&&((i=e.actions)!=null&&i.includes("onLookup"))&&e.isAutocomplete)&&(s.push("onSelect"),s.push("onChange"),e.isAutocomplete&&!e.isInteger&&(s.push("onResetAutocompleteValues"),s.push("onImmediatelyAutoComplete"))),["string","number","integer","enum","date"].includes(t)&&s.push("onDelete"),t==="box"&&s.push("onToggle"),t==="tabs"&&s.push("onClick"),t==="report"&&(s=["onClick","onDblClick","onCellSelect","onExpand","onCollapse"]),["html","frame","report"].includes(t)&&s.push("saveContent"),s.reduce((u,m)=>{let d=m,f=m,p=m,g=ts(es({type:t,controlId:e.name},n),{action:p});if(m==="onChange")switch(t){case"checkbox":f="onFormControlEvent",p="onChange";break;case"enum":case"string":case"number":case"integer":f="onAutoComplete",p="autoComplete";break;case"tree":f="onFormControlEvent",d="onSelect",p=fo(e,m);break;case"tabs":f="onFormControlEvent",d="onChange",p=fo(e,m),g.skipDiffs=!1,g.parentType=a;break;default:break}else if(m==="onClick")switch(t){case"listButton":case"label":case"img":case"button":f="onFormControlEvent";break;case"tabs":f="onFormControlEvent",p=null,g.skipDiffs=!1,g.parentType=a;break;case"report":f="onFormControlEvent",d="onClick";break;default:break}else if(m==="onDblClick")switch(t){case"tree":f="onFormControlEvent",d="onDoubleClick",p=fo(e,m);break;case"report":case"img":f="onFormControlEvent",d="onDoubleClick";break;default:f="onFormControlEvent",d="onDoubleClick";break}else if(m==="onSelect")switch(t){case"string":case"number":case"integer":case"enum":f="onFormControlEvent",p="onEnter";break;default:break}else if(m==="onImplicitChange")switch(t){case"string":case"number":case"integer":case"enum":case"date":case"checkbox":f="onFormControlEvent",p="onEnter",g.checkResponse=t==="string"&&e.showButton;break;default:break}else if(m==="onEnter")switch(t){case"string":case"number":case"integer":case"enum":case"date":f="onFormControlEvent",p="onEnter",g.checkResponse=t==="string"&&e.showButton;break;default:break}else if(m==="onLookup")f="onFormControlEvent";else if(m==="onImmediatelyAutoComplete")p="autoComplete";else if(m==="onDelete")f="onFormControlEvent",g.skipDiffs=!0;else if(m==="onToggle")t==="box"&&(f="onFormControlEvent",p="changeSpoiler");else if(m==="loadData")switch(t){case"frame":case"box":f="onFormControlEvent",d="onLoadData",p=fo(e,m);break;default:break}else if(m==="onExpand")switch(t){case"tree":f="onFormControlEvent",d="onToggle",p=fo(e,m);break;case"report":f="onReportHierarchyClick";break;default:break}else if(m==="onCollapse")switch(t){case"report":f="onReportHierarchyClick";break;default:break}else if(m==="onCellSelect")switch(t){case"report":f="onReportCellSelect",p=null;break;default:break}else if(m==="saveContent")switch(t){case"html":f="onSaveContentIframe",p=null;break;case"report":f="onSaveDataReport",p=null;break;case"frame":f="onSaveDataFrame",p=null;break;default:break}else m==="onEdit"?(f="checkEditableValidation",p=fo(e,m)):m==="onHint"&&(f="onHintControl",p=fo(e,m));return o?ts(es({},u),{[d]:p}):ts(es({},u),{[d]:{alias:f,args:ts(es({},g),{action:p})}})},{})}var CR=Object.defineProperty,ns=Object.getOwnPropertySymbols,rg=Object.prototype.hasOwnProperty,og=Object.prototype.propertyIsEnumerable,ag=(t,e,n)=>e in t?CR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mc=(t,e)=>{for(var n in e||(e={}))rg.call(e,n)&&ag(t,n,e[n]);if(ns)for(var n of ns(e))og.call(e,n)&&ag(t,n,e[n]);return t},lg=(t,e)=>{var n={};for(var o in t)rg.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&ns)for(var o of ns(t))e.indexOf(o)<0&&og.call(t,o)&&(n[o]=t[o]);return n};function yR(t){let e={};function n(a){const l=a,{GUID:i,name:s,elements:c}=l,u=lg(l,["GUID","name","elements"]),m={name:s,GUID:i},d=Mc({GUID:i,name:s},u);return e[s]=d,c&&(m.elements=c.map(n)),m}return{schema:t.map(n),entities:e}}function _R(t,e){const n=t,{elements:o,buttonsAfter:a,buttonsBefore:l}=n,i=lg(n,["elements","buttonsAfter","buttonsBefore"]);if(!(o!=null&&o.length))return Mc({},t);const{schema:s,entities:c}=yR(o),u=m=>{const d=Ut(m);return d!=null&&d.elements?d.elements=d.elements.map(f=>{let p=Ut(f);return p.events=kn({stateElement:p,type:p.type,formData:{formId:"0",formName:e.formName,roleCenterFormId:e.formId}}),p}):d.events=kn({stateElement:d,type:d.type,formData:{formId:"0",formName:e.formName,roleCenterFormId:e.formId}}),d};if(l!=null&&l.length)for(let m=0;m<l.length;m++)l[m]=u(l[m],e.formId);if(a!=null&&a.length)for(let m=0;m<a.length;m++)a[m]=u(a[m],e.formId);return Mc({schema:s,entities:c,buttonsAfter:a,buttonsBefore:l},i)}var wR=Object.defineProperty,ER=Object.defineProperties,SR=Object.getOwnPropertyDescriptors,rs=Object.getOwnPropertySymbols,sg=Object.prototype.hasOwnProperty,ig=Object.prototype.propertyIsEnumerable,cg=(t,e,n)=>e in t?wR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ug=(t,e)=>{for(var n in e||(e={}))sg.call(e,n)&&cg(t,n,e[n]);if(rs)for(var n of rs(e))ig.call(e,n)&&cg(t,n,e[n]);return t},PR=(t,e)=>ER(t,SR(e)),IR=(t,e)=>{var n={};for(var o in t)sg.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&rs)for(var o of rs(t))e.indexOf(o)<0&&ig.call(t,o)&&(n[o]=t[o]);return n};function OR(t,e){const n=IR(t,[]);n.events||(n.events={});const o=kn({stateElement:t,type:t.type,formData:e});return PR(ug(ug({},n),e),{events:o})}function kR(t,e){const n=e.reservedRow||t.reservedRow;return e.value&&e.value.search(/<!DOCTYPE HTML>/gi)===-1&&(e.value=B_({whereReplace:t.value,whatToReplace:e.value,reservedRow:n})),Dc()(t,e)}var RR=Object.defineProperty,xR=Object.defineProperties,NR=Object.getOwnPropertyDescriptors,os=Object.getOwnPropertySymbols,dg=Object.prototype.hasOwnProperty,mg=Object.prototype.propertyIsEnumerable,fg=(t,e,n)=>e in t?RR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,as=(t,e)=>{for(var n in e||(e={}))dg.call(e,n)&&fg(t,n,e[n]);if(os)for(var n of os(e))mg.call(e,n)&&fg(t,n,e[n]);return t},Tc=(t,e)=>xR(t,NR(e)),pg=(t,e)=>{var n={};for(var o in t)dg.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&os)for(var o of os(t))e.indexOf(o)<0&&mg.call(t,o)&&(n[o]=t[o]);return n};function DR(t,e){var n;const o=t.style||{},a=t,{actions:l,chart:i}=a,s=pg(a,["actions","chart"]),c=i,{series:u}=c,m=pg(c,["series"]),d=(n=m.chart)==null?void 0:n.type,f={},p=as({type:"chart",controlId:s.name},e);return l!=null&&l.includes("onDblClick")&&(f.onDataPointSelect={alias:"onDataPointSelect",args:Tc(as({},p),{action:"onDblClick"})}),l!=null&&l.includes("onClick")&&(f.onClick={alias:"onFormControlEvent",args:Tc(as({},p),{action:"onClick"})}),Tc(as({chartType:d,series:u,options:m},s),{style:o,events:f})}var MR=Object.defineProperty,vg=Object.getOwnPropertySymbols,TR=Object.prototype.hasOwnProperty,AR=Object.prototype.propertyIsEnumerable,gg=(t,e,n)=>e in t?MR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,FR=(t,e)=>{for(var n in e||(e={}))TR.call(e,n)&&gg(t,n,e[n]);if(vg)for(var n of vg(e))AR.call(e,n)&&gg(t,n,e[n]);return t},BR=(t,e)=>{const n=FR({},t);return n.events=kn({stateElement:n,type:n.type,formData:e}),n.orientation==="tabs"&&(n.eventsTabs=kn({stateElement:n,type:"tabs",formData:e,parentTabs:n.type})),delete n.elements,n},zR=Object.defineProperty,LR=Object.defineProperties,$R=Object.getOwnPropertyDescriptors,ls=Object.getOwnPropertySymbols,hg=Object.prototype.hasOwnProperty,bg=Object.prototype.propertyIsEnumerable,Cg=(t,e,n)=>e in t?zR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,or=(t,e)=>{for(var n in e||(e={}))hg.call(e,n)&&Cg(t,n,e[n]);if(ls)for(var n of ls(e))bg.call(e,n)&&Cg(t,n,e[n]);return t},oa=(t,e)=>LR(t,$R(e)),HR=(t,e)=>{var n={};for(var o in t)hg.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&ls)for(var o of ls(t))e.indexOf(o)<0&&bg.call(t,o)&&(n[o]=t[o]);return n};function Ac(t){const e=co(t);function n(o){const{type:a}=o,l=or({},o);return a==="tree"&&l.forceUpdate&&(delete l.forceUpdate,delete l.expandedNodeId),l.elements&&(l.elements=l.elements.map(n)),l}return e.map(n)[0]}function Fc(t,e){const n=co(t),o=co(e);function a(l){var i;let s=or({},l);const c=s.name?o.find(u=>(u==null?void 0:u.name)===(l==null?void 0:l.name)):null;if(c)switch(l.type){case"canvasGrid":s=mR(s,c);break;case"tree":s=Lk(s,c);break;case"table":s=Kk(s,c,o);break;case"grid":s=tR(s,c);break;default:c.hasOwnProperty("cellColor")||delete s.cellColor,Object.assign(s,c)}return(i=s==null?void 0:s.elements)!=null&&i.length&&(s.elements=s.elements.map(u=>a(u,o))),s}return n.map(a)[0]}function jR(t,e){if(Array.isArray(e))return e}function ss(t,e){const n=t;return Object.entries(e).forEach(([o,a])=>{n[o]||(n[o]={});const l=n[o];Object.entries(a).forEach(function([i,s]){let c;switch(l[i]||(l[i]={}),o){case"tree":{c=$k(l[i],s);break}case"table":{c=qk(l[i],s);break}case"grid":{c=nR(l[i],s);break}case"canvasGrid":{c=dR(l[i],s);break}case"chart":{c=s;break}case"report":{c=kR(l[i],s);break}default:c=Dc()(l[i],s,jR),s.events&&(c.events=s.events),s.style&&(c.style=s.style),s.cellColor||delete c.cellColor}l[i]=or({},c)})}),n}function is({state:t,defaultState:e,bindings:n,formData:o={}}){const a={current:{}};if(!t)return null;function l(i){var s;const{name:c}=i,{type:u}=n[c]||{};let m;if(!u)return null;switch(u){case"tree":{m=Hk(i,o);break}case"report":{m=OR(i,o);break}case"roleCenter":{m=_R(i,o);break}case"table":{m=Zk(i,o,e);break}case"grid":{m=oR(i,o);break}case"canvasGrid":{m=fR(i,o);break}case"img":{m=oa(or({},i),{value:Ps(i.value),events:kn({stateElement:i,type:u,formData:o})});break}case"chart":{m=DR(i,o);break}case"button":case"listButton":case"pdf":{m=oa(or({},i),{value:Ps(i.value),events:kn({stateElement:i,type:u,formData:o})});break}case"html":{m=oa(or({},i),{value:Ps(i.value),events:kn({stateElement:i,type:u,formData:o}),dataAttrs:{"data-form-id":o.formId}});break}case"box":case"frame":{m=BR(i,o);break}case"label":m=oa(or({},i),{events:kn({stateElement:i,type:u,formData:o})}),(s=m.events)!=null&&s.onClick&&(m.isStatic=!1),m.hasOwnProperty("value")&&(m.initialValue=m.value);break;case"enum":m=zc(i,o);break;case"string":case"number":case"integer":case"date":m=oa(or({},i),{events:kn({stateElement:i,type:u,formData:o}),dataAttrs:{"data-form-id":o.formId,"data-form-name":o.formName}}),m.hasOwnProperty("value")&&(m.hasOwnProperty("formattedValue")||(m.formattedValue=m.value),m.initialValue=m.value,m.initialFormattedValue=m.formattedValue);break;default:m=oa(or({},i),{events:kn({stateElement:i,type:u,formData:o})}),m.hasOwnProperty("value")&&(m.initialValue=m.value)}a.current[u]||(a.current[u]={}),a.current[u][c]=Ka(m,"testId")}return t.forEach(l),a.current}function cs(t,{formName:e,formId:n}){const o=[],a={};function l(c){switch(c){case"table":case"tree":case"roleCenter":return!1;default:return!0}}function i(c){if(!c)return;const u=c,{name:m=`GENERATED_NAME_${Gn().generate()}`,type:d,elements:f}=u,p=HR(u,["name","type","elements"]);let g=Ka({name:m,type:d},"GUID",[n,e]);return f!=null&&f.length&&l(d)?(g.elements=f.map(i),p.elements=g.elements.map(w=>{const h=or({},w);return delete h.elements,h})):f&&(p.elements=qa(f,"elements","GUID",[e])),a[m]={type:d},o.push(or({name:m,type:d},p)),g}return{schema:i(t),extractedState:o,bindings:a}}function VR(t){const e={};if(t)return t.width&&(e.width=sn(t.width)),t.height&&(e.height=sn(t.height)),e}function WR(t){const{formId:e,formName:n,openMode:o,view:a,state:l}=t,i={formId:e,formName:n,isModal:o==="modal"},s=VR(a==null?void 0:a.style),c=Fc(a,l),u=ua(c),m=Ac(c),{schema:d,extractedState:f,bindings:p}=cs(u,{formName:n,formId:e}),g=ss({},is({state:f,defaultState:l,bindings:p,formData:i,schema:d}));return{raw:m,schema:d,entities:g,bindings:p,formId:e,formName:n,diffs:{},style:s}}var UR=Object.defineProperty,us=Object.getOwnPropertySymbols,yg=Object.prototype.hasOwnProperty,_g=Object.prototype.propertyIsEnumerable,wg=(t,e,n)=>e in t?UR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Eg=(t,e)=>{for(var n in e||(e={}))yg.call(e,n)&&wg(t,n,e[n]);if(us)for(var n of us(e))_g.call(e,n)&&wg(t,n,e[n]);return t},GR=(t,e)=>{var n={};for(var o in t)yg.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&us)for(var o of us(t))e.indexOf(o)<0&&_g.call(t,o)&&(n[o]=t[o]);return n};function Bc(t){const e=Eg({},t),n={};function o(l){return l==null?void 0:l.map(i=>{const s=i,{elements:c}=s,u=GR(s,["elements"]);let m=`${i.GUID}_${Gn().generate()}`;const d={GUID:m,id:u.id};return n[m]=Eg({},u),c!=null&&c.length&&(d.elements=o(i.elements)),d})}const a=o(e.elements);return e.schema=a,e.entities=n,delete e.elements,e}function KR({resultAction:t,view:e}){const{formId:n,formName:o}=t,a={formId:n,formName:o},l=ua(e),{schema:i,extractedState:s,bindings:c}=cs(l,a),u=ss({},is({state:s,bindings:c,formData:a,schema:i}));return{schema:i,entities:u}}var qR=Object.defineProperty,ZR=Object.defineProperties,YR=Object.getOwnPropertyDescriptors,Sg=Object.getOwnPropertySymbols,XR=Object.prototype.hasOwnProperty,JR=Object.prototype.propertyIsEnumerable,Pg=(t,e,n)=>e in t?qR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ig=(t,e)=>{for(var n in e||(e={}))XR.call(e,n)&&Pg(t,n,e[n]);if(Sg)for(var n of Sg(e))JR.call(e,n)&&Pg(t,n,e[n]);return t},Og=(t,e)=>ZR(t,YR(e)),zc=(t,e,n=!0)=>{const{isAutocomplete:o,isSwitchedToEnum:a,isInteger:l,listValues:i,value:s,formattedValue:c}=t,u=l&&!a?!1:!!o,m=n?kn({type:"enum",stateElement:Og(Ig({},t),{isAutocomplete:u}),formData:e}):{},d=Og(Ig({},t),{events:m,isAutocomplete:u,dataAttrs:{"data-form-id":e.formId,"data-form-name":e.formName}});if(delete d.autocomplete,d.value=s,!u&&(i!=null&&i.length)&&s){const f=i.find(p=>p.key===s);f&&(d.value=f.value)}return s!==void 0&&(c===void 0&&(d.formattedValue=d.value),d.initialValue=d.value,d.initialFormattedValue=d.value),d},QR=WR;function kg(t){return t.mainAppParams.processCounter}function*ex(){yield(0,q.gw)(100),(yield(0,q.Ys)(kg))&&(yield(0,q.xN)(zs()))}function*tx(){(yield(0,q.Ys)(kg))||(yield(0,q.xN)(Ls()))}function*St(){yield(0,q.xN)(Mu()),yield(0,q.rM)(ex)}function*Pt(){yield(0,q.xN)(Tu()),yield(0,q.RE)(tx)}function*Rg(){let{menuData:t,toolbarData:e}=yield(0,q.RE)(Eu);t=Bc(t);const n=Nc(e);yield(0,q.xN)(fa({menu:t})),yield(0,q.xN)(rl(n))}function*nx(t){t.payload===null&&(yield St(),yield(0,q.RE)(Rg),yield Pt())}function*rx(){yield(0,q.ib)(sl,nx)}function xg(t){return t.mainAppParams}function*lt(t){Ao(t)||Qa(t)&&(yield(0,q.gz)(pa({message:Fr(t)}))),console.error(t)}function*ox(t){try{for(let e=0;e<t.length;e++){const n=t[e],{serviceURL:o}=(n==null?void 0:n.resultAction)||{};o&&(yield(0,q.xN)(nl({serviceURL:o,needToPrint:!0})),yield(0,q.qn)(nl))}}catch(e){yield lt(e)}}function*gn(t,e){let n=!1;try{const{data:o}=yield(0,q.RE)(t,e);n=o||!0}catch(o){yield lt(o)}return n}function*ax(){try{yield St();let t=yield gn(wu);if(t=Bc(t),!t)return;yield(0,q.xN)(fa({menu:t}))}catch(t){yield lt(t)}finally{yield Pt()}}function*lx(){try{yield St();const t=yield gn(_u),e=Nc(t);if(!t)return;yield(0,q.xN)(rl(e))}catch(t){yield lt(t)}finally{yield Pt()}}function jt(t,e){return e?t.forms[e]:null}function Ng(t){return Object.keys(t.forms).slice(1).reverse()}function sx(t,e){if(!e)return null;const n=[];let o=t.forms[e];for(;o.childFormId&&o.childFormId!==0;)n.push(o.childFormId),o=t.forms[o.childFormId];return n}function ix(t,e){return t.modalPopUp.length&&t.modalPopUp.find(n=>n.controlId===e)}function cx(t){return t.modalPopUp.length}function*ux(){return(yield(0,q.Ys)(cx))>0}var dx=Object.defineProperty,ds=Object.getOwnPropertySymbols,Dg=Object.prototype.hasOwnProperty,Mg=Object.prototype.propertyIsEnumerable,Tg=(t,e,n)=>e in t?dx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mx=(t,e)=>{for(var n in e||(e={}))Dg.call(e,n)&&Tg(t,n,e[n]);if(ds)for(var n of ds(e))Mg.call(e,n)&&Tg(t,n,e[n]);return t},fx=(t,e)=>{var n={};for(var o in t)Dg.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&ds)for(var o of ds(t))e.indexOf(o)<0&&Mg.call(t,o)&&(n[o]=t[o]);return n};function*ar(t){const e=t,{formId:n,roleCenterFormId:o}=e,a=fx(e,["formId","roleCenterFormId"]),l=yield(0,q.Ys)(jt,n);if(!n)throw new Error("sendActionTask: \u041D\u0435 \u043F\u0435\u0440\u0435\u0434\u0430\u043D \u0430\u0440\u0433\u0443\u043C\u0435\u043D\u0442 formId");const{formName:i,diffs:s}=l===void 0?{}:l,c=mx({formId:n,formName:i,state:s},a);if(o&&(c.roleCenterFormId=o),!(yield ux()))return yield gn(yu,c)}function px(t,e){if(!e)return null;let n=null;const o=t.forms;for(const a in o)if(o.hasOwnProperty(a)){const l=o[a];if(l.formStackId===e&&l.childFormId===null){n=l;break}}return n}var vx=Object.defineProperty,gx=Object.defineProperties,hx=Object.getOwnPropertyDescriptors,ms=Object.getOwnPropertySymbols,Ag=Object.prototype.hasOwnProperty,Fg=Object.prototype.propertyIsEnumerable,Bg=(t,e,n)=>e in t?vx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zr=(t,e)=>{for(var n in e||(e={}))Ag.call(e,n)&&Bg(t,n,e[n]);if(ms)for(var n of ms(e))Fg.call(e,n)&&Bg(t,n,e[n]);return t},fs=(t,e)=>gx(t,hx(e)),zg=(t,e)=>{var n={};for(var o in t)Ag.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&ms)for(var o of ms(t))e.indexOf(o)<0&&Fg.call(t,o)&&(n[o]=t[o]);return n};let dn=[],No=null;function*xt(t){var e,n;const o=t,{formId:a,formName:l,view:i,state:s}=o,c=zg(o,["formId","formName","view","state"]);if(!a)throw new Error("updateFormTask: \u041D\u0435 \u043F\u0435\u0440\u0435\u0434\u0430\u043D \u0430\u0440\u0433\u0443\u043C\u0435\u043D\u0442 formId");const u=yield(0,q.Ys)(jt,a);let m={};if(i){const f=(e=u==null?void 0:u.entities)==null?void 0:e.html;if(f){const p={};Object.entries(f).forEach(([g,w])=>{w.content&&(p[g]=w.content)}),Object.keys(p).length&&((n=t.state)==null||n.forEach((g,w)=>{p[g.name]&&(t.state[w]=Zr({content:p[g.name]},s[w]))}))}m=QR(t)}else s&&u&&(m=(0,Fn.ZP)(u,f=>{const p={formId:a,formName:l,isModal:c.openMode==="modal"},g=Fc(f.raw,s),w=ua(g);f.raw=Ac(g);const{extractedState:h}=cs(w,p),_=is({state:h,bindings:f.bindings,formData:p}),I=s.reduce((S,E)=>{var P,b;const C=(P=f.bindings[E.name])==null?void 0:P.type,M=(b=_==null?void 0:_[C])==null?void 0:b[E.name];return M&&(S[C]||(S[C]={}),S[C][E.name]=M),S},{});f.entities=ss(f.entities,I),f.diffs={},f.isAutoLock=c.isAutoLock!==void 0?c.isAutoLock:u.isAutoLock}));const d=Zr(Zr(Zr({formId:a,formName:l},u),c),m);yield(0,q.xN)(go(d))}function*bx(t){(yield(0,q.Ys)(jt,t.formId))&&(yield xt(t))}function*Lg({formId:t}){if(!t)throw new Error("cleanFormDiffTask: \u041D\u0435 \u043F\u0435\u0440\u0435\u0434\u0430\u043D \u0430\u0440\u0433\u0443\u043C\u0435\u043D\u0442 formId");const e=yield(0,q.Ys)(jt,t);if(!e)throw new Error(`cleanFormDiffTask: \u041D\u0435\u0442 \u0444\u043E\u0440\u043C\u044B \u0441 formId=${t}`);let n=fs(Zr({},e),{diffs:{}});yield(0,q.xN)(go(n))}function*Cx({formId:t,controlId:e}){var n;if(!t)throw new Error("resetControlValuesTask: \u041D\u0435 \u043F\u0435\u0440\u0435\u0434\u0430\u043D \u0430\u0440\u0433\u0443\u043C\u0435\u043D\u0442 formId");const o=yield(0,q.Ys)(jt,t);if(!o)throw new Error(`resetControlValuesTask: \u041D\u0435\u0442 \u0444\u043E\u0440\u043C\u044B \u0441 formId=${t}`);if(e&&o){const a=(n=o.bindings[e])==null?void 0:n.type;if(TP(a)&&a!=="string"&&a!=="date"){const l=o.entities[a][e],i={type:a,name:e,value:l.initialValue,formattedValue:l.initialFormattedValue};yield xt({formId:t,state:[i]})}}}function*yx(t){const{formId:e}=t;if(!e)throw new Error("deleteFormTask: \u041D\u0435 \u043F\u0435\u0440\u0435\u0434\u0430\u043D \u0430\u0440\u0433\u0443\u043C\u0435\u043D\u0442 formId");const{parentFormId:n,formStackId:o,openMode:a}=yield(0,q.Ys)(jt,e);a!=="modal"&&n&&(yield xt({formId:o,showedFormId:n}),yield xt({formId:n,childFormId:null})),yield(0,q.xN)(Gs(e)),dn.includes(e)&&(dn=dn.filter(l=>l!==e),dn.length?yield(0,q.Cs)(Va):No&&(yield $g(No)))}function*$g(t){const{resultAction:{formId:e,formName:n,openMode:o,commandName:a,formIcon:l,autoLock:i},view:s,state:c,parentFormId:u=null,skipFormStackQueue:m=!1}=t,{keepMounted:d=!1,winCanResize:f=!0}=s||{};if(o==="new")yield xt({formId:e,formName:n,view:s,state:c,openMode:o,commandName:a,formStackId:e,parentFormId:null,childFormId:null,isWideScreenMode:!1,keepMounted:d,showedFormId:e,isAutoLock:i,formIcon:l}),m||(yield(0,q.xN)(po(e)));else if(o==="modal")yield xt({formId:e,formName:n,view:s,state:c,openMode:o,commandName:a,formIcon:l,isAutoLock:i,winCanResize:f});else{const p=yield(0,q.Ys)(kc);let g=null;if(u&&(g=yield(0,q.Ys)(jt,u)),g||(g=yield(0,q.Ys)(px,p)),g){const w=g.formId,{childFormId:h}=g;h?(No=t,yield Va({formId:h})):(yield xt({formId:e,formName:n,view:s,state:c,openMode:o,formStackId:p,formIcon:l,isAutoLock:i,parentFormId:w,childFormId:null}),yield xt({formId:w,childFormId:e}),yield xt({formId:p,showedFormId:e}),No=null)}else yield xt({formId:e,formName:n,view:s,state:c,openMode:"new",commandName:a,formStackId:e,parentFormId:null,childFormId:null,isWideScreenMode:!1,keepMounted:d,showedFormId:e,formIcon:l,isAutoLock:i}),m||(yield(0,q.xN)(po(e)))}}function*Hg(t){const e=t,{resultAction:{formId:n,formName:o},view:a,state:l}=e,i=zg(e,["resultAction","view","state"]),s=yield(0,q.Ys)(jt,n),c=(0,Fn.ZP)(s,u=>{var m;const d=a==null?void 0:a.name,f=Fc(a,l),p=uo({source:u.raw,iterationKey:"elements",searchKey:"name",searchValue:d});p&&Object.assign(p,f);const g=ua(f);u.raw=Ac(u.raw);const{schema:w,extractedState:h,bindings:_}=cs(g,{formName:o,formId:n});Object.assign(u.bindings,_);const I=uo({source:u.schema,iterationKey:"elements",searchKey:"name",searchValue:d});if(I&&Object.assign(I,w),h!=null&&h.length){const E=h.find(b=>b.name===d),P=!!((m=I.elements)!=null&&m.length);E?E.isLoaded=P:h.push({name:d,isLoaded:P})}const S=is({state:h,bindings:u.bindings,schema:u.schema,formData:{formId:n,formName:o,isModal:i.openMode==="modal"}});u.entities=ss(u.entities,S)});yield(0,q.xN)(go(fs(Zr({},c),{diffs:{}})))}function*jg(t){const{formId:e}=t,n=yield(0,q.Ys)(jt,e);if(t.value&&(yield(0,q.xN)(qs(t))),n){const{parentFormId:o,formStackId:a,openMode:l,keepMounted:i}=n;!o&&l!=="modal"&&(i&&t.action==="execScript"||(yield Vg(a)),yield xt({formId:a,showedFormId:e}))}}function*Lc(t,e){if(t==="0")return;e.unshift(t);const{childFormId:n}=yield(0,q.Ys)(jt,t);n&&(yield Lc(n,e))}function*Va(t){try{if(yield St(),!dn.length&&t){const e=t.payload||t,{formId:n}=e;(yield(0,q.Ys)(jt,n))&&(yield Lc(n,dn))}if(dn[0]){const e=yield ar({formId:dn[0],action:"close"});yield Gt({response:e})}}catch(e){yield lt(e)}finally{yield Pt()}}function*_x(){try{if(yield St(),dn.length||(dn=yield(0,q.Ys)(Ng)),dn[0]){const t=yield ar({formId:dn[0],action:"close"});yield Gt({response:t})}}catch(t){yield lt(t)}finally{yield Pt()}}function*wx(t){try{if(yield St(),!dn.length&&t){const e=[],n=t.payload||t,{formId:o}=n;yield Lc(o,e),dn=(yield(0,q.Ys)(Ng)).filter(l=>!e.includes(l))}if(dn[0]){const e=yield ar({formId:dn[0],action:"close"});yield Gt({response:e})}}catch(e){yield lt(e)}finally{yield Pt()}}function*Ex(t){try{yield St();const{formId:e}=t.payload,n=yield ar({formId:e,action:"close"});yield Gt({response:n})}catch(e){yield lt(e)}finally{yield Pt()}}const Sx=()=>{dn=[],No=null};function*Px(){if(No){const{formId:t,formName:e}=No.resultAction;yield ar({formId:t,formName:e,action:"breakOpen",state:{}}),yield Sx()}}function*Ix(t){try{yield St();const e=yield gn(Eb,t.payload);yield Gt({response:e})}catch(e){yield lt(e)}finally{yield Pt()}}function*Ox(t){try{const{formId:e,formStackId:n,isWideScreenMode:o}=t.payload,a={formId:n,isWideScreenMode:o};e&&(a.showedFormId=e),yield xt(a)}catch(e){yield lt(e)}}function*kx(t){try{const{formStackId:e,formId:n}=t.payload;yield xt({formId:e,showedFormId:n})}catch(e){yield lt(e)}}function*Vg(t){if((yield(0,q.Ys)(kc))!==t){yield(0,q.xN)(po(t));const{commandName:n}=yield(0,q.Ys)(jt,t);yield(0,q.xN)(tl(n)),yield gn(pu,{formId:t})}}function*Rx(t){try{const{formId:e}=t.payload;yield Vg(e)}catch(e){yield lt(e)}}function*xx(t){try{const{formId:e}=t.payload,n=yield(0,q.Ys)(jt,e),{parentFormId:o,formStackId:a}=n;if(e===a)return;const l=yield(0,q.Ys)(sx,e),i=l[l.length-1]||e;yield xt({formId:e,showedFormId:i,openMode:"new",parentFormId:null,formStackId:e});for(const s of l)yield xt({formId:s,formStackId:e});a===o?yield xt({formId:a,childFormId:null,showedFormId:a}):(yield xt({formId:o,childFormId:null}),yield xt({formId:a,showedFormId:o})),yield(0,q.xN)(po(e)),yield gn(pu,{formId:e})}catch(e){yield lt(e)}}function*Nx(t){try{const e=yield ar(fs(Zr({},t.payload),{action:"resize"}));yield Gt({response:e})}catch(e){yield lt(e)}}function*Dx(t){try{const e=yield ar(fs(Zr({},t.payload),{action:"resizeColumns"}));yield Gt({response:e})}catch(e){yield lt(e)}}function*Mx(){yield(0,q.A7)(Js,Va),yield(0,q.A7)(ad,_x),yield(0,q.A7)(ld,wx),yield(0,q.A7)(sd,Ex),yield(0,q.P2)(1e3,ud,Ox),yield(0,q.P2)(1e3,id,kx),yield(0,q.P2)(1e3,gd,xx),yield(0,q.P2)(1e3,cd,Rx),yield(0,q.ib)(Au,Ix),yield(0,q.ib)(Fu,Nx),yield(0,q.ib)(Bu,Dx)}function*Tx(t){const e=KR(t);e.formId="0",yield xt(e),yield(0,q.xN)(po(e.formId))}var Ax=Object.defineProperty,Fx=Object.defineProperties,Bx=Object.getOwnPropertyDescriptors,ps=Object.getOwnPropertySymbols,Wg=Object.prototype.hasOwnProperty,Ug=Object.prototype.propertyIsEnumerable,Gg=(t,e,n)=>e in t?Ax(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$c=(t,e)=>{for(var n in e||(e={}))Wg.call(e,n)&&Gg(t,n,e[n]);if(ps)for(var n of ps(e))Ug.call(e,n)&&Gg(t,n,e[n]);return t},Kg=(t,e)=>Fx(t,Bx(e)),zx=(t,e)=>{var n={};for(var o in t)Wg.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&ps)for(var o of ps(t))e.indexOf(o)<0&&Ug.call(t,o)&&(n[o]=t[o]);return n};function*Lx(t){const e=t,{caption:n}=e,o=zx(e,["caption"]);yield(0,q.xN)(zu($c({formName:n},o)))}function*qg(){yield(0,q.xN)(Lu())}function*Zg(t){const{formId:e,status:n=!1,fileList:o=[]}=t,l=yield gn(yu,{approveUpload:n,formId:e,fileList:o});yield Gt({response:l})}function*$x(t){try{yield St();const{fileList:e}=t.payload;e.length&&(yield Zg(Kg($c({},t.payload),{status:!0})))}catch(e){yield lt(e)}finally{yield qg(),yield Pt()}}function*Hx(t){try{yield St();const{fileList:e}=t.payload;e.length&&(yield Zg(Kg($c({},t.payload),{status:!1})))}catch(e){yield lt(e)}finally{yield qg(),yield Pt()}}function*jx(){yield(0,q.P2)(1e3,md,$x),yield(0,q.P2)(1e3,fd,Hx)}function*Vx(t){const{formId:e,value:n}=t,a={metaSet:{formId:e},value:n,id:e};yield(0,q.xN)($u(a))}function*Yg(){yield(0,q.xN)(Hu())}function*Xg(t){const{formId:e,value:n}=t,o={formId:e};n&&(o.value=n);const a=yield gn(ib,o);yield Gt({response:a})}function*Wx(t){try{yield St(),yield Xg(t.payload)}catch(e){yield lt(e)}finally{yield Yg(),yield Pt()}}function*Ux(t){try{yield St(),yield Xg(t.payload)}catch(e){yield lt(e)}finally{yield Yg(),yield Pt()}}function*Gx(){yield(0,q.P2)(1e3,pd,Wx),yield(0,q.P2)(1e3,vd,Ux)}var Kx=Object.defineProperty,qx=Object.defineProperties,Zx=Object.getOwnPropertyDescriptors,vs=Object.getOwnPropertySymbols,Jg=Object.prototype.hasOwnProperty,Qg=Object.prototype.propertyIsEnumerable,eh=(t,e,n)=>e in t?Kx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Do=(t,e)=>{for(var n in e||(e={}))Jg.call(e,n)&&eh(t,n,e[n]);if(vs)for(var n of vs(e))Qg.call(e,n)&&eh(t,n,e[n]);return t},Wa=(t,e)=>qx(t,Zx(e)),th=(t,e)=>{var n={};for(var o in t)Jg.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&vs)for(var o of vs(t))e.indexOf(o)<0&&Qg.call(t,o)&&(n[o]=t[o]);return n};function Yx(t){return t.reduce((e,n)=>{var o;const a=n!=null&&n.error?"error":(o=n==null?void 0:n.resultAction)==null?void 0:o.action;if(!a)return e;let l;switch(a){case"loadData":l="loadDataActions";break;case"loadTabData":l="loadTabDataActions";break;case"breakClose":l="breakCloseActions";break;case"closeRequest":l="closeRequestActions";break;case"open":l="openActions";break;case"close":l="closeActions";break;case"refresh":l="refreshActions";break;case"error":l="errorActions";break;case"help":l="helpActions";break;case"download":l="downloadActions";break;case"print":l="printActions";break;case"upload":l="uploadActions";break;case"link":l="linkActions";break;case"updateRoleCenter":l="updateRoleCenterActions";break;case"chooseColor":l="chooseColorActions";break;case"execScript":l="execScriptActions";break;case"activate":l="activateActions";break;default:l="otherActions"}return e[l].push(n),e},{breakCloseActions:[],openActions:[],closeActions:[],closeRequestActions:[],refreshActions:[],loadDataActions:[],errorActions:[],helpActions:[],downloadActions:[],printActions:[],uploadActions:[],linkActions:[],updateRoleCenterActions:[],chooseColorActions:[],otherActions:[],execScriptActions:[],activateActions:[],loadTabDataActions:[]})}function*Gt(t){var e;const{response:n,parentFormId:o,skipFormStackQueue:a=!1}=t,l=(n==null?void 0:n.result)||[];if(n!=null&&n.app&&(yield(0,q.gz)(Fs({app:n.app}))),n!=null&&n.refreshMenu&&(yield ax()),n!=null&&n.refreshToolbar&&(yield lx()),!l.length&&!(n!=null&&n.interval))return;const{breakCloseActions:i,closeActions:s,closeRequestActions:c,openActions:u,refreshActions:m,loadDataActions:d,errorActions:f,helpActions:p,downloadActions:g,printActions:w,uploadActions:h,linkActions:_,updateRoleCenterActions:I,chooseColorActions:S,execScriptActions:E,loadTabDataActions:P,activateActions:b,otherActions:C}=Yx(l);if(s.length)for(const D of s)yield yx({formId:D.resultAction.formId});if(i.length)for(const D of i)yield Px({formId:D.resultAction.formId});if(u.length){if(c.length){const D=l.findIndex($=>$.resultAction.formId===o&&$.resultAction.action==="closeRequest"),L=l.findIndex($=>$.resultAction.action==="open");if(D<L){const $=c.findIndex(x=>x.resultAction.formId===o);if($!==-1){const x=c.splice($,1)[0];yield Va({formId:x.resultAction.formId})}}}for(const D of u)D.parentFormId=o,yield $g(Wa(Do({},D),{skipFormStackQueue:a}))}if(c.length)for(const D of c)yield Va({formId:D.resultAction.formId});if(m.length)for(const D of m){const L=D,{resultAction:{formId:$,formName:x,autoLock:Z}}=L,A=th(L,["resultAction"]);yield bx(Do({formId:$,formName:x,isAutoLock:Z},A))}if(d.length)for(const D of d)yield Hg(D);if(P.length)for(const D of P){const{resultAction:{formId:L,formName:$},state:x}=D;yield Hg(D),yield xt({formId:L,formName:$,state:x})}if(I.length)for(const D of I)yield Tx(D);if(E.length){const D=E.reduce((L,$)=>(L.some(x=>x.formId===$.formId&&x.controlId===$.controlId)||L.push($),L),[]);for(const L of D){const $=L.resultAction,x=E.filter(Z=>Z.formId===L.formId&&Z.controlId===L.controlId).map(Z=>Z.resultAction.value);yield jg(Wa(Do({},$),{value:x}))}}if(h.length)for(const D of h){const L=D.resultAction.uploadOptions,$=Wa(Do({},D.resultAction.uploadOptions),{serverConfig:{url:`../api/xcom/files/upload/${L.formId}`,process:{headers:{sessionUploadId:Os()}}}});yield Lx($)}if(S.length)for(const D of S){const L=D.resultAction;yield Vx(L)}if(f.length)for(const D of f){const L=D.error||{},{formId:$,controlId:x,message:Z="error",context:A=!1}=L,F=th(L,["formId","controlId","message","context"]);yield(0,q.gz)(Vu(Do({formId:$,controlId:x,message:Z,context:A},F))),yield Lg({formId:$}),yield Cx({formId:$,controlId:x})}if(p.length)for(const D of p){const{serviceURL:L}=(D==null?void 0:D.resultAction)||{},$=!Ya(["safari"]);if(L)if($){const x="location=yes,resizable=yes,scrollbars=yes,status=yes, top=100, left=100, width=400, height=500";setTimeout(()=>{window.open(L,"_blank",x)})}else{let x=document.createElement("a");document.body.appendChild(x),x.style="display: none",x.target="_blank",x.href=L,x.click(),document.body.removeChild(x)}}if(g.length)for(const D of g){const{serviceURL:L}=(D==null?void 0:D.resultAction)||{};L&&window.open(L,"_blank")}if(_.length)for(const D of _){const{serviceURL:L}=(D==null?void 0:D.resultAction)||{};L&&window.open(L,"_blank")}if(w.length&&(yield(0,q.Cs)(ox,w)),b.length)for(const D of b){const L=D.resultAction;yield jg(L)}if(C.length)for(const D of C)console.warn(`Unknown action: '${(e=D==null?void 0:D.resultAction)==null?void 0:e.action}'!`,D);const M=l.find(D=>D.reminders!==void 0);yield(0,q.gz)(Xu(M==null?void 0:M.reminders));const O=l.find(D=>D.Workers!==void 0),T=n==null?void 0:n.interval;if(O||T!==void 0)if(O)yield(0,q.gz)(va(Wa(Do({},O.Workers),{interval:T})));else{const{workers:D}=yield(0,q.Ys)(xg),L=D==null?void 0:D.interval;T!==L&&(yield(0,q.gz)(va(Wa(Do({},D),{interval:T}))))}}var Xx=Object.defineProperty,Jx=Object.defineProperties,Qx=Object.getOwnPropertyDescriptors,nh=Object.getOwnPropertySymbols,eN=Object.prototype.hasOwnProperty,tN=Object.prototype.propertyIsEnumerable,rh=(t,e,n)=>e in t?Xx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nN=(t,e)=>{for(var n in e||(e={}))eN.call(e,n)&&rh(t,n,e[n]);if(nh)for(var n of nh(e))tN.call(e,n)&&rh(t,n,e[n]);return t},rN=(t,e)=>Jx(t,Qx(e));function*oh(t){const{data:e}=t,n=e.sessionID;if(n){tu(n);let o=!0;if(e.hasOwnProperty("roles")){yield(0,q.gz)(al({caption:"choose_role_form",component:"ChooseRoleForm",componentProps:{roles:e.roles}})),yield Pt();const{payload:a}=yield(0,q.qn)(ll);if(yield St(),a){const{data:l}=yield(0,q.RE)(tb,{role:a});l.sessionID&&tu(l.sessionID)}else o=!1,yield(0,q.gz)(ga())}if(o){const a=yield(0,q.RE)(vu),l=i=>{var s;return((s=i.resultAction)==null?void 0:s.openMode)==="modal"};a.data.result&&a.data.result.some(l)?(yield Gt({response:a.data}),yield(0,q.gz)(sl(a.data.result.find(l).resultAction.formId))):yield(0,q.RE)(Rg),yield(0,q.xN)($s(rN(nN({},a.data),{isUserIntoTab:!0}))),Nh(t.user),yield(0,q.xN)(js()),yield(0,q.xN)(va())}}}function*oN(t){try{yield St();const e=yield(0,q.RE)(Vh,t);yield oh(e)}catch(e){if(Ao(e)){if(Ms(e)===Ja[3]&&(yield(0,q.xN)(vo({isError:!0,isSessionExist:!0,errorMessage:Fr(e)}))),Ms(e)===Ja[1]&&(yield(0,q.xN)(vo({isError:!1,isSessionExist:!1,errorMessage:""})),yield(0,q.gz)(pa({message:Fr(e)}))),Ms(e)===Ja[6]){yield(0,q.xN)(vo({isError:!1,isSessionExist:!1,errorMessage:""})),yield(0,q.gz)(al({caption:"change_password_dialog",component:"PasswordChangeForm"})),yield Pt();const{payload:n}=yield(0,q.qn)(ll);if(yield St(),n)try{const o=yield(0,q.RE)(nb,n);yield oh(o)}catch(o){Ao(o)&&(yield(0,q.xN)(vo({isError:!1,isSessionExist:!1,errorMessage:""}))),Qa(o)&&(yield(0,q.gz)(pa({message:Fr(o)})))}}}else yield(0,q.xN)(vo({isError:!1,isSessionExist:!1,errorMessage:""})),yield lt(e)}finally{yield Pt()}}function*aN(){try{yield St(),yield(0,q.xN)(Du()),(yield(0,q.RE)(Wh)).request.responseURL&&(eu(),yield(0,q.xN)(Hs()),yield(0,q.xN)(Fo()))}catch(t){yield(0,q.xN)(js()),Ao(t)?yield(0,q.xN)(Nb({isError:!0,errorMessage:Fr(t)})):yield lt(t)}finally{yield Pt()}}function*lN(){for(;;)try{const{isUserIntoTab:t}=yield(0,q.Ys)(Hv);let e=null;if(!t){const{payload:o}=yield(0,q.qn)(dd);e=yield(0,q.rM)(oN,o)}const n=yield(0,q.qn)([vo,ga]);n.type===ga.toString()&&(e&&(yield(0,q.al)(e)),yield aN(n))}catch(t){yield lt(t)}}function*sN(t){try{const{payload:e}=t;yield Rm.change(e.webUiLanguage)}catch(e){yield lt(e)}}function*iN(){yield(0,q.ib)(Qs,sN)}const ah=60;let gs=ah;const cN=(t={})=>{const{interval:e,Progress:n}=t,o=n&&n.length;return e||(o?1:ah)};function*uN(){const{workers:t}=yield(0,q.Ys)(xg);return gs=cN(t),yield(0,q.gw)(gs*1e3),yield(0,q.rM)(dN)}function*dN(){var t,e;try{for(;;){const n=yield(0,q.RE)(Kh),o=((t=n.data)==null?void 0:t.interval)&&n.data.interval!==gs;((e=n.data)!=null&&e.result||o)&&(yield Gt({response:n.data})),yield(0,q.gw)(gs*1e3)}}catch(n){Ao||Qa?(yield(0,q.gz)(ga()),yield(0,q.gz)(Wu({message:Fr(n)||"error_lost_session"}))):console.error(n)}}function*mN(){const{isUserIntoTab:t}=yield(0,q.Ys)(Hv);for(;;)try{t||(yield(0,q.qn)(js));const e=yield(0,q.Fm)([Bs,va],uN);yield(0,q.qn)(Du),yield(0,q.al)(e)}catch(e){yield lt(e)}}function fN(t,e){var n,o,a,l,i,s;const{formId:c,type:u,controlId:m,subControlId:d,value:f}=e,p=(a=(o=(n=t.forms[c])==null?void 0:n.entities)==null?void 0:o[u])==null?void 0:a[m];if(u==="table"){const g=p==null?void 0:p.columnsData.find(w=>{var h;return((h=w==null?void 0:w.control)==null?void 0:h.name)===d});return(i=(l=g==null?void 0:g.control)==null?void 0:l.cacheValues)==null?void 0:i[f]}else return(s=p==null?void 0:p.cacheValues)==null?void 0:s[f]}var pN=Object.defineProperty,lh=Object.getOwnPropertySymbols,vN=Object.prototype.hasOwnProperty,gN=Object.prototype.propertyIsEnumerable,sh=(t,e,n)=>e in t?pN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ih=(t,e)=>{for(var n in e||(e={}))vN.call(e,n)&&sh(t,n,e[n]);if(lh)for(var n of lh(e))gN.call(e,n)&&sh(t,n,e[n]);return t};function*hN(t){var e,n,o;const a=yield gn(Jh,au(t));return(o=(n=(e=a.data)==null?void 0:e.result)==null?void 0:n[0])!=null&&o.error?null:a.result[0].resultAction}function*ch(t){const{formId:e,controlId:n,value:o,type:a}=t;let l=null;const i=yield(0,q.Ys)(jt,e),s=(0,Fn.ZP)(i.entities,c=>{var u,m;if(a==="table"){const d=n;if(o!=null&&o.cellData){const{cellData:f}=o,{columnIndex:p}=f;l=(u=c[a][d].columnsData[p])==null?void 0:u.control}}else["string","integer","number","enum"].includes(a)&&(l=c[a][n]);if(l){const{reset:d,listValues:f,cashedValue:p}=o;if(d)l.cacheValues={},l.listValues=[];else{if(p&&a!=="enum"){const{cashedKey:g,cashedListValues:w}=p;(m=l.cacheValues)!=null&&m[g]||(l.cacheValues||(l.cacheValues={}),l.cacheValues[g]=w)}l.listValues=f||[]}}});yield xt({formId:e,entities:s})}function*uh({formId:t,controlId:e,type:n}){var o;const a=yield(0,q.Ys)(jt,t);if(!a)throw new Error(`\u041D\u0435\u0442 \u0444\u043E\u0440\u043C\u044B ${t}`);const l=a.entities,i=(o=l==null?void 0:l[n])==null?void 0:o[e];if(!i)throw new Error(`\u041D\u0435\u0442 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430 ${e}`);return{formId:t,controlId:e,type:n,value:{},entities:l,element:i}}function*dh({payload:t}){try{yield(0,q.RE)(St);const{formId:e,formName:n,controlId:o,type:a,value:l}=t,i=(0,en.get)(l,"cellData.rowId"),s={formId:e,formName:n,controlId:o,rowId:i,action:"autoComplete",value:l},c=yield uh({formId:e,controlId:o,type:a}),{element:u}=c;if(a==="table"&&(s.value=l.cellValue,s.controlId=l.controlId),s.value!==""){const m={cashedValue:null,listValues:null},d=u.initialValue===l;let f=yield(0,q.Ys)(fN,t);if(f)m.listValues=f;else if(!d){const p=yield hN(s);p!=null&&p.listValues&&(m.cashedValue={cashedKey:s.value,cashedListValues:p.listValues},m.listValues=p.listValues)}a==="table"?c.value=ih({cellData:l.cellData},m):c.value=m}yield ch(c)}catch(e){yield lt(e)}finally{yield Pt()}}function*bN({payload:t}){try{yield St();const{formId:e,controlId:n,type:o,value:a}=t,l=yield uh({formId:e,controlId:n,type:o}),i={reset:!0};o==="table"?l.value=ih({cellData:a.cellData},i):l.value=i,yield ch(l)}catch(e){yield lt(e)}finally{yield Pt()}}function*CN(){yield(0,q.Ds)(500,Vs,dh),yield(0,q.P2)(1e3,Ws,dh),yield(0,q.ib)(Us,bN)}var yN=Object.defineProperty,_N=Object.defineProperties,wN=Object.getOwnPropertyDescriptors,mh=Object.getOwnPropertySymbols,EN=Object.prototype.hasOwnProperty,SN=Object.prototype.propertyIsEnumerable,fh=(t,e,n)=>e in t?yN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hn=(t,e)=>{for(var n in e||(e={}))EN.call(e,n)&&fh(t,n,e[n]);if(mh)for(var n of mh(e))SN.call(e,n)&&fh(t,n,e[n]);return t},aa=(t,e)=>_N(t,wN(e));function*Hc({response:t,action:e}){var n,o;const{payload:{formId:a,controlId:l,type:i,checkResponse:s}}=e;if(s){const c=((n=t==null?void 0:t.result)==null?void 0:n.length)&&t.result.find(m=>{var d;return((d=m.resultAction)==null?void 0:d.formId)===a});if(((o=c==null?void 0:c.state)==null?void 0:o.length)===0){const m=yield(0,q.Ys)(jt,a),d=(0,Fn.ZP)(m,f=>{var p,g;const w=(g=(p=f.entities)==null?void 0:p[i])==null?void 0:g[l];if(!w)throw new Error(`\u041D\u0435\u0442 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430 ${l}`);w.value=w.initialValue,w.formattedValue=w.initialFormattedValue});yield(0,q.xN)(go(d))}}}function*lr({payload:t}){const{formId:e,controlId:n,value:o,type:a,parentType:l,skipDiffs:i,notValidValue:s}=t,c=yield(0,q.Ys)(jt,e);let u=!1;if(c&&o.eventType!=="onAutolock"){const m=(0,Fn.ZP)(c,d=>{var f,p,g,w,h,_,I;const S=(p=(f=d.entities)==null?void 0:f[l||a])==null?void 0:p[n];if(!S)throw new Error(`\u041D\u0435\u0442 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430 ${n}`);if(a==="table"){const E=S,P=n,{selectedRowIds:b,currentRowId:C}=E.initialValue;d.diffs[P]||(d.diffs[P]={currentRowId:o.lastSelectedRowId||C,currentColumnId:o.columnId});const M=d.diffs[P];if(o&&(d.entities[a][P]=hn({},E)),o!=null&&o.selectedRowIds&&(d.entities[a][P].selectedRowIds=o.selectedRowIds,o.selectedRowIds&&!(0,en.isEqual)(o.selectedRowIds,b)?M.selectedRows=o.selectedRowIds:M==null||delete M.selectedRows),o!=null&&o.hasOwnProperty("rowId")&&o.rowId){const O=d.entities[a][P],T=o.rowId,D=T==="serviceRow"&&((w=(g=O.rowsData)==null?void 0:g[0])==null?void 0:w.rowId)!=="serviceRow";M.currentRowId=D?C:T,T&&!D&&(O.currentRowId=T)}if(o!=null&&o.hasOwnProperty("columnId")){const O=d.entities[a][P];O.currentColumnId=o.columnId,M.currentColumnId=o.columnId}if(o!=null&&o.hasOwnProperty("eventType")){const{cellData:O,cellValue:T}=o,{rowId:D,rowIndex:L,columnId:$}=O,x=d.entities[a][P].rowsData[L][$];let Z=T,A=T;Z instanceof Object&&T.root&&(Z=T.root,A=T.keyValue),u=[void 0,null,""].includes(Z)?!!(x!=null&&x.initialValue)!=!!Z:(x==null?void 0:x.initialValue)!==Z;let F=(M==null?void 0:M.rowsData)||[];const z=F.findIndex(H=>H.rowId===D);u&&!i?z!==-1?F[z]=aa(hn({},F[z]),{[$]:A}):F.push({rowId:D,[$]:A}):z!==-1&&F.splice(z,1),M.rowsData=F,x.value=u?Z:x.initialValue}(0,en.isEqual)(M,{selectedRowIds:b,currentRowId:C})&&delete d.diffs[P],(0,en.isEqual)(M,{rowsData:[]})&&delete d.diffs[P]}else if(a==="grid"){const E=S,P=n;d.diffs[P]||(d.diffs[P]={});const b=d.diffs[P];o&&(d.entities[a][P]=hn({},E)),o.cellsData||(o.cellsData=[o]),o.cellsData.forEach(C=>{if(C!=null&&C.hasOwnProperty("rowId")&&(d.entities[a][P].currentRowId=C.rowId),C!=null&&C.hasOwnProperty("columnId")&&(d.entities[a][P].currentColumnId=C.columnId),C!=null&&C.hasOwnProperty("eventType")){const{cellData:M,cellValue:O}=C,{rowId:T,columnId:D}=M,L=d.entities[a][P].cells[T][D],$=(L==null?void 0:L.initialValue)!==O;u=u||$,b.cells||(b.cells={});const x=hn({},b.cells);x[T]?x[T]=hn({},x[T]):x[T]={},$?x[T][D]=(O==null?void 0:O.keyValue)||O:(delete x[T][D],Object.keys(x[T]).length||delete x[T]),b.cells=x,L.value=$?(O==null?void 0:O.root)||O:L.initialValue}}),(0,en.isEqual)(b,{cells:{}})&&delete d.diffs[P]}else if(a==="tree"){const E=d.entities[a][n],P=o,b=E.entities[P],C=uo({source:E.schema,searchKey:"nodeId",searchValue:P,iterationKey:"elements"});if(!b||!C)throw new Error("setElementValueSaga: \u041D\u0435\u0442 nodeEntity \u0438\u043B\u0438 nodeSchema");const{openNodesIds:M}=E;!!(M&&M.includes(P))?E.openNodesIds=M.filter(T=>T!==P):(h=C.elements)!=null&&h.length?E.openNodesIds=[...M,P]:u=!0}else if(["string","integer","number","enum","date"].includes(a)){const E=d.entities[a][n];let P=o,b=o;o instanceof Object&&o.root&&(P=o.root,b=o.keyValue),u=E.initialValue!==P,a==="string"&&E.formattedValue!==P&&(u=!0),(u||s)&&(E.value=P,E.formattedValue=P),u&&!i?d.diffs[n]=b:d.diffs.hasOwnProperty(n)&&delete d.diffs[n]}else if(a==="chart")d.diffs[n]=o,u=!0;else if(a==="box")d.entities[a][n]=hn({},S);else if(a==="tabs")o&&(i?d.entities[l][n]=aa(hn({},S),{activeTab:o}):(d.entities[l][n]=(I=(_=d.entities[l][n])==null?void 0:_.eventsTabs)!=null&&I.onClick?aa(hn({},S),{activeTab:o}):hn({},S),d.diffs[n]={activeTab:o}),u=!0);else if(a==="report"){if(o){const E=S,{selectedCellId:P,cellInfo:b}=o;if(P)E.selectedCellId=P;else if(b){const{value:C,collapsedRows:M}=E,{"data-tab":O,"data-row":T,"data-lvl":D,"data-ind":L}=b,$=wi(L),x=T_({dataTab:O,dataRow:T,dataLvl:D}),Z=Tm(O);let A=C.match(Z);if(!A){let z=yi(C);if(!z)return;A=z}A=A.join("");const F=`${n}${O}${T}${D}`;if($==="onCollapse"){const z=O?new RegExp(`(<tr.*?data-tab="${O}".*?data-row="${T}".*?data-lvl="${D}"[\\s\\S]*?>)([\\s\\S]*?)(<\\/([\\s\\S]*?)tr>)[\\s\\S]*?(<tr.*?data-lvl="(${Ei(D)})"[\\s\\S]*?>)([\\s\\S]*?)(<\\/([\\s\\S]*?)tr>)`,"gi"):new RegExp(`(<tr.*?data-row="${T}".*?data-lvl="${D}"[\\s\\S]*?>)([\\s\\S]*?)(<\\/([\\s\\S]*?)tr>)[\\s\\S]*?(<tr.*?data-lvl="(${Ei(D)})"[\\s\\S]*?>)([\\s\\S]*?)(<\\/([\\s\\S]*?)tr>)`,"gi");let H=A.match(z);if(H){let ee=H.join("").match(new RegExp(`<tr.*?data-lvl="(${Ei(D)})"[\\s\\S]*?>([\\s\\S]*?)<\\/([\\s\\S]*?)tr>`,"gi"));ee&&(H=H.join("").replace(ee[1],""))}else{const ee=O?new RegExp(`(<tr.*?data-tab="${O}".*?data-row="${T}".*?data-lvl="${D}"[\\s\\S]*?>)([\\s\\S]*?)(<\\/([\\s\\S]*?)tr>)[\\s\\S]*?(<\\/([\\s\\S]*?)table>)`,"gi"):new RegExp(`(<tr.*?data-row="${T}".*?data-lvl="${D}"[\\s\\S]*?>)([\\s\\S]*?)(<\\/([\\s\\S]*?)tr>)[\\s\\S]*?(<\\/([\\s\\S]*?)table>)`,"gi");if(H=A.match(ee),H)H=H.join("").slice(0,-8);else return}const K=H.match(x).join("").replace('data-ind="h;0','data-ind="h;1').replace(">-<",">+<");let G=A.replace(H,K);E.value=C.replace(A,G),E.collapsedRows=H&&F?aa(hn({},M),{[F]:H}):{}}else if($==="onExpand"){let z=M[F];if(z){let H=A.replace(x,z);E.value=C.replace(A,H)}else E.reservedRow=A.match(x).join("").replace('data-ind="h;1','data-ind="h;0').replace(">+<",">-<"),u=!0}}d.entities[a][n]=E}}else a==="upload"?d.entities[a][n]=aa(hn({},S),{value:o}):(d.entities[a][n]=hn({},S),u=o!==S.initialValue,u&&!i?d.diffs[n]=o:d.diffs.hasOwnProperty(n)&&delete d.diffs[n])});yield(0,q.xN)(go(m))}return u}function*PN(t){var e,n,o,a,l,i,s,c,u,m;try{const{payload:{formId:d,formName:f,isModal:p,showIndicator:g=!0,type:w,controlId:h,action:_,value:I,roleCenterFormId:S,href:E}}=t;let P=h,b=_;const C={},M=yield(0,q.Ys)(ix,P);let O=["loadData","onLookup"].includes(b);if(!O&&!M)if(w==="table"){if(["onEnter","hierarchyUp","onSummaryClick","onDblClick","clickIcon","onTop","onBottom","onPgUp","onPgDn","onNavigation"].includes(b))O=!0;else if(b==="onHeaderClick")O=!0,P=I,b="onClick";else if(b==="onMenuItemSelect")O=!0,C.menuItem=I.menuItem,C.menuRowId=I.rowId,b="onClick";else if(b==="onHeaderCtxMenuClick"){O=!0;const{hidden:D,menuItem:L}=I;C.columns=[{columnId:L,hidden:D}],b="onHeaderCtxMenuClick"}else if(["onRowsBlur","onMove"].includes(b)){const{isEditableCardFile:D,value:{rowId:L,submit:$}}=t.payload;yield(0,q.RE)(lr,t),D&&L&&$!==!1&&(O=!0)}else if((e=t==null?void 0:t.payload)!=null&&e.hasOwnProperty("value")){const{controlType:D,controlId:L,eventType:$,controlEvents:x,cellValue:Z}=I;if(D)switch(P=L,b=$,x!=null&&x[$]&&(b=x[$]),D){case"button":{O=!0;break}case"listButton":{P=Z,O=!0;break}case"string":case"number":case"enum":case"integer":if(["onLookup","onClick","onDblClick"].includes(b)){O=!0;break}default:(n=t==null?void 0:t.payload)!=null&&n.hasOwnProperty("value")&&(O=yield(0,q.RE)(lr,t))}else O=yield(0,q.RE)(lr,t)}}else if(w==="grid")if(b==="onHeaderEvent")O=!0,b=I.event,P=I.headerId;else if(b==="onLoadData")O=!0,b="loadData",C.data=I;else{const{controlType:T,eventType:D}=I;(T||(a=(o=I==null?void 0:I.cellsData)==null?void 0:o[0])!=null&&a.controlType)&&(D==="onLookup"?(O=!0,b=D,C.rowId=I.cellData.rowId,C.columnId=I.cellData.columnId):D==="onAutolock"?b=D:(b="onChange",(l=t==null?void 0:t.payload)!=null&&l.hasOwnProperty("value")&&(O=yield(0,q.RE)(lr,t))))}else if(w==="canvasGrid")["onEnter","onLoadData","onDblClick","onClick","onLookup"].includes(b)&&(O=!0),b==="onLoadData"?(b="loadData",C.viewBox=I):C.state=I;else if(["button","listButton","label"].includes(w))O=!0;else if(w==="box")O=yield(0,q.RE)(lr,t);else if(w==="tabs")O=yield(0,q.RE)(lr,t);else if(w==="upload")b==="approveUpload"&&(C.fileName=[]),yield(0,q.RE)(lr,t);else if(w==="tree")switch(C.nodeId=I,b){case"onDblClick":case"onChange":O=!0;break;case"onExpand":O=yield(0,q.RE)(lr,t);break;default:break}else if(w==="report")switch(b){case"onDblClick":case"onClick":C.reportInfo=I,O=!0;break;case"onExpand":case"onCollapse":{if(O=yield(0,q.RE)(lr,t),O){const{cellInfo:T}=I;C.reportInfo=T}break}default:yield(0,q.RE)(lr,t);break}else(i=t==null?void 0:t.payload)!=null&&i.hasOwnProperty("value")&&(E&&(C.href=E),O=yield(0,q.RE)(lr,t));if(b){if(b==="changeSpoiler"){const{isCollapsed:T}=I,D=yield gn(wb,{formId:d,formName:f,containerId:P,isCollapsed:T});yield Gt({response:D,parentFormId:p?null:d})}else if(["onEdit","onDblClick"].includes(b))try{g&&(yield St());const T=yield ar(hn({formId:d,roleCenterFormId:S,controlId:P,action:b},C));yield Hc({response:T,action:t}),yield Gt({response:T,parentFormId:p?null:d}),((u=(c=(s=T==null?void 0:T.result)==null?void 0:s[0])==null?void 0:c.resultAction)==null?void 0:u.autoLock)&&b==="onEdit"&&(yield(0,q.gz)(Zn(aa(hn({},t.payload),{action:"onAutolock"}))))}catch(T){yield lt(T)}finally{g&&(yield Pt())}else if(b!=="onBlur"&&O)try{g&&(yield St()),b==="onLookup"&&w==="canvasGrid"&&(C.state=I);const T=yield ar(hn({formId:d,roleCenterFormId:S,controlId:P,action:b},C));yield Hc({response:T,action:t}),["button","chart"].includes(w)&&(yield Lg({formId:d})),yield Gt({response:T,parentFormId:p?null:d})}catch(T){yield lt(T)}finally{g&&(yield Pt())}else if(b==="onMove"){if(I.submit===!1)return;const T=yield ar(hn({formId:d,roleCenterFormId:S,controlId:P,action:b},C));yield Hc({response:T,action:t}),yield Gt({response:T,parentFormId:d})}else if(b==="onAutolock"){const T=yield(0,q.Ys)(jt,d);if(!T)throw new Error(`\u041D\u0435\u0442 \u0444\u043E\u0440\u043C\u044B ${d}`);const D=T.isAutoLock?yield ar({formId:d,action:"lock"}):null,L=(m=D==null?void 0:D.result)==null?void 0:m[0],$=(0,Fn.ZP)(T,x=>{var Z,A,F,z,H,K,G,ee,j,U,Y,W;let oe=null;if(w==="table"){const{rowIndex:R}=I.cellData;oe=(H=(z=(F=(A=(Z=x.entities)==null?void 0:Z[w])==null?void 0:A[h])==null?void 0:F.rowsData)==null?void 0:z[R])==null?void 0:H[P]}else if(w==="grid"){const{rowId:R,columnId:N}=I;oe=(U=(j=(ee=(G=(K=x.entities)==null?void 0:K[w])==null?void 0:G[h])==null?void 0:ee.cells)==null?void 0:j[R])==null?void 0:U[N]}else oe=(W=(Y=x.entities)==null?void 0:Y[w])==null?void 0:W[P];if(!oe)throw new Error(`\u041D\u0435\u0442 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430 ${P}`);oe.isDisabledByAutolock=!!(L!=null&&L.error)});yield(0,q.xN)(go($)),yield Gt({response:D,parentFormId:d})}}}catch(d){yield lt(d)}}function*IN(){const t=yield(0,q.ZO)(Zn);for(;;){const e=yield(0,q.qn)(t);yield PN(e)}}function*ON(t){var e,n,o;const a=yield gn(Xh,au(t));return(o=(n=(e=a.data)==null?void 0:e.result)==null?void 0:n[0])!=null&&o.error?null:a.result[0].resultAction}function*kN(t){try{yield(0,q.RE)(St);const{formId:e,controlId:n,type:o,event:a,value:{columnName:l,isCardFile:i}}=t.payload;if(i){const s=yield(0,q.Ys)(jt,e),u=yield ON({formId:e,controlId:n,columnId:l});if(!u)throw new Error("getCtxMenuListTask: \u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445 \u043E\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");const m=(0,Fn.ZP)(s.entities,d=>{if(o==="table"){const f=d[o][n];f.contextHeader={list:u.listHeaderCtxMenu,target:l,event:a}}});yield xt({formId:e,entities:m})}}catch(e){yield lt(e)}finally{yield Pt()}}function*RN(t){try{yield(0,q.RE)(St);const{formId:e,controlId:n,type:o}=t.payload;if(n==="CardFile"){const a=yield(0,q.Ys)(jt,e),l=(0,Fn.ZP)(a.entities,i=>{if(o==="table"){const s=i[o][n];delete s.contextHeader}});yield xt({formId:e,entities:l})}}catch(e){yield lt(e)}finally{yield Pt()}}function*xN(){yield(0,q.Ds)(500,ed,kN),yield(0,q.ib)(td,RN)}function NN(t,e){var n;if((n=t==null?void 0:t.result)!=null&&n.length)for(const o of t.result)o!=null&&o.resultAction&&(o.resultAction.action==="updateRoleCenter"?o.resultAction.commandName=Zc:o.resultAction.commandName=e)}function*jc(t){try{yield(0,q.RE)(St);const{payload:{id:e,controlId:n,advanced:o,mode:a,loaded:l}}=t;let i;l?i=l:i=yield gn(Cb,{commandName:e,controlId:n,advanced:o}),NN(i,e),yield(0,q.RE)(Gt,{response:i}),i.refreshMenu&&a==="toolbarClick"&&(yield(0,q.xN)(Ys(!0)))}catch(e){yield(0,q.RE)(lt,e)}finally{yield(0,q.RE)(Pt)}}function*DN(){yield(0,q.P2)(1e3,rd,jc),yield(0,q.P2)(1e3,Xs,jc),yield(0,q.P2)(1e3,od,jc)}function MN(t){var e;let n=null;if((e=t==null?void 0:t.result)!=null&&e.length){const o=t==null?void 0:t.result.filter(s=>{const{openMode:c,action:u}=s.resultAction||{};return u==="open"&&c==="new"}),a=t==null?void 0:t.result.filter(s=>{const{action:c}=s.resultAction||{};return c==="updateRoleCenter"}),l=o.find(s=>s.resultAction.isActive);a.find(s=>s.resultAction.isActive)?n="0":l?n=l.resultAction.formId:o.length?n=o[o.length-1].resultAction.formId:n="0"}return n}function*TN(t){try{yield St();const e=yield gn(yb,t.payload);yield Gt({response:e,skipFormStackQueue:!0});const n=MN(e);yield(0,q.xN)(po(n))}catch(e){yield lt(e)}finally{yield Pt()}}function*AN(){yield(0,q.ib)(Bs,TN)}function*FN(t){yield(0,q.xN)(Gu(t))}function*BN(t){if(t!=null&&t.payload){const{formId:e,controlId:n,formName:o,type:a}=t.payload;yield FN({action:"onEnter",formId:e,controlId:n,formName:o,type:a})}}function*zN(){yield(0,q.ib)(Ks,BN)}function*LN(t={}){try{yield St();const e=yield gn(qh,t.payload);yield Gt({response:e})}catch(e){yield lt(e)}finally{yield Pt()}}function*$N(){yield(0,q.P2)(1e3,Ku,LN)}function*HN(t={}){var e;try{const n=yield gn(Zh,t.payload),o=(e=t==null?void 0:t.payload)==null?void 0:e.formId;yield Gt({response:n,parentFormId:o})}catch(n){yield lt(n)}finally{}}function*jN(){yield(0,q.ib)(qu,HN)}function*VN(t){var e,n,o;const a=yield gn(Qh,t);return(o=(n=(e=a.data)==null?void 0:e.result)==null?void 0:n[0])!=null&&o.error?null:a.result[0].resultAction}function*WN({payload:t}){try{yield(0,q.RE)(St);const{formId:e,formName:n,controlId:o,type:a,value:l}=t,i={formId:e,formName:n,controlId:o,action:"onHint"};a==="table"&&(i.rowId=l.cellData.rowId,i.controlId=l.controlId);const c=(yield VN(i)).hint,u=yield(0,q.Ys)(jt,e);if(!u)throw new Error(`\u041D\u0435\u0442 \u0444\u043E\u0440\u043C\u044B ${e}`);const m=(0,Fn.ZP)(u.entities,d=>{var f;const p=(f=d==null?void 0:d[a])==null?void 0:f[o];if(!p)throw new Error(`\u041D\u0435\u0442 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430 ${o}`);if(a==="table"){const g=p.rowsData.find(w=>w.rowId===i.rowId);g&&(g[l.controlId].hint=c)}else p.hint=c;d[a][o]=p});yield xt({formId:e,entities:m})}catch(e){yield lt(e)}finally{yield Pt()}}function*UN(){yield(0,q.Ds)(150,Zs,WN)}function*GN(){yield(0,q.$6)([rx(),iN(),lN(),CN(),IN(),Mx(),jx(),DN(),AN(),mN(),Gx(),xN(),zN(),$N(),jN(),UN()])}var n3={popperIconSize:"18px"},KN=Object.defineProperty,qN=Object.defineProperties,ZN=Object.getOwnPropertyDescriptors,ph=Object.getOwnPropertySymbols,YN=Object.prototype.hasOwnProperty,XN=Object.prototype.propertyIsEnumerable,vh=(t,e,n)=>e in t?KN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hs=(t,e)=>{for(var n in e||(e={}))YN.call(e,n)&&vh(t,n,e[n]);if(ph)for(var n of ph(e))XN.call(e,n)&&vh(t,n,e[n]);return t},JN=(t,e)=>qN(t,ZN(e)),QN=(t,e,n)=>new Promise((o,a)=>{var l=c=>{try{s(n.next(c))}catch(u){a(u)}},i=c=>{try{s(n.throw(c))}catch(u){a(u)}},s=c=>c.done?o(c.value):Promise.resolve(c.value).then(l,i);s((n=n.apply(t,e)).next())});ze.dispatch(Nu(ws.i8)),Rm.init(nu()),function(){return QN(this,null,function*(){var e;let n=null;try{const o=yield sb();bi(o.languages.webUiLanguage,(e=o.app)==null?void 0:e.appCaption),yield ze.dispatch(Fs(o)),ma.initState();const a=Os();if(a){const l=yield Eu(),i=yield _b();let s=l.menuData;s=Bc(s);const c=l.toolbarData;ze.dispatch($s(JN(hs({},i.data),{isUserIntoTab:a})));const u=Nc(c);ze.dispatch(rl(u)),ze.dispatch(fa({menu:hs(hs({},s),ma.getState())}))}}catch(o){eu(),ze.dispatch(Hs()),ze.dispatch(Fo()),ze.dispatch(fa({menu:hs({},ma.getState())})),da(o)?n=o:console.error(o)}finally{if(vm.run(GN),(0,lo.render)(r.createElement(gh.UT,null,r.createElement(Xt.zt,{store:ze},r.createElement(kk,null))),document.getElementById("react-view")),n){let o="";Ao(n)?(o=Fr(n)||"empty_message",ze.dispatch(ol({message:o}))):Qa(n)&&(o=Fr(n)||"empty_message",ze.dispatch(pa({message:o})))}}})}()}},function(sa){var Wc=function(ws){return sa(sa.s=ws)};sa.O(0,[216],function(){return Wc(73477)});var xe=sa.O()}]);
