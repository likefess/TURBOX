!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("quill")):"function"==typeof define&&define.amd?define(["quill"],t):"object"==typeof exports?exports.quillCustom=t(require("quill")):e.quillCustom=t(e.Quill)}(self,(e=>(()=>{"use strict";var t={436:t=>{t.exports=e}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};return(()=>{o.d(i,{default:()=>Ve});var e=o(436),t=o.n(e);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if("object"===n(t))for(var o in t)e.style[o]=t[o]}function c(e,t){var n=t.getBoundingClientRect();return{x:e.x-n.x-t.scrollLeft,y:e.y-n.y-t.scrollTop,x1:e.x-n.x-t.scrollLeft+e.width,y1:e.y-n.y-t.scrollTop+e.height,width:e.width,height:e.height}}function a(e,t){return e&&Object.keys(e).reduce((function(o,i){return t.includes(i)?o:Object.assign({},o,function(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t);if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===n(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}({},i,e[i]))}),{})}function l(e){var t;if(null==(t=e.path||e.composedPath&&e.composedPath())&&e.target){t=[];var n=e.target;for(t.push(n);n&&n.parentNode;)n=n.parentNode,t.push(n)}return t}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t);if("object"!==s(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key,"string"),"symbol"===s(i)?i:String(i)),o)}var i}var d=function(){function e(t,n,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return null;this.table=t,this.quill=n,this.options=o,this.domNode=null,this.initResizer()}var n,o;return n=e,(o=[{key:"initResizer",value:function(){var e=this.quill.root.parentNode,t=this.table.parentNode.getBoundingClientRect();this.domNode=document.createElement("div"),this.domNode.classList.add("quill-table-resize"),this.updateToolCells(),e.appendChild(this.domNode),r(this.domNode,{width:"".concat(t.width,"px"),height:"".concat(12,"px")}),this.updateToolCellsPosition()}},{key:"createToolCell",value:function(){var e=document.createElement("div");e.classList.add("quill-table-resize-cell");var t=document.createElement("div");return t.classList.add("quill-table-resize-cell-holder"),r(e,{height:"".concat(12,"px")}),e.appendChild(t),e}},{key:"updateToolCellsPosition",value:function(){var e=this.quill.root.parentNode,t=e.getBoundingClientRect(),n=this.table.parentNode.getBoundingClientRect();r(this.domNode,{left:"".concat(n.left-t.left+e.scrollLeft,"px"),top:"".concat(n.top-t.top+e.scrollTop-12,"px")})}},{key:"updateToolCells",value:function(){for(var e=t().find(this.table),n=e.children.tail.children.head.children,o=e.colGroup().children.map((function(e){return e})),i=function(e){return e.reduce((function(e,t){var n=t.formats().colspan;return e+parseInt(n,10)}),0)}(n),c=Array.from(this.domNode.querySelectorAll(".quill-table-resize-cell")),a=0;a<Math.max(i,c.length);a++){var l=o.at(a),s=l&&parseInt(l.formats()[l.statics.blotName].width,10),u=null;c[a]?c[a]&&a>=i?c[a].remove():r(u=c[a],{"min-width":"".concat(s,"px")}):(u=this.createToolCell(),this.domNode.appendChild(u),this.addColCellHolderHandler(u),r(u,{"min-width":"".concat(s,"px")}))}}},{key:"destroy",value:function(){return this.domNode.remove(),null}},{key:"addColCellHolderHandler",value:function(e){var n=this,o=t().find(this.table),i=e.querySelector(".quill-table-resize-cell-holder"),c=Array.from(this.domNode.querySelectorAll(".quill-table-resize-cell")).indexOf(e),a=o.colGroup().children.map((function(e){return e})).at(c),l=!1,s=0,u=0,d=0,p=0,h={},f={},m={},b=null,y=function(t){t.preventDefault(),l&&(u=t.clientX,d=f.width+u-s>=h.width-24?h.width-24-f.width-4:p+u-s>=50?u-s:50-p,r(b,{height:"".concat(o.domNode.clientHeight+12,"px"),left:"".concat(m.left+m.width-1+d,"px")}),a.format("width",p+d),r(e,{"min-width":"".concat(p+d,"px")}),o.updateTableWidth())},v=function e(t){t.preventDefault(),l&&(s=0,u=0,d=0,p=0,l=!1,i.classList.remove("dragging")),document.removeEventListener("mousemove",y,!1),document.removeEventListener("mouseup",e,!1),f={},m={},b.remove(),b=null,o.updateTableWidth();var r=n.quill.getModule("table").tableSelection;r&&r.clearSelection()};i.addEventListener("mousedown",(function(t){document.addEventListener("mousemove",y,!1),document.addEventListener("mouseup",v,!1);var o=n.quill.getModule("table").tableSelection;o&&o.clearSelection(),h=n.quill.container.getBoundingClientRect(),f=n.table.getBoundingClientRect(),m=e.getBoundingClientRect(),r(b=document.createElement("div"),{userSelect:"none",position:"fixed",top:"".concat(m.top,"px"),left:"".concat(m.left+m.width-1,"px"),zIndex:"100",height:"".concat(f.height+12,"px"),width:"1px",backgroundColor:"#0589f3"}),document.body.appendChild(b),l=!0,s=t.clientX,p=m.width,i.classList.add("dragging")}),!1)}},{key:"colToolCells",value:function(){return Array.from(this.domNode.querySelectorAll(".quill-table-resize-cell"))}}])&&u(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t);if("object"!==p(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key,"string"),"symbol"===p(i)?i:String(i)),o)}var i}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=b(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},m.apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function v(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(c,e);var t,n,o,i,r=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(o);if(i){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function c(){return h(this,c),r.apply(this,arguments)}return t=c,n=[{key:"create",value:function(e){"string"==typeof e&&(e={value:e});var t=m(g(c),"create",this).call(this,e.value);return ee.forEach((function(n){e[n]&&t.setAttribute("data-".concat(n),e[n])})),te.forEach((function(n){e[n]&&t.setAttribute("data-".concat(n),e[n])})),t}}],null&&f(t.prototype,null),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(t().import("blots/block"));w.blotName="header",w.tagName=["H1","H2","H3","H4","H5","H6"];const k=w;function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t);if("object"!==x(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key,"string"),"symbol"===x(i)?i:String(i)),o)}var i}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=q(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},S.apply(this,arguments)}function q(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function O(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var A=t().import("blots/container"),j=t().import("blots/block"),R=t().import("blots/block/embed"),M=t().import("parchment"),B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(a,e);var t,n,o,i,r,c=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(i);if(r){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function a(){return N(this,a),c.apply(this,arguments)}return t=a,o=[{key:"create",value:function(e){return S(E(a),"create",this).call(this,e)}}],(n=[{key:"checkMerge",value:function(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}},{key:"formats",value:function(e){return e?e.tagName:this.domNode.tagName}},{key:"optimize",value:function(e){S(E(a.prototype),"optimize",this).call(this,e),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}}])&&C(t.prototype,n),o&&C(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(A);B.blotName="contain",B.tagName="contain",B.scope=M.Scope.BLOCK_BLOT,B.defaultChild="block",B.allowedChildren=[j,R,A];const z=B;function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,c,a=[],l=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(a.push(o.value),a.length!==t);l=!0);}catch(e){s=!0,i=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==H(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t);if("object"!==H(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key,"string"),"symbol"===H(i)?i:String(i)),o)}var i}function D(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=Z(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},I.apply(this,arguments)}function Z(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=K(e);if(t){var i=K(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return G(this,n)}}function G(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}t().import("blots/container");var X=t().import("blots/break"),$=(t().import("blots/embed"),t().import("blots/block")),Y=(t().import("blots/block/embed"),t().import("parchment")),Q=["width"],J={width:100},ee=["row","cell"],te=["rowspan","colspan"],ne={rowspan:1,colspan:1},oe=function(e){U(n,e);var t=W(n);function n(){return V(this,n),t.apply(this,arguments)}return D(n,[{key:"format",value:function(e,t){if(te.concat(ee).indexOf(e)>-1)t?this.domNode.setAttribute("data-".concat(e),t):this.domNode.removeAttribute("data-".concat(e));else if("cell-bg"===e)t?this.domNode.setAttribute("data-cell-bg",t):this.domNode.removeAttribute("data-cell-bg");else if("header"===e){if(!t)return;var o=n.formats(this.domNode),i=o.row,r=o.cell,c=o.rowspan,a=o.colspan;I(K(n.prototype),"format",this).call(this,e,{value:t,row:i,cell:r,rowspan:c,colspan:a})}else I(K(n.prototype),"format",this).call(this,e,t)}},{key:"optimize",value:function(e){var t=this.domNode.getAttribute("data-row"),o=this.domNode.getAttribute("data-rowspan"),i=this.domNode.getAttribute("data-colspan"),r=this.domNode.getAttribute("data-cell-bg");!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName,{row:t,colspan:i,rowspan:o,"cell-bg":r}),I(K(n.prototype),"optimize",this).call(this,e)}},{key:"tableCell",value:function(){return this.parent}}],[{key:"create",value:function(e){var t=I(K(n),"create",this).call(this,e);return ee.forEach((function(n){var o="row"===n?de:pe;t.setAttribute("data-".concat(n),e[n]||o())})),te.forEach((function(n){t.setAttribute("data-".concat(n),e[n]||ne[n])})),e["cell-bg"]&&t.setAttribute("data-cell-bg",e["cell-bg"]),t}},{key:"formats",value:function(e){return te.concat(ee).concat(["cell-bg"]).reduce((function(t,n){return e.hasAttribute("data-".concat(n))&&(t[n]=e.getAttribute("data-".concat(n))||void 0),t}),{})}}]),n}($);oe.blotName="table-cell-line",oe.className="quill-table-cell-line",oe.tagName="P";var ie=function(e){U(n,e);var t=W(n);function n(){return V(this,n),t.apply(this,arguments)}return D(n,[{key:"checkMerge",value:function(){if(I(K(n.prototype),"checkMerge",this).call(this)&&null!=this.next.children.head){var e=this.children.head.formats()[this.children.head.statics.blotName],t=this.children.tail.formats()[this.children.tail.statics.blotName],o=this.next.children.head.formats()[this.next.children.head.statics.blotName],i=this.next.children.tail.formats()[this.next.children.tail.statics.blotName];return e.cell===t.cell&&e.cell===o.cell&&e.cell===i.cell}return!1}},{key:"cellOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"formats",value:function(){var e=this,t={};return this.domNode.hasAttribute("data-row")&&(t.row=this.domNode.getAttribute("data-row")),this.domNode.hasAttribute("data-cell-bg")&&(t["cell-bg"]=this.domNode.getAttribute("data-cell-bg")),te.reduce((function(t,n){return e.domNode.hasAttribute(n)?t[n]=e.domNode.getAttribute(n):t[n]=1,t}),t)}},{key:"toggleAttribute",value:function(e,t){t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e)}},{key:"formatChildren",value:function(e,t){this.children.forEach((function(n){n.format(e,t)}))}},{key:"format",value:function(e,t){te.indexOf(e)>-1?(this.toggleAttribute(e,t),this.formatChildren(e,t)):["row"].indexOf(e)>-1?(this.toggleAttribute("data-".concat(e),t),this.formatChildren(e,t)):"cell-bg"===e?(this.toggleAttribute("data-cell-bg",t),this.formatChildren(e,t),this.domNode.style.backgroundColor=t||"initial"):I(K(n.prototype),"format",this).call(this,e,t)}},{key:"optimize",value:function(e){var t=this.domNode.getAttribute("data-row");!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName,{row:t}),I(K(n.prototype),"optimize",this).call(this,e)}},{key:"row",value:function(){return this.parent}},{key:"rowOffset",value:function(){return this.row()?this.row().rowOffset():-1}},{key:"table",value:function(){return this.row()&&this.row().table()}}],[{key:"create",value:function(e){var t=I(K(n),"create",this).call(this,e);return t.setAttribute("data-row",e.row),te.forEach((function(n){e[n]&&t.setAttribute(n,e[n])})),e["cell-bg"]&&(t.setAttribute("data-cell-bg",e["cell-bg"]),t.style.backgroundColor=e["cell-bg"]),t}},{key:"formats",value:function(e){var t={};return e.hasAttribute("data-row")&&(t.row=e.getAttribute("data-row")),e.hasAttribute("data-cell-bg")&&(t["cell-bg"]=e.getAttribute("data-cell-bg")),te.reduce((function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t}),t)}}]),n}(z);ie.blotName="table",ie.tagName="TD";var re=function(e){U(n,e);var t=W(n);function n(){return V(this,n),t.apply(this,arguments)}return D(n,[{key:"checkMerge",value:function(){if(null!=this.next.children.head){var e=this.children.head.formats(),t=this.children.tail.formats(),n=this.next.children.head.formats(),o=this.next.children.tail.formats();return(null==e?void 0:e.row)===(null==t?void 0:t.row)&&(null==e?void 0:e.row)===(null==n?void 0:n.row)&&(null==e?void 0:e.row)===(null==o?void 0:o.row)}return!1}},{key:"formats",value:function(){var e=this;return["row"].reduce((function(t,n){return e.domNode.hasAttribute("data-".concat(n))&&(t[n]=e.domNode.getAttribute("data-".concat(n))),t}),{})}},{key:"optimize",value:function(e){!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}},{key:"rowOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"table",value:function(){return this.parent&&this.parent.parent}}],[{key:"create",value:function(e){var t=I(K(n),"create",this).call(this,e);return t.setAttribute("data-row",e.row),t}}]),n}(z);re.blotName="table-row",re.tagName="TR";var ce=function(e){U(n,e);var t=W(n);function n(){return V(this,n),t.apply(this,arguments)}return D(n,[{key:"optimize",value:function(e){!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName),I(K(n.prototype),"optimize",this).call(this,e)}}]),n}(z);ce.blotName="table-body",ce.tagName="TBODY";var ae=function(e){U(n,e);var t=W(n);function n(){return V(this,n),t.apply(this,arguments)}return D(n,[{key:"format",value:function(e,t){Q.indexOf(e)>-1?this.domNode.setAttribute("".concat(e),t||J[e]):I(K(n.prototype),"format",this).call(this,e,t)}},{key:"optimize",value:function(e){!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName),I(K(n.prototype),"optimize",this).call(this,e)}},{key:"html",value:function(){return this.domNode.outerHTML}}],[{key:"create",value:function(e){var t=I(K(n),"create",this).call(this,e);return Q.forEach((function(n){t.setAttribute("".concat(n),e[n]||J[n])})),t}},{key:"formats",value:function(e){return Q.reduce((function(t,n){return e.hasAttribute("".concat(n))&&(t[n]=e.getAttribute("".concat(n))||void 0),t}),{})}}]),n}($);ae.blotName="table-col",ae.tagName="col";var le=function(e){U(n,e);var t=W(n);function n(){return V(this,n),t.apply(this,arguments)}return D(n,[{key:"optimize",value:function(e){!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName),I(K(n.prototype),"optimize",this).call(this,e)}}]),n}(z);le.blotName="table-col-group",le.tagName="colgroup";var se=function(e){U(o,e);var n=W(o);function o(e,t){var i;return V(this,o),(i=n.call(this,e,t)).updateTableWidth(),i}return D(o,[{key:"updateTableWidth",value:function(){var e=this;setTimeout((function(){var t=e.colGroup();if(t){var n=t.children.reduce((function(e,t){return e+parseInt(t.formats()[ae.blotName].width,10)}),0);e.domNode.style.width="".concat(n,"px")}}),0)}},{key:"cells",value:function(e){return this.rows().map((function(t){return t.children.at(e)}))}},{key:"colGroup",value:function(){return this.children.head}},{key:"deleteColumns",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0,i=this.descendants(ce),r=P(i,1),a=r[0];if(null!=a&&null!=a.children.head){var l=this.descendants(ie),s=[],u=[];if(l.forEach((function(t){var n=c(t.domNode.getBoundingClientRect(),o);n.x+5>e.x&&n.x1-5<e.x1?s.push(t):n.x<e.x+5&&n.x1>e.x1-5&&u.push(t)})),s.length===l.length)return this.tableDestroy(),!0;n.forEach((function(e){t.colGroup().children.map((function(e){return e})).at(n[0]).remove()})),s.forEach((function(e){e.remove()})),u.forEach((function(e){var t=parseInt(e.formats().colspan,10);e.format("colspan",t-n.length)})),this.updateTableWidth()}}},{key:"deleteRow",value:function(e,t){var n=P(this.descendants(ce),1)[0];if(null!=n&&null!=n.children.head){var o=this.descendants(ie),i=this.descendants(re),r=[],a=[],l=[],s=i.filter((function(n){var o=c(n.domNode.getBoundingClientRect(),t);return o.y>e.y-5&&o.y1<e.y1+5}));if(o.forEach((function(n){var o=c(n.domNode.getBoundingClientRect(),t);o.y>e.y-5&&o.y1<e.y1+5?r.push(n):o.y<e.y+5&&o.y1>e.y1-5&&(a.push(n),Math.abs(o.y-e.y)<5&&l.push(n))})),r.length!==o.length){var u=this.rows().reduce((function(n,o){var i=c(o.domNode.getBoundingClientRect(),t);return i.y>e.y-5&&i.y1<e.y1+5&&(n+=1),n}),0);l.forEach((function(e){var n=c(e.domNode.getBoundingClientRect(),t),o=e.parent.next,i=o.children.reduce((function(e,o){var i=c(o.domNode.getBoundingClientRect(),t);return Math.abs(n.x1-i.x)<5&&(e=o),e}),null);o.insertBefore(e,i),e.format("row",o.formats().row)})),r.forEach((function(e){e.remove()})),a.forEach((function(e){var t=parseInt(e.formats().rowspan,10);e.format("rowspan",t-u)})),s.forEach((function(e){return e.remove()}))}else this.tableDestroy()}}},{key:"tableDestroy",value:function(){var e=t().find(this.scroll.domNode.parentNode),n=e.getModule("table");this.parent.remove(),n.hideTableTools(),e.update(t().sources.USER)}},{key:"insertCell",value:function(e,t){var n=pe(),o=e.formats().row,i=Y.create(ie.blotName,Object.assign({},ne,{row:o})),r=Y.create(oe.blotName,{row:o,cell:n});i.appendChild(r),t?e.insertBefore(i,t):e.appendChild(i)}},{key:"insertColumn",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3?arguments[3]:void 0,i=this.descendants(ce),r=P(i,1),a=r[0],l=this.descendants(le),s=P(l,1),u=s[0],d=this.descendants(ae),p=[],h=[],f=[];if(null!=a&&null!=a.children.head){var m=this.descendants(ie);m.forEach((function(t){var i=c(t.domNode.getBoundingClientRect(),o);n?Math.abs(i.x1-e.x1)<5?p.push(t):e.x1-i.x>5&&e.x1-i.x1<-5&&h.push(t):Math.abs(i.x-e.x)<5?p.push(t):e.x-i.x>5&&e.x-i.x1<-5&&h.push(t)})),p.forEach((function(e){var t=n?e.next:e,o=pe(),i=e.parent,r=i.formats().row,c=e.formats(),a=Y.create(ie.blotName,Object.assign({},ne,{row:r,rowspan:c.rowspan})),l=Y.create(oe.blotName,{row:r,cell:o,rowspan:c.rowspan});a.appendChild(l),t?i.insertBefore(a,t):i.appendChild(a),f.push(a)}));var b=Y.create(ae.blotName,!0),y=n?d[t].next:d[t];return y?u.insertBefore(b,y):u.appendChild(b),h.forEach((function(e){var t=e.formats().colspan;e.format("colspan",parseInt(t,10)+1),f.push(e)})),f.sort((function(e,t){return e.domNode.getBoundingClientRect().y-t.domNode.getBoundingClientRect().y})),this.updateTableWidth(),f}}},{key:"insertRow",value:function(e,t,n){var o=P(this.descendants(ce),1)[0];if(null!=o&&null!=o.children.head){var i=this.descendants(ie),r=de(),a=Y.create(re.blotName,{row:r}),l=[],s=[],u=[];i.forEach((function(o){var i=c(o.domNode.getBoundingClientRect(),n);t?Math.abs(i.y1-e.y1)<5?l.push(o):e.y1-i.y>5&&e.y1-i.y1<-5&&s.push(o):Math.abs(i.y-e.y)<5?l.push(o):e.y-i.y>5&&e.y-i.y1<-5&&s.push(o)}));var d=function(e,t){return e.domNode.getBoundingClientRect().x-t.domNode.getBoundingClientRect().x};l.sort(d),l.forEach((function(e){var t=pe(),n=e.formats(),o=Y.create(ie.blotName,Object.assign({},ne,{row:r,colspan:n.colspan})),i=Y.create(oe.blotName,{row:r,cell:t,colspan:n.colspan}),c=Y.create(X.blotName);i.appendChild(c),o.appendChild(i),a.appendChild(o),u.push(o)})),s.forEach((function(e){var t=parseInt(e.formats().rowspan,10);e.format("rowspan",t+1),u.push(e)}));var p=this.rows().find((function(o){var i=c(o.domNode.getBoundingClientRect(),n);return t?Math.abs(i.y-e.y-e.height)<5:Math.abs(i.y-e.y)<5}));return o.insertBefore(a,p),u.sort(d),u}}},{key:"mergeCells",value:function(e,t,n,o,i){var r=t.reduce((function(e,t,i){return 0!==i?(e&&t.moveChildren(e),t.remove()):(t.format("colspan",o),t.format("rowspan",n),e=t),e}),null),c=r.domNode.getAttribute("data-row"),a=r.children.head.domNode.getAttribute("data-cell");return r.children.forEach((function(e){e.format("cell",a),e.format("row",c),e.format("colspan",o),e.format("rowspan",n)})),r}},{key:"unmergeCells",value:function(e,t){var n=this,o={},i=1,r=1;e.forEach((function(e){if(o=e.formats(),i=o.rowspan,(r=o.colspan)>1){var a=e.next,l=e.row();e.format("colspan",1);for(var s=r;s>1;s--)n.insertCell(l,a)}if(i>1){for(var u=i,d=e.row().next;u>1;){for(var p=d.children.reduce((function(n,o){var i=c(e.domNode.getBoundingClientRect(),t),r=c(o.domNode.getBoundingClientRect(),t);return Math.abs(i.x1-r.x)<5&&(n=o),n}),null),h=r;h>0;h--)n.insertCell(d,p);u-=1,d=d.next}e.format("rowspan",1)}}))}},{key:"optimize",value:function(e){!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName),I(K(o.prototype),"optimize",this).call(this,e)}},{key:"rows",value:function(){var e=this.children.tail;return null==e?[]:e.children.map((function(e){return e}))}}],[{key:"create",value:function(){var e=I(K(o),"create",this).call(this);return e.setAttribute("contenteditable",!0),e}}]),o}(z);se.blotName="table-container",se.className="quill-table",se.tagName="TABLE";var ue=function(e){U(n,e);var t=W(n);function n(e,o){var i;return V(this,n),i=t.call(this,e),e.setAttribute("contenteditable",!1),e.addEventListener("scroll",(function(e){var t=o.getModule("table");t.columnTool&&(t.columnTool.domNode.scrollLeft=e.target.scrollLeft),t.tableSelection&&t.tableSelection.selectedTds.length>0&&t.tableSelection.updateHelpLinesPosition(),t.columnTool&&t.columnTool.updateToolCellsPosition()}),!1),i}return D(n,[{key:"table",value:function(){return this.children.head}}]),n}(z);function de(){var e=Math.random().toString(36).slice(2,6);return"row-".concat(e)}function pe(){var e=Math.random().toString(36).slice(2,6);return"cell-".concat(e)}function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function fe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==he(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t);if("object"!==he(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key,"string"),"symbol"===he(i)?i:String(i)),o)}var i}ue.blotName="table-view",ue.className="quill-table-wrapper",ue.tagName="DIV",ue.allowedChildren=[se],se.requiredContainer=ue,se.allowedChildren=[ce,le],ce.requiredContainer=se,ce.allowedChildren=[re],re.requiredContainer=ce,le.allowedChildren=[ae,$],le.requiredContainer=se,ae.requiredContainer=le,re.allowedChildren=[ie],ie.requiredContainer=re,ie.allowedChildren=[oe],oe.requiredContainer=ie;var me=["left","right","top","bottom"],be=function(){function e(t,n,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return null;this.table=t,this.quill=n,this.options=o,this.boundary={},this.selectedTds=[],this.dragging=!1,this.selectingHandler=this.mouseDownHandler.bind(this),this.clearSelectionHandler=this.clearSelection.bind(this),this.helpLinesInitial(),this.quill.root.addEventListener("mousedown",this.selectingHandler,!1),this.quill.on("text-change",this.clearSelectionHandler)}var n,o;return n=e,(o=[{key:"helpLinesInitial",value:function(){var e=this,t=this.quill.root.parentNode;me.forEach((function(n){e[n]=document.createElement("div"),e[n].classList.add("quill-table-selection-line"),e[n].classList.add("quill-table-selection-line-"+n),r(e[n],{position:"absolute",display:"none","background-color":"#0589f3"}),t.appendChild(e[n])}))}},{key:"mouseDownHandler",value:function(e){if(0===e.button&&e.target.closest(".quill-table")){this.quill.root.addEventListener("mousemove",i,!1),this.quill.root.addEventListener("mouseup",(function e(n){t.quill.root.removeEventListener("mousemove",i,!1),t.quill.root.removeEventListener("mouseup",e,!1),t.dragging=!1}),!1);var t=this,n=e.target.closest("td[data-row]"),o=c(n.getBoundingClientRect(),this.quill.root.parentNode);this.dragging=!0,this.boundary=ye(o,o),this.correctBoundary(),this.selectedTds=this.computeSelectedTds(),this.repositionHelpLines()}function i(e){if(0===e.button&&e.target.closest(".quill-table")){var i=e.target.closest("td[data-row]"),r=c(i.getBoundingClientRect(),t.quill.root.parentNode);t.boundary=ye(o,r),t.correctBoundary(),t.selectedTds=t.computeSelectedTds(),t.repositionHelpLines(),n!==i&&t.quill.blur()}}}},{key:"correctBoundary",value:function(){var e=this;t().find(this.table).descendants(ie).forEach((function(t){var n=c(t.domNode.getBoundingClientRect(),e.quill.root.parentNode),o=n.x,i=n.y,r=n.width,a=n.height;(o+2>=e.boundary.x&&o+2<=e.boundary.x1||o-2+r>=e.boundary.x&&o-2+r<=e.boundary.x1)&&(i+2>=e.boundary.y&&i+2<=e.boundary.y1||i-2+a>=e.boundary.y&&i-2+a<=e.boundary.y1)&&(e.boundary=ye(e.boundary,{x:o,y:i,width:r,height:a}))}))}},{key:"computeSelectedTds",value:function(){var e=this;return t().find(this.table).descendants(ie).reduce((function(t,n){var o=c(n.domNode.getBoundingClientRect(),e.quill.root.parentNode),i=o.x,r=o.y,a=o.width,l=o.height;return i+2>=e.boundary.x&&i-2+a<=e.boundary.x1&&r+2>=e.boundary.y&&r-2+l<=e.boundary.y1&&t.push(n),t}),[])}},{key:"repositionHelpLines",value:function(){var e=this.table.parentNode.scrollLeft;r(this.left,{display:"block",left:"".concat(this.boundary.x-e-1,"px"),top:"".concat(this.boundary.y,"px"),height:"".concat(this.boundary.height+1,"px"),width:"1px"}),r(this.right,{display:"block",left:"".concat(this.boundary.x1-e,"px"),top:"".concat(this.boundary.y,"px"),height:"".concat(this.boundary.height+1,"px"),width:"1px"}),r(this.top,{display:"block",left:"".concat(this.boundary.x-1-e,"px"),top:"".concat(this.boundary.y,"px"),width:"".concat(this.boundary.width+1,"px"),height:"1px"}),r(this.bottom,{display:"block",left:"".concat(this.boundary.x-1-e,"px"),top:"".concat(this.boundary.y1+1,"px"),width:"".concat(this.boundary.width+1,"px"),height:"1px"})}},{key:"updateHelpLinesPosition",value:function(){var e=c(this.selectedTds[0].domNode.getBoundingClientRect(),this.quill.root.parentNode),t=c(this.selectedTds[this.selectedTds.length-1].domNode.getBoundingClientRect(),this.quill.root.parentNode);this.boundary=ye(e,t),this.repositionHelpLines()}},{key:"destroy",value:function(){var e=this;return me.forEach((function(t){e[t].remove(),e[t]=null})),this.quill.root.removeEventListener("mousedown",this.selectingHandler,!1),this.quill.off("text-change",this.clearSelectionHandler),null}},{key:"setSelection",value:function(e,t){this.boundary=ye(c(e,this.quill.root.parentNode),c(t,this.quill.root.parentNode)),this.correctBoundary(),this.selectedTds=this.computeSelectedTds(),this.repositionHelpLines()}},{key:"clearSelection",value:function(){var e=this;this.boundary={},this.selectedTds=[],me.forEach((function(t){e[t]&&r(e[t],{display:"none"})}))}}])&&fe(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();function ye(e,t){var n=Math.min(e.x,t.x,e.x+e.width-1,t.x+t.width-1),o=Math.max(e.x,t.x,e.x+e.width-1,t.x+t.width-1),i=Math.min(e.y,t.y,e.y+e.height-1,t.y+t.height-1),r=Math.max(e.y,t.y,e.y+e.height-1,t.y+t.height-1);return{x:n,x1:o,y:i,y1:r,width:o-n,height:r-i}}function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ge(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==ve(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t);if("object"!==ve(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key,"string"),"symbol"===ve(i)?i:String(i)),o)}var i}var we={colorCell:{text:"Цвет ячейки",iconSrc:'<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg class="icon" width="20px" height="20.00px" viewBox="0 0 1024 1024" version="1.1" id="svg4" sodipodi:docname="icon_operation_10.svg" inkscape:version="1.2 (dc2aedaf03, 2022-05-15)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs8"/> <sodipodi:namedview id="namedview6" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1" showgrid="false" inkscape:zoom="14.654788" inkscape:cx="21.392326" inkscape:cy="21.221733" inkscape:window-width="1920" inkscape:window-height="1009" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="g4400"/> <g id="g4400" transform="matrix(2.0003907,0,0,2.0003907,-0.40007814,0)" style="stroke:none;stroke-opacity:1;fill:#595959;fill-opacity:1"> <path d="m 509.9,420.3 c -2.4,-10 -6.5,-19.2 -11.3,-27.8 -7.1,-12.9 -15.8,-24.3 -23.7,-33.8 -3.9,-4.7 -7.7,-9 -10.9,-12.6 -1.6,-1.8 -3.1,-3.4 -4.4,-4.9 -1.3,-1.4 -2.3,-2.6 -3.1,-3.6 v 0 c -2.2,-2.7 -5,-4.8 -8.1,-6.2 -3,-1.4 -6.3,-2.1 -9.6,-2.1 -2.5,0 -5.1,0.4 -7.5,1.3 -2.5,0.9 -4.8,2.2 -6.9,3.9 -1.2,1 -2.3,2 -3.2,3.2 l 0.1,0.1 c -1.2,1.5 -3,3.5 -5.1,5.8 -3.9,4.4 -8.9,10 -14.2,16.4 -8,9.7 -16.6,21.3 -23.6,34.3 -3.5,6.5 -6.6,13.4 -8.8,20.7 -2.3,7.3 -3.7,15 -3.7,23.1 0,10.1 2,19.9 5.7,28.7 5.5,13.3 14.7,24.6 26.4,32.6 5.8,4 12.3,7.2 19.2,9.4 6.9,2.2 14.3,3.4 21.8,3.4 10.1,0 19.8,-2.1 28.6,-5.9 13.2,-5.7 24.3,-15.1 32.1,-26.9 7.8,-11.8 12.4,-26.1 12.4,-41.3 0,-6.1 -0.8,-12.1 -2.2,-17.8 z" id="path4394" style="fill:#595959;fill-opacity:1;stroke:none;stroke-opacity:1" sodipodi:nodetypes="cccscsscsccccccscsccsssssc"/> <path d="m 377.4,329.3 c 1.1,-1.1 2,-1.9 2.7,-2.6 v 0 l 0.2,-0.2 v 0 c 0.3,-0.2 0.8,-0.4 1.4,-0.6 1.7,-0.6 4.6,-1.3 7.8,-1.6 3.3,-0.4 6.9,-0.5 10.5,-0.5 h 0.3 0.1 v 0 c 3.5,0 6.8,-0.7 9.9,-2 4.6,-2 8.5,-5.2 11.3,-9.3 1.4,-2 2.5,-4.3 3.2,-6.7 0.8,-2.4 1.2,-5 1.2,-7.6 v -0.1 0 c 0,-6.8 -2.8,-13.4 -7.7,-18.2 l -12.7,12.7 -5.1,5.2 v 0 -0.1 l 5.1,-5.1 12.7,-12.7 c 0,0 0,0 -0.1,-0.1 l 0.1,0.1 0.2,-0.3 -264.3,-262.2 0.1,0.1 C 148.5,11.7 141.8,7.3 134.6,4.4 127.4,1.5 119.8,0 112.2,0 104.6,0 97,1.4 89.9,4.3 82.8,7.2 76,11.6 70.3,17.3 l -0.1,0.1 -5.9,5.9 C 58.5,29.1 54.1,35.8 51.1,43 c -2.9,7.2 -4.4,14.8 -4.4,22.4 0,7.6 1.4,15.1 4.3,22.3 2.9,7.1 7.3,13.9 13,19.6 l 0.1,0.1 47.5,47.5 -96.6,96.5 c -4.9,4.9 -8.6,10.6 -11.1,16.7 -2.5,6.1 -3.7,12.5 -3.7,19 0,6.4 1.2,12.8 3.7,18.8 2.4,6 6.1,11.7 11,16.6 0.3,0.3 0.5,0.5 0.7,0.7 l 149.9,144 c 4.8,4.6 10.4,8.1 16.4,10.5 5.9,2.3 12.2,3.5 18.4,3.5 6.3,0 12.6,-1.2 18.6,-3.5 6,-2.4 11.6,-5.9 16.4,-10.6 21.6,-20.9 55.4,-53.6 85,-82.3 14.8,-14.3 28.5,-27.7 39.2,-38 5.3,-5.2 9.9,-9.6 13.4,-13.1 1.8,-1.7 3.3,-3.2 4.5,-4.4 z m 23.1,-31.4 v 0 l -0.2,0.1 v 0 0 0 l 0.1,-0.1 z m 0,-0.2 z m -20.5,29 c 0,0 0,0 0,0 z M 90.1,81.6 v 0 c -2.4,-2.4 -4,-4.9 -5.1,-7.6 -1.1,-2.7 -1.7,-5.7 -1.7,-8.6 0,-2.9 0.6,-5.9 1.7,-8.6 1.1,-2.7 2.8,-5.3 5,-7.6 l 5.9,-5.9 0.1,-0.1 c 2.3,-2.3 4.8,-3.9 7.5,-5 2.7,-1.1 5.7,-1.7 8.6,-1.7 2.9,0 5.9,0.6 8.6,1.7 2.7,1.1 5.3,2.8 7.6,5 L 175.9,90.5 137.4,129 Z M 363,294 c -3,1.6 -6,3.6 -8.8,6.4 -0.5,0.5 -1.4,1.4 -2.6,2.6 -4.5,4.4 -13.1,12.8 -24.1,23.5 -33,32 -87.5,84.7 -117.8,114.1 -1.4,1.3 -2.9,2.3 -4.5,2.9 -1.6,0.6 -3.3,1 -5.1,1 -1.7,0 -3.4,-0.3 -5.1,-1 -1.6,-0.6 -3.1,-1.6 -4.5,-2.9 L 40.9,296.9 41,297 40.8,296.8 c -1.4,-1.4 -2.3,-2.9 -3,-4.5 -0.7,-1.6 -1,-3.4 -1,-5.2 0,-1.8 0.3,-3.5 1,-5.2 0.7,-1.6 1.7,-3.2 3,-4.5 L 202,116.3 376.3,289.2 c -1.4,0.3 -2.9,0.7 -4.4,1.1 -2.9,1 -5.8,2.1 -8.9,3.7 z" id="path4396" style="stroke:none;stroke-opacity:1;fill:#595959;fill-opacity:1"/> <path d="m 418.3,279.9 v 0 0 0 c 0,0 0,0 0,0 z" id="path4398" style="stroke:none;stroke-opacity:1;fill:#595959;fill-opacity:1"/> </g> </svg> ',handler:function(){var e=this,t=document.createElement("input");t.type="color",t.onchange=function(n){e.selectedTds.forEach((function(e){e.format("cell-bg",n.target.value)})),t.remove()},t.click()}},insertColumnRight:{text:"Вставить столбец справа",iconSrc:'<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg class="icon" width="20px" height="20px" viewBox="0 0 1024 1024" version="1.1" id="svg4" sodipodi:docname="icon_operation_1.svg" inkscape:version="1.2 (dc2aedaf03, 2022-05-15)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs8"/> <sodipodi:namedview id="namedview6" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1" showgrid="false" inkscape:zoom="29.309576" inkscape:cx="7.8643239" inkscape:cy="10.269681" inkscape:window-width="1920" inkscape:window-height="1009" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="svg4"/> <path fill="#595959" d="m 0,307.41334 h 614.40001 v 51.2 H 0 Z M 0,665.6 h 614.40001 v 51.2 H 0 Z M 307.2,51.2 h 51.2 V 972.80001 H 307.2 Z M 1024,0 c 0,341.33333 0,682.66667 0,1024 H 0 C -0.10152714,673.81795 0.10803433,303.24248 0,0 376.28769,0.02151831 678.59035,0 1024,0 Z M 51.2,51.2 c 7e-6,307.2 -9e-6,614.4 0,921.6 335.77092,-10e-6 618.64609,5e-5 921.6,0 0,-335.85263 4e-5,-618.54493 0,-921.6 -307.2,-1e-6 -614.4,0 -921.6,0 z M 614.40001,0 V 1024 H 1024 C 1024.1246,682.66671 1023.8438,341.33325 1024,0 887.46666,0.02460678 750.93339,0 614.40001,0 Z m 307.41332,537.81333 h -76.79999 v 76.8 h -51.41333 v -76.8 H 716.8 V 486.4 h 76.80001 v -76.8 h 51.41333 v 76.8 h 76.79999 z" id="path2" style="stroke-width:1.16666" sodipodi:nodetypes="ccccccccccccccccccccccccccccccccccccccccccc"/> </svg> ',handler:function(){var e=t().find(this.table),n=xe(this.columnToolCells,this.boundary,(function(e,t){return Math.abs(e.x+e.width-t.x1)<=5}),this.quill.root.parentNode),o=e.insertColumn(this.boundary,n,!0,this.quill.root.parentNode);this.tableColumnTool.updateToolCells(),this.quill.update(t().sources.USER),this.quill.setSelection(this.quill.getIndex(o[0]),0,t().sources.SILENT),this.tableSelection.setSelection(o[0].domNode.getBoundingClientRect(),o[0].domNode.getBoundingClientRect())}},insertColumnLeft:{text:"Вставить столбец слева",iconSrc:'<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg class="icon" width="20px" height="20.00px" viewBox="0 0 1024 1024" version="1.1" id="svg4" sodipodi:docname="icon_operation_2.svg" xml:space="preserve" inkscape:version="1.2 (dc2aedaf03, 2022-05-15)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs8"/><sodipodi:namedview id="namedview6" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1" showgrid="false" inkscape:zoom="29.309576" inkscape:cx="8.2737464" inkscape:cy="8.3590428" inkscape:window-width="1920" inkscape:window-height="1009" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="svg4"/><path fill="#595959" d="M 1024.0022,716.58666 H 409.60215 v -51.2 h 614.40005 z m 0,-358.18666 H 409.60215 V 307.2 H 1024.0022 Z M 716.80215,972.8 h -51.2 V 51.19999 h 51.2 z M 0.00212484,1024 c 0,-341.33333 0,-682.66667 0,-1024 H 1024.0022 c 0.1015,350.18205 -0.1081,720.75752 0,1024 -376.28775,-0.022 -678.59035,0 -1024.00007516,0 z M 972.80215,972.8 c 0,-307.2 0,-614.4 0,-921.6 -335.7709,10e-6 -618.6461,-5e-5 -921.599995,0 0,335.85263 0,618.54493 0,921.6 307.199995,0 614.399995,0 921.599995,0 z m -563.2,51.2 V 0 H 0.00212484 c -0.1246,341.33329 0.1562,682.66675 0,1024 136.53332516,-0.025 273.06662516,0 409.60002516,0 z M 102.18885,486.18667 h 76.8 v -76.8 h 51.4133 v 76.8 h 76.8 V 537.6 h -76.8 v 76.8 h -51.4133 v -76.8 h -76.8 z" id="path2-7" style="stroke-width:1.16666" sodipodi:nodetypes="ccccccccccccccccccccccccccccccccccccccccccc"/></svg> ',handler:function(){var e=t().find(this.table),n=xe(this.columnToolCells,this.boundary,(function(e,t){return Math.abs(e.x-t.x)<=5}),this.quill.root.parentNode),o=e.insertColumn(this.boundary,n,!1,this.quill.root.parentNode);this.tableColumnTool.updateToolCells(),this.quill.update(t().sources.USER),this.quill.setSelection(this.quill.getIndex(o[0]),0,t().sources.SILENT),this.tableSelection.setSelection(o[0].domNode.getBoundingClientRect(),o[0].domNode.getBoundingClientRect())}},insertRowUp:{text:"Вставить строку вверх",iconSrc:'<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg class="icon" width="20px" height="20.00px" viewBox="0 0 1024 1024" version="1.1" id="svg4" sodipodi:docname="icon_operation_3.svg" xml:space="preserve" inkscape:version="1.2 (dc2aedaf03, 2022-05-15)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs8"/><sodipodi:namedview id="namedview6" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1" showgrid="false" inkscape:zoom="29.309576" inkscape:cx="8.1031537" inkscape:cy="11.770897" inkscape:window-width="1920" inkscape:window-height="1009" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="svg4"/><path fill="#595959" d="M 307.41334,1024 V 409.59999 h 51.2 V 1024 Z M 665.6,1024 V 409.59999 h 51.2 V 1024 Z M 51.200007,716.8 V 665.6 H 972.80001 v 51.2 z M 0,0 C 341.33333,0 682.66667,0 1024,0 V 1024 C 673.81795,1024.1015 303.24248,1023.892 0,1024 0.0215,647.71231 0,345.40965 0,0 Z M 51.200007,972.8 C 358.4,972.79999 665.6,972.80001 972.8,972.8 c -10e-6,-335.77092 5e-5,-618.64609 0,-921.599997 -335.85263,0 -618.54493,-4e-5 -921.599993,0 -10e-7,307.199997 0,614.399997 0,921.599997 z M 0,409.59999 H 1024 V 0 C 682.66671,-0.1246 341.33325,0.1562 0,0 0.0246,136.53334 0,273.06661 0,409.59999 Z M 537.81333,102.18667 v 76.79999 h 76.8 v 51.41333 h -76.8 V 307.2 H 486.4 v -76.80001 h -76.8 v -51.41333 h 76.8 v -76.79999 z" id="path2-4" style="stroke-width:1.16666" sodipodi:nodetypes="ccccccccccccccccccccccccccccccccccccccccccc"/></svg> ',handler:function(){var e=t().find(this.table).insertRow(this.boundary,!1,this.quill.root.parentNode);this.quill.update(t().sources.USER),this.quill.setSelection(this.quill.getIndex(e[0]),0,t().sources.SILENT),this.tableSelection.setSelection(e[0].domNode.getBoundingClientRect(),e[0].domNode.getBoundingClientRect())}},insertRowDown:{text:"Вставить строку вниз",iconSrc:'<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg class="icon" width="20px" height="20.00px" viewBox="0 0 1024 1024" version="1.1" id="svg4" sodipodi:docname="icon_operation_4.svg" xml:space="preserve" inkscape:version="1.2 (dc2aedaf03, 2022-05-15)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs8"/><sodipodi:namedview id="namedview6" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1" showgrid="false" inkscape:zoom="29.309576" inkscape:cx="11.480889" inkscape:cy="11.259119" inkscape:window-width="1920" inkscape:window-height="1009" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="svg4"/><path fill="#595959" d="m 716.58666,0 10e-6,614.40001 H 665.38666 V 0 Z M 358.4,0 l 1e-5,614.40001 H 307.2 V 0 Z m 614.4,307.2 v 51.2 H 51.19999 V 307.2 Z M 1024,1024 c -341.33333,0 -682.66667,0 -1024,0 V 0 c 350.18205,-0.10152 720.75753,0.10804 1024,0 -0.021,376.28769 0,678.59035 0,1024 z M 972.8,51.2 c -307.2,2e-5 -614.4,-1e-5 -921.6,0 10e-6,335.77092 -5e-5,618.6461 0,921.6 335.85263,0 618.54493,4e-5 921.6,1e-5 C 972.80001,665.6 972.8,358.4 972.8,51.2 Z M 1024,614.40001 H 0 V 1024 c 341.33329,0.1246 682.66675,-0.1562 1024,0 -0.025,-136.53334 0,-273.06661 0,-409.59999 z M 486.18667,921.81333 v -76.79999 h -76.8 v -51.41333 l 76.8,10e-6 V 716.8 H 537.6 v 76.80002 l 76.8,-10e-6 v 51.41333 h -76.8 l 10e-6,76.79999 z" id="path2" style="stroke-width:1.16666" sodipodi:nodetypes="ccccccccccccccccccccccccccccccccccccccccccc"/></svg> ',handler:function(){var e=t().find(this.table).insertRow(this.boundary,!0,this.quill.root.parentNode);this.quill.update(t().sources.USER),this.quill.setSelection(this.quill.getIndex(e[0]),0,t().sources.SILENT),this.tableSelection.setSelection(e[0].domNode.getBoundingClientRect(),e[0].domNode.getBoundingClientRect())}},mergeCells:{text:"Объединить выделенные ячейки",iconSrc:'<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg class="icon" width="20px" height="20.00px" viewBox="0 0 1024 1024" version="1.1" id="svg4" sodipodi:docname="icon_operation_5.svg" inkscape:version="1.2 (dc2aedaf03, 2022-05-15)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs8"/> <sodipodi:namedview id="namedview6" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1" showgrid="false" inkscape:zoom="32" inkscape:cx="11.453125" inkscape:cy="11.125" inkscape:window-width="1920" inkscape:window-height="1009" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="svg4"/> <path fill="#595959" d="M 1024,0 H 0 V 1024 H 1024 Z M 665.55623,51.185415 V 332.77815 H 358.2979 V 51.185415 Z M 51.2,51.2 c 85.30417,-0.01984 170.60833,-0.01459 255.9125,-0.01459 V 332.77815 H 51.185415 C 51.181156,247.47399 51.18483,136.50416 51.2,51.2 Z m 0,921.6 C 51.177772,870.38541 51.185415,793.63648 51.185415,691.22189 H 307.1125 V 972.81455 C 221.80833,972.8188 136.50417,972.81513 51.2,972.8 Z m 307.0979,0.0146 V 691.22189 H 665.4104 V 972.81455 Z M 972.8,972.8 c -85.35269,-0.1784 -170.70552,-0.13129 -256.05836,-0.13129 V 691.22189 H 972.66872 C 972.64332,793.63657 972.63635,870.38546 972.8,972.8 Z M 716.74164,332.77815 V 51.185415 C 802.09443,51.181147 887.44721,51.184848 972.8,51.2 c -0.1785,85.30407 -0.13128,196.27393 -0.13128,281.57815 z" id="path2" style="stroke-width:1.12788" sodipodi:nodetypes="ccccccccccccccccccccccccccccccccccc"/> </svg> ',handler:function(){var e=this,n=t().find(this.table),o=n.rows().reduce((function(t,n){var o=c(n.domNode.getBoundingClientRect(),e.quill.root.parentNode);return o.y>e.boundary.y-5&&o.y+o.height<e.boundary.y+e.boundary.height+5&&(t+=1),t}),0),i=this.columnToolCells.reduce((function(t,n){var o=c(n.getBoundingClientRect(),e.quill.root.parentNode);return o.x>e.boundary.x-5&&o.x+o.width<e.boundary.x+e.boundary.width+5&&(t+=1),t}),0),r=n.mergeCells(this.boundary,this.selectedTds,o,i,this.quill.root.parentNode);this.quill.update(t().sources.USER),this.tableSelection.setSelection(r.domNode.getBoundingClientRect(),r.domNode.getBoundingClientRect())}},unmergeCells:{text:"Разделить ячейки",iconSrc:'<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg class="icon" width="20px" height="20.00px" viewBox="0 0 1024 1024" version="1.1" id="svg4" sodipodi:docname="icon_operation_6.svg" xml:space="preserve" inkscape:version="1.2 (dc2aedaf03, 2022-05-15)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs8"/><sodipodi:namedview id="namedview6" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1" showgrid="false" inkscape:zoom="32" inkscape:cx="13.140625" inkscape:cy="7.9375" inkscape:window-width="1920" inkscape:window-height="1009" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="svg4"/><path id="path2" style="fill:#595959;fill-opacity:1;stroke-width:1.12788" d="M 0,0 V 1024 H 1024 V 0 Z m 51.2,51.2 c 85.30408,-0.0198 170.59592,0 255.9,0 V 332.75 H 51.2 C 51.196,247.44593 51.18482,136.50407 51.2,51.2 Z m 307.1,0 H 665.6 V 332.75 H 358.3 Z m 358.4,0 c 85.3527,-0.004 170.7473,-0.01516 256.1,0 -0.1785,85.30398 -0.1,196.24587 -0.1,281.55 h -256 z M 358.3,383.95 h 307.1 v 256.1 H 358.3 Z M 51.2,691.25 H 307.1 V 972.8 c -85.30408,0.004 -170.59592,0.0152 -255.9,0 -0.0222,-102.41449 0,-179.13551 0,-281.55 z m 307.1,0 H 665.4 V 972.8 H 358.3 Z m 358.4,0 h 256 c -0.0254,102.41458 -0.0637,179.13556 0.1,281.55 -85.3526,-0.1784 -170.74725,-0.1 -256.1,-0.1 z" sodipodi:nodetypes="cccccccccccccccccccccccccccccccccccccccc"/></svg> ',handler:function(){t().find(this.table).unmergeCells(this.selectedTds,this.quill.root.parentNode),this.quill.update(t().sources.USER),this.tableSelection.clearSelection()}},deleteColumn:{text:"Удалить выбранные столбцы",iconSrc:'<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg class="icon" width="20px" height="20.00px" viewBox="0 0 1024 1024" version="1.1" id="svg4" sodipodi:docname="icon_operation_7.svg" xml:space="preserve" inkscape:version="1.2 (dc2aedaf03, 2022-05-15)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs8"/><sodipodi:namedview id="namedview6" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1" showgrid="false" inkscape:zoom="32" inkscape:cx="8.578125" inkscape:cy="9.40625" inkscape:window-width="1920" inkscape:window-height="1009" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="svg4"/><path id="path2" style="fill:#595959;fill-opacity:1;stroke-width:1.12788" d="M 0,1024 H 1024 V 0 H 0 Z m 51.2,-51.2 c -0.0198,-85.30408 0,-170.59592 0,-255.9 h 281.54998 v 255.9 c -85.30407,0.004 -196.24591,0.0152 -281.54998,0 z m 0,-307.1 V 358.4 l 281.54998,0 v 307.3 z m 0,-358.4 c -0.004,-85.3527 -0.01517,-170.7473 0,-256.1 85.30398,0.1785 196.24585,0.1 281.54998,0.1 v 256 z m 370.14998,259 54.3,-54.3 -54.3,-54.3 36.3,-36.4 54.3,54.4 54.3,-54.4 36.4,36.4 -54.3,54.3 54.3,54.3 -36.4,36.4 -54.3,-54.4 -54.3,54.4 z m 269.9,406.5 V 716.9 H 972.8 c 0.004,85.30408 0.0151,170.59592 0,255.9 -102.41449,0.0222 -179.13553,0 -281.55002,0 z m 0,-307.1 V 358.6 l 281.55002,0 v 307.1 z m 0,-358.4 v -256 c 102.41458,0.0254 179.13558,0.06365 281.55002,-0.1 -0.1784,85.3526 -0.1,170.74725 -0.1,256.1 z" sodipodi:nodetypes="cccccccccccccccccccccccccccccccccccccccccccccccc"/></svg> ',handler:function(){var e,n,o,i,r=t().find(this.table),a=(e=this.columnToolCells,n=this.boundary,o=function(e,t){return e.x+5>t.x&&e.x+e.width-5<t.x1},i=this.quill.root.parentNode,e.reduce((function(t,r){var a=c(r.getBoundingClientRect(),i);return o(a,n)&&t.push(e.indexOf(r)),t}),[]));r.deleteColumns(this.boundary,a,this.quill.root.parentNode)||(this.tableColumnTool.updateToolCells(),this.quill.update(t().sources.USER),this.tableSelection.clearSelection())}},deleteRow:{text:"Удалить выбранные строки",iconSrc:'<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg class="icon" width="20px" height="20.00px" viewBox="0 0 1024 1024" version="1.1" id="svg4" sodipodi:docname="icon_operation_8.svg" xml:space="preserve" inkscape:version="1.2 (dc2aedaf03, 2022-05-15)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs8"/><sodipodi:namedview id="namedview6" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1" showgrid="false" inkscape:zoom="20.725" inkscape:cx="13.437877" inkscape:cy="10.422195" inkscape:window-width="1920" inkscape:window-height="1009" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="svg4"/><path id="path2-5" style="fill:#595959;fill-opacity:1;stroke-width:1.12788" d="M 0,0 V 1024 H 1024 V 0 Z m 51.2,51.2 c 85.30408,-0.0198 170.59592,0 255.9,0 V 332.74998 H 51.2 C 51.196,247.44591 51.1848,136.50407 51.2,51.2 Z m 307.1,0 H 665.6 V 332.74998 H 358.3 Z m 358.4,0 c 85.3527,-0.004 170.7473,-0.0152 256.1,0 -0.1785,85.30398 -0.1,196.24585 -0.1,281.54998 h -256 z m -259,370.14998 54.3,54.3 54.3,-54.3 36.4,36.3 -54.4,54.3 54.4,54.3 -36.4,36.4 -54.3,-54.3 -54.3,54.3 -36.4,-36.4 54.4,-54.3 -54.4,-54.3 z m -406.5,269.9 H 307.1 V 972.8 c -85.30408,0.004 -170.59592,0.0151 -255.9,0 -0.0222,-102.41449 0,-179.13553 0,-281.55002 z m 307.1,0 H 665.4 V 972.8 H 358.3 Z m 358.4,0 h 256 c -0.0254,102.41458 -0.0636,179.13558 0.1,281.55002 -85.3526,-0.1784 -170.74725,-0.1 -256.1,-0.1 z" sodipodi:nodetypes="cccccccccccccccccccccccccccccccccccccccccccccccc"/></svg> ',handler:function(){t().find(this.table).deleteRow(this.boundary,this.quill.root.parentNode),this.quill.update(t().sources.USER),this.tableSelection.clearSelection()}},deleteTable:{text:"Удалить таблицу",iconSrc:'<?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg class="icon" width="20px" height="20.00px" viewBox="0 0 1024 1024" version="1.1" id="svg4" sodipodi:docname="icon_operation_9.svg" inkscape:version="1.2 (dc2aedaf03, 2022-05-15)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs8"/> <sodipodi:namedview id="namedview6" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1" showgrid="false" inkscape:zoom="29.309576" inkscape:cx="10.969111" inkscape:cy="12.316794" inkscape:window-width="1920" inkscape:window-height="1009" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="svg4"/> <path fill="#595959" d="m 799.19966,882.98438 c 0,35.25491 -28.00085,63.94943 -62.39931,63.94943 h -449.6007 c -34.39975,0 -62.3993,-28.69585 -62.3993,-63.94943 V 204.14383 H 799.19966 Z M 349.60025,89.364416 c 0,-7.378932 5.60017,-13.118102 12.80039,-13.118102 h 299.99875 c 7.20022,0 12.80039,5.73917 12.80039,13.118102 V 127.89751 H 349.60025 Z m 636.7999,38.533094 H 749.59944 V 89.364416 C 749.59944,40.171534 710.40085,0 662.39939,0 H 362.40064 C 314.39918,0 275.20058,40.171534 275.20058,89.364416 V 127.89751 H 37.601141 C 16.80051,127.89751 0,145.11502 0,166.43061 0,187.7462 16.80051,204.96372 37.599846,204.96372 H 149.60065 v 678.02066 c 0,77.88741 61.59928,141.01562 137.599,141.01562 h 449.6007 c 75.99972,0 137.599,-63.12821 137.599,-141.01562 V 204.14383 h 112.0008 c 20.79935,0 37.59985,-17.21619 37.59985,-38.5331 0,-21.31691 -16.8005,-37.71322 -37.59985,-37.71322 z m -474.40014,703.437 c 20.80062,0 37.59984,-17.21752 37.59984,-38.53442 V 382.87267 c 0,-21.31692 -16.79922,-38.5331 -37.59984,-38.5331 -20.80064,0 -37.59985,17.21618 -37.59985,38.5331 v 409.92742 c 0,21.3169 16.79921,38.53442 37.59985,38.53442 m -175.20015,0 c 20.80064,0 37.59985,-17.21752 37.59985,-38.53442 V 382.87267 c 0,-21.31692 -16.79921,-38.5331 -37.59985,-38.5331 -20.80063,0 -37.59985,17.21618 -37.59985,38.5331 v 409.92742 c 0.80003,21.3169 17.60054,38.53442 37.59985,38.53442 m 350.40028,0 c 20.79934,0 37.59985,-17.21752 37.59985,-38.53442 V 382.87267 c 0,-21.31692 -16.80051,-38.5331 -37.59985,-38.5331 -20.79934,0 -37.59985,17.21618 -37.59985,38.5331 v 409.92742 c 0,21.3169 16.79922,38.53442 37.59985,38.53442" id="path2" style="stroke-width:1.15182"/> </svg> ',handler:function(){var e=this.quill.getModule("table"),n=t().find(this.table);e.hideTableTools(),n.parent.remove(),this.quill.update(t().sources.USER)}}},ke=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n.getModule("table");this.tableSelection=i.tableSelection,this.table=t.table,this.quill=n,this.options=o,this.menuItems=Object.assign({},we,!0),this.tableColumnTool=i.columnTool,this.boundary=this.tableSelection.boundary,this.selectedTds=this.tableSelection.selectedTds,this.destroyHandler=this.destroy.bind(this),this.columnToolCells=this.tableColumnTool.colToolCells(),this.initMenu(t),this.mount(),document.addEventListener("click",this.destroyHandler,!1)}var t,n;return t=e,(n=[{key:"mount",value:function(){document.body.appendChild(this.domNode)}},{key:"destroy",value:function(){return this.domNode.remove(),document.removeEventListener("click",this.destroyHandler,!1),null}},{key:"initMenu",value:function(e){e.table;var t=e.left,n=e.top;for(var o in this.domNode=document.createElement("div"),this.domNode.classList.add("quill-table-menu"),r(this.domNode,{position:"absolute",left:"".concat(t,"px"),top:"".concat(n,"px")}),this.menuItems)this.menuItems[o]&&this.domNode.appendChild(this.createMenuItem(Object.assign({},we[o],this.menuItems[o])))}},{key:"createMenuItem",value:function(e){var t=e.text,n=e.iconSrc,o=e.handler,i=document.createElement("div");i.classList.add("quill-table-menu-item");var r=document.createElement("span");return r.classList.add("quill-table-menu-icon"),r.innerHTML=n,r.title=t,i.appendChild(r),i.addEventListener("click",o.bind(this),!1),i}}])&&ge(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xe(e,t,n,o){return e.reduce((function(i,r){var a=c(r.getBoundingClientRect(),o);return n(a,t)&&(i=e.indexOf(r)),i}),!1)}var Ne=t().import("delta");function Ce(e,t){var n=e.parentNode,o="TABLE"===n.parentNode.tagName?n.parentNode:n.parentNode.parentNode,i=Array.from(o.querySelectorAll("tr")),r=Array.from(n.querySelectorAll("td")),c=i.indexOf(n)+1,l=r.indexOf(e)+1,s=e.getAttribute("colspan")||!1,u=e.getAttribute("rowspan")||!1,d=e.getAttribute("data-cell-bg")||e.style.backgroundColor||e.getAttribute("bgcolor");return 0===t.length()?t=(new Ne).insert("\n",{"table-cell-line":{row:c,cell:l,rowspan:u,colspan:s}}):(t=t.reduce((function(t,n){if(n.insert&&"string"==typeof n.insert){for(var o=[],i=n.insert,r=0,c=0;c<n.insert.length;c++)"\n"===i.charAt(c)&&(0===c||o.push(i.substring(r,c)),o.push("\n"),r=c+1);var l=i.substring(r);l&&o.push(l),"\n"===i.charAt(n.insert.length-1)||e.dataset.row||o.push("\n"),o.forEach((function(e){"\n"===e?t.insert("\n",n.attributes):t.insert(e,a(n.attributes,["table","table-cell-line"]))}))}else t.insert(n.insert,n.attributes);return t}),new Ne)).reduce((function(e,t){return t.insert&&"string"==typeof t.insert&&t.insert.startsWith("\n")?e.insert(t.insert,Object.assign({},Object.assign({},{row:c},t.attributes.table),{"table-cell-line":{row:c,cell:l,rowspan:u,colspan:s,"cell-bg":d}},a(t.attributes,["table"]))):t.attributes&&t.attributes.background&&t.attributes.background===d?e.insert(t.insert,Object.assign({},a(t.attributes,["table","table-cell-line","background"]))):e.insert(t.insert,Object.assign({},a(t.attributes,["table","table-cell-line"]))),e}),new Ne)}function Se(e,t){var n=e.parentNode,o="TABLE"===n.parentNode.tagName?n.parentNode:n.parentNode.parentNode,i=Array.from(o.querySelectorAll("tr")),r=Array.from(n.querySelectorAll("th")),c=i.indexOf(n)+1,l=r.indexOf(e)+1,s=e.getAttribute("colspan")||!1,u=e.getAttribute("rowspan")||!1;return 0===t.length()?t=(new Ne).insert("\n",{"table-cell-line":{row:c,cell:l,rowspan:u,colspan:s}}):(t=t.reduce((function(e,t){if(t.insert&&"string"==typeof t.insert){for(var n=[],o=t.insert,i=0,r=0;r<t.insert.length;r++)"\n"===o.charAt(r)&&(0===r||n.push(o.substring(i,r)),n.push("\n"),i=r+1);var a=o.substring(i);a&&n.push(a),n.indexOf("\n")<0&&n.push("\n"),n.forEach((function(n){"\n"===n?e.insert("\n",{"table-cell-line":{row:c,cell:l,rowspan:u,colspan:s}}):e.insert(n,t.attributes)}))}else e.insert(t.insert,t.attributes);return e}),new Ne)).reduce((function(e,t){return t.insert&&"string"==typeof t.insert&&t.insert.startsWith("\n")?e.insert(t.insert,Object.assign({},{"table-cell-line":{row:c,cell:l,rowspan:u,colspan:s}})):e.insert(t.insert,Object.assign({},a(t.attributes,["table","table-cell-line"]))),e}),new Ne)}function qe(e,t){var n=(new Ne).insert("\n"),o=e.querySelector("tr");if(null===o)return n;var i=Array.from(o.querySelectorAll("td")).concat(Array.from(o.querySelectorAll("th"))).reduce((function(e,t){var n=t.getAttribute("colspan")||1;return e+parseInt(n,10)}),0),r=e.classList.contains("quill-table")?0:e.querySelectorAll("col").length;if(r===i)return t;for(var c=0;c<i-r;c++)n.insert("\n",{"table-col":!0});if(0===r)return n.concat(t);var a=0;return t.reduce((function(e,t){return e.insert(t.insert,t.attributes),t.attributes&&t.attributes["table-col"]&&(a+=t.insert.length)===r&&(e=e.concat(n)),e}),new Ne)}function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,c,a=[],l=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(a.push(o.value),a.length!==t);l=!0);}catch(e){s=!0,i=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Ae(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Te(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t);if("object"!==Te(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key,"string"),"symbol"===Te(i)?i:String(i)),o)}var i}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},je(e,t)}function Re(e,t){if(t&&("object"===Te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}var Be=t().import("core/module"),ze=t().import("parchment"),He=t().import("delta"),Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(s,e);var n,o,i,r,c,a=(r=s,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Me(r);if(c){var n=Me(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Re(this,e)});function s(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=a.call(this,e,t)).quill.getModule("toolbar").addHandler("table",(function(){n.insertTable(2,2,!0)})),n.quill.root.addEventListener("click",(function(o){var i=l(o);if(i&&!(i.length<=0)){var r=i.filter((function(e){return e.tagName&&"TABLE"===e.tagName.toUpperCase()&&e.classList.contains("quill-table")}))[0];if(r){if(n.table===r)return;n.table&&n.hideTableTools(),n.showTableTools(r,e,t)}else n.table&&n.hideTableTools()}}),!1),n.quill.root.addEventListener("contextmenu",(function(o){if(!n.table)return!0;o.preventDefault();var i=l(o);if(i&&!(i.length<=0)){var r=i.filter((function(e){return e.tagName&&"TABLE"===e.tagName.toUpperCase()&&e.classList.contains("quill-table")}))[0],c=i.filter((function(e){return e.tagName&&"TR"===e.tagName.toUpperCase()&&e.getAttribute("data-row")}))[0],a=i.filter((function(e){return e.tagName&&"TD"===e.tagName.toUpperCase()&&e.getAttribute("data-row")}))[0],s=n.tableSelection.selectedTds.map((function(e){return e.domNode})).includes(a);(n.tableSelection.selectedTds.length<=0||!s)&&n.tableSelection.setSelection(a.getBoundingClientRect(),a.getBoundingClientRect()),n.tableOperationMenu&&(n.tableOperationMenu=n.tableOperationMenu.destroy()),r&&(n.tableOperationMenu=new ke({table:r,row:c,cell:a,left:o.pageX,top:o.pageY},e,t.operationMenu))}}),!1),e.keyboard.addBinding({key:"Backspace"},{},(function(e,t){if(0===e.index||this.quill.getLength()<=1)return!0;var n=Oe(this.quill.getLine(e.index),1)[0];if(0===t.offset){var o=Oe(this.quill.getLine(e.index-1),1)[0];if(null!=o&&"table-cell-line"===o.statics.blotName&&"table-cell-line"!==n.statics.blotName)return!1}return!0}));var o=e.keyboard.bindings[8].pop();return e.keyboard.bindings[8].splice(0,1,o),e.clipboard.addMatcher("td",Ce),e.clipboard.addMatcher("th",Se),e.clipboard.addMatcher("table",qe),n}return n=s,o=[{key:"insertTable",value:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.quill.getSelection(!0);if(null!=i){var r=this.quill.getLeaf(i.index)[0],c=(new He).retain(i.index);Le(r)?console.warn("Can not insert table into a table cell."):(c.insert("\n"),c=new Array(n).fill("\n").reduce((function(e,t){return e.insert(t,{"table-col":!0}),e}),c),c=new Array(e).fill(0).reduce((function(t){var i=de();return new Array(n).fill("\n").reduce((function(t,n,r){return t.insert(n,{"table-cell-line":{row:i,cell:pe(),"cell-bg":o&&"#F5F5F5"}}),r+1===e&&o&&(o=!1),t}),t)}),c),console.log(c),this.quill.updateContents(c,t().sources.USER),this.quill.setSelection(i.index+n+1,t().sources.API))}}},{key:"showTableTools",value:function(e,t,n){this.table=e,this.columnTool=new d(e,t,n),this.tableSelection=new be(e,t,n)}},{key:"hideTableTools",value:function(){this.columnTool&&this.columnTool.destroy(),this.tableSelection&&this.tableSelection.destroy(),this.tableOperationMenu&&this.tableOperationMenu.destroy(),this.columnTool=null,this.tableSelection=null,this.tableOperationMenu=null,this.table=null}}],i=[{key:"register",value:function(){t().register(ae,!0),t().register(le,!0),t().register(oe,!0),t().register(ie,!0),t().register(re,!0),t().register(ce,!0),t().register(se,!0),t().register(ue,!0),t().register("formats/header",k)}}],o&&Ae(n.prototype,o),i&&Ae(n,i),Object.defineProperty(n,"prototype",{writable:!1}),s}(Be);function Le(e){if(e&&e.parent)return e.parent.statics.blotName===ie.blotName||Le(e.parent)}Pe.keyboardBindings={"table-cell-line backspace":{key:"Backspace",format:["table-cell-line"],collapsed:!0,offset:0,handler:function(e){var t=Oe(this.quill.getLine(e.index),1)[0];return!(!t.prev||"table-cell-line"!==t.prev.statics.blotName)}},"table-cell-line delete":{key:"Delete",format:["table-cell-line"],collapsed:!0,suffix:/^$/,handler:function(){}},"table-cell-line enter":{key:"Enter",shiftKey:null,format:["table-cell-line"],handler:function(e,n){var o=this;if(!this.quill.selection||!this.quill.selection.composing){var i=t().imports.parchment.Scope;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var r=Object.keys(n.format).reduce((function(e,t){return ze.query(t,i.BLOCK)&&!Array.isArray(n.format[t])&&(e[t]=n.format[t]),e}),{});this.quill.insertText(e.index,"\n",r["table-cell-line"],t().sources.USER),this.quill.setSelection(e.index+1,t().sources.SILENT),this.quill.focus(),Object.keys(n.format).forEach((function(e){null==r[e]&&(Array.isArray(n.format[e])||"link"!==e&&o.quill.format(e,n.format[e],t().sources.USER))}))}}}};const Ve={Table:Pe}})(),i.default})()));