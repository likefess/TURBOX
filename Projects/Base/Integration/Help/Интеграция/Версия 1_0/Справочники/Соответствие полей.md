#Соответствие полей


----------


**Назначение:** Соответствие полей - совокупность настроек сопоставления полей приемника и источника данных. Именно файл соответствия полей хранит информацию о правилах передачи значений из одного поля в другое.

С помощью соответствия полей можно отобрать для передачи все или только часть полей, установить правила обмена для каждого поля.


**Путь:**  Интеграция - Данные и справочники - Основные справочники - Соответствие полей


**Порядок работы с формой:**

1.Для добавления новой записи в картотеку нажмите кнопку **Добавить** ![](topic:Integration.AddFiles.Buttons.Btn_Add.png) и заполните открывшуюся форму следующим способом:


<img src="topic:AddFiles.ScreenShots.Screenshot_10892.jpg">

- Поле Наименование - обязательное произвольное текстовое поле, заполняется вручную наименование соответствия. Используется для отображения в картотеке;
- Поле Направление обмена - заполняется из выпадающего списка: Загрузка \ Выгрузка (если один из объектов является внешним)\ Внутренний (если оба находятся в одной информационной базе - в одном или разных проектах);

Если выбрано направление **Загрузка** или **Выгрузка**:

- Проект - из выпадающего списка выбрать внутренний проект, подключенный к информационной базе 
- Тип объекта - из выпадающего списка: Форма, Запись, Картотека. Для того, чтобы загружать/выгрузить справочники в Соответствии полей должен быть тип объекта Запись.
- Объект - справочники и документы выбранного выше проекта, соответствующие типу объекта 
- Флаг *Включить поля записи Rec* - доступен только для типа объекта Форма, в установленном состоянии в таблицу заполняются те поля, которые не вынесены,но в записи присутствуют 
- Внешний объект - файл, участвующий в обмене - заполнение не обязательно. При выборе заполняется список полей из внешнего источника (кнопка Выбор![](topic:Integration.AddFiles.Buttons.Btn_select.png)).

Направления Загрузка и Выгрузка в настройке сопоставления полей равнозначны - это значит, что настройка на выгрузку может быть использована и на загрузку данных, нет необходимости создавать два отдельных объекта настройки. Направление обмена является общей характеристикой настройки обмена.

Если выбран **Внутренний обмен**:

- Проект источник и Источник - имя проекта информационной базы и его справочник/документ, который будет источником данных 
- Проект приемник и Приемник - имя проекта информационной базы и его справочник/документ, который будет приёмником данных 

Кнопка **Список полей - Заполнить**  автоматически заполняет таблицу полями и их свойствами из внутреннего объекта (указанного выше в полях Проект и Объекта), а для внутреннего обмена - из источника или приемника по выбору пользователя.

Таблица с перечнем полей объектов:

- Ключ. - флаг, показывающий, используется ли поле в качестве ключевого. Если не указать ни одного ключевого поля, им считается совокупность всех полей с типом внутренних данных Шапка 
- Внутреннее - имя поля внутреннего объекта. Состоит из трех частей: Заголовок, [системное имя], (название таблицы) 
- Тип - тип внутреннего поля, заполнен автоматически, не рекомендуется изменять его вручную 
- Тип внутренних данных - заполнен автоматически согласно настройкам внутреннего объекта, недоступно для редактирования 
- Способ сопоставления - подход, применяемый для установления соответствия между полями внутреннего и внешнего объектов. Варианты: 
    - Точное соответствие - для случаев, когда передача из одного поля в другое происходит без смены типа (например, из string в string) 
    - Поиск по значению - для случаев, когда требуется изменить тип и выбрать часть данных из объектного типа (например, когда поле источника является ссылкой на объект, группу объектов, таблицу и т.д., в приемника - значение одного из компонентов объекта) 
    - С разыменованием - только для внутреннего обмена, соответствует варианту Поиск по значению 
- Правило - системное имя внутреннего поля для способа сопоставления 
- Внешнее - имя поля внешнего объекта, выбор из выпадающего списка, возможен ручной ввод 
- Узел XML - столбец отображается только если указан внешний объект, чьи поля получены из XML (подробнее см. ниже)  

2.Настройка сопоставления полей с документами формата XML

Использование документа формата XML несколько отличается от других форматов. При обмене с таким документом необходимо использовать узлы content и line, где атрибутами узла content будут являться поля шапки документа, а каждый узел line - одну строку таблицы.

Это значит, что при настройке соответствия полей:

- В поле Внешний объект должен быть выбран объект с полями, полученными из XML 
- В столбце Узел XML для полей с типом внутренних данных Шапки требуется выбрать content, для Таблица - line 


<img src="topic:AddFiles.ScreenShots.Screenshot_10922.jpg">


3.Для ввода в действие введенной информации нажмите на кнопку **Применить** ![](topic:Integration.AddFiles.Buttons.Btn_OK.png) - **Записать** .

Для сохранения документа и его закрытия нажмите кнопку **ОК** ![](topic:Integration.AddFiles.Buttons.Btn_Post.png) , иначе  -  **Отмена**![](topic:Integration.AddFiles.Buttons.BtnCloseCancel.png).

Для получения помощи воспользуйтесь кнопкой  **F1**.