
 ---
Keywords: Postgresql
---
#Инструкция по развёртыванию хранилища ETL на базе PostgreSQL

Развертывание Хранилища ETL состоит из следующих шагов:

* [Настройка БД хранилища][Настройка БД хранилища]
    * [Создание пользователя и определение роли][Создание пользователя и определение роли]
    * [Создание БД хранилища][Создание БД хранилища]

* [Настройка подключения к хранилищу в Турбо][Настройка подключения к хранилищу в Турбо]
    * [Установка драйвера ODBC][Установка драйвера ODBC]
    * [Настройка точки подключения][Настройка точки подключения]

Наиболее распространенные проблемы при настройке Хранилища ETL в СУБД семейства PostgreSQL
собраны в разделе [Типовые ошибки][Типовые ошибки].

## Настройка БД хранилища


### Создание пользователя и определение роли

В панели обозревателя pgAdmin4 необходимо выбрать сервер,
на котором будет размещаться хранилище ETL.

![](topic:.AddFiles.Screenshot_11667.jpg)

####Примечание
Для входа в pgAdmin4 требуется ввести пароль (master password), который задаётся при установке PostgreSQL
(по умолчанию для пользователя "postgres").

 ![](topic:.AddFiles.Screenshot_11677.jpg)


  Если пользователь БД не создан, то необходимо в контекстном меню, вызываемом по щелчку правой кнопки мыши, объекта "Роли входа/группы"
  выбрать пункт "Создать" - "Роль входа/группы...".

 ![](topic:.AddFiles.Screenshot_11666.jpg)

 В открывшемся окне "Создание имени для входа" необходимо:
 * на вкладке "Общие" ввести логин пользователя в поле "Имя для входа". В данном примере имя пользователя "Admin1";

  ![](topic:.AddFiles.Screenshot_11668.jpg)

 * на вкладке "Определение" ввести пароль в соответствующем поле;

  ![](topic:.AddFiles.Screenshot_11669.jpg)

 * на вкладке "Права" выбрать "Вход разрешён?" - "Да";

  ![](topic:.AddFiles.Screenshot_11670.jpg)

 * нажать кнопку "Сохранить".

### Создание БД хранилища
В контекстном меню, вызываемом по щелчку правой кнопки мыши, объекта "Базы данных" выбрать пункт "Создать" - "База данных..."

 ![](topic:.AddFiles.Screenshot_11671.jpg)

В открывшемся окне "Создание База данных" на вкладке "Общие" ввести название базы данных для хранилища ETL в поле "Имя базы данных:" и логин ранее созданного пользователя.
В данном случае выбрано название "ETL_Storage" и пользователь "Admin1".
Нажать кнопку "Сохранить".

![](topic:.AddFiles.Screenshot_11672.jpg)


## Настройка подключения к хранилищу в Турбо

### Установка драйвера ODBC

Драйвер необходим для осуществления доступа из Турбо к выбранной базе данных (БД).
Установка драйвера ODBC должна выполняться на сервере.
Если драйвер ODBC не установлен, его необходимо скачать по ссылке
[Драйвер ODBC](https://www.postgresql.org/ftp/odbc/) и запустить.

### Настройка точки подключения

Необходимо ввести значения в
[точку подключения к хранилищу ETL](topic:.ETL.Сервис.Настройки.Точка подключения к хранилищу ETL):
* в параметре ConnectionString указать строку параметров для подключения к PostgreSQL;
* в параметре "DataBaseType" указать "PostgreSQL".

Строка подключения может иметь разный вид, в зависимости от желаемых настроек БД, авторизации пользователя и прочих параметров.
В простейшем случае используется следующая строка:
*Driver=PostgreSQL Unicode; Server=MyServer; Port=5432; Database=ETL_Storage; User ID=Admin1; Password=passw1!*
где:
* **Driver** - определяет драйвер, который будет использован для подключения к БД.
* **Server**  - название экземпляра PostgreSQL Server, на котором установлено хранилище ETL;
* **Port**  - номер порта экземпляра PostgreSQL Server, по умолчанию 5432;
* **Database** - название БД, в данном примере "ETL_Storage";
* **User ID** - логин пользователя, в данном примере "Admin1";
* **Password** - пароль пользователя, в данном примере "passw1".

Для проверки подключения к хранилищу воспользуйтесь кнопкой ![](topic:Com.AddFiles.Buttons.Btn_setting.png).
В выпадающем меню необходимо выбрать "Проверка подключения сервера к хранилищу".
Должно появиться Информационное сообщение: "Подключение успешно", а также версии сервера БД и драйвера ODBC.

## Типовые ошибки
При проверке подключения к хранилищу, Турбо выдаст сообщение:
* в случае, если логин или пароль введены неверно

  ![](topic:.AddFiles.Screenshot_11675.jpg)

* если не установлен драйвер (или установка произошла некорректно)

  ![](topic:.AddFiles.Screenshot_11676.jpg)