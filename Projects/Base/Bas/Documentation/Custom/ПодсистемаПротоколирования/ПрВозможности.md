---
Title: Прочие возможности системы протоколирования
Keywords: Прочие возможности системы протоколирования, Протоколирование, Logging
---

[Подсистема протоколирования](topic:.Custom.ПодсистемаПротоколирования.Default)

# Прочие возможности системы протоколирования
---

## Длящиеся события

Факт начала событий, имеющих ненулевую длительность и в шаблонах которых
взведен флаг MeasureDuration отражается стандартным образом.
Для отражения факта окончания такого события необходимо вызвать метод протокола
[EndEvent](topic:.Custom.BasClasses.Logging.EventLog.EndEvent).

**Пример:**

```
var vLogEvent = fLog.Event (fLog.StartProcess,, [ClassName], [ClassName, fSettingsRec, CurrentUser]);
RunProcess;
fLog.EndEvent(vLogEvent);
```

## Иерархия событий

Протокол, вообще говоря, имеет иерархическую структуру:
у каждого события может быть задано родительское событие.
Для формирования иерархических логов достаточно при формировании
записи о событии в качестве второго события передать ссылку на родительское событие:

**Пример:**

```
var = MyLog.CreateNew ('Budget.' + vLogName + ' ' + Str(Now, 'YYYYMMDD HHMMSS.MS'));
 
var vRootEvent = fLog.Event (fLog.StartProcess,, [ClassName], [ClassName, fSettingsRec, CurrentUser]);
...
fLog.Event(fLog.SubEvent1, vRootEvent );
...
fLog.Event(fLog.SubEvent2, vRootEvent );
...
fLog.EndEvent(vRootEvent);
```

## Протоколирование многопоточных процессов

При протоколировании многопоточных процессов для облегчения разбора протоколов
рекомендуется придерживаться следующей общей схемы:

1. Использовать хранилище логов в информационной базе данных.
2. В основном процессе создавать протокол. В дочерние процессы передавать
   имя созданного протокола.
3. В дочерних процессах открывать созданный ранее протокол для дополнения.
4. После открытия протокола в дочернем процессе на дополнение рекомендуется
   создать корневое событие для всех событий регистрируемых
   в рамках данного дочернего процесса.
5. В качестве родительского события для событий, инициируемых в рамках
   дочернего процесса указывать созданное в предыдущем пункте событие.